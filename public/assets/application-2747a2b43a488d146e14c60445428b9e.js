/**
 * vis.js
 * https://github.com/almende/vis
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 3.10.0
 * @date    2015-02-11
 *
 * @license
 * Copyright (C) 2011-2014 Almende B.V, http://almende.com
 *
 * Vis.js is dual licensed under both
 *
 * * The Apache 2.0 License
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * and
 *
 * * The MIT License
 *   http://opensource.org/licenses/MIT
 *
 * Vis.js may be distributed under either license.
 */
"use strict";function formatBaseNodeUrl(scenarioId,nodeId){return"/scenarios/"+scenarioId+"/nodes/"+nodeId}function formatRailsError(error){var fieldName=Object.keys(error.data)[0];return capitalize(fieldName)+" "+error.data[fieldName][0]}function formatRegistrationError(error){var fieldName=Object.keys(error.data.errors)[0];return capitalize(fieldName)+" "+error.data.errors[fieldName][0]}function capitalize(field){return field.charAt(0).toUpperCase()+field.slice(1)}!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?exports.vis=factory():root.vis=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){exports.util=__webpack_require__(1),exports.DOMutil=__webpack_require__(2),exports.DataSet=__webpack_require__(3),exports.DataView=__webpack_require__(4),exports.Queue=__webpack_require__(5),exports.Graph3d=__webpack_require__(6),exports.graph3d={Camera:__webpack_require__(7),Filter:__webpack_require__(8),Point2d:__webpack_require__(9),Point3d:__webpack_require__(10),Slider:__webpack_require__(11),StepNumber:__webpack_require__(12)},exports.Timeline=__webpack_require__(13),exports.Graph2d=__webpack_require__(14),exports.timeline={DateUtil:__webpack_require__(15),DataStep:__webpack_require__(16),Range:__webpack_require__(17),stack:__webpack_require__(18),TimeStep:__webpack_require__(19),components:{items:{Item:__webpack_require__(20),BackgroundItem:__webpack_require__(21),BoxItem:__webpack_require__(22),PointItem:__webpack_require__(23),RangeItem:__webpack_require__(24)},Component:__webpack_require__(25),CurrentTime:__webpack_require__(26),CustomTime:__webpack_require__(27),DataAxis:__webpack_require__(28),GraphGroup:__webpack_require__(29),Group:__webpack_require__(30),BackgroundGroup:__webpack_require__(31),ItemSet:__webpack_require__(32),Legend:__webpack_require__(33),LineGraph:__webpack_require__(34),TimeAxis:__webpack_require__(35)}},exports.Network=__webpack_require__(36),exports.network={Edge:__webpack_require__(37),Groups:__webpack_require__(38),Images:__webpack_require__(39),Node:__webpack_require__(40),Popup:__webpack_require__(41),dotparser:__webpack_require__(42),gephiParser:__webpack_require__(43)},exports.Graph=function(){throw new Error("Graph is renamed to Network. Please create a graph as new vis.Network(...)")},exports.moment=__webpack_require__(44),exports.hammer=__webpack_require__(45)},function(module,exports,__webpack_require__){var moment=__webpack_require__(44);exports.isNumber=function(object){return object instanceof Number||"number"==typeof object},exports.giveRange=function(min,max,total,value){if(max==min)return.5;var scale=1/(max-min);return Math.max(0,(value-min)*scale)},exports.isString=function(object){return object instanceof String||"string"==typeof object},exports.isDate=function(object){if(object instanceof Date)return!0;if(exports.isString(object)){var match=ASPDateRegex.exec(object);if(match)return!0;if(!isNaN(Date.parse(object)))return!0}return!1},exports.isDataTable=function(object){return"undefined"!=typeof google&&google.visualization&&google.visualization.DataTable&&object instanceof google.visualization.DataTable},exports.randomUUID=function(){var S4=function(){return Math.floor(65536*Math.random()).toString(16)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},exports.extend=function(a){for(var i=1,len=arguments.length;len>i;i++){var other=arguments[i];for(var prop in other)other.hasOwnProperty(prop)&&(a[prop]=other[prop])}return a},exports.selectiveExtend=function(props,a){if(!Array.isArray(props))throw new Error("Array with property names expected as first argument");for(var i=2;i<arguments.length;i++)for(var other=arguments[i],p=0;p<props.length;p++){var prop=props[p];other.hasOwnProperty(prop)&&(a[prop]=other[prop])}return a},exports.selectiveDeepExtend=function(props,a,b){if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var i=2;i<arguments.length;i++)for(var other=arguments[i],p=0;p<props.length;p++){var prop=props[p];if(other.hasOwnProperty(prop))if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop].constructor===Object?exports.deepExtend(a[prop],b[prop]):a[prop]=b[prop];else{if(Array.isArray(b[prop]))throw new TypeError("Arrays are not supported by deepExtend");a[prop]=b[prop]}}return a},exports.selectiveNotDeepExtend=function(props,a,b){if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var prop in b)if(b.hasOwnProperty(prop)&&-1==props.indexOf(prop))if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop].constructor===Object?exports.deepExtend(a[prop],b[prop]):a[prop]=b[prop];else{if(Array.isArray(b[prop]))throw new TypeError("Arrays are not supported by deepExtend");a[prop]=b[prop]}return a},exports.deepExtend=function(a,b){if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var prop in b)if(b.hasOwnProperty(prop))if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop].constructor===Object?exports.deepExtend(a[prop],b[prop]):a[prop]=b[prop];else{if(Array.isArray(b[prop]))throw new TypeError("Arrays are not supported by deepExtend");a[prop]=b[prop]}return a},exports.equalArray=function(a,b){if(a.length!=b.length)return!1;for(var i=0,len=a.length;len>i;i++)if(a[i]!=b[i])return!1;return!0},exports.convert=function(object,type){var match;if(void 0===object)return void 0;if(null===object)return null;if(!type)return object;if("string"!=typeof type&&!(type instanceof String))throw new Error("Type must be a string");switch(type){case"boolean":case"Boolean":return Boolean(object);case"number":case"Number":return Number(object.valueOf());case"string":case"String":return String(object);case"Date":if(exports.isNumber(object))return new Date(object);if(object instanceof Date)return new Date(object.valueOf());if(moment.isMoment(object))return new Date(object.valueOf());if(exports.isString(object))return match=ASPDateRegex.exec(object),match?new Date(Number(match[1])):moment(object).toDate();throw new Error("Cannot convert object of type "+exports.getType(object)+" to type Date");case"Moment":if(exports.isNumber(object))return moment(object);if(object instanceof Date)return moment(object.valueOf());if(moment.isMoment(object))return moment(object);if(exports.isString(object))return match=ASPDateRegex.exec(object),moment(match?Number(match[1]):object);throw new Error("Cannot convert object of type "+exports.getType(object)+" to type Date");case"ISODate":if(exports.isNumber(object))return new Date(object);if(object instanceof Date)return object.toISOString();if(moment.isMoment(object))return object.toDate().toISOString();if(exports.isString(object))return match=ASPDateRegex.exec(object),match?new Date(Number(match[1])).toISOString():new Date(object).toISOString();throw new Error("Cannot convert object of type "+exports.getType(object)+" to type ISODate");case"ASPDate":if(exports.isNumber(object))return"/Date("+object+")/";if(object instanceof Date)return"/Date("+object.valueOf()+")/";if(exports.isString(object)){match=ASPDateRegex.exec(object);var value;return value=match?new Date(Number(match[1])).valueOf():new Date(object).valueOf(),"/Date("+value+")/"}throw new Error("Cannot convert object of type "+exports.getType(object)+" to type ASPDate");default:throw new Error('Unknown type "'+type+'"')}};var ASPDateRegex=/^\/?Date\((\-?\d+)/i;exports.getType=function(object){var type=typeof object;return"object"==type?null==object?"null":object instanceof Boolean?"Boolean":object instanceof Number?"Number":object instanceof String?"String":Array.isArray(object)?"Array":object instanceof Date?"Date":"Object":"number"==type?"Number":"boolean"==type?"Boolean":"string"==type?"String":type},exports.getAbsoluteLeft=function(elem){return elem.getBoundingClientRect().left+window.pageXOffset},exports.getAbsoluteTop=function(elem){return elem.getBoundingClientRect().top+window.pageYOffset},exports.addClassName=function(elem,className){var classes=elem.className.split(" ");-1==classes.indexOf(className)&&(classes.push(className),elem.className=classes.join(" "))},exports.removeClassName=function(elem,className){var classes=elem.className.split(" "),index=classes.indexOf(className);-1!=index&&(classes.splice(index,1),elem.className=classes.join(" "))},exports.forEach=function(object,callback){var i,len;if(Array.isArray(object))for(i=0,len=object.length;len>i;i++)callback(object[i],i,object);else for(i in object)object.hasOwnProperty(i)&&callback(object[i],i,object)},exports.toArray=function(object){var array=[];for(var prop in object)object.hasOwnProperty(prop)&&array.push(object[prop]);return array},exports.updateProperty=function(object,key,value){return object[key]!==value?(object[key]=value,!0):!1},exports.addEventListener=function(element,action,listener,useCapture){element.addEventListener?(void 0===useCapture&&(useCapture=!1),"mousewheel"===action&&navigator.userAgent.indexOf("Firefox")>=0&&(action="DOMMouseScroll"),element.addEventListener(action,listener,useCapture)):element.attachEvent("on"+action,listener)},exports.removeEventListener=function(element,action,listener,useCapture){element.removeEventListener?(void 0===useCapture&&(useCapture=!1),"mousewheel"===action&&navigator.userAgent.indexOf("Firefox")>=0&&(action="DOMMouseScroll"),element.removeEventListener(action,listener,useCapture)):element.detachEvent("on"+action,listener)},exports.preventDefault=function(event){event||(event=window.event),event.preventDefault?event.preventDefault():event.returnValue=!1},exports.getTarget=function(event){event||(event=window.event);var target;return event.target?target=event.target:event.srcElement&&(target=event.srcElement),void 0!=target.nodeType&&3==target.nodeType&&(target=target.parentNode),target},exports.option={},exports.option.asBoolean=function(value,defaultValue){return"function"==typeof value&&(value=value()),null!=value?0!=value:defaultValue||null},exports.option.asNumber=function(value,defaultValue){return"function"==typeof value&&(value=value()),null!=value?Number(value)||defaultValue||null:defaultValue||null},exports.option.asString=function(value,defaultValue){return"function"==typeof value&&(value=value()),null!=value?String(value):defaultValue||null},exports.option.asSize=function(value,defaultValue){return"function"==typeof value&&(value=value()),exports.isString(value)?value:exports.isNumber(value)?value+"px":defaultValue||null},exports.option.asElement=function(value,defaultValue){return"function"==typeof value&&(value=value()),value||defaultValue||null},exports.hexToRGB=function(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null},exports.overrideOpacity=function(color,opacity){if(-1!=color.indexOf("rgb")){var rgb=color.substr(color.indexOf("(")+1).replace(")","").split(",");return"rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+opacity+")"}var rgb=exports.hexToRGB(color);return null==rgb?color:"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+opacity+")"},exports.RGBToHex=function(red,green,blue){return"#"+((1<<24)+(red<<16)+(green<<8)+blue).toString(16).slice(1)},exports.parseColor=function(color){var c;if(exports.isString(color)){if(exports.isValidRGB(color)){var rgb=color.substr(4).substr(0,color.length-5).split(",");color=exports.RGBToHex(rgb[0],rgb[1],rgb[2])}if(exports.isValidHex(color)){var hsv=exports.hexToHSV(color),lighterColorHSV={h:hsv.h,s:.45*hsv.s,v:Math.min(1,1.05*hsv.v)},darkerColorHSV={h:hsv.h,s:Math.min(1,1.25*hsv.v),v:.6*hsv.v},darkerColorHex=exports.HSVToHex(darkerColorHSV.h,darkerColorHSV.h,darkerColorHSV.v),lighterColorHex=exports.HSVToHex(lighterColorHSV.h,lighterColorHSV.s,lighterColorHSV.v);c={background:color,border:darkerColorHex,highlight:{background:lighterColorHex,border:darkerColorHex},hover:{background:lighterColorHex,border:darkerColorHex}}}else c={background:color,border:color,highlight:{background:color,border:color},hover:{background:color,border:color}}}else c={},c.background=color.background||"white",c.border=color.border||c.background,exports.isString(color.highlight)?c.highlight={border:color.highlight,background:color.highlight}:(c.highlight={},c.highlight.background=color.highlight&&color.highlight.background||c.background,c.highlight.border=color.highlight&&color.highlight.border||c.border),exports.isString(color.hover)?c.hover={border:color.hover,background:color.hover}:(c.hover={},c.hover.background=color.hover&&color.hover.background||c.background,c.hover.border=color.hover&&color.hover.border||c.border);return c},exports.RGBToHSV=function(red,green,blue){red/=255,green/=255,blue/=255;var minRGB=Math.min(red,Math.min(green,blue)),maxRGB=Math.max(red,Math.max(green,blue));if(minRGB==maxRGB)return{h:0,s:0,v:minRGB};var d=red==minRGB?green-blue:blue==minRGB?red-green:blue-red,h=red==minRGB?3:blue==minRGB?1:5,hue=60*(h-d/(maxRGB-minRGB))/360,saturation=(maxRGB-minRGB)/maxRGB,value=maxRGB;return{h:hue,s:saturation,v:value}};var cssUtil={split:function(cssText){var styles={};return cssText.split(";").forEach(function(style){if(""!=style.trim()){var parts=style.split(":"),key=parts[0].trim(),value=parts[1].trim();styles[key]=value}}),styles},join:function(styles){return Object.keys(styles).map(function(key){return key+": "+styles[key]}).join("; ")}};exports.addCssText=function(element,cssText){var currentStyles=cssUtil.split(element.style.cssText),newStyles=cssUtil.split(cssText),styles=exports.extend(currentStyles,newStyles);element.style.cssText=cssUtil.join(styles)},exports.removeCssText=function(element,cssText){var styles=cssUtil.split(element.style.cssText),removeStyles=cssUtil.split(cssText);for(var key in removeStyles)removeStyles.hasOwnProperty(key)&&delete styles[key];element.style.cssText=cssUtil.join(styles)},exports.HSVToRGB=function(h,s,v){var r,g,b,i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return{r:Math.floor(255*r),g:Math.floor(255*g),b:Math.floor(255*b)}},exports.HSVToHex=function(h,s,v){var rgb=exports.HSVToRGB(h,s,v);return exports.RGBToHex(rgb.r,rgb.g,rgb.b)},exports.hexToHSV=function(hex){var rgb=exports.hexToRGB(hex);return exports.RGBToHSV(rgb.r,rgb.g,rgb.b)},exports.isValidHex=function(hex){var isOk=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hex);return isOk},exports.isValidRGB=function(rgb){rgb=rgb.replace(" ","");var isOk=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(rgb);return isOk},exports.selectiveBridgeObject=function(fields,referenceObject){if("object"==typeof referenceObject){for(var objectTo=Object.create(referenceObject),i=0;i<fields.length;i++)referenceObject.hasOwnProperty(fields[i])&&"object"==typeof referenceObject[fields[i]]&&(objectTo[fields[i]]=exports.bridgeObject(referenceObject[fields[i]]));return objectTo}return null},exports.bridgeObject=function(referenceObject){if("object"==typeof referenceObject){var objectTo=Object.create(referenceObject);for(var i in referenceObject)referenceObject.hasOwnProperty(i)&&"object"==typeof referenceObject[i]&&(objectTo[i]=exports.bridgeObject(referenceObject[i]));return objectTo}return null},exports.mergeOptions=function(mergeTarget,options,option){if(void 0!==options[option])if("boolean"==typeof options[option])mergeTarget[option].enabled=options[option];else{mergeTarget[option].enabled=!0;for(var prop in options[option])options[option].hasOwnProperty(prop)&&(mergeTarget[option][prop]=options[option][prop])}},exports.binarySearchCustom=function(orderedItems,searchFunction,field,field2){for(var maxIterations=1e4,iteration=0,low=0,high=orderedItems.length-1;high>=low&&maxIterations>iteration;){var middle=Math.floor((low+high)/2),item=orderedItems[middle],value=void 0===field2?item[field]:item[field][field2],searchResult=searchFunction(value);if(0==searchResult)return middle;-1==searchResult?low=middle+1:high=middle-1,iteration++}return-1},exports.binarySearchValue=function(orderedItems,target,field,sidePreference){for(var prevValue,value,nextValue,middle,maxIterations=1e4,iteration=0,low=0,high=orderedItems.length-1;high>=low&&maxIterations>iteration;){if(middle=Math.floor(.5*(high+low)),prevValue=orderedItems[Math.max(0,middle-1)][field],value=orderedItems[middle][field],nextValue=orderedItems[Math.min(orderedItems.length-1,middle+1)][field],value==target)return middle;if(target>prevValue&&value>target)return"before"==sidePreference?Math.max(0,middle-1):middle;if(target>value&&nextValue>target)return"before"==sidePreference?middle:Math.min(orderedItems.length-1,middle+1);target>value?low=middle+1:high=middle-1,iteration++}return-1},exports.easeInOutQuad=function(t,start,end,duration){var change=end-start;return t/=duration/2,1>t?change/2*t*t+start:(t--,-change/2*(t*(t-2)-1)+start)},exports.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},function(module,exports){exports.prepareElements=function(JSONcontainer){for(var elementType in JSONcontainer)JSONcontainer.hasOwnProperty(elementType)&&(JSONcontainer[elementType].redundant=JSONcontainer[elementType].used,JSONcontainer[elementType].used=[])},exports.cleanupElements=function(JSONcontainer){for(var elementType in JSONcontainer)if(JSONcontainer.hasOwnProperty(elementType)&&JSONcontainer[elementType].redundant){for(var i=0;i<JSONcontainer[elementType].redundant.length;i++)JSONcontainer[elementType].redundant[i].parentNode.removeChild(JSONcontainer[elementType].redundant[i]);JSONcontainer[elementType].redundant=[]}},exports.getSVGElement=function(elementType,JSONcontainer,svgContainer){var element;return JSONcontainer.hasOwnProperty(elementType)?JSONcontainer[elementType].redundant.length>0?(element=JSONcontainer[elementType].redundant[0],JSONcontainer[elementType].redundant.shift()):(element=document.createElementNS("http://www.w3.org/2000/svg",elementType),svgContainer.appendChild(element)):(element=document.createElementNS("http://www.w3.org/2000/svg",elementType),JSONcontainer[elementType]={used:[],redundant:[]},svgContainer.appendChild(element)),JSONcontainer[elementType].used.push(element),element},exports.getDOMElement=function(elementType,JSONcontainer,DOMContainer,insertBefore){var element;return JSONcontainer.hasOwnProperty(elementType)?JSONcontainer[elementType].redundant.length>0?(element=JSONcontainer[elementType].redundant[0],JSONcontainer[elementType].redundant.shift()):(element=document.createElement(elementType),void 0!==insertBefore?DOMContainer.insertBefore(element,insertBefore):DOMContainer.appendChild(element)):(element=document.createElement(elementType),JSONcontainer[elementType]={used:[],redundant:[]},void 0!==insertBefore?DOMContainer.insertBefore(element,insertBefore):DOMContainer.appendChild(element)),JSONcontainer[elementType].used.push(element),element},exports.drawPoint=function(x,y,group,JSONcontainer,svgContainer){var point;return"circle"==group.options.drawPoints.style?(point=exports.getSVGElement("circle",JSONcontainer,svgContainer),point.setAttributeNS(null,"cx",x),point.setAttributeNS(null,"cy",y),point.setAttributeNS(null,"r",.5*group.options.drawPoints.size)):(point=exports.getSVGElement("rect",JSONcontainer,svgContainer),point.setAttributeNS(null,"x",x-.5*group.options.drawPoints.size),point.setAttributeNS(null,"y",y-.5*group.options.drawPoints.size),point.setAttributeNS(null,"width",group.options.drawPoints.size),point.setAttributeNS(null,"height",group.options.drawPoints.size)),void 0!==group.options.drawPoints.styles&&point.setAttributeNS(null,"style",group.group.options.drawPoints.styles),point.setAttributeNS(null,"class",group.className+" point"),point},exports.drawBar=function(x,y,width,height,className,JSONcontainer,svgContainer){if(0!=height){0>height&&(height*=-1,y-=height);var rect=exports.getSVGElement("rect",JSONcontainer,svgContainer);rect.setAttributeNS(null,"x",x-.5*width),rect.setAttributeNS(null,"y",y),rect.setAttributeNS(null,"width",width),rect.setAttributeNS(null,"height",height),rect.setAttributeNS(null,"class",className)}}},function(module,exports,__webpack_require__){function DataSet(data,options){if(!data||Array.isArray(data)||util.isDataTable(data)||(options=data,data=null),this._options=options||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var field in this._options.type)if(this._options.type.hasOwnProperty(field)){var value=this._options.type[field];this._type[field]="Date"==value||"ISODate"==value||"ASPDate"==value?"Date":value}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},data&&this.add(data),this.setOptions(options)}var util=__webpack_require__(1),Queue=__webpack_require__(5);DataSet.prototype.setOptions=function(options){options&&void 0!==options.queue&&(options.queue===!1?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=Queue.extend(this,{replace:["add","update","remove"]})),"object"==typeof options.queue&&this._queue.setOptions(options.queue)))},DataSet.prototype.on=function(event,callback){var subscribers=this._subscribers[event];subscribers||(subscribers=[],this._subscribers[event]=subscribers),subscribers.push({callback:callback})},DataSet.prototype.subscribe=DataSet.prototype.on,DataSet.prototype.off=function(event,callback){var subscribers=this._subscribers[event];subscribers&&(this._subscribers[event]=subscribers.filter(function(listener){return listener.callback!=callback}))},DataSet.prototype.unsubscribe=DataSet.prototype.off,DataSet.prototype._trigger=function(event,params,senderId){if("*"==event)throw new Error("Cannot trigger event *");var subscribers=[];event in this._subscribers&&(subscribers=subscribers.concat(this._subscribers[event])),"*"in this._subscribers&&(subscribers=subscribers.concat(this._subscribers["*"]));for(var i=0;i<subscribers.length;i++){var subscriber=subscribers[i];subscriber.callback&&subscriber.callback(event,params,senderId||null)}},DataSet.prototype.add=function(data,senderId){var id,addedIds=[],me=this;if(Array.isArray(data))for(var i=0,len=data.length;len>i;i++)id=me._addItem(data[i]),addedIds.push(id);else if(util.isDataTable(data))for(var columns=this._getColumnNames(data),row=0,rows=data.getNumberOfRows();rows>row;row++){for(var item={},col=0,cols=columns.length;cols>col;col++){var field=columns[col];item[field]=data.getValue(row,col)}id=me._addItem(item),addedIds.push(id)}else{if(!(data instanceof Object))throw new Error("Unknown dataType");id=me._addItem(data),addedIds.push(id)}return addedIds.length&&this._trigger("add",{items:addedIds},senderId),addedIds},DataSet.prototype.update=function(data,senderId){var addedIds=[],updatedIds=[],updatedData=[],me=this,fieldId=me._fieldId,addOrUpdate=function(item){var id=item[fieldId];me._data[id]?(id=me._updateItem(item),updatedIds.push(id),updatedData.push(item)):(id=me._addItem(item),addedIds.push(id))};if(Array.isArray(data))for(var i=0,len=data.length;len>i;i++)addOrUpdate(data[i]);else if(util.isDataTable(data))for(var columns=this._getColumnNames(data),row=0,rows=data.getNumberOfRows();rows>row;row++){for(var item={},col=0,cols=columns.length;cols>col;col++){var field=columns[col];item[field]=data.getValue(row,col)}addOrUpdate(item)}else{if(!(data instanceof Object))throw new Error("Unknown dataType");addOrUpdate(data)}return addedIds.length&&this._trigger("add",{items:addedIds},senderId),updatedIds.length&&this._trigger("update",{items:updatedIds,data:updatedData},senderId),addedIds.concat(updatedIds)},DataSet.prototype.get=function(){var id,ids,options,data,me=this,firstType=util.getType(arguments[0]);"String"==firstType||"Number"==firstType?(id=arguments[0],options=arguments[1],data=arguments[2]):"Array"==firstType?(ids=arguments[0],options=arguments[1],data=arguments[2]):(options=arguments[0],data=arguments[1]);var returnType;if(options&&options.returnType){var allowedValues=["DataTable","Array","Object"];if(returnType=-1==allowedValues.indexOf(options.returnType)?"Array":options.returnType,data&&returnType!=util.getType(data))throw new Error('Type of parameter "data" ('+util.getType(data)+") does not correspond with specified options.type ("+options.type+")");if("DataTable"==returnType&&!util.isDataTable(data))throw new Error('Parameter "data" must be a DataTable when options.type is "DataTable"')}else returnType=data&&"DataTable"==util.getType(data)?"DataTable":"Array";var item,itemId,i,len,type=options&&options.type||this._options.type,filter=options&&options.filter,items=[];if(void 0!=id)item=me._getItem(id,type),filter&&!filter(item)&&(item=null);else if(void 0!=ids)for(i=0,len=ids.length;len>i;i++)item=me._getItem(ids[i],type),(!filter||filter(item))&&items.push(item);else for(itemId in this._data)this._data.hasOwnProperty(itemId)&&(item=me._getItem(itemId,type),(!filter||filter(item))&&items.push(item));if(options&&options.order&&void 0==id&&this._sort(items,options.order),options&&options.fields){var fields=options.fields;if(void 0!=id)item=this._filterFields(item,fields);else for(i=0,len=items.length;len>i;i++)items[i]=this._filterFields(items[i],fields)}if("DataTable"==returnType){var columns=this._getColumnNames(data);if(void 0!=id)me._appendRow(data,columns,item);else for(i=0;i<items.length;i++)me._appendRow(data,columns,items[i]);return data}if("Object"==returnType){var result={};for(i=0;i<items.length;i++)result[items[i].id]=items[i];return result}if(void 0!=id)return item;if(data){for(i=0,len=items.length;len>i;i++)data.push(items[i]);return data}return items},DataSet.prototype.getIds=function(options){var i,len,id,item,items,data=this._data,filter=options&&options.filter,order=options&&options.order,type=options&&options.type||this._options.type,ids=[];if(filter)if(order){items=[];for(id in data)data.hasOwnProperty(id)&&(item=this._getItem(id,type),filter(item)&&items.push(item));for(this._sort(items,order),i=0,len=items.length;len>i;i++)ids[i]=items[i][this._fieldId]}else for(id in data)data.hasOwnProperty(id)&&(item=this._getItem(id,type),filter(item)&&ids.push(item[this._fieldId]));else if(order){items=[];for(id in data)data.hasOwnProperty(id)&&items.push(data[id]);for(this._sort(items,order),i=0,len=items.length;len>i;i++)ids[i]=items[i][this._fieldId]}else for(id in data)data.hasOwnProperty(id)&&(item=data[id],ids.push(item[this._fieldId]));return ids},DataSet.prototype.getDataSet=function(){return this},DataSet.prototype.forEach=function(callback,options){var item,id,filter=options&&options.filter,type=options&&options.type||this._options.type,data=this._data;if(options&&options.order)for(var items=this.get(options),i=0,len=items.length;len>i;i++)item=items[i],id=item[this._fieldId],callback(item,id);else for(id in data)data.hasOwnProperty(id)&&(item=this._getItem(id,type),(!filter||filter(item))&&callback(item,id))},DataSet.prototype.map=function(callback,options){var item,filter=options&&options.filter,type=options&&options.type||this._options.type,mappedItems=[],data=this._data;for(var id in data)data.hasOwnProperty(id)&&(item=this._getItem(id,type),(!filter||filter(item))&&mappedItems.push(callback(item,id)));return options&&options.order&&this._sort(mappedItems,options.order),mappedItems},DataSet.prototype._filterFields=function(item,fields){if(!item)return item;var filteredItem={};for(var field in item)item.hasOwnProperty(field)&&-1!=fields.indexOf(field)&&(filteredItem[field]=item[field]);return filteredItem},DataSet.prototype._sort=function(items,order){if(util.isString(order)){var name=order;items.sort(function(a,b){var av=a[name],bv=b[name];return av>bv?1:bv>av?-1:0})}else{if("function"!=typeof order)throw new TypeError("Order must be a function or a string");items.sort(order)}},DataSet.prototype.remove=function(id,senderId){var i,len,removedId,removedIds=[];if(Array.isArray(id))for(i=0,len=id.length;len>i;i++)removedId=this._remove(id[i]),null!=removedId&&removedIds.push(removedId);else removedId=this._remove(id),null!=removedId&&removedIds.push(removedId);return removedIds.length&&this._trigger("remove",{items:removedIds},senderId),removedIds},DataSet.prototype._remove=function(id){if(util.isNumber(id)||util.isString(id)){if(this._data[id])return delete this._data[id],this.length--,id}else if(id instanceof Object){var itemId=id[this._fieldId];if(itemId&&this._data[itemId])return delete this._data[itemId],this.length--,itemId}return null},DataSet.prototype.clear=function(senderId){var ids=Object.keys(this._data);return this._data={},this.length=0,this._trigger("remove",{items:ids},senderId),ids},DataSet.prototype.max=function(field){var data=this._data,max=null,maxField=null;for(var id in data)if(data.hasOwnProperty(id)){var item=data[id],itemField=item[field];null!=itemField&&(!max||itemField>maxField)&&(max=item,maxField=itemField)}return max},DataSet.prototype.min=function(field){var data=this._data,min=null,minField=null;for(var id in data)if(data.hasOwnProperty(id)){var item=data[id],itemField=item[field];null!=itemField&&(!min||minField>itemField)&&(min=item,minField=itemField)}return min},DataSet.prototype.distinct=function(field){var i,data=this._data,values=[],fieldType=this._options.type&&this._options.type[field]||null,count=0;for(var prop in data)if(data.hasOwnProperty(prop)){var item=data[prop],value=item[field],exists=!1;for(i=0;count>i;i++)if(values[i]==value){exists=!0;break}exists||void 0===value||(values[count]=value,count++)}if(fieldType)for(i=0;i<values.length;i++)values[i]=util.convert(values[i],fieldType);return values},DataSet.prototype._addItem=function(item){var id=item[this._fieldId];if(void 0!=id){if(this._data[id])throw new Error("Cannot add item: item with id "+id+" already exists")}else id=util.randomUUID(),item[this._fieldId]=id;var d={};for(var field in item)if(item.hasOwnProperty(field)){var fieldType=this._type[field];d[field]=util.convert(item[field],fieldType)}return this._data[id]=d,this.length++,id},DataSet.prototype._getItem=function(id,types){var field,value,raw=this._data[id];if(!raw)return null;var converted={};if(types)for(field in raw)raw.hasOwnProperty(field)&&(value=raw[field],converted[field]=util.convert(value,types[field]));else for(field in raw)raw.hasOwnProperty(field)&&(value=raw[field],converted[field]=value);return converted},DataSet.prototype._updateItem=function(item){var id=item[this._fieldId];if(void 0==id)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(item)+")");var d=this._data[id];if(!d)throw new Error("Cannot update item: no item with id "+id+" found");for(var field in item)if(item.hasOwnProperty(field)){var fieldType=this._type[field];d[field]=util.convert(item[field],fieldType)}return id},DataSet.prototype._getColumnNames=function(dataTable){for(var columns=[],col=0,cols=dataTable.getNumberOfColumns();cols>col;col++)columns[col]=dataTable.getColumnId(col)||dataTable.getColumnLabel(col);return columns},DataSet.prototype._appendRow=function(dataTable,columns,item){for(var row=dataTable.addRow(),col=0,cols=columns.length;cols>col;col++){var field=columns[col];dataTable.setValue(row,col,item[field])}},module.exports=DataSet},function(module,exports,__webpack_require__){function DataView(data,options){this._data=null,this._ids={},this.length=0,this._options=options||{},this._fieldId="id",this._subscribers={};var me=this;
this.listener=function(){me._onEvent.apply(me,arguments)},this.setData(data)}var util=__webpack_require__(1),DataSet=__webpack_require__(3);DataView.prototype.setData=function(data){var ids,i,len;if(this._data){this._data.unsubscribe&&this._data.unsubscribe("*",this.listener),ids=[];for(var id in this._ids)this._ids.hasOwnProperty(id)&&ids.push(id);this._ids={},this.length=0,this._trigger("remove",{items:ids})}if(this._data=data,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",ids=this._data.getIds({filter:this._options&&this._options.filter}),i=0,len=ids.length;len>i;i++)id=ids[i],this._ids[id]=!0;this.length=ids.length,this._trigger("add",{items:ids}),this._data.on&&this._data.on("*",this.listener)}},DataView.prototype.refresh=function(){for(var id,ids=this._data.getIds({filter:this._options&&this._options.filter}),newIds={},added=[],removed=[],i=0;i<ids.length;i++)id=ids[i],newIds[id]=!0,this._ids[id]||(added.push(id),this._ids[id]=!0,this.length++);for(id in this._ids)this._ids.hasOwnProperty(id)&&(newIds[id]||(removed.push(id),delete this._ids[id],this.length--));added.length&&this._trigger("add",{items:added}),removed.length&&this._trigger("remove",{items:removed})},DataView.prototype.get=function(){var ids,options,data,me=this,firstType=util.getType(arguments[0]);"String"==firstType||"Number"==firstType||"Array"==firstType?(ids=arguments[0],options=arguments[1],data=arguments[2]):(options=arguments[0],data=arguments[1]);var viewOptions=util.extend({},this._options,options);this._options.filter&&options&&options.filter&&(viewOptions.filter=function(item){return me._options.filter(item)&&options.filter(item)});var getArguments=[];return void 0!=ids&&getArguments.push(ids),getArguments.push(viewOptions),getArguments.push(data),this._data&&this._data.get.apply(this._data,getArguments)},DataView.prototype.getIds=function(options){var ids;if(this._data){var filter,defaultFilter=this._options.filter;filter=options&&options.filter?defaultFilter?function(item){return defaultFilter(item)&&options.filter(item)}:options.filter:defaultFilter,ids=this._data.getIds({filter:filter,order:options&&options.order})}else ids=[];return ids},DataView.prototype.getDataSet=function(){for(var dataSet=this;dataSet instanceof DataView;)dataSet=dataSet._data;return dataSet||null},DataView.prototype._onEvent=function(event,params,senderId){var i,len,id,item,ids=params&&params.items,data=this._data,added=[],updated=[],removed=[];if(ids&&data){switch(event){case"add":for(i=0,len=ids.length;len>i;i++)id=ids[i],item=this.get(id),item&&(this._ids[id]=!0,added.push(id));break;case"update":for(i=0,len=ids.length;len>i;i++)id=ids[i],item=this.get(id),item?this._ids[id]?updated.push(id):(this._ids[id]=!0,added.push(id)):this._ids[id]&&(delete this._ids[id],removed.push(id));break;case"remove":for(i=0,len=ids.length;len>i;i++)id=ids[i],this._ids[id]&&(delete this._ids[id],removed.push(id))}this.length+=added.length-removed.length,added.length&&this._trigger("add",{items:added},senderId),updated.length&&this._trigger("update",{items:updated},senderId),removed.length&&this._trigger("remove",{items:removed},senderId)}},DataView.prototype.on=DataSet.prototype.on,DataView.prototype.off=DataSet.prototype.off,DataView.prototype._trigger=DataSet.prototype._trigger,DataView.prototype.subscribe=DataView.prototype.on,DataView.prototype.unsubscribe=DataView.prototype.off,module.exports=DataView},function(module){function Queue(options){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(options)}Queue.prototype.setOptions=function(options){options&&"undefined"!=typeof options.delay&&(this.delay=options.delay),options&&"undefined"!=typeof options.max&&(this.max=options.max),this._flushIfNeeded()},Queue.extend=function(object,options){var queue=new Queue(options);if(void 0!==object.flush)throw new Error("Target object already has a property flush");object.flush=function(){queue.flush()};var methods=[{name:"flush",original:void 0}];if(options&&options.replace)for(var i=0;i<options.replace.length;i++){var name=options.replace[i];methods.push({name:name,original:object[name]}),queue.replace(object,name)}return queue._extended={object:object,methods:methods},queue},Queue.prototype.destroy=function(){if(this.flush(),this._extended){for(var object=this._extended.object,methods=this._extended.methods,i=0;i<methods.length;i++){var method=methods[i];method.original?object[method.name]=method.original:delete object[method.name]}this._extended=null}},Queue.prototype.replace=function(object,method){var me=this,original=object[method];if(!original)throw new Error("Method "+method+" undefined");object[method]=function(){for(var args=[],i=0;i<arguments.length;i++)args[i]=arguments[i];me.queue({args:args,fn:original,context:this})}},Queue.prototype.queue=function(entry){this._queue.push("function"==typeof entry?{fn:entry}:entry),this._flushIfNeeded()},Queue.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"==typeof this.delay){var me=this;this._timeout=setTimeout(function(){me.flush()},this.delay)}},Queue.prototype.flush=function(){for(;this._queue.length>0;){var entry=this._queue.shift();entry.fn.apply(entry.context||entry.fn,entry.args||[])}},module.exports=Queue},function(module,exports,__webpack_require__){function Graph3d(container,data,options){if(!(this instanceof Graph3d))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=container,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z";var passValueFn=function(v){return v};this.xValueLabel=passValueFn,this.yValueLabel=passValueFn,this.zValueLabel=passValueFn,this.filterLabel="time",this.legendLabel="value",this.style=Graph3d.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new Camera,this.eye=new Point3d(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.colFilter=void 0,this.xMin=0,this.xStep=void 0,this.xMax=1,this.yMin=0,this.yStep=void 0,this.yMax=1,this.zMin=0,this.zStep=void 0,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.colorAxis="#4D4D4D",this.colorGrid="#D3D3D3",this.colorDot="#7DC1FF",this.colorDotBorder="#3267D2",this.create(),this.setOptions(options),data&&this.setData(data)}function getMouseX(event){return"clientX"in event?event.clientX:event.targetTouches[0]&&event.targetTouches[0].clientX||0}function getMouseY(event){return"clientY"in event?event.clientY:event.targetTouches[0]&&event.targetTouches[0].clientY||0}var Emitter=__webpack_require__(56),DataSet=__webpack_require__(3),DataView=__webpack_require__(4),util=__webpack_require__(1),Point3d=__webpack_require__(10),Point2d=__webpack_require__(9),Camera=__webpack_require__(7),Filter=__webpack_require__(8),Slider=__webpack_require__(11),StepNumber=__webpack_require__(12);Emitter(Graph3d.prototype),Graph3d.prototype._setScale=function(){this.scale=new Point3d(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var xCenter=(this.xMax+this.xMin)/2*this.scale.x,yCenter=(this.yMax+this.yMin)/2*this.scale.y,zCenter=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(xCenter,yCenter,zCenter)},Graph3d.prototype._convert3Dto2D=function(point3d){var translation=this._convertPointToTranslation(point3d);return this._convertTranslationToScreen(translation)},Graph3d.prototype._convertPointToTranslation=function(point3d){var ax=point3d.x*this.scale.x,ay=point3d.y*this.scale.y,az=point3d.z*this.scale.z,cx=this.camera.getCameraLocation().x,cy=this.camera.getCameraLocation().y,cz=this.camera.getCameraLocation().z,sinTx=Math.sin(this.camera.getCameraRotation().x),cosTx=Math.cos(this.camera.getCameraRotation().x),sinTy=Math.sin(this.camera.getCameraRotation().y),cosTy=Math.cos(this.camera.getCameraRotation().y),sinTz=Math.sin(this.camera.getCameraRotation().z),cosTz=Math.cos(this.camera.getCameraRotation().z),dx=cosTy*(sinTz*(ay-cy)+cosTz*(ax-cx))-sinTy*(az-cz),dy=sinTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))+cosTx*(cosTz*(ay-cy)-sinTz*(ax-cx)),dz=cosTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))-sinTx*(cosTz*(ay-cy)-sinTz*(ax-cx));return new Point3d(dx,dy,dz)},Graph3d.prototype._convertTranslationToScreen=function(translation){var bx,by,ex=this.eye.x,ey=this.eye.y,ez=this.eye.z,dx=translation.x,dy=translation.y,dz=translation.z;return this.showPerspective?(bx=(dx-ex)*(ez/dz),by=(dy-ey)*(ez/dz)):(bx=dx*-(ez/this.camera.getArmLength()),by=dy*-(ez/this.camera.getArmLength())),new Point2d(this.xcenter+bx*this.frame.canvas.clientWidth,this.ycenter-by*this.frame.canvas.clientWidth)},Graph3d.prototype._setBackgroundColor=function(backgroundColor){var fill="white",stroke="gray",strokeWidth=1;if("string"==typeof backgroundColor)fill=backgroundColor,stroke="none",strokeWidth=0;else if("object"==typeof backgroundColor)void 0!==backgroundColor.fill&&(fill=backgroundColor.fill),void 0!==backgroundColor.stroke&&(stroke=backgroundColor.stroke),void 0!==backgroundColor.strokeWidth&&(strokeWidth=backgroundColor.strokeWidth);else if(void 0!==backgroundColor)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=fill,this.frame.style.borderColor=stroke,this.frame.style.borderWidth=strokeWidth+"px",this.frame.style.borderStyle="solid"},Graph3d.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},Graph3d.prototype._getStyleNumber=function(styleName){switch(styleName){case"dot":return Graph3d.STYLE.DOT;case"dot-line":return Graph3d.STYLE.DOTLINE;case"dot-color":return Graph3d.STYLE.DOTCOLOR;case"dot-size":return Graph3d.STYLE.DOTSIZE;case"line":return Graph3d.STYLE.LINE;case"grid":return Graph3d.STYLE.GRID;case"surface":return Graph3d.STYLE.SURFACE;case"bar":return Graph3d.STYLE.BAR;case"bar-color":return Graph3d.STYLE.BARCOLOR;case"bar-size":return Graph3d.STYLE.BARSIZE}return-1},Graph3d.prototype._determineColumnIndexes=function(data){if(this.style===Graph3d.STYLE.DOT||this.style===Graph3d.STYLE.DOTLINE||this.style===Graph3d.STYLE.LINE||this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE||this.style===Graph3d.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=void 0,data.getNumberOfColumns()>3&&(this.colFilter=3);else{if(this.style!==Graph3d.STYLE.DOTCOLOR&&this.style!==Graph3d.STYLE.DOTSIZE&&this.style!==Graph3d.STYLE.BARCOLOR&&this.style!==Graph3d.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,data.getNumberOfColumns()>4&&(this.colFilter=4)}},Graph3d.prototype.getNumberOfRows=function(data){return data.length},Graph3d.prototype.getNumberOfColumns=function(data){var counter=0;for(var column in data[0])data[0].hasOwnProperty(column)&&counter++;return counter},Graph3d.prototype.getDistinctValues=function(data,column){for(var distinctValues=[],i=0;i<data.length;i++)-1==distinctValues.indexOf(data[i][column])&&distinctValues.push(data[i][column]);return distinctValues},Graph3d.prototype.getColumnRange=function(data,column){for(var minMax={min:data[0][column],max:data[0][column]},i=0;i<data.length;i++)minMax.min>data[i][column]&&(minMax.min=data[i][column]),minMax.max<data[i][column]&&(minMax.max=data[i][column]);return minMax},Graph3d.prototype._dataInitialize=function(rawData){var me=this;if(this.dataSet&&this.dataSet.off("*",this._onChange),void 0!==rawData){Array.isArray(rawData)&&(rawData=new DataSet(rawData));var data;if(!(rawData instanceof DataSet||rawData instanceof DataView))throw new Error("Array, DataSet, or DataView expected");if(data=rawData.get(),0!=data.length){this.dataSet=rawData,this.dataTable=data,this._onChange=function(){me.setData(me.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",data[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new Filter(rawData,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){me.redraw()}));var withBars=this.style==Graph3d.STYLE.BAR||this.style==Graph3d.STYLE.BARCOLOR||this.style==Graph3d.STYLE.BARSIZE;if(withBars){if(void 0!==this.defaultXBarWidth)this.xBarWidth=this.defaultXBarWidth;else{var dataX=this.getDistinctValues(data,this.colX);this.xBarWidth=dataX[1]-dataX[0]||1}if(void 0!==this.defaultYBarWidth)this.yBarWidth=this.defaultYBarWidth;else{var dataY=this.getDistinctValues(data,this.colY);this.yBarWidth=dataY[1]-dataY[0]||1}}var xRange=this.getColumnRange(data,this.colX);withBars&&(xRange.min-=this.xBarWidth/2,xRange.max+=this.xBarWidth/2),this.xMin=void 0!==this.defaultXMin?this.defaultXMin:xRange.min,this.xMax=void 0!==this.defaultXMax?this.defaultXMax:xRange.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=void 0!==this.defaultXStep?this.defaultXStep:(this.xMax-this.xMin)/5;var yRange=this.getColumnRange(data,this.colY);withBars&&(yRange.min-=this.yBarWidth/2,yRange.max+=this.yBarWidth/2),this.yMin=void 0!==this.defaultYMin?this.defaultYMin:yRange.min,this.yMax=void 0!==this.defaultYMax?this.defaultYMax:yRange.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=void 0!==this.defaultYStep?this.defaultYStep:(this.yMax-this.yMin)/5;var zRange=this.getColumnRange(data,this.colZ);if(this.zMin=void 0!==this.defaultZMin?this.defaultZMin:zRange.min,this.zMax=void 0!==this.defaultZMax?this.defaultZMax:zRange.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=void 0!==this.defaultZStep?this.defaultZStep:(this.zMax-this.zMin)/5,void 0!==this.colValue){var valueRange=this.getColumnRange(data,this.colValue);this.valueMin=void 0!==this.defaultValueMin?this.defaultValueMin:valueRange.min,this.valueMax=void 0!==this.defaultValueMax?this.defaultValueMax:valueRange.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()}}},Graph3d.prototype._getDataPoints=function(data){var x,y,i,z,obj,point,dataPoints=[];if(this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE){var dataX=[],dataY=[];for(i=0;i<this.getNumberOfRows(data);i++)x=data[i][this.colX]||0,y=data[i][this.colY]||0,-1===dataX.indexOf(x)&&dataX.push(x),-1===dataY.indexOf(y)&&dataY.push(y);var sortNumber=function(a,b){return a-b};dataX.sort(sortNumber),dataY.sort(sortNumber);var dataMatrix=[];for(i=0;i<data.length;i++){x=data[i][this.colX]||0,y=data[i][this.colY]||0,z=data[i][this.colZ]||0;var xIndex=dataX.indexOf(x),yIndex=dataY.indexOf(y);void 0===dataMatrix[xIndex]&&(dataMatrix[xIndex]=[]);var point3d=new Point3d;point3d.x=x,point3d.y=y,point3d.z=z,obj={},obj.point=point3d,obj.trans=void 0,obj.screen=void 0,obj.bottom=new Point3d(x,y,this.zMin),dataMatrix[xIndex][yIndex]=obj,dataPoints.push(obj)}for(x=0;x<dataMatrix.length;x++)for(y=0;y<dataMatrix[x].length;y++)dataMatrix[x][y]&&(dataMatrix[x][y].pointRight=x<dataMatrix.length-1?dataMatrix[x+1][y]:void 0,dataMatrix[x][y].pointTop=y<dataMatrix[x].length-1?dataMatrix[x][y+1]:void 0,dataMatrix[x][y].pointCross=x<dataMatrix.length-1&&y<dataMatrix[x].length-1?dataMatrix[x+1][y+1]:void 0)}else for(i=0;i<data.length;i++)point=new Point3d,point.x=data[i][this.colX]||0,point.y=data[i][this.colY]||0,point.z=data[i][this.colZ]||0,void 0!==this.colValue&&(point.value=data[i][this.colValue]||0),obj={},obj.point=point,obj.bottom=new Point3d(point.x,point.y,this.zMin),obj.trans=void 0,obj.screen=void 0,dataPoints.push(obj);return dataPoints},Graph3d.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var noCanvas=document.createElement("DIV");noCanvas.style.color="red",noCanvas.style.fontWeight="bold",noCanvas.style.padding="10px",noCanvas.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(noCanvas),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var me=this,onmousedown=function(event){me._onMouseDown(event)},ontouchstart=function(event){me._onTouchStart(event)},onmousewheel=function(event){me._onWheel(event)},ontooltip=function(event){me._onTooltip(event)};util.addEventListener(this.frame.canvas,"keydown",onkeydown),util.addEventListener(this.frame.canvas,"mousedown",onmousedown),util.addEventListener(this.frame.canvas,"touchstart",ontouchstart),util.addEventListener(this.frame.canvas,"mousewheel",onmousewheel),util.addEventListener(this.frame.canvas,"mousemove",ontooltip),this.containerElement.appendChild(this.frame)},Graph3d.prototype.setSize=function(width,height){this.frame.style.width=width,this.frame.style.height=height,this._resizeCanvas()},Graph3d.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},Graph3d.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},Graph3d.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},Graph3d.prototype._resizeCenter=function(){this.xcenter="%"===this.defaultXCenter.charAt(this.defaultXCenter.length-1)?parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:parseFloat(this.defaultXCenter),this.ycenter="%"===this.defaultYCenter.charAt(this.defaultYCenter.length-1)?parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):parseFloat(this.defaultYCenter)},Graph3d.prototype.setCameraPosition=function(pos){void 0!==pos&&(void 0!==pos.horizontal&&void 0!==pos.vertical&&this.camera.setArmRotation(pos.horizontal,pos.vertical),void 0!==pos.distance&&this.camera.setArmLength(pos.distance),this.redraw())},Graph3d.prototype.getCameraPosition=function(){var pos=this.camera.getArmRotation();return pos.distance=this.camera.getArmLength(),pos},Graph3d.prototype._readData=function(data){this._dataInitialize(data,this.style),this.dataPoints=this.dataFilter?this.dataFilter._getDataPoints():this._getDataPoints(this.dataTable),this._redrawFilter()},Graph3d.prototype.setData=function(data){this._readData(data),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},Graph3d.prototype.setOptions=function(options){var cameraPosition=void 0;if(this.animationStop(),void 0!==options){if(void 0!==options.width&&(this.width=options.width),void 0!==options.height&&(this.height=options.height),void 0!==options.xCenter&&(this.defaultXCenter=options.xCenter),void 0!==options.yCenter&&(this.defaultYCenter=options.yCenter),void 0!==options.filterLabel&&(this.filterLabel=options.filterLabel),void 0!==options.legendLabel&&(this.legendLabel=options.legendLabel),void 0!==options.xLabel&&(this.xLabel=options.xLabel),void 0!==options.yLabel&&(this.yLabel=options.yLabel),void 0!==options.zLabel&&(this.zLabel=options.zLabel),void 0!==options.xValueLabel&&(this.xValueLabel=options.xValueLabel),void 0!==options.yValueLabel&&(this.yValueLabel=options.yValueLabel),void 0!==options.zValueLabel&&(this.zValueLabel=options.zValueLabel),void 0!==options.style){var styleNumber=this._getStyleNumber(options.style);-1!==styleNumber&&(this.style=styleNumber)}void 0!==options.showGrid&&(this.showGrid=options.showGrid),void 0!==options.showPerspective&&(this.showPerspective=options.showPerspective),void 0!==options.showShadow&&(this.showShadow=options.showShadow),void 0!==options.tooltip&&(this.showTooltip=options.tooltip),void 0!==options.showAnimationControls&&(this.showAnimationControls=options.showAnimationControls),void 0!==options.keepAspectRatio&&(this.keepAspectRatio=options.keepAspectRatio),void 0!==options.verticalRatio&&(this.verticalRatio=options.verticalRatio),void 0!==options.animationInterval&&(this.animationInterval=options.animationInterval),void 0!==options.animationPreload&&(this.animationPreload=options.animationPreload),void 0!==options.animationAutoStart&&(this.animationAutoStart=options.animationAutoStart),void 0!==options.xBarWidth&&(this.defaultXBarWidth=options.xBarWidth),void 0!==options.yBarWidth&&(this.defaultYBarWidth=options.yBarWidth),void 0!==options.xMin&&(this.defaultXMin=options.xMin),void 0!==options.xStep&&(this.defaultXStep=options.xStep),void 0!==options.xMax&&(this.defaultXMax=options.xMax),void 0!==options.yMin&&(this.defaultYMin=options.yMin),void 0!==options.yStep&&(this.defaultYStep=options.yStep),void 0!==options.yMax&&(this.defaultYMax=options.yMax),void 0!==options.zMin&&(this.defaultZMin=options.zMin),void 0!==options.zStep&&(this.defaultZStep=options.zStep),void 0!==options.zMax&&(this.defaultZMax=options.zMax),void 0!==options.valueMin&&(this.defaultValueMin=options.valueMin),void 0!==options.valueMax&&(this.defaultValueMax=options.valueMax),void 0!==options.cameraPosition&&(cameraPosition=options.cameraPosition),void 0!==cameraPosition?(this.camera.setArmRotation(cameraPosition.horizontal,cameraPosition.vertical),this.camera.setArmLength(cameraPosition.distance)):(this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7))}this._setBackgroundColor(options&&options.backgroundColor),this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},Graph3d.prototype.redraw=function(){if(void 0===this.dataPoints)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE?this._redrawDataGrid():this.style===Graph3d.STYLE.LINE?this._redrawDataLine():this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},Graph3d.prototype._redrawClear=function(){var canvas=this.frame.canvas,ctx=canvas.getContext("2d");ctx.clearRect(0,0,canvas.width,canvas.height)},Graph3d.prototype._redrawLegend=function(){var y;if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var widthMin,widthMax,dotSize=.02*this.frame.clientWidth;this.style===Graph3d.STYLE.DOTSIZE?(widthMin=dotSize/2,widthMax=dotSize/2+2*dotSize):(widthMin=20,widthMax=20);var height=Math.max(.25*this.frame.clientHeight,100),top=this.margin,right=this.frame.clientWidth-this.margin,left=right-widthMax,bottom=top+height}var canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(ctx.lineWidth=1,ctx.font="14px arial",this.style===Graph3d.STYLE.DOTCOLOR){var ymin=0,ymax=height;for(y=ymin;ymax>y;y++){var f=(y-ymin)/(ymax-ymin),hue=240*f,color=this._hsv2rgb(hue,1,1);ctx.strokeStyle=color,ctx.beginPath(),ctx.moveTo(left,top+y),ctx.lineTo(right,top+y),ctx.stroke()}ctx.strokeStyle=this.colorAxis,ctx.strokeRect(left,top,widthMax,height)}if(this.style===Graph3d.STYLE.DOTSIZE&&(ctx.strokeStyle=this.colorAxis,ctx.fillStyle=this.colorDot,ctx.beginPath(),ctx.moveTo(left,top),ctx.lineTo(right,top),ctx.lineTo(right-widthMax+widthMin,bottom),ctx.lineTo(left,bottom),ctx.closePath(),ctx.fill(),ctx.stroke()),this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var gridLineLen=5,step=new StepNumber(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);for(step.start(),step.getCurrent()<this.valueMin&&step.next();!step.end();)y=bottom-(step.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*height,ctx.beginPath(),ctx.moveTo(left-gridLineLen,y),ctx.lineTo(left,y),ctx.stroke(),ctx.textAlign="right",ctx.textBaseline="middle",ctx.fillStyle=this.colorAxis,ctx.fillText(step.getCurrent(),left-2*gridLineLen,y),step.next();ctx.textAlign="right",ctx.textBaseline="top";var label=this.legendLabel;ctx.fillText(label,right,bottom+this.margin)}},Graph3d.prototype._redrawFilter=function(){if(this.frame.filter.innerHTML="",this.dataFilter){var options={visible:this.showAnimationControls},slider=new Slider(this.frame.filter,options);this.frame.filter.slider=slider,this.frame.filter.style.padding="10px",slider.setValues(this.dataFilter.values),slider.setPlayInterval(this.animationInterval);var me=this,onchange=function(){var index=slider.getIndex();me.dataFilter.selectValue(index),me.dataPoints=me.dataFilter._getDataPoints(),me.redraw()};slider.setOnChangeCallback(onchange)}else this.frame.filter.slider=void 0},Graph3d.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},Graph3d.prototype._redrawInfo=function(){if(this.dataFilter){var canvas=this.frame.canvas,ctx=canvas.getContext("2d");ctx.font="14px arial",ctx.lineStyle="gray",ctx.fillStyle="gray",ctx.textAlign="left",ctx.textBaseline="top";var x=this.margin,y=this.margin;ctx.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),x,y)}},Graph3d.prototype._redrawAxis=function(){var from,to,step,prettyStep,text,xText,yText,zText,offset,xOffset,yOffset,xMin2d,xMax2d,canvas=this.frame.canvas,ctx=canvas.getContext("2d");ctx.font=24/this.camera.getArmLength()+"px arial";var gridLenX=.025/this.scale.x,gridLenY=.025/this.scale.y,textMargin=5/this.camera.getArmLength(),armAngle=this.camera.getArmRotation().horizontal;for(ctx.lineWidth=1,prettyStep=void 0===this.defaultXStep,step=new StepNumber(this.xMin,this.xMax,this.xStep,prettyStep),step.start(),step.getCurrent()<this.xMin&&step.next();!step.end();){var x=step.getCurrent();this.showGrid?(from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin)),ctx.strokeStyle=this.colorGrid,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()):(from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(x,this.yMin+gridLenX,this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),from=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin)),to=this._convert3Dto2D(new Point3d(x,this.yMax-gridLenX,this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()),yText=Math.cos(armAngle)>0?this.yMin:this.yMax,text=this._convert3Dto2D(new Point3d(x,yText,this.zMin)),Math.cos(2*armAngle)>0?(ctx.textAlign="center",ctx.textBaseline="top",text.y+=textMargin):Math.sin(2*armAngle)<0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.colorAxis,ctx.fillText("  "+this.xValueLabel(step.getCurrent())+"  ",text.x,text.y),step.next()}for(ctx.lineWidth=1,prettyStep=void 0===this.defaultYStep,step=new StepNumber(this.yMin,this.yMax,this.yStep,prettyStep),step.start(),step.getCurrent()<this.yMin&&step.next();!step.end();)this.showGrid?(from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin)),ctx.strokeStyle=this.colorGrid,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()):(from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMin+gridLenY,step.getCurrent(),this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),from=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMax-gridLenY,step.getCurrent(),this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()),xText=Math.sin(armAngle)>0?this.xMin:this.xMax,text=this._convert3Dto2D(new Point3d(xText,step.getCurrent(),this.zMin)),Math.cos(2*armAngle)<0?(ctx.textAlign="center",ctx.textBaseline="top",text.y+=textMargin):Math.sin(2*armAngle)>0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.colorAxis,ctx.fillText("  "+this.yValueLabel(step.getCurrent())+"  ",text.x,text.y),step.next();for(ctx.lineWidth=1,prettyStep=void 0===this.defaultZStep,step=new StepNumber(this.zMin,this.zMax,this.zStep,prettyStep),step.start(),step.getCurrent()<this.zMin&&step.next(),xText=Math.cos(armAngle)>0?this.xMin:this.xMax,yText=Math.sin(armAngle)<0?this.yMin:this.yMax;!step.end();)from=this._convert3Dto2D(new Point3d(xText,yText,step.getCurrent())),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(from.x-textMargin,from.y),ctx.stroke(),ctx.textAlign="right",ctx.textBaseline="middle",ctx.fillStyle=this.colorAxis,ctx.fillText(this.zValueLabel(step.getCurrent())+" ",from.x-5,from.y),step.next();ctx.lineWidth=1,from=this._convert3Dto2D(new Point3d(xText,yText,this.zMin)),to=this._convert3Dto2D(new Point3d(xText,yText,this.zMax)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),ctx.lineWidth=1,xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin)),xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(xMin2d.x,xMin2d.y),ctx.lineTo(xMax2d.x,xMax2d.y),ctx.stroke(),xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin)),xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(xMin2d.x,xMin2d.y),ctx.lineTo(xMax2d.x,xMax2d.y),ctx.stroke(),ctx.lineWidth=1,from=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),from=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin)),ctx.strokeStyle=this.colorAxis,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke();var xLabel=this.xLabel;xLabel.length>0&&(yOffset=.1/this.scale.y,xText=(this.xMin+this.xMax)/2,yText=Math.cos(armAngle)>0?this.yMin-yOffset:this.yMax+yOffset,text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin)),Math.cos(2*armAngle)>0?(ctx.textAlign="center",ctx.textBaseline="top"):Math.sin(2*armAngle)<0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.colorAxis,ctx.fillText(xLabel,text.x,text.y));var yLabel=this.yLabel;yLabel.length>0&&(xOffset=.1/this.scale.x,xText=Math.sin(armAngle)>0?this.xMin-xOffset:this.xMax+xOffset,yText=(this.yMin+this.yMax)/2,text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin)),Math.cos(2*armAngle)<0?(ctx.textAlign="center",ctx.textBaseline="top"):Math.sin(2*armAngle)>0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.colorAxis,ctx.fillText(yLabel,text.x,text.y));var zLabel=this.zLabel;zLabel.length>0&&(offset=30,xText=Math.cos(armAngle)>0?this.xMin:this.xMax,yText=Math.sin(armAngle)<0?this.yMin:this.yMax,zText=(this.zMin+this.zMax)/2,text=this._convert3Dto2D(new Point3d(xText,yText,zText)),ctx.textAlign="right",ctx.textBaseline="middle",ctx.fillStyle=this.colorAxis,ctx.fillText(zLabel,text.x-offset,text.y))},Graph3d.prototype._hsv2rgb=function(H,S,V){var R,G,B,C,Hi,X;switch(C=V*S,Hi=Math.floor(H/60),X=C*(1-Math.abs(H/60%2-1)),Hi){case 0:R=C,G=X,B=0;break;case 1:R=X,G=C,B=0;break;case 2:R=0,G=C,B=X;break;case 3:R=0,G=X,B=C;break;case 4:R=X,G=0,B=C;break;case 5:R=C,G=0,B=X;break;default:R=0,G=0,B=0}return"RGB("+parseInt(255*R)+","+parseInt(255*G)+","+parseInt(255*B)+")"},Graph3d.prototype._redrawDataGrid=function(){var point,right,top,cross,i,topSideVisible,fillStyle,strokeStyle,lineWidth,h,s,v,zAvg,canvas=this.frame.canvas,ctx=canvas.getContext("2d");
if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};if(this.dataPoints.sort(sortDepth),this.style===Graph3d.STYLE.SURFACE){for(i=0;i<this.dataPoints.length;i++)if(point=this.dataPoints[i],right=this.dataPoints[i].pointRight,top=this.dataPoints[i].pointTop,cross=this.dataPoints[i].pointCross,void 0!==point&&void 0!==right&&void 0!==top&&void 0!==cross){if(this.showGrayBottom||this.showShadow){var aDiff=Point3d.subtract(cross.trans,point.trans),bDiff=Point3d.subtract(top.trans,right.trans),crossproduct=Point3d.crossProduct(aDiff,bDiff),len=crossproduct.length();topSideVisible=crossproduct.z>0}else topSideVisible=!0;topSideVisible?(zAvg=(point.point.z+right.point.z+top.point.z+cross.point.z)/4,h=240*(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio),s=1,this.showShadow?(v=Math.min(1+crossproduct.x/len/2,1),fillStyle=this._hsv2rgb(h,s,v),strokeStyle=fillStyle):(v=1,fillStyle=this._hsv2rgb(h,s,v),strokeStyle=this.colorAxis)):(fillStyle="gray",strokeStyle=this.colorAxis),lineWidth=.5,ctx.lineWidth=lineWidth,ctx.fillStyle=fillStyle,ctx.strokeStyle=strokeStyle,ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y),ctx.lineTo(right.screen.x,right.screen.y),ctx.lineTo(cross.screen.x,cross.screen.y),ctx.lineTo(top.screen.x,top.screen.y),ctx.closePath(),ctx.fill(),ctx.stroke()}}else for(i=0;i<this.dataPoints.length;i++)point=this.dataPoints[i],right=this.dataPoints[i].pointRight,top=this.dataPoints[i].pointTop,void 0!==point&&(lineWidth=this.showPerspective?2/-point.trans.z:2*-(this.eye.z/this.camera.getArmLength())),void 0!==point&&void 0!==right&&(zAvg=(point.point.z+right.point.z)/2,h=240*(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio),ctx.lineWidth=lineWidth,ctx.strokeStyle=this._hsv2rgb(h,1,1),ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y),ctx.lineTo(right.screen.x,right.screen.y),ctx.stroke()),void 0!==point&&void 0!==top&&(zAvg=(point.point.z+top.point.z)/2,h=240*(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio),ctx.lineWidth=lineWidth,ctx.strokeStyle=this._hsv2rgb(h,1,1),ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y),ctx.lineTo(top.screen.x,top.screen.y),ctx.stroke())}},Graph3d.prototype._redrawDataDot=function(){var i,canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};this.dataPoints.sort(sortDepth);var dotSize=.02*this.frame.clientWidth;for(i=0;i<this.dataPoints.length;i++){var point=this.dataPoints[i];if(this.style===Graph3d.STYLE.DOTLINE){var from=this._convert3Dto2D(point.bottom);ctx.lineWidth=1,ctx.strokeStyle=this.colorGrid,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(point.screen.x,point.screen.y),ctx.stroke()}var size;size=this.style===Graph3d.STYLE.DOTSIZE?dotSize/2+2*dotSize*(point.point.value-this.valueMin)/(this.valueMax-this.valueMin):dotSize;var radius;radius=this.showPerspective?size/-point.trans.z:size*-(this.eye.z/this.camera.getArmLength()),0>radius&&(radius=0);var hue,color,borderColor;this.style===Graph3d.STYLE.DOTCOLOR?(hue=240*(1-(point.point.value-this.valueMin)*this.scale.value),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)):this.style===Graph3d.STYLE.DOTSIZE?(color=this.colorDot,borderColor=this.colorDotBorder):(hue=240*(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)),ctx.lineWidth=1,ctx.strokeStyle=borderColor,ctx.fillStyle=color,ctx.beginPath(),ctx.arc(point.screen.x,point.screen.y,radius,0,2*Math.PI,!0),ctx.fill(),ctx.stroke()}}},Graph3d.prototype._redrawDataBar=function(){var i,j,surface,corners,canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};this.dataPoints.sort(sortDepth);var xWidth=this.xBarWidth/2,yWidth=this.yBarWidth/2;for(i=0;i<this.dataPoints.length;i++){var hue,color,borderColor,point=this.dataPoints[i];this.style===Graph3d.STYLE.BARCOLOR?(hue=240*(1-(point.point.value-this.valueMin)*this.scale.value),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)):this.style===Graph3d.STYLE.BARSIZE?(color=this.colorDot,borderColor=this.colorDotBorder):(hue=240*(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)),this.style===Graph3d.STYLE.BARSIZE&&(xWidth=this.xBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),yWidth=this.yBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var me=this,point3d=point.point,top=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,point3d.z)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,point3d.z)}],bottom=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,this.zMin)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,this.zMin)}];top.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point)}),bottom.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point)});var surfaces=[{corners:top,center:Point3d.avg(bottom[0].point,bottom[2].point)},{corners:[top[0],top[1],bottom[1],bottom[0]],center:Point3d.avg(bottom[1].point,bottom[0].point)},{corners:[top[1],top[2],bottom[2],bottom[1]],center:Point3d.avg(bottom[2].point,bottom[1].point)},{corners:[top[2],top[3],bottom[3],bottom[2]],center:Point3d.avg(bottom[3].point,bottom[2].point)},{corners:[top[3],top[0],bottom[0],bottom[3]],center:Point3d.avg(bottom[0].point,bottom[3].point)}];for(point.surfaces=surfaces,j=0;j<surfaces.length;j++){surface=surfaces[j];var transCenter=this._convertPointToTranslation(surface.center);surface.dist=this.showPerspective?transCenter.length():-transCenter.z}for(surfaces.sort(function(a,b){var diff=b.dist-a.dist;return diff?diff:a.corners===top?1:b.corners===top?-1:0}),ctx.lineWidth=1,ctx.strokeStyle=borderColor,ctx.fillStyle=color,j=2;j<surfaces.length;j++)surface=surfaces[j],corners=surface.corners,ctx.beginPath(),ctx.moveTo(corners[3].screen.x,corners[3].screen.y),ctx.lineTo(corners[0].screen.x,corners[0].screen.y),ctx.lineTo(corners[1].screen.x,corners[1].screen.y),ctx.lineTo(corners[2].screen.x,corners[2].screen.y),ctx.lineTo(corners[3].screen.x,corners[3].screen.y),ctx.fill(),ctx.stroke()}}},Graph3d.prototype._redrawDataLine=function(){var point,i,canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen}for(this.dataPoints.length>0&&(point=this.dataPoints[0],ctx.lineWidth=1,ctx.strokeStyle="blue",ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y)),i=1;i<this.dataPoints.length;i++)point=this.dataPoints[i],ctx.lineTo(point.screen.x,point.screen.y);this.dataPoints.length>0&&ctx.stroke()}},Graph3d.prototype._onMouseDown=function(event){if(event=event||window.event,this.leftButtonDown&&this._onMouseUp(event),this.leftButtonDown=event.which?1===event.which:1===event.button,this.leftButtonDown||this.touchDown){this.startMouseX=getMouseX(event),this.startMouseY=getMouseY(event),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var me=this;this.onmousemove=function(event){me._onMouseMove(event)},this.onmouseup=function(event){me._onMouseUp(event)},util.addEventListener(document,"mousemove",me.onmousemove),util.addEventListener(document,"mouseup",me.onmouseup),util.preventDefault(event)}},Graph3d.prototype._onMouseMove=function(event){event=event||window.event;var diffX=parseFloat(getMouseX(event))-this.startMouseX,diffY=parseFloat(getMouseY(event))-this.startMouseY,horizontalNew=this.startArmRotation.horizontal+diffX/200,verticalNew=this.startArmRotation.vertical+diffY/200,snapAngle=4,snapValue=Math.sin(snapAngle/360*2*Math.PI);Math.abs(Math.sin(horizontalNew))<snapValue&&(horizontalNew=Math.round(horizontalNew/Math.PI)*Math.PI-.001),Math.abs(Math.cos(horizontalNew))<snapValue&&(horizontalNew=(Math.round(horizontalNew/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(verticalNew))<snapValue&&(verticalNew=Math.round(verticalNew/Math.PI)*Math.PI),Math.abs(Math.cos(verticalNew))<snapValue&&(verticalNew=(Math.round(verticalNew/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(horizontalNew,verticalNew),this.redraw();var parameters=this.getCameraPosition();this.emit("cameraPositionChange",parameters),util.preventDefault(event)},Graph3d.prototype._onMouseUp=function(event){this.frame.style.cursor="auto",this.leftButtonDown=!1,util.removeEventListener(document,"mousemove",this.onmousemove),util.removeEventListener(document,"mouseup",this.onmouseup),util.preventDefault(event)},Graph3d.prototype._onTooltip=function(event){var delay=300,boundingRect=this.frame.getBoundingClientRect(),mouseX=getMouseX(event)-boundingRect.left,mouseY=getMouseY(event)-boundingRect.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var dataPoint=this._dataPointFromXY(mouseX,mouseY);dataPoint!==this.tooltip.dataPoint&&(dataPoint?this._showTooltip(dataPoint):this._hideTooltip())}else{var me=this;this.tooltipTimeout=setTimeout(function(){me.tooltipTimeout=null;var dataPoint=me._dataPointFromXY(mouseX,mouseY);dataPoint&&me._showTooltip(dataPoint)},delay)}}},Graph3d.prototype._onTouchStart=function(event){this.touchDown=!0;var me=this;this.ontouchmove=function(event){me._onTouchMove(event)},this.ontouchend=function(event){me._onTouchEnd(event)},util.addEventListener(document,"touchmove",me.ontouchmove),util.addEventListener(document,"touchend",me.ontouchend),this._onMouseDown(event)},Graph3d.prototype._onTouchMove=function(event){this._onMouseMove(event)},Graph3d.prototype._onTouchEnd=function(event){this.touchDown=!1,util.removeEventListener(document,"touchmove",this.ontouchmove),util.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(event)},Graph3d.prototype._onWheel=function(event){event||(event=window.event);var delta=0;if(event.wheelDelta?delta=event.wheelDelta/120:event.detail&&(delta=-event.detail/3),delta){var oldLength=this.camera.getArmLength(),newLength=oldLength*(1-delta/10);this.camera.setArmLength(newLength),this.redraw(),this._hideTooltip()}var parameters=this.getCameraPosition();this.emit("cameraPositionChange",parameters),util.preventDefault(event)},Graph3d.prototype._insideTriangle=function(point,triangle){function sign(x){return x>0?1:0>x?-1:0}var a=triangle[0],b=triangle[1],c=triangle[2],as=sign((b.x-a.x)*(point.y-a.y)-(b.y-a.y)*(point.x-a.x)),bs=sign((c.x-b.x)*(point.y-b.y)-(c.y-b.y)*(point.x-b.x)),cs=sign((a.x-c.x)*(point.y-c.y)-(a.y-c.y)*(point.x-c.x));return!(0!=as&&0!=bs&&as!=bs||0!=bs&&0!=cs&&bs!=cs||0!=as&&0!=cs&&as!=cs)},Graph3d.prototype._dataPointFromXY=function(x,y){var i,distMax=100,dataPoint=null,closestDataPoint=null,closestDist=null,center=new Point2d(x,y);if(this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){dataPoint=this.dataPoints[i];var surfaces=dataPoint.surfaces;if(surfaces)for(var s=surfaces.length-1;s>=0;s--){var surface=surfaces[s],corners=surface.corners,triangle1=[corners[0].screen,corners[1].screen,corners[2].screen],triangle2=[corners[2].screen,corners[3].screen,corners[0].screen];if(this._insideTriangle(center,triangle1)||this._insideTriangle(center,triangle2))return dataPoint}}else for(i=0;i<this.dataPoints.length;i++){dataPoint=this.dataPoints[i];var point=dataPoint.screen;if(point){var distX=Math.abs(x-point.x),distY=Math.abs(y-point.y),dist=Math.sqrt(distX*distX+distY*distY);(null===closestDist||closestDist>dist)&&distMax>dist&&(closestDist=dist,closestDataPoint=dataPoint)}}return closestDataPoint},Graph3d.prototype._showTooltip=function(dataPoint){var content,line,dot;this.tooltip?(content=this.tooltip.dom.content,line=this.tooltip.dom.line,dot=this.tooltip.dom.dot):(content=document.createElement("div"),content.style.position="absolute",content.style.padding="10px",content.style.border="1px solid #4d4d4d",content.style.color="#1a1a1a",content.style.background="rgba(255,255,255,0.7)",content.style.borderRadius="2px",content.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",line=document.createElement("div"),line.style.position="absolute",line.style.height="40px",line.style.width="0",line.style.borderLeft="1px solid #4d4d4d",dot=document.createElement("div"),dot.style.position="absolute",dot.style.height="0",dot.style.width="0",dot.style.border="5px solid #4d4d4d",dot.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:content,line:line,dot:dot}}),this._hideTooltip(),this.tooltip.dataPoint=dataPoint,content.innerHTML="function"==typeof this.showTooltip?this.showTooltip(dataPoint.point):"<table><tr><td>x:</td><td>"+dataPoint.point.x+"</td></tr><tr><td>y:</td><td>"+dataPoint.point.y+"</td></tr><tr><td>z:</td><td>"+dataPoint.point.z+"</td></tr></table>",content.style.left="0",content.style.top="0",this.frame.appendChild(content),this.frame.appendChild(line),this.frame.appendChild(dot);var contentWidth=content.offsetWidth,contentHeight=content.offsetHeight,lineHeight=line.offsetHeight,dotWidth=dot.offsetWidth,dotHeight=dot.offsetHeight,left=dataPoint.screen.x-contentWidth/2;left=Math.min(Math.max(left,10),this.frame.clientWidth-10-contentWidth),line.style.left=dataPoint.screen.x+"px",line.style.top=dataPoint.screen.y-lineHeight+"px",content.style.left=left+"px",content.style.top=dataPoint.screen.y-lineHeight-contentHeight+"px",dot.style.left=dataPoint.screen.x-dotWidth/2+"px",dot.style.top=dataPoint.screen.y-dotHeight/2+"px"},Graph3d.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var prop in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(prop)){var elem=this.tooltip.dom[prop];elem&&elem.parentNode&&elem.parentNode.removeChild(elem)}}},module.exports=Graph3d},function(module,exports,__webpack_require__){function Camera(){this.armLocation=new Point3d,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new Point3d,this.cameraRotation=new Point3d(.5*Math.PI,0,0),this.calculateCameraOrientation()}var Point3d=__webpack_require__(10);Camera.prototype.setArmLocation=function(x,y,z){this.armLocation.x=x,this.armLocation.y=y,this.armLocation.z=z,this.calculateCameraOrientation()},Camera.prototype.setArmRotation=function(horizontal,vertical){void 0!==horizontal&&(this.armRotation.horizontal=horizontal),void 0!==vertical&&(this.armRotation.vertical=vertical,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),(void 0!==horizontal||void 0!==vertical)&&this.calculateCameraOrientation()},Camera.prototype.getArmRotation=function(){var rot={};return rot.horizontal=this.armRotation.horizontal,rot.vertical=this.armRotation.vertical,rot},Camera.prototype.setArmLength=function(length){void 0!==length&&(this.armLength=length,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation())},Camera.prototype.getArmLength=function(){return this.armLength},Camera.prototype.getCameraLocation=function(){return this.cameraLocation},Camera.prototype.getCameraRotation=function(){return this.cameraRotation},Camera.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},module.exports=Camera},function(module,exports,__webpack_require__){function Filter(data,column,graph){this.data=data,this.column=column,this.graph=graph,this.index=void 0,this.value=void 0,this.values=graph.getDistinctValues(data.get(),this.column),this.values.sort(function(a,b){return a>b?1:b>a?-1:0}),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,graph.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var DataView=__webpack_require__(4);Filter.prototype.isLoaded=function(){return this.loaded},Filter.prototype.getLoadedProgress=function(){for(var len=this.values.length,i=0;this.dataPoints[i];)i++;return Math.round(i/len*100)},Filter.prototype.getLabel=function(){return this.graph.filterLabel},Filter.prototype.getColumn=function(){return this.column},Filter.prototype.getSelectedValue=function(){return void 0===this.index?void 0:this.values[this.index]},Filter.prototype.getValues=function(){return this.values},Filter.prototype.getValue=function(index){if(index>=this.values.length)throw"Error: index out of range";return this.values[index]},Filter.prototype._getDataPoints=function(index){if(void 0===index&&(index=this.index),void 0===index)return[];var dataPoints;if(this.dataPoints[index])dataPoints=this.dataPoints[index];else{var f={};f.column=this.column,f.value=this.values[index];var dataView=new DataView(this.data,{filter:function(item){return item[f.column]==f.value}}).get();dataPoints=this.graph._getDataPoints(dataView),this.dataPoints[index]=dataPoints}return dataPoints},Filter.prototype.setOnLoadCallback=function(callback){this.onLoadCallback=callback},Filter.prototype.selectValue=function(index){if(index>=this.values.length)throw"Error: index out of range";this.index=index,this.value=this.values[index]},Filter.prototype.loadInBackground=function(index){void 0===index&&(index=0);var frame=this.graph.frame;if(index<this.values.length){{this._getDataPoints(index)}void 0===frame.progress&&(frame.progress=document.createElement("DIV"),frame.progress.style.position="absolute",frame.progress.style.color="gray",frame.appendChild(frame.progress));var progress=this.getLoadedProgress();frame.progress.innerHTML="Loading animation... "+progress+"%",frame.progress.style.bottom="60px",frame.progress.style.left="10px";var me=this;setTimeout(function(){me.loadInBackground(index+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==frame.progress&&(frame.removeChild(frame.progress),frame.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},module.exports=Filter},function(module){function Point2d(x,y){this.x=void 0!==x?x:0,this.y=void 0!==y?y:0}module.exports=Point2d},function(module){function Point3d(x,y,z){this.x=void 0!==x?x:0,this.y=void 0!==y?y:0,this.z=void 0!==z?z:0}Point3d.subtract=function(a,b){var sub=new Point3d;return sub.x=a.x-b.x,sub.y=a.y-b.y,sub.z=a.z-b.z,sub},Point3d.add=function(a,b){var sum=new Point3d;return sum.x=a.x+b.x,sum.y=a.y+b.y,sum.z=a.z+b.z,sum},Point3d.avg=function(a,b){return new Point3d((a.x+b.x)/2,(a.y+b.y)/2,(a.z+b.z)/2)},Point3d.crossProduct=function(a,b){var crossproduct=new Point3d;return crossproduct.x=a.y*b.z-a.z*b.y,crossproduct.y=a.z*b.x-a.x*b.z,crossproduct.z=a.x*b.y-a.y*b.x,crossproduct},Point3d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},module.exports=Point3d},function(module,exports,__webpack_require__){function Slider(container,options){if(void 0===container)throw"Error: No container element defined";if(this.container=container,this.visible=options&&void 0!=options.visible?options.visible:!0,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var me=this;this.frame.slide.onmousedown=function(event){me._onMouseDown(event)},this.frame.prev.onclick=function(event){me.prev(event)},this.frame.play.onclick=function(event){me.togglePlay(event)},this.frame.next.onclick=function(event){me.next(event)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var util=__webpack_require__(1);Slider.prototype.prev=function(){var index=this.getIndex();index>0&&(index--,this.setIndex(index))},Slider.prototype.next=function(){var index=this.getIndex();index<this.values.length-1&&(index++,this.setIndex(index))},Slider.prototype.playNext=function(){var start=new Date,index=this.getIndex();index<this.values.length-1?(index++,this.setIndex(index)):this.playLoop&&(index=0,this.setIndex(index));var end=new Date,diff=end-start,interval=Math.max(this.playInterval-diff,0),me=this;this.playTimeout=setTimeout(function(){me.playNext()},interval)},Slider.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},Slider.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},Slider.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},Slider.prototype.setOnChangeCallback=function(callback){this.onChangeCallback=callback},Slider.prototype.setPlayInterval=function(interval){this.playInterval=interval},Slider.prototype.getPlayInterval=function(){return this.playInterval},Slider.prototype.setPlayLoop=function(doLoop){this.playLoop=doLoop},Slider.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},Slider.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var left=this.indexToLeft(this.index);this.frame.slide.style.left=left+"px"}},Slider.prototype.setValues=function(values){this.values=values,this.values.length>0?this.setIndex(0):this.index=void 0},Slider.prototype.setIndex=function(index){if(!(index<this.values.length))throw"Error: index out of range";this.index=index,this.redraw(),this.onChange()},Slider.prototype.getIndex=function(){return this.index},Slider.prototype.get=function(){return this.values[this.index]},Slider.prototype._onMouseDown=function(event){var leftButtonDown=event.which?1===event.which:1===event.button;if(leftButtonDown){this.startClientX=event.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var me=this;this.onmousemove=function(event){me._onMouseMove(event)},this.onmouseup=function(event){me._onMouseUp(event)},util.addEventListener(document,"mousemove",this.onmousemove),util.addEventListener(document,"mouseup",this.onmouseup),util.preventDefault(event)}},Slider.prototype.leftToIndex=function(left){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,x=left-3,index=Math.round(x/width*(this.values.length-1));return 0>index&&(index=0),index>this.values.length-1&&(index=this.values.length-1),index},Slider.prototype.indexToLeft=function(index){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,x=index/(this.values.length-1)*width,left=x+3;return left},Slider.prototype._onMouseMove=function(event){var diff=event.clientX-this.startClientX,x=this.startSlideX+diff,index=this.leftToIndex(x);this.setIndex(index),util.preventDefault()},Slider.prototype._onMouseUp=function(){this.frame.style.cursor="auto",util.removeEventListener(document,"mousemove",this.onmousemove),util.removeEventListener(document,"mouseup",this.onmouseup),util.preventDefault()},module.exports=Slider},function(module){function StepNumber(start,end,step,prettyStep){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(start,end,step,prettyStep)}StepNumber.prototype.setRange=function(start,end,step,prettyStep){this._start=start?start:0,this._end=end?end:0,this.setStep(step,prettyStep)},StepNumber.prototype.setStep=function(step,prettyStep){void 0===step||0>=step||(void 0!==prettyStep&&(this.prettyStep=prettyStep),this._step=this.prettyStep===!0?StepNumber.calculatePrettyStep(step):step)},StepNumber.calculatePrettyStep=function(step){var log10=function(x){return Math.log(x)/Math.LN10},step1=Math.pow(10,Math.round(log10(step))),step2=2*Math.pow(10,Math.round(log10(step/2))),step5=5*Math.pow(10,Math.round(log10(step/5))),prettyStep=step1;return Math.abs(step2-step)<=Math.abs(prettyStep-step)&&(prettyStep=step2),Math.abs(step5-step)<=Math.abs(prettyStep-step)&&(prettyStep=step5),0>=prettyStep&&(prettyStep=1),prettyStep},StepNumber.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},StepNumber.prototype.getStep=function(){return this._step},StepNumber.prototype.start=function(){this._current=this._start-this._start%this._step},StepNumber.prototype.next=function(){this._current+=this._step},StepNumber.prototype.end=function(){return this._current>this._end},module.exports=StepNumber},function(module,exports,__webpack_require__){function Timeline(container,items,groups,options){if(!(this instanceof Timeline))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(groups)||groups instanceof DataSet)&&groups instanceof Object){var forthArgument=options;options=groups,groups=forthArgument}var me=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null},this.options=util.deepExtend({},this.defaultOptions),this._create(container),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return me.timeAxis.step.scale},getStep:function(){return me.timeAxis.step.step},toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}},this.range=new Range(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new TimeAxis(this.body),this.components.push(this.timeAxis),this.currentTime=new CurrentTime(this.body),this.components.push(this.currentTime),this.customTime=new CustomTime(this.body),this.components.push(this.customTime),this.itemSet=new ItemSet(this.body),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,options&&this.setOptions(options),groups&&this.setGroups(groups),items?this.setItems(items):this._redraw()}var util=(__webpack_require__(56),__webpack_require__(45),__webpack_require__(1)),DataSet=__webpack_require__(3),DataView=__webpack_require__(4),Range=__webpack_require__(17),Core=__webpack_require__(46),TimeAxis=__webpack_require__(35),CurrentTime=__webpack_require__(26),CustomTime=__webpack_require__(27),ItemSet=__webpack_require__(32);Timeline.prototype=new Core,Timeline.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},Timeline.prototype.setItems=function(items){var newDataSet,initialLoad=null==this.itemsData;if(newDataSet=items?items instanceof DataSet||items instanceof DataView?items:new DataSet(items,{type:{start:"Date",end:"Date"}}):null,this.itemsData=newDataSet,this.itemSet&&this.itemSet.setItems(newDataSet),initialLoad)if(void 0!=this.options.start||void 0!=this.options.end){if(void 0==this.options.start||void 0==this.options.end)var dataRange=this._getDataRange();var start=void 0!=this.options.start?this.options.start:dataRange.start,end=void 0!=this.options.end?this.options.end:dataRange.end;this.setWindow(start,end,{animate:!1})}else this.fit({animate:!1})},Timeline.prototype.setGroups=function(groups){var newDataSet;newDataSet=groups?groups instanceof DataSet||groups instanceof DataView?groups:new DataSet(groups):null,this.groupsData=newDataSet,this.itemSet.setGroups(newDataSet)},Timeline.prototype.setSelection=function(ids,options){this.itemSet&&this.itemSet.setSelection(ids),options&&options.focus&&this.focus(ids,options)},Timeline.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},Timeline.prototype.focus=function(id,options){if(this.itemsData&&void 0!=id){var ids=Array.isArray(id)?id:[id],itemsData=this.itemsData.getDataSet().get(ids,{type:{start:"Date",end:"Date"}}),start=null,end=null;if(itemsData.forEach(function(itemData){var s=itemData.start.valueOf(),e="end"in itemData?itemData.end.valueOf():itemData.start.valueOf();(null===start||start>s)&&(start=s),(null===end||e>end)&&(end=e)}),null!==start&&null!==end){var middle=(start+end)/2,interval=Math.max(this.range.end-this.range.start,1.1*(end-start)),animate=options&&void 0!==options.animate?options.animate:!0;this.range.setRange(middle-interval/2,middle+interval/2,animate)}}},Timeline.prototype.getItemRange=function(){var dataset=this.itemsData.getDataSet(),min=null,max=null;if(dataset){var minItem=dataset.min("start");min=minItem?util.convert(minItem.start,"Date").valueOf():null;var maxStartItem=dataset.max("start");maxStartItem&&(max=util.convert(maxStartItem.start,"Date").valueOf());var maxEndItem=dataset.max("end");maxEndItem&&(max=null==max?util.convert(maxEndItem.end,"Date").valueOf():Math.max(max,util.convert(maxEndItem.end,"Date").valueOf()))}return{min:null!=min?new Date(min):null,max:null!=max?new Date(max):null}},module.exports=Timeline},function(module,exports,__webpack_require__){function Graph2d(container,items,groups,options){if(!(Array.isArray(groups)||groups instanceof DataSet)&&groups instanceof Object){var forthArgument=options;options=groups,groups=forthArgument}var me=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null},this.options=util.deepExtend({},this.defaultOptions),this._create(container),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}},this.range=new Range(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new TimeAxis(this.body),this.components.push(this.timeAxis),this.currentTime=new CurrentTime(this.body),this.components.push(this.currentTime),this.customTime=new CustomTime(this.body),this.components.push(this.customTime),this.linegraph=new LineGraph(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,options&&this.setOptions(options),groups&&this.setGroups(groups),items?this.setItems(items):this._redraw()
}var util=(__webpack_require__(56),__webpack_require__(45),__webpack_require__(1)),DataSet=__webpack_require__(3),DataView=__webpack_require__(4),Range=__webpack_require__(17),Core=__webpack_require__(46),TimeAxis=__webpack_require__(35),CurrentTime=__webpack_require__(26),CustomTime=__webpack_require__(27),LineGraph=__webpack_require__(34);Graph2d.prototype=new Core,Graph2d.prototype.setItems=function(items){var newDataSet,initialLoad=null==this.itemsData;if(newDataSet=items?items instanceof DataSet||items instanceof DataView?items:new DataSet(items,{type:{start:"Date",end:"Date"}}):null,this.itemsData=newDataSet,this.linegraph&&this.linegraph.setItems(newDataSet),initialLoad)if(void 0!=this.options.start||void 0!=this.options.end){var start=void 0!=this.options.start?this.options.start:null,end=void 0!=this.options.end?this.options.end:null;this.setWindow(start,end,{animate:!1})}else this.fit({animate:!1})},Graph2d.prototype.setGroups=function(groups){var newDataSet;newDataSet=groups?groups instanceof DataSet||groups instanceof DataView?groups:new DataSet(groups):null,this.groupsData=newDataSet,this.linegraph.setGroups(newDataSet)},Graph2d.prototype.getLegend=function(groupId,width,height){return void 0===width&&(width=15),void 0===height&&(height=15),void 0!==this.linegraph.groups[groupId]?this.linegraph.groups[groupId].getLegend(width,height):"cannot find group:"+groupId},Graph2d.prototype.isGroupVisible=function(groupId){return void 0!==this.linegraph.groups[groupId]?this.linegraph.groups[groupId].visible&&(void 0===this.linegraph.options.groups.visibility[groupId]||1==this.linegraph.options.groups.visibility[groupId]):!1},Graph2d.prototype.getItemRange=function(){var min=null,max=null;for(var groupId in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(groupId)&&1==this.linegraph.groups[groupId].visible)for(var i=0;i<this.linegraph.groups[groupId].itemsData.length;i++){var item=this.linegraph.groups[groupId].itemsData[i],value=util.convert(item.x,"Date").valueOf();min=null==min?value:min>value?value:min,max=null==max?value:value>max?value:max}return{min:null!=min?new Date(min):null,max:null!=max?new Date(max):null}},module.exports=Graph2d},function(module,exports,__webpack_require__){var moment=__webpack_require__(44);exports.convertHiddenOptions=function(body,hiddenDates){if(body.hiddenDates=[],hiddenDates&&1==Array.isArray(hiddenDates)){for(var i=0;i<hiddenDates.length;i++)if(void 0===hiddenDates[i].repeat){var dateItem={};dateItem.start=moment(hiddenDates[i].start).toDate().valueOf(),dateItem.end=moment(hiddenDates[i].end).toDate().valueOf(),body.hiddenDates.push(dateItem)}body.hiddenDates.sort(function(a,b){return a.start-b.start})}},exports.updateHiddenDates=function(body,hiddenDates){if(hiddenDates&&void 0!==body.domProps.centerContainer.width){exports.convertHiddenOptions(body,hiddenDates);for(var start=moment(body.range.start),end=moment(body.range.end),totalRange=body.range.end-body.range.start,pixelTime=totalRange/body.domProps.centerContainer.width,i=0;i<hiddenDates.length;i++)if(void 0!==hiddenDates[i].repeat){var startDate=moment(hiddenDates[i].start),endDate=moment(hiddenDates[i].end);if("Invalid Date"==startDate._d)throw new Error("Supplied start date is not valid: "+hiddenDates[i].start);if("Invalid Date"==endDate._d)throw new Error("Supplied end date is not valid: "+hiddenDates[i].end);var duration=endDate-startDate;if(duration>=4*pixelTime){var offset=0,runUntil=end.clone();switch(hiddenDates[i].repeat){case"daily":startDate.day()!=endDate.day()&&(offset=1),startDate.dayOfYear(start.dayOfYear()),startDate.year(start.year()),startDate.subtract(7,"days"),endDate.dayOfYear(start.dayOfYear()),endDate.year(start.year()),endDate.subtract(7-offset,"days"),runUntil.add(1,"weeks");break;case"weekly":var dayOffset=endDate.diff(startDate,"days"),day=startDate.day();startDate.date(start.date()),startDate.month(start.month()),startDate.year(start.year()),endDate=startDate.clone(),startDate.day(day),endDate.day(day),endDate.add(dayOffset,"days"),startDate.subtract(1,"weeks"),endDate.subtract(1,"weeks"),runUntil.add(1,"weeks");break;case"monthly":startDate.month()!=endDate.month()&&(offset=1),startDate.month(start.month()),startDate.year(start.year()),startDate.subtract(1,"months"),endDate.month(start.month()),endDate.year(start.year()),endDate.subtract(1,"months"),endDate.add(offset,"months"),runUntil.add(1,"months");break;case"yearly":startDate.year()!=endDate.year()&&(offset=1),startDate.year(start.year()),startDate.subtract(1,"years"),endDate.year(start.year()),endDate.subtract(1,"years"),endDate.add(offset,"years"),runUntil.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat)}for(;runUntil>startDate;)switch(body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()}),hiddenDates[i].repeat){case"daily":startDate.add(1,"days"),endDate.add(1,"days");break;case"weekly":startDate.add(1,"weeks"),endDate.add(1,"weeks");break;case"monthly":startDate.add(1,"months"),endDate.add(1,"months");break;case"yearly":startDate.add(1,"y"),endDate.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat)}body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()})}}exports.removeDuplicates(body);var startHidden=exports.isHidden(body.range.start,body.hiddenDates),endHidden=exports.isHidden(body.range.end,body.hiddenDates),rangeStart=body.range.start,rangeEnd=body.range.end;1==startHidden.hidden&&(rangeStart=1==body.range.startToFront?startHidden.startDate-1:startHidden.endDate+1),1==endHidden.hidden&&(rangeEnd=1==body.range.endToFront?endHidden.startDate-1:endHidden.endDate+1),(1==startHidden.hidden||1==endHidden.hidden)&&body.range._applyRange(rangeStart,rangeEnd)}},exports.removeDuplicates=function(body){for(var hiddenDates=body.hiddenDates,safeDates=[],i=0;i<hiddenDates.length;i++)for(var j=0;j<hiddenDates.length;j++)i!=j&&1!=hiddenDates[j].remove&&1!=hiddenDates[i].remove&&(hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end?hiddenDates[j].remove=!0:hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].start<=hiddenDates[i].end?(hiddenDates[i].end=hiddenDates[j].end,hiddenDates[j].remove=!0):hiddenDates[j].end>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end&&(hiddenDates[i].start=hiddenDates[j].start,hiddenDates[j].remove=!0));for(var i=0;i<hiddenDates.length;i++)hiddenDates[i].remove!==!0&&safeDates.push(hiddenDates[i]);body.hiddenDates=safeDates,body.hiddenDates.sort(function(a,b){return a.start-b.start})},exports.printDates=function(dates){for(var i=0;i<dates.length;i++)console.log(i,new Date(dates[i].start),new Date(dates[i].end),dates[i].start,dates[i].end,dates[i].remove)},exports.stepOverHiddenDates=function(timeStep,previousTime){for(var stepInHidden=!1,currentValue=timeStep.current.valueOf(),i=0;i<timeStep.hiddenDates.length;i++){var startDate=timeStep.hiddenDates[i].start,endDate=timeStep.hiddenDates[i].end;if(currentValue>=startDate&&endDate>currentValue){stepInHidden=!0;break}}if(1==stepInHidden&&currentValue<timeStep._end.valueOf()&&currentValue!=previousTime){var prevValue=moment(previousTime),newValue=moment(endDate);prevValue.year()!=newValue.year()?timeStep.switchedYear=!0:prevValue.month()!=newValue.month()?timeStep.switchedMonth=!0:prevValue.dayOfYear()!=newValue.dayOfYear()&&(timeStep.switchedDay=!0),timeStep.current=newValue.toDate()}},exports.toScreen=function(Core,time,width){if(0==Core.body.hiddenDates.length){var conversion=Core.range.conversion(width);return(time.valueOf()-conversion.offset)*conversion.scale}var hidden=exports.isHidden(time,Core.body.hiddenDates);1==hidden.hidden&&(time=hidden.startDate);var duration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end);time=exports.correctTimeForHidden(Core.body.hiddenDates,Core.range,time);var conversion=Core.range.conversion(width,duration);return(time.valueOf()-conversion.offset)*conversion.scale},exports.toTime=function(Core,x,width){if(0==Core.body.hiddenDates.length){var conversion=Core.range.conversion(width);return new Date(x/conversion.scale+conversion.offset)}var hiddenDuration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end),totalDuration=Core.range.end-Core.range.start-hiddenDuration,partialDuration=totalDuration*x/width,accumulatedHiddenDuration=exports.getAccumulatedHiddenDuration(Core.body.hiddenDates,Core.range,partialDuration),newTime=new Date(accumulatedHiddenDuration+partialDuration+Core.range.start);return newTime},exports.getHiddenDurationBetween=function(hiddenDates,start,end){for(var duration=0,i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;startDate>=start&&end>endDate&&(duration+=endDate-startDate)}return duration},exports.correctTimeForHidden=function(hiddenDates,range,time){return time=moment(time).toDate().valueOf(),time-=exports.getHiddenDurationBefore(hiddenDates,range,time)},exports.getHiddenDurationBefore=function(hiddenDates,range,time){var timeOffset=0;time=moment(time).toDate().valueOf();for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;startDate>=range.start&&endDate<range.end&&time>=endDate&&(timeOffset+=endDate-startDate)}return timeOffset},exports.getAccumulatedHiddenDuration=function(hiddenDates,range,requiredDuration){for(var hiddenDuration=0,duration=0,previousPoint=range.start,i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;if(startDate>=range.start&&endDate<range.end){if(duration+=startDate-previousPoint,previousPoint=endDate,duration>=requiredDuration)break;hiddenDuration+=endDate-startDate}}return hiddenDuration},exports.snapAwayFromHidden=function(hiddenDates,time,direction,correctionEnabled){var isHidden=exports.isHidden(time,hiddenDates);return 1==isHidden.hidden?0>direction?1==correctionEnabled?isHidden.startDate-(isHidden.endDate-time)-1:isHidden.startDate-1:1==correctionEnabled?isHidden.endDate+(time-isHidden.startDate)+1:isHidden.endDate+1:time},exports.isHidden=function(time,hiddenDates){for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;if(time>=startDate&&endDate>time)return{hidden:!0,startDate:startDate,endDate:endDate}}return{hidden:!1,startDate:startDate,endDate:endDate}}},function(module){function DataStep(start,end,minimumStep,containerHeight,customRange,alignZeros){this.current=0,this.autoScale=!0,this.stepIndex=0,this.step=1,this.scale=1,this.marginStart,this.marginEnd,this.deadSpace=0,this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.alignZeros=alignZeros,this.setRange(start,end,minimumStep,containerHeight,customRange)}DataStep.prototype.setRange=function(start,end,minimumStep,containerHeight,customRange){this._start=void 0===customRange.min?start:customRange.min,this._end=void 0===customRange.max?end:customRange.max,this._start==this._end&&(this._start-=.75,this._end+=1),1==this.autoScale&&this.setMinimumStep(minimumStep,containerHeight),this.setFirst(customRange)},DataStep.prototype.setMinimumStep=function(minimumStep,containerHeight){var size=this._end-this._start,safeSize=1.2*size,minimumStepValue=minimumStep*(safeSize/containerHeight),orderOfMagnitude=Math.round(Math.log(safeSize)/Math.LN10),minorStepIdx=-1,magnitudefactor=Math.pow(10,orderOfMagnitude),start=0;0>orderOfMagnitude&&(start=orderOfMagnitude);for(var solutionFound=!1,i=start;Math.abs(i)<=Math.abs(orderOfMagnitude);i++){magnitudefactor=Math.pow(10,i);for(var j=0;j<this.minorSteps.length;j++){var stepSize=magnitudefactor*this.minorSteps[j];if(stepSize>=minimumStepValue){solutionFound=!0,minorStepIdx=j;break}}if(1==solutionFound)break}this.stepIndex=minorStepIdx,this.scale=magnitudefactor,this.step=magnitudefactor*this.minorSteps[minorStepIdx]},DataStep.prototype.setFirst=function(customRange){void 0===customRange&&(customRange={});var niceStart=void 0===customRange.min?this._start-2*this.scale*this.minorSteps[this.stepIndex]:customRange.min,niceEnd=void 0===customRange.max?this._end+this.scale*this.minorSteps[this.stepIndex]:customRange.max;this.marginEnd=void 0===customRange.max?this.roundToMinor(niceEnd):customRange.max,this.marginStart=void 0===customRange.min?this.roundToMinor(niceStart):customRange.min,1==this.alignZeros&&(this.marginEnd-this.marginStart)%this.step!=0&&(this.marginEnd+=this.marginEnd%this.step),this.deadSpace=this.roundToMinor(niceEnd)-niceEnd+this.roundToMinor(niceStart)-niceStart,this.marginRange=this.marginEnd-this.marginStart,this.current=this.marginEnd},DataStep.prototype.roundToMinor=function(value){var rounded=value-value%(this.scale*this.minorSteps[this.stepIndex]);return value%(this.scale*this.minorSteps[this.stepIndex])>.5*this.scale*this.minorSteps[this.stepIndex]?rounded+this.scale*this.minorSteps[this.stepIndex]:rounded},DataStep.prototype.hasNext=function(){return this.current>=this.marginStart},DataStep.prototype.next=function(){var prev=this.current;this.current-=this.step,this.current==prev&&(this.current=this._end)},DataStep.prototype.previous=function(){this.current+=this.step,this.marginEnd+=this.step,this.marginRange=this.marginEnd-this.marginStart},DataStep.prototype.getCurrent=function(decimals){var current=Math.abs(this.current)<this.step/2?0:this.current,toPrecision=""+Number(current).toPrecision(5);if(void 0===decimals||isNaN(Number(decimals))){if(-1!=toPrecision.indexOf(",")||-1!=toPrecision.indexOf("."))for(var i=toPrecision.length-1;i>0;i--){if("0"!=toPrecision[i]){if("."==toPrecision[i]||","==toPrecision[i]){toPrecision=toPrecision.slice(0,i);break}break}toPrecision=toPrecision.slice(0,i)}}else{var exp="",index=toPrecision.indexOf("e");if(-1!=index&&(exp=toPrecision.slice(index),toPrecision=toPrecision.slice(0,index)),index=Math.max(toPrecision.indexOf(","),toPrecision.indexOf(".")),-1===index?(0!==decimals&&(toPrecision+="."),index=toPrecision.length+decimals):0!==decimals&&(index+=decimals+1),index>toPrecision.length)for(var cnt=index-toPrecision.length;cnt>0;cnt--)toPrecision+="0";else toPrecision=toPrecision.slice(0,index);toPrecision+=exp}return toPrecision},DataStep.prototype.isMajor=function(){return this.current%(this.scale*this.majorSteps[this.stepIndex])==0},module.exports=DataStep},function(module,exports,__webpack_require__){function Range(body,options){var now=moment().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=now.clone().add(-3,"days").valueOf(),this.end=now.clone().add(4,"days").valueOf(),this.body=body,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={start:null,end:null,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=util.extend({},this.defaultOptions),this.props={touch:{}},this.animateTimer=null,this.body.emitter.on("dragstart",this._onDragStart.bind(this)),this.body.emitter.on("drag",this._onDrag.bind(this)),this.body.emitter.on("dragend",this._onDragEnd.bind(this)),this.body.emitter.on("hold",this._onHold.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("DOMMouseScroll",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(options)}function validateDirection(direction){if("horizontal"!=direction&&"vertical"!=direction)throw new TypeError('Unknown direction "'+direction+'". Choose "horizontal" or "vertical".')}function getPointer(touch,element){return{x:touch.pageX-util.getAbsoluteLeft(element),y:touch.pageY-util.getAbsoluteTop(element)}}var util=__webpack_require__(1),hammerUtil=__webpack_require__(47),moment=__webpack_require__(44),Component=__webpack_require__(25),DateUtil=__webpack_require__(15);Range.prototype=new Component,Range.prototype.setOptions=function(options){if(options){var fields=["direction","min","max","zoomMin","zoomMax","moveable","zoomable","activate","hiddenDates"];util.selectiveExtend(fields,this.options,options),("start"in options||"end"in options)&&this.setRange(options.start,options.end)}},Range.prototype.setRange=function(start,end,animate,byUser){byUser!==!0&&(byUser=!1);var _start=void 0!=start?util.convert(start,"Date").valueOf():null,_end=void 0!=end?util.convert(end,"Date").valueOf():null;if(this._cancelAnimation(),animate){var me=this,initStart=this.start,initEnd=this.end,duration="number"==typeof animate?animate:500,initTime=(new Date).valueOf(),anyChanged=!1,next=function(){if(!me.props.touch.dragging){var now=(new Date).valueOf(),time=now-initTime,done=time>duration,s=done||null===_start?_start:util.easeInOutQuad(time,initStart,_start,duration),e=done||null===_end?_end:util.easeInOutQuad(time,initEnd,_end,duration);changed=me._applyRange(s,e),DateUtil.updateHiddenDates(me.body,me.options.hiddenDates),anyChanged=anyChanged||changed,changed&&me.body.emitter.emit("rangechange",{start:new Date(me.start),end:new Date(me.end),byUser:byUser}),done?anyChanged&&me.body.emitter.emit("rangechanged",{start:new Date(me.start),end:new Date(me.end),byUser:byUser}):me.animateTimer=setTimeout(next,20)}};return next()}var changed=this._applyRange(_start,_end);if(DateUtil.updateHiddenDates(this.body,this.options.hiddenDates),changed){var params={start:new Date(this.start),end:new Date(this.end),byUser:byUser};this.body.emitter.emit("rangechange",params),this.body.emitter.emit("rangechanged",params)}},Range.prototype._cancelAnimation=function(){this.animateTimer&&(clearTimeout(this.animateTimer),this.animateTimer=null)},Range.prototype._applyRange=function(start,end){var diff,newStart=null!=start?util.convert(start,"Date").valueOf():this.start,newEnd=null!=end?util.convert(end,"Date").valueOf():this.end,max=null!=this.options.max?util.convert(this.options.max,"Date").valueOf():null,min=null!=this.options.min?util.convert(this.options.min,"Date").valueOf():null;if(isNaN(newStart)||null===newStart)throw new Error('Invalid start "'+start+'"');if(isNaN(newEnd)||null===newEnd)throw new Error('Invalid end "'+end+'"');if(newStart>newEnd&&(newEnd=newStart),null!==min&&min>newStart&&(diff=min-newStart,newStart+=diff,newEnd+=diff,null!=max&&newEnd>max&&(newEnd=max)),null!==max&&newEnd>max&&(diff=newEnd-max,newStart-=diff,newEnd-=diff,null!=min&&min>newStart&&(newStart=min)),null!==this.options.zoomMin){var zoomMin=parseFloat(this.options.zoomMin);0>zoomMin&&(zoomMin=0),zoomMin>newEnd-newStart&&(this.end-this.start===zoomMin&&newStart>this.start&&newEnd<this.end?(newStart=this.start,newEnd=this.end):(diff=zoomMin-(newEnd-newStart),newStart-=diff/2,newEnd+=diff/2))}if(null!==this.options.zoomMax){var zoomMax=parseFloat(this.options.zoomMax);0>zoomMax&&(zoomMax=0),newEnd-newStart>zoomMax&&(this.end-this.start===zoomMax&&newStart<this.start&&newEnd>this.end?(newStart=this.start,newEnd=this.end):(diff=newEnd-newStart-zoomMax,newStart+=diff/2,newEnd-=diff/2))}var changed=this.start!=newStart||this.end!=newEnd;return newStart>=this.start&&newStart<=this.end||newEnd>=this.start&&newEnd<=this.end||this.start>=newStart&&this.start<=newEnd||this.end>=newStart&&this.end<=newEnd||this.body.emitter.emit("checkRangedItems"),this.start=newStart,this.end=newEnd,changed},Range.prototype.getRange=function(){return{start:this.start,end:this.end}},Range.prototype.conversion=function(width,totalHidden){return Range.conversion(this.start,this.end,width,totalHidden)},Range.conversion=function(start,end,width,totalHidden){return void 0===totalHidden&&(totalHidden=0),0!=width&&end-start!=0?{offset:start,scale:width/(end-start-totalHidden)}:{offset:0,scale:1}},Range.prototype._onDragStart=function(){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},Range.prototype._onDrag=function(event){if(this.options.moveable&&this.props.touch.allowDragging){var direction=this.options.direction;validateDirection(direction);var delta="horizontal"==direction?event.gesture.deltaX:event.gesture.deltaY;delta-=this.deltaDifference;var interval=this.props.touch.end-this.props.touch.start,duration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);interval-=duration;var width="horizontal"==direction?this.body.domProps.center.width:this.body.domProps.center.height,diffRange=-delta/width*interval,newStart=this.props.touch.start+diffRange,newEnd=this.props.touch.end+diffRange,safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,this.previousDelta-delta,!0),safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,this.previousDelta-delta,!0);if(safeStart!=newStart||safeEnd!=newEnd)return this.deltaDifference+=delta,this.props.touch.start=safeStart,this.props.touch.end=safeEnd,void this._onDrag(event);this.previousDelta=delta,this._applyRange(newStart,newEnd),this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end),byUser:!0})}},Range.prototype._onDragEnd=function(){this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0}))},Range.prototype._onMouseWheel=function(event){if(this.options.zoomable&&this.options.moveable){var delta=0;if(event.wheelDelta?delta=event.wheelDelta/120:event.detail&&(delta=-event.detail/3),delta){var scale;scale=0>delta?1-delta/5:1/(1+delta/5);var gesture=hammerUtil.fakeGesture(this,event),pointer=getPointer(gesture.center,this.body.dom.center),pointerDate=this._pointerToDate(pointer);this.zoom(scale,pointerDate,delta)}event.preventDefault()}},Range.prototype._onTouch=function(){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},Range.prototype._onHold=function(){this.props.touch.allowDragging=!1},Range.prototype._onPinch=function(event){if(this.options.zoomable&&this.options.moveable&&(this.props.touch.allowDragging=!1,event.gesture.touches.length>1)){this.props.touch.center||(this.props.touch.center=getPointer(event.gesture.center,this.body.dom.center));var scale=1/(event.gesture.scale+this.scaleOffset),centerDate=this._pointerToDate(this.props.touch.center),hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this,centerDate),hiddenDurationAfter=hiddenDuration-hiddenDurationBefore,newStart=centerDate-hiddenDurationBefore+(this.props.touch.start-(centerDate-hiddenDurationBefore))*scale,newEnd=centerDate+hiddenDurationAfter+(this.props.touch.end-(centerDate+hiddenDurationAfter))*scale;this.startToFront=1-scale>0?!1:!0,this.endToFront=scale-1>0?!1:!0;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,1-scale,!0),safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,scale-1,!0);(safeStart!=newStart||safeEnd!=newEnd)&&(this.props.touch.start=safeStart,this.props.touch.end=safeEnd,this.scaleOffset=1-event.gesture.scale,newStart=safeStart,newEnd=safeEnd),this.setRange(newStart,newEnd,!1,!0),this.startToFront=!1,this.endToFront=!0}},Range.prototype._pointerToDate=function(pointer){var conversion,direction=this.options.direction;if(validateDirection(direction),"horizontal"==direction)return this.body.util.toTime(pointer.x).valueOf();var height=this.body.domProps.center.height;return conversion=this.conversion(height),pointer.y/conversion.scale+conversion.offset},Range.prototype.zoom=function(scale,center,delta){null==center&&(center=(this.start+this.end)/2);var hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this,center),hiddenDurationAfter=hiddenDuration-hiddenDurationBefore,newStart=center-hiddenDurationBefore+(this.start-(center-hiddenDurationBefore))*scale,newEnd=center+hiddenDurationAfter+(this.end-(center+hiddenDurationAfter))*scale;this.startToFront=delta>0?!1:!0,this.endToFront=-delta>0?!1:!0;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,delta,!0),safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,-delta,!0);(safeStart!=newStart||safeEnd!=newEnd)&&(newStart=safeStart,newEnd=safeEnd),this.setRange(newStart,newEnd,!1,!0),this.startToFront=!1,this.endToFront=!0},Range.prototype.move=function(delta){var diff=this.end-this.start,newStart=this.start+diff*delta,newEnd=this.end+diff*delta;this.start=newStart,this.end=newEnd},Range.prototype.moveTo=function(moveTo){var center=(this.start+this.end)/2,diff=center-moveTo,newStart=this.start-diff,newEnd=this.end-diff;this.setRange(newStart,newEnd)},module.exports=Range},function(module,exports){var EPSILON=.001;exports.orderByStart=function(items){items.sort(function(a,b){return a.data.start-b.data.start})},exports.orderByEnd=function(items){items.sort(function(a,b){var aTime="end"in a.data?a.data.end:a.data.start,bTime="end"in b.data?b.data.end:b.data.start;return aTime-bTime})},exports.stack=function(items,margin,force){var i,iMax;if(force)for(i=0,iMax=items.length;iMax>i;i++)items[i].top=null;for(i=0,iMax=items.length;iMax>i;i++){var item=items[i];if(item.stack&&null===item.top){item.top=margin.axis;do{for(var collidingItem=null,j=0,jj=items.length;jj>j;j++){var other=items[j];if(null!==other.top&&other!==item&&other.stack&&exports.collision(item,other,margin.item)){collidingItem=other;break}}null!=collidingItem&&(item.top=collidingItem.top+collidingItem.height+margin.item.vertical)}while(collidingItem)}}},exports.nostack=function(items,margin,subgroups){var i,iMax,newTop;for(i=0,iMax=items.length;iMax>i;i++)if(void 0!==items[i].data.subgroup){newTop=margin.axis;for(var subgroup in subgroups)subgroups.hasOwnProperty(subgroup)&&1==subgroups[subgroup].visible&&subgroups[subgroup].index<subgroups[items[i].data.subgroup].index&&(newTop+=subgroups[subgroup].height+margin.item.vertical);items[i].top=newTop}else items[i].top=margin.axis},exports.collision=function(a,b,margin){return a.left-margin.horizontal+EPSILON<b.left+b.width&&a.left+a.width+margin.horizontal-EPSILON>b.left&&a.top-margin.vertical+EPSILON<b.top+b.height&&a.top+a.height+margin.vertical-EPSILON>b.top}},function(module,exports,__webpack_require__){function TimeStep(start,end,minimumStep,hiddenDates){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale="day",this.step=1,this.setRange(start,end,minimumStep),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,this.hiddenDates=hiddenDates,void 0===hiddenDates&&(this.hiddenDates=[]),this.format=TimeStep.FORMAT}var moment=__webpack_require__(44),DateUtil=__webpack_require__(15),util=__webpack_require__(1);TimeStep.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},TimeStep.prototype.setFormat=function(format){var defaultFormat=util.deepExtend({},TimeStep.FORMAT);this.format=util.deepExtend(defaultFormat,format)},TimeStep.prototype.setRange=function(start,end,minimumStep){if(!(start instanceof Date&&end instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=start?new Date(start.valueOf()):new Date,this._end=void 0!=end?new Date(end.valueOf()):new Date,this.autoScale&&this.setMinimumStep(minimumStep)},TimeStep.prototype.first=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},TimeStep.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case"month":this.current.setDate(1);case"day":case"weekday":this.current.setHours(0);case"hour":this.current.setMinutes(0);case"minute":this.current.setSeconds(0);case"second":this.current.setMilliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case"second":this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case"minute":this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case"hour":this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case"weekday":case"day":this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case"month":this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case"year":this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}},TimeStep.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},TimeStep.prototype.next=function(){var prev=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case"millisecond":this.current=new Date(this.current.valueOf()+this.step);break;case"second":this.current=new Date(this.current.valueOf()+1e3*this.step);break;case"minute":this.current=new Date(this.current.valueOf()+1e3*this.step*60);break;case"hour":this.current=new Date(this.current.valueOf()+1e3*this.step*60*60);var h=this.current.getHours();this.current.setHours(h-h%this.step);break;case"weekday":case"day":this.current.setDate(this.current.getDate()+this.step);break;case"month":this.current.setMonth(this.current.getMonth()+this.step);break;case"year":this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case"millisecond":this.current=new Date(this.current.valueOf()+this.step);break;case"second":this.current.setSeconds(this.current.getSeconds()+this.step);break;case"minute":this.current.setMinutes(this.current.getMinutes()+this.step);break;case"hour":this.current.setHours(this.current.getHours()+this.step);break;case"weekday":case"day":this.current.setDate(this.current.getDate()+this.step);break;case"month":this.current.setMonth(this.current.getMonth()+this.step);break;case"year":this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case"second":this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case"minute":this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case"hour":this.current.getHours()<this.step&&this.current.setHours(0);break;case"weekday":case"day":this.current.getDate()<this.step+1&&this.current.setDate(1);break;case"month":this.current.getMonth()<this.step&&this.current.setMonth(0);break;case"year":}this.current.valueOf()==prev&&(this.current=new Date(this._end.valueOf())),DateUtil.stepOverHiddenDates(this,prev)},TimeStep.prototype.getCurrent=function(){return this.current},TimeStep.prototype.setScale=function(params){params&&"string"==typeof params.scale&&(this.scale=params.scale,this.step=params.step>0?params.step:1,this.autoScale=!1)},TimeStep.prototype.setAutoScale=function(enable){this.autoScale=enable},TimeStep.prototype.setMinimumStep=function(minimumStep){if(void 0!=minimumStep){var stepYear=31104e6,stepMonth=2592e6,stepDay=864e5,stepHour=36e5,stepMinute=6e4,stepSecond=1e3,stepMillisecond=1;1e3*stepYear>minimumStep&&(this.scale="year",this.step=1e3),500*stepYear>minimumStep&&(this.scale="year",this.step=500),100*stepYear>minimumStep&&(this.scale="year",this.step=100),50*stepYear>minimumStep&&(this.scale="year",this.step=50),10*stepYear>minimumStep&&(this.scale="year",this.step=10),5*stepYear>minimumStep&&(this.scale="year",this.step=5),stepYear>minimumStep&&(this.scale="year",this.step=1),3*stepMonth>minimumStep&&(this.scale="month",this.step=3),stepMonth>minimumStep&&(this.scale="month",this.step=1),5*stepDay>minimumStep&&(this.scale="day",this.step=5),2*stepDay>minimumStep&&(this.scale="day",this.step=2),stepDay>minimumStep&&(this.scale="day",this.step=1),stepDay/2>minimumStep&&(this.scale="weekday",this.step=1),4*stepHour>minimumStep&&(this.scale="hour",this.step=4),stepHour>minimumStep&&(this.scale="hour",this.step=1),15*stepMinute>minimumStep&&(this.scale="minute",this.step=15),10*stepMinute>minimumStep&&(this.scale="minute",this.step=10),5*stepMinute>minimumStep&&(this.scale="minute",this.step=5),stepMinute>minimumStep&&(this.scale="minute",this.step=1),15*stepSecond>minimumStep&&(this.scale="second",this.step=15),10*stepSecond>minimumStep&&(this.scale="second",this.step=10),5*stepSecond>minimumStep&&(this.scale="second",this.step=5),stepSecond>minimumStep&&(this.scale="second",this.step=1),200*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=200),100*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=100),50*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=50),10*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=10),5*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=5),stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=1)
}},TimeStep.snap=function(date,scale,step){var clone=new Date(date.valueOf());if("year"==scale){var year=clone.getFullYear()+Math.round(clone.getMonth()/12);clone.setFullYear(Math.round(year/step)*step),clone.setMonth(0),clone.setDate(0),clone.setHours(0),clone.setMinutes(0),clone.setSeconds(0),clone.setMilliseconds(0)}else if("month"==scale)clone.getDate()>15?(clone.setDate(1),clone.setMonth(clone.getMonth()+1)):clone.setDate(1),clone.setHours(0),clone.setMinutes(0),clone.setSeconds(0),clone.setMilliseconds(0);else if("day"==scale){switch(step){case 5:case 2:clone.setHours(24*Math.round(clone.getHours()/24));break;default:clone.setHours(12*Math.round(clone.getHours()/12))}clone.setMinutes(0),clone.setSeconds(0),clone.setMilliseconds(0)}else if("weekday"==scale){switch(step){case 5:case 2:clone.setHours(12*Math.round(clone.getHours()/12));break;default:clone.setHours(6*Math.round(clone.getHours()/6))}clone.setMinutes(0),clone.setSeconds(0),clone.setMilliseconds(0)}else if("hour"==scale){switch(step){case 4:clone.setMinutes(60*Math.round(clone.getMinutes()/60));break;default:clone.setMinutes(30*Math.round(clone.getMinutes()/30))}clone.setSeconds(0),clone.setMilliseconds(0)}else if("minute"==scale){switch(step){case 15:case 10:clone.setMinutes(5*Math.round(clone.getMinutes()/5)),clone.setSeconds(0);break;case 5:clone.setSeconds(60*Math.round(clone.getSeconds()/60));break;default:clone.setSeconds(30*Math.round(clone.getSeconds()/30))}clone.setMilliseconds(0)}else if("second"==scale)switch(step){case 15:case 10:clone.setSeconds(5*Math.round(clone.getSeconds()/5)),clone.setMilliseconds(0);break;case 5:clone.setMilliseconds(1e3*Math.round(clone.getMilliseconds()/1e3));break;default:clone.setMilliseconds(500*Math.round(clone.getMilliseconds()/500))}else if("millisecond"==scale){var _step=step>5?step/2:1;clone.setMilliseconds(Math.round(clone.getMilliseconds()/_step)*_step)}return clone},TimeStep.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.switchedYear=!1,this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.switchedMonth=!1,this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.switchedDay=!1,this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}switch(this.scale){case"millisecond":return 0==this.current.getMilliseconds();case"second":return 0==this.current.getSeconds();case"minute":return 0==this.current.getHours()&&0==this.current.getMinutes();case"hour":return 0==this.current.getHours();case"weekday":case"day":return 1==this.current.getDate();case"month":return 0==this.current.getMonth();case"year":return!1;default:return!1}},TimeStep.prototype.getLabelMinor=function(date){void 0==date&&(date=this.current);var format=this.format.minorLabels[this.scale];return format&&format.length>0?moment(date).format(format):""},TimeStep.prototype.getLabelMajor=function(date){void 0==date&&(date=this.current);var format=this.format.majorLabels[this.scale];return format&&format.length>0?moment(date).format(format):""},TimeStep.prototype.getClassName=function(){function even(value){return value/step%2==0?" even":" odd"}function today(date){return date.isSame(new Date,"day")?" today":date.isSame(moment().add(1,"day"),"day")?" tomorrow":date.isSame(moment().add(-1,"day"),"day")?" yesterday":""}function currentWeek(date){return date.isSame(new Date,"week")?" current-week":""}function currentMonth(date){return date.isSame(new Date,"month")?" current-month":""}function currentYear(date){return date.isSame(new Date,"year")?" current-year":""}var m=moment(this.current),date=m.locale?m.locale("en"):m.lang("en"),step=this.step;switch(this.scale){case"millisecond":return even(date.milliseconds()).trim();case"second":return even(date.seconds()).trim();case"minute":return even(date.minutes()).trim();case"hour":var hours=date.hours();return 4==this.step&&(hours=hours+"-"+(hours+4)),hours+"h"+today(date)+even(date.hours());case"weekday":return date.format("dddd").toLowerCase()+today(date)+currentWeek(date)+even(date.date());case"day":var day=date.date(),month=date.format("MMMM").toLowerCase();return"day"+day+" "+month+currentMonth(date)+even(day-1);case"month":return date.format("MMMM").toLowerCase()+currentMonth(date)+even(date.month());case"year":var year=date.year();return"year"+year+currentYear(date)+even(year);default:return""}},module.exports=TimeStep},function(module,exports,__webpack_require__){function Item(data,conversion,options){this.id=null,this.parent=null,this.data=data,this.dom=null,this.conversion=conversion||{},this.options=options||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.left=null,this.width=null,this.height=null}var Hammer=__webpack_require__(45),util=__webpack_require__(1);Item.prototype.stack=!0,Item.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},Item.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},Item.prototype.setData=function(data){this.data=data,this.dirty=!0,this.displayed&&this.redraw()},Item.prototype.setParent=function(parent){this.displayed?(this.hide(),this.parent=parent,this.parent&&this.show()):this.parent=parent},Item.prototype.isVisible=function(){return!1},Item.prototype.show=function(){return!1},Item.prototype.hide=function(){return!1},Item.prototype.redraw=function(){},Item.prototype.repositionX=function(){},Item.prototype.repositionY=function(){},Item.prototype._repaintDeleteButton=function(anchor){if(this.selected&&this.options.editable.remove&&!this.dom.deleteButton){var me=this,deleteButton=document.createElement("div");deleteButton.className="delete",deleteButton.title="Delete this item",Hammer(deleteButton,{preventDefault:!0}).on("tap",function(event){me.parent.removeFromDataSet(me),event.stopPropagation()}),anchor.appendChild(deleteButton),this.dom.deleteButton=deleteButton}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},Item.prototype._updateContents=function(element){var content;if(this.options.template){var itemData=this.parent.itemSet.itemsData.get(this.id);content=this.options.template(itemData)}else content=this.data.content;if(content!==this.content){if(content instanceof Element)element.innerHTML="",element.appendChild(content);else if(void 0!=content)element.innerHTML=content;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=content}},Item.prototype._updateTitle=function(element){null!=this.data.title?element.title=this.data.title||"":element.removeAttribute("title")},Item.prototype._updateDataAttributes=function(element){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var attributes=[];if(Array.isArray(this.options.dataAttributes))attributes=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;attributes=Object.keys(this.data)}for(var i=0;i<attributes.length;i++){var name=attributes[i],value=this.data[name];null!=value?element.setAttribute("data-"+name,value):element.removeAttribute("data-"+name)}}},Item.prototype._updateStyle=function(element){this.style&&(util.removeCssText(element,this.style),this.style=null),this.data.style&&(util.addCssText(element,this.data.style),this.style=this.data.style)},module.exports=Item},function(module,exports,__webpack_require__){function BackgroundItem(data,conversion,options){if(this.props={content:{width:0}},this.overflow=!1,data){if(void 0==data.start)throw new Error('Property "start" missing in item '+data.id);if(void 0==data.end)throw new Error('Property "end" missing in item '+data.id)}Item.call(this,data,conversion,options),this.emptyContent=!1}var Item=(__webpack_require__(45),__webpack_require__(20)),BackgroundGroup=__webpack_require__(31),RangeItem=__webpack_require__(24);BackgroundItem.prototype=new Item(null,null,null),BackgroundItem.prototype.baseClassName="item background",BackgroundItem.prototype.stack=!1,BackgroundItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start},BackgroundItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.box=document.createElement("div"),dom.content=document.createElement("div"),dom.content.className="content",dom.box.appendChild(dom.content),this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.box.parentNode){var background=this.parent.dom.background;if(!background)throw new Error("Cannot redraw item: parent has no background container element");background.appendChild(dom.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.box.className=this.baseClassName+className,this.overflow="hidden"!==window.getComputedStyle(dom.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},BackgroundItem.prototype.show=RangeItem.prototype.show,BackgroundItem.prototype.hide=RangeItem.prototype.hide,BackgroundItem.prototype.repositionX=RangeItem.prototype.repositionX,BackgroundItem.prototype.repositionY=function(margin){var onTop="top"===this.options.orientation;this.dom.content.style.top=onTop?"":"0",this.dom.content.style.bottom=onTop?"0":"";var height;if(void 0!==this.data.subgroup){var itemSubgroup=this.data.subgroup,subgroups=this.parent.subgroups,subgroupIndex=subgroups[itemSubgroup].index;if(1==onTop){height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical,height+=0==subgroupIndex?margin.axis-.5*margin.item.vertical:0;var newTop=this.parent.top;for(var subgroup in subgroups)subgroups.hasOwnProperty(subgroup)&&1==subgroups[subgroup].visible&&subgroups[subgroup].index<subgroupIndex&&(newTop+=subgroups[subgroup].height+margin.item.vertical);newTop+=0!=subgroupIndex?margin.axis-.5*margin.item.vertical:0,this.dom.box.style.top=newTop+"px",this.dom.box.style.bottom=""}else{var newTop=this.parent.top;for(var subgroup in subgroups)subgroups.hasOwnProperty(subgroup)&&1==subgroups[subgroup].visible&&subgroups[subgroup].index>subgroupIndex&&(newTop+=subgroups[subgroup].height+margin.item.vertical);height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical,this.dom.box.style.top=newTop+"px",this.dom.box.style.bottom=""}}else this.parent instanceof BackgroundGroup?(height=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=onTop?"0":"",this.dom.box.style.bottom=onTop?"":"0"):(height=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=height+"px"},module.exports=BackgroundItem},function(module,exports,__webpack_require__){function BoxItem(data,conversion,options){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},data&&void 0==data.start)throw new Error('Property "start" missing in item '+data);Item.call(this,data,conversion,options)}{var Item=__webpack_require__(20);__webpack_require__(1)}BoxItem.prototype=new Item(null,null,null),BoxItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval},BoxItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.box=document.createElement("DIV"),dom.content=document.createElement("DIV"),dom.content.className="content",dom.box.appendChild(dom.content),dom.line=document.createElement("DIV"),dom.line.className="line",dom.dot=document.createElement("DIV"),dom.dot.className="dot",dom.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error("Cannot redraw item: parent has no foreground container element");foreground.appendChild(dom.box)}if(!dom.line.parentNode){var background=this.parent.dom.background;if(!background)throw new Error("Cannot redraw item: parent has no background container element");background.appendChild(dom.line)}if(!dom.dot.parentNode){var axis=this.parent.dom.axis;if(!background)throw new Error("Cannot redraw item: parent has no axis container element");axis.appendChild(dom.dot)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.box.className="item box"+className,dom.line.className="item line"+className,dom.dot.className="item dot"+className,this.props.dot.height=dom.dot.offsetHeight,this.props.dot.width=dom.dot.offsetWidth,this.props.line.width=dom.line.offsetWidth,this.width=dom.box.offsetWidth,this.height=dom.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(dom.box)},BoxItem.prototype.show=function(){this.displayed||this.redraw()},BoxItem.prototype.hide=function(){if(this.displayed){var dom=this.dom;dom.box.parentNode&&dom.box.parentNode.removeChild(dom.box),dom.line.parentNode&&dom.line.parentNode.removeChild(dom.line),dom.dot.parentNode&&dom.dot.parentNode.removeChild(dom.dot),this.top=null,this.left=null,this.displayed=!1}},BoxItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start),align=this.options.align,box=this.dom.box,line=this.dom.line,dot=this.dom.dot;this.left="right"==align?start-this.width:"left"==align?start:start-this.width/2,box.style.left=this.left+"px",line.style.left=start-this.props.line.width/2+"px",dot.style.left=start-this.props.dot.width/2+"px"},BoxItem.prototype.repositionY=function(){var orientation=this.options.orientation,box=this.dom.box,line=this.dom.line,dot=this.dom.dot;if("top"==orientation)box.style.top=(this.top||0)+"px",line.style.top="0",line.style.height=this.parent.top+this.top+1+"px",line.style.bottom="";else{var itemSetHeight=this.parent.itemSet.props.height,lineHeight=itemSetHeight-this.parent.top-this.parent.height+this.top;box.style.top=(this.parent.height-this.top-this.height||0)+"px",line.style.top=itemSetHeight-lineHeight+"px",line.style.bottom="0"}dot.style.top=-this.props.dot.height/2+"px"},module.exports=BoxItem},function(module,exports,__webpack_require__){function PointItem(data,conversion,options){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}},data&&void 0==data.start)throw new Error('Property "start" missing in item '+data);Item.call(this,data,conversion,options)}var Item=__webpack_require__(20);PointItem.prototype=new Item(null,null,null),PointItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval},PointItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.point=document.createElement("div"),dom.content=document.createElement("div"),dom.content.className="content",dom.point.appendChild(dom.content),dom.dot=document.createElement("div"),dom.point.appendChild(dom.dot),dom.point["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.point.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error("Cannot redraw item: parent has no foreground container element");foreground.appendChild(dom.point)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.point.className="item point"+className,dom.dot.className="item dot"+className,this.width=dom.point.offsetWidth,this.height=dom.point.offsetHeight,this.props.dot.width=dom.dot.offsetWidth,this.props.dot.height=dom.dot.offsetHeight,this.props.content.height=dom.content.offsetHeight,dom.content.style.marginLeft=2*this.props.dot.width+"px",dom.dot.style.top=(this.height-this.props.dot.height)/2+"px",dom.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(dom.point)},PointItem.prototype.show=function(){this.displayed||this.redraw()},PointItem.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.top=null,this.left=null,this.displayed=!1)},PointItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start);this.left=start-this.props.dot.width,this.dom.point.style.left=this.left+"px"},PointItem.prototype.repositionY=function(){var orientation=this.options.orientation,point=this.dom.point;point.style.top="top"==orientation?this.top+"px":this.parent.height-this.top-this.height+"px"},module.exports=PointItem},function(module,exports,__webpack_require__){function RangeItem(data,conversion,options){if(this.props={content:{width:0}},this.overflow=!1,data){if(void 0==data.start)throw new Error('Property "start" missing in item '+data.id);if(void 0==data.end)throw new Error('Property "end" missing in item '+data.id)}Item.call(this,data,conversion,options)}var Hammer=__webpack_require__(45),Item=__webpack_require__(20);RangeItem.prototype=new Item(null,null,null),RangeItem.prototype.baseClassName="item range",RangeItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start},RangeItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.box=document.createElement("div"),dom.content=document.createElement("div"),dom.content.className="content",dom.box.appendChild(dom.content),dom.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error("Cannot redraw item: parent has no foreground container element");foreground.appendChild(dom.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");dom.box.className=this.baseClassName+className,this.overflow="hidden"!==window.getComputedStyle(dom.content).overflow,this.dom.content.style.maxWidth="none",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dom.content.style.maxWidth="",this.dirty=!1}this._repaintDeleteButton(dom.box),this._repaintDragLeft(),this._repaintDragRight()},RangeItem.prototype.show=function(){this.displayed||this.redraw()},RangeItem.prototype.hide=function(){if(this.displayed){var box=this.dom.box;box.parentNode&&box.parentNode.removeChild(box),this.top=null,this.left=null,this.displayed=!1}},RangeItem.prototype.repositionX=function(){var contentLeft,contentWidth,parentWidth=this.parent.width,start=this.conversion.toScreen(this.data.start),end=this.conversion.toScreen(this.data.end);-parentWidth>start&&(start=-parentWidth),end>2*parentWidth&&(end=2*parentWidth);var boxWidth=Math.max(end-start,1);switch(this.overflow?(this.left=start,this.width=boxWidth+this.props.content.width,contentWidth=this.props.content.width):(this.left=start,this.width=boxWidth,contentWidth=Math.min(end-start-2*this.options.padding,this.props.content.width)),this.dom.box.style.left=this.left+"px",this.dom.box.style.width=boxWidth+"px",this.options.align){case"left":this.dom.content.style.left="0";break;case"right":this.dom.content.style.left=Math.max(boxWidth-contentWidth-2*this.options.padding,0)+"px";break;case"center":this.dom.content.style.left=Math.max((boxWidth-contentWidth-2*this.options.padding)/2,0)+"px";break;default:contentLeft=this.overflow?end>0?Math.max(-start,0):-contentWidth:0>start?Math.min(-start,end-start-contentWidth-2*this.options.padding):0,this.dom.content.style.left=contentLeft+"px"}},RangeItem.prototype.repositionY=function(){var orientation=this.options.orientation,box=this.dom.box;box.style.top="top"==orientation?this.top+"px":this.parent.height-this.top-this.height+"px"},RangeItem.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var dragLeft=document.createElement("div");dragLeft.className="drag-left",dragLeft.dragLeftItem=this,Hammer(dragLeft,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(dragLeft),this.dom.dragLeft=dragLeft}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},RangeItem.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var dragRight=document.createElement("div");dragRight.className="drag-right",dragRight.dragRightItem=this,Hammer(dragRight,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(dragRight),this.dom.dragRight=dragRight}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},module.exports=RangeItem},function(module){function Component(){this.options=null,this.props=null}Component.prototype.setOptions=function(options){options&&util.extend(this.options,options)},Component.prototype.redraw=function(){return!1},Component.prototype.destroy=function(){},Component.prototype._isResized=function(){var resized=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,resized},module.exports=Component},function(module,exports,__webpack_require__){function CurrentTime(body,options){this.body=body,this.defaultOptions={showCurrentTime:!0,locales:locales,locale:"en"},this.options=util.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(options)}var util=__webpack_require__(1),Component=__webpack_require__(25),moment=__webpack_require__(44),locales=__webpack_require__(48);CurrentTime.prototype=new Component,CurrentTime.prototype._create=function(){var bar=document.createElement("div");bar.className="currenttime",bar.style.position="absolute",bar.style.top="0px",bar.style.height="100%",this.bar=bar},CurrentTime.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},CurrentTime.prototype.setOptions=function(options){options&&util.selectiveExtend(["showCurrentTime","locale","locales"],this.options,options)},CurrentTime.prototype.redraw=function(){if(this.options.showCurrentTime){var parent=this.body.dom.backgroundVertical;this.bar.parentNode!=parent&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),parent.appendChild(this.bar),this.start());var now=new Date((new Date).valueOf()+this.offset),x=this.body.util.toScreen(now),locale=this.options.locales[this.options.locale],title=locale.current+" "+locale.time+": "+moment(now).format("dddd, MMMM Do YYYY, H:mm:ss");title=title.charAt(0).toUpperCase()+title.substring(1),this.bar.style.left=x+"px",this.bar.title=title}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},CurrentTime.prototype.start=function(){function update(){me.stop();var scale=me.body.range.conversion(me.body.domProps.center.width).scale,interval=1/scale/10;30>interval&&(interval=30),interval>1e3&&(interval=1e3),me.redraw(),me.currentTimeTimer=setTimeout(update,interval)}var me=this;update()},CurrentTime.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},CurrentTime.prototype.setCurrentTime=function(time){var t=util.convert(time,"Date").valueOf(),now=(new Date).valueOf();this.offset=t-now,this.redraw()},CurrentTime.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},module.exports=CurrentTime},function(module,exports,__webpack_require__){function CustomTime(body,options){this.body=body,this.defaultOptions={showCustomTime:!1,locales:locales,locale:"en"},this.options=util.extend({},this.defaultOptions),this.customTime=new Date,this.eventParams={},this._create(),this.setOptions(options)}var Hammer=__webpack_require__(45),util=__webpack_require__(1),Component=__webpack_require__(25),moment=__webpack_require__(44),locales=__webpack_require__(48);CustomTime.prototype=new Component,CustomTime.prototype.setOptions=function(options){options&&util.selectiveExtend(["showCustomTime","locale","locales"],this.options,options)},CustomTime.prototype._create=function(){var bar=document.createElement("div");bar.className="customtime",bar.style.position="absolute",bar.style.top="0px",bar.style.height="100%",this.bar=bar;var drag=document.createElement("div");drag.style.position="relative",drag.style.top="0px",drag.style.left="-10px",drag.style.height="100%",drag.style.width="20px",bar.appendChild(drag),this.hammer=Hammer(bar,{prevent_default:!0}),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this))},CustomTime.prototype.destroy=function(){this.options.showCustomTime=!1,this.redraw(),this.hammer.enable(!1),this.hammer=null,this.body=null},CustomTime.prototype.redraw=function(){if(this.options.showCustomTime){var parent=this.body.dom.backgroundVertical;this.bar.parentNode!=parent&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),parent.appendChild(this.bar));var x=this.body.util.toScreen(this.customTime),locale=this.options.locales[this.options.locale],title=locale.time+": "+moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss");title=title.charAt(0).toUpperCase()+title.substring(1),this.bar.style.left=x+"px",this.bar.title=title}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar);return!1},CustomTime.prototype.setCustomTime=function(time){this.customTime=util.convert(time,"Date"),this.redraw()},CustomTime.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},CustomTime.prototype._onDragStart=function(event){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,event.stopPropagation(),event.preventDefault()},CustomTime.prototype._onDrag=function(event){if(this.eventParams.dragging){var deltaX=event.gesture.deltaX,x=this.body.util.toScreen(this.eventParams.customTime)+deltaX,time=this.body.util.toTime(x);this.setCustomTime(time),this.body.emitter.emit("timechange",{time:new Date(this.customTime.valueOf())}),event.stopPropagation(),event.preventDefault()}},CustomTime.prototype._onDragEnd=function(event){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{time:new Date(this.customTime.valueOf())}),event.stopPropagation(),event.preventDefault())},module.exports=CustomTime},function(module,exports,__webpack_require__){function DataAxis(body,options,svg,linegraphOptions){this.id=util.randomUUID(),this.body=body,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!0,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,customRange:{left:{min:void 0,max:void 0},right:{min:void 0,max:void 0}},title:{left:{text:void 0},right:{text:void 0}},format:{left:{decimals:void 0},right:{decimals:void 0}}},this.linegraphOptions=linegraphOptions,this.linegraphSVG=svg,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.range={start:0,end:0},this.options=util.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(options),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.offsetHeight,this.hidden=!1,this.stepPixels=25,this.stepPixelsForced=25,this.zeroCrossing=-1,this.lineOffset=0,this.master=!0,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create();var me=this;this.body.emitter.on("verticalDrag",function(){me.dom.lineContainer.style.top=me.body.domProps.scrollTop+"px"})}var util=__webpack_require__(1),DOMutil=__webpack_require__(2),Component=__webpack_require__(25),DataStep=__webpack_require__(16);DataAxis.prototype=new Component,DataAxis.prototype.addGroup=function(label,graphOptions){this.groups.hasOwnProperty(label)||(this.groups[label]=graphOptions),this.amountOfGroups+=1},DataAxis.prototype.updateGroup=function(label,graphOptions){this.groups[label]=graphOptions},DataAxis.prototype.removeGroup=function(label){this.groups.hasOwnProperty(label)&&(delete this.groups[label],this.amountOfGroups-=1)},DataAxis.prototype.setOptions=function(options){if(options){var redraw=!1;this.options.orientation!=options.orientation&&void 0!==options.orientation&&(redraw=!0);var fields=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","customRange","title","format","alignZeros"];util.selectiveExtend(fields,this.options,options),this.minWidth=Number((""+this.options.width).replace("px","")),1==redraw&&this.dom.frame&&(this.hide(),this.show())}},DataAxis.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},DataAxis.prototype._redrawGroupIcons=function(){DOMutil.prepareElements(this.svgElements);var x,iconWidth=this.options.iconWidth,iconHeight=15,iconOffset=4,y=iconOffset+.5*iconHeight;x="left"==this.options.orientation?iconOffset:this.width-iconWidth-iconOffset;for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||(this.groups[groupId].drawIcon(x,y,this.svgElements,this.svg,iconWidth,iconHeight),y+=iconHeight+iconOffset));DOMutil.cleanupElements(this.svgElements),this.iconsRemoved=!1},DataAxis.prototype._cleanupIcons=function(){0==this.iconsRemoved&&(DOMutil.prepareElements(this.svgElements),DOMutil.cleanupElements(this.svgElements),this.iconsRemoved=!0)},DataAxis.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||("left"==this.options.orientation?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},DataAxis.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},DataAxis.prototype.setRange=function(start,end){0==this.master&&1==this.options.alignZeros&&-1!=this.zeroCrossing&&start>0&&(start=0),this.range.start=start,this.range.end=end},DataAxis.prototype.redraw=function(){var resized=!1,activeGroups=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||activeGroups++);if(0==this.amountOfGroups||0==activeGroups)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=1==this.options.visible?Number((""+this.options.width).replace("px","")):0;var props=this.props,frame=this.dom.frame;frame.className="dataaxis",this._calculateCharSize();var orientation=this.options.orientation,showMinorLabels=this.options.showMinorLabels,showMajorLabels=this.options.showMajorLabels;
props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0,props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0,props.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,props.minorLineHeight=1,props.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,props.majorLineHeight=1,"left"==orientation?(frame.style.top="0",frame.style.left="0",frame.style.bottom="",frame.style.width=this.width+"px",frame.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(frame.style.top="",frame.style.bottom="0",frame.style.left="0",frame.style.width=this.width+"px",frame.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),resized=this._redrawLabels(),resized=this._isResized()||resized,1==this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(orientation)}return resized},DataAxis.prototype._redrawLabels=function(){var resized=!1;DOMutil.prepareElements(this.DOMelements.lines),DOMutil.prepareElements(this.DOMelements.labels);var orientation=this.options.orientation,minimumStep=this.master?this.props.majorCharHeight||10:this.stepPixelsForced,step=new DataStep(this.range.start,this.range.end,minimumStep,this.dom.frame.offsetHeight,this.options.customRange[this.options.orientation],0==this.master&&this.options.alignZeros);this.step=step;var stepPixels=(this.dom.frame.offsetHeight-step.deadSpace*(this.dom.frame.offsetHeight/step.marginRange))/((step.marginRange-step.deadSpace)/step.step);this.stepPixels=stepPixels;var amountOfSteps=this.height/stepPixels,stepDifference=0;if(0==this.master){stepPixels=this.stepPixelsForced,stepDifference=Math.round(this.dom.frame.offsetHeight/stepPixels-amountOfSteps);for(var i=0;.5*stepDifference>i;i++)step.previous();if(amountOfSteps=this.height/stepPixels,-1!=this.zeroCrossing&&1==this.options.alignZeros){var zeroStepDifference=step.marginEnd/step.step-this.zeroCrossing;if(zeroStepDifference>0)for(var i=0;zeroStepDifference>i;i++)step.next();else if(0>zeroStepDifference)for(var i=0;-zeroStepDifference>i;i++)step.previous()}}else amountOfSteps+=.25;this.valueAtZero=step.marginEnd;var decimals,marginStartPos=0,max=1;void 0!==this.options.format[orientation]&&(decimals=this.options.format[orientation].decimals),this.maxLabelSize=0;for(var y=0;max<Math.round(amountOfSteps);){step.next(),y=Math.round(max*stepPixels),marginStartPos=max*stepPixels;var isMajor=step.isMajor();(this.options.showMinorLabels&&0==isMajor||0==this.master&&1==this.options.showMinorLabels)&&this._redrawLabel(y-2,step.getCurrent(decimals),orientation,"yAxis minor",this.props.minorCharHeight),isMajor&&this.options.showMajorLabels&&1==this.master||0==this.options.showMinorLabels&&0==this.master&&1==isMajor?(y>=0&&this._redrawLabel(y-2,step.getCurrent(decimals),orientation,"yAxis major",this.props.majorCharHeight),this._redrawLine(y,orientation,"grid horizontal major",this.options.majorLinesOffset,this.props.majorLineWidth)):this._redrawLine(y,orientation,"grid horizontal minor",this.options.minorLinesOffset,this.props.minorLineWidth),1==this.master&&0==step.current&&(this.zeroCrossing=max),max++}this.conversionFactor=0==this.master?y/(this.valueAtZero-step.current):this.dom.frame.offsetHeight/step.marginRange;var titleWidth=0;void 0!==this.options.title[orientation]&&void 0!==this.options.title[orientation].text&&(titleWidth=this.props.titleCharHeight);var offset=1==this.options.icons?Math.max(this.options.iconWidth,titleWidth)+this.options.labelOffsetX+15:titleWidth+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-offset&&1==this.options.visible?(this.width=this.maxLabelSize+offset,this.options.width=this.width+"px",DOMutil.cleanupElements(this.DOMelements.lines),DOMutil.cleanupElements(this.DOMelements.labels),this.redraw(),resized=!0):this.maxLabelSize<this.width-offset&&1==this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+offset),this.options.width=this.width+"px",DOMutil.cleanupElements(this.DOMelements.lines),DOMutil.cleanupElements(this.DOMelements.labels),this.redraw(),resized=!0):(DOMutil.cleanupElements(this.DOMelements.lines),DOMutil.cleanupElements(this.DOMelements.labels),resized=!1),resized},DataAxis.prototype.convertValue=function(value){var invertedValue=this.valueAtZero-value,convertedValue=invertedValue*this.conversionFactor;return convertedValue},DataAxis.prototype._redrawLabel=function(y,text,orientation,className,characterHeight){var label=DOMutil.getDOMElement("div",this.DOMelements.labels,this.dom.frame);label.className=className,label.innerHTML=text,"left"==orientation?(label.style.left="-"+this.options.labelOffsetX+"px",label.style.textAlign="right"):(label.style.right="-"+this.options.labelOffsetX+"px",label.style.textAlign="left"),label.style.top=y-.5*characterHeight+this.options.labelOffsetY+"px",text+="";var largestWidth=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<text.length*largestWidth&&(this.maxLabelSize=text.length*largestWidth)},DataAxis.prototype._redrawLine=function(y,orientation,className,offset,width){if(1==this.master){var line=DOMutil.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);line.className=className,line.innerHTML="","left"==orientation?line.style.left=this.width-offset+"px":line.style.right=this.width-offset+"px",line.style.width=width+"px",line.style.top=y+"px"}},DataAxis.prototype._redrawTitle=function(orientation){if(DOMutil.prepareElements(this.DOMelements.title),void 0!==this.options.title[orientation]&&void 0!==this.options.title[orientation].text){var title=DOMutil.getDOMElement("div",this.DOMelements.title,this.dom.frame);title.className="yAxis title "+orientation,title.innerHTML=this.options.title[orientation].text,void 0!==this.options.title[orientation].style&&util.addCssText(title,this.options.title[orientation].style),"left"==orientation?title.style.left=this.props.titleCharHeight+"px":title.style.right=this.props.titleCharHeight+"px",title.style.width=this.height+"px"}DOMutil.cleanupElements(this.DOMelements.title)},DataAxis.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var textMinor=document.createTextNode("0"),measureCharMinor=document.createElement("div");measureCharMinor.className="yAxis minor measure",measureCharMinor.appendChild(textMinor),this.dom.frame.appendChild(measureCharMinor),this.props.minorCharHeight=measureCharMinor.clientHeight,this.props.minorCharWidth=measureCharMinor.clientWidth,this.dom.frame.removeChild(measureCharMinor)}if(!("majorCharHeight"in this.props)){var textMajor=document.createTextNode("0"),measureCharMajor=document.createElement("div");measureCharMajor.className="yAxis major measure",measureCharMajor.appendChild(textMajor),this.dom.frame.appendChild(measureCharMajor),this.props.majorCharHeight=measureCharMajor.clientHeight,this.props.majorCharWidth=measureCharMajor.clientWidth,this.dom.frame.removeChild(measureCharMajor)}if(!("titleCharHeight"in this.props)){var textTitle=document.createTextNode("0"),measureCharTitle=document.createElement("div");measureCharTitle.className="yAxis title measure",measureCharTitle.appendChild(textTitle),this.dom.frame.appendChild(measureCharTitle),this.props.titleCharHeight=measureCharTitle.clientHeight,this.props.titleCharWidth=measureCharTitle.clientWidth,this.dom.frame.removeChild(measureCharTitle)}},module.exports=DataAxis},function(module,exports,__webpack_require__){function GraphGroup(group,groupId,options,groupsUsingDefaultStyles){this.id=groupId;var fields=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","catmullRom"];this.options=util.selectiveBridgeObject(fields,options),this.usingDefaultStyle=void 0===group.className,this.groupsUsingDefaultStyles=groupsUsingDefaultStyles,this.zeroPosition=0,this.update(group),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===group.visible?!0:group.visible}var util=__webpack_require__(1),DOMutil=__webpack_require__(2),Line=__webpack_require__(49),Bar=__webpack_require__(50),Points=__webpack_require__(51);GraphGroup.prototype.setItems=function(items){null!=items?(this.itemsData=items,1==this.options.sort&&this.itemsData.sort(function(a,b){return a.x-b.x})):this.itemsData=[]},GraphGroup.prototype.setZeroPosition=function(pos){this.zeroPosition=pos},GraphGroup.prototype.setOptions=function(options){if(void 0!==options){var fields=["sampling","style","sort","yAxisOrientation","barChart"];util.selectiveDeepExtend(fields,this.options,options),util.mergeOptions(this.options,options,"catmullRom"),util.mergeOptions(this.options,options,"drawPoints"),util.mergeOptions(this.options,options,"shaded"),options.catmullRom&&"object"==typeof options.catmullRom&&options.catmullRom.parametrization&&("uniform"==options.catmullRom.parametrization?this.options.catmullRom.alpha=0:"chordal"==options.catmullRom.parametrization?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5))}"line"==this.options.style?this.type=new Line(this.id,this.options):"bar"==this.options.style?this.type=new Bar(this.id,this.options):"points"==this.options.style&&(this.type=new Points(this.id,this.options))},GraphGroup.prototype.update=function(group){this.group=group,this.content=group.content||"graph",this.className=group.className||this.className||"graphGroup"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===group.visible?!0:group.visible,this.style=group.style,this.setOptions(group.options)},GraphGroup.prototype.drawIcon=function(x,y,JSONcontainer,SVGcontainer,iconWidth,iconHeight){var path,fillPath,fillHeight=.5*iconHeight,outline=DOMutil.getSVGElement("rect",JSONcontainer,SVGcontainer);if(outline.setAttributeNS(null,"x",x),outline.setAttributeNS(null,"y",y-fillHeight),outline.setAttributeNS(null,"width",iconWidth),outline.setAttributeNS(null,"height",2*fillHeight),outline.setAttributeNS(null,"class","outline"),"line"==this.options.style)path=DOMutil.getSVGElement("path",JSONcontainer,SVGcontainer),path.setAttributeNS(null,"class",this.className),void 0!==this.style&&path.setAttributeNS(null,"style",this.style),path.setAttributeNS(null,"d","M"+x+","+y+" L"+(x+iconWidth)+","+y),1==this.options.shaded.enabled&&(fillPath=DOMutil.getSVGElement("path",JSONcontainer,SVGcontainer),"top"==this.options.shaded.orientation?fillPath.setAttributeNS(null,"d","M"+x+", "+(y-fillHeight)+"L"+x+","+y+" L"+(x+iconWidth)+","+y+" L"+(x+iconWidth)+","+(y-fillHeight)):fillPath.setAttributeNS(null,"d","M"+x+","+y+" L"+x+","+(y+fillHeight)+" L"+(x+iconWidth)+","+(y+fillHeight)+"L"+(x+iconWidth)+","+y),fillPath.setAttributeNS(null,"class",this.className+" iconFill")),1==this.options.drawPoints.enabled&&DOMutil.drawPoint(x+.5*iconWidth,y,this,JSONcontainer,SVGcontainer);else{var barWidth=Math.round(.3*iconWidth),bar1Height=Math.round(.4*iconHeight),bar2Height=Math.round(.75*iconHeight),offset=Math.round((iconWidth-2*barWidth)/3);DOMutil.drawBar(x+.5*barWidth+offset,y+fillHeight-bar1Height-1,barWidth,bar1Height,this.className+" bar",JSONcontainer,SVGcontainer),DOMutil.drawBar(x+1.5*barWidth+offset+2,y+fillHeight-bar2Height-1,barWidth,bar2Height,this.className+" bar",JSONcontainer,SVGcontainer)}},GraphGroup.prototype.getLegend=function(iconWidth,iconHeight){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");return this.drawIcon(0,.5*iconHeight,[],svg,iconWidth,iconHeight),{icon:svg,label:this.content,orientation:this.options.yAxisOrientation}},GraphGroup.prototype.getYRange=function(groupData){return this.type.getYRange(groupData)},GraphGroup.prototype.draw=function(dataset,group,framework){this.type.draw(dataset,group,framework)},module.exports=GraphGroup},function(module,exports,__webpack_require__){function Group(groupId,data,itemSet){this.groupId=groupId,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=data&&data.subgroupOrder,this.itemSet=itemSet,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var me=this;this.itemSet.body.emitter.on("checkRangedItems",function(){me.checkRangedItems=!0}),this._create(),this.setData(data)}{var util=__webpack_require__(1),stack=__webpack_require__(18);__webpack_require__(24)}Group.prototype._create=function(){var label=document.createElement("div");label.className="vlabel",this.dom.label=label;var inner=document.createElement("div");inner.className="inner",label.appendChild(inner),this.dom.inner=inner;var foreground=document.createElement("div");foreground.className="group",foreground["timeline-group"]=this,this.dom.foreground=foreground,this.dom.background=document.createElement("div"),this.dom.background.className="group",this.dom.axis=document.createElement("div"),this.dom.axis.className="group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},Group.prototype.setData=function(data){var content=data&&data.content;content instanceof Element?this.dom.inner.appendChild(content):this.dom.inner.innerHTML=void 0!==content&&null!==content?content:this.groupId||"",this.dom.label.title=data&&data.title||"",this.dom.inner.firstChild?util.removeClassName(this.dom.inner,"hidden"):util.addClassName(this.dom.inner,"hidden");var className=data&&data.className||null;className!=this.className&&(this.className&&(util.removeClassName(this.dom.label,this.className),util.removeClassName(this.dom.foreground,this.className),util.removeClassName(this.dom.background,this.className),util.removeClassName(this.dom.axis,this.className)),util.addClassName(this.dom.label,className),util.addClassName(this.dom.foreground,className),util.addClassName(this.dom.background,className),util.addClassName(this.dom.axis,className),this.className=className),this.style&&(util.removeCssText(this.dom.label,this.style),this.style=null),data&&data.style&&(util.addCssText(this.dom.label,data.style),this.style=data.style)},Group.prototype.getLabelWidth=function(){return this.props.label.width},Group.prototype.redraw=function(range,margin,restack){var resized=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range);var markerHeight=this.dom.marker.clientHeight;markerHeight!=this.lastMarkerHeight&&(this.lastMarkerHeight=markerHeight,util.forEach(this.items,function(item){item.dirty=!0,item.displayed&&item.redraw()}),restack=!0),this.itemSet.options.stack?stack.stack(this.visibleItems,margin,restack):stack.nostack(this.visibleItems,margin,this.subgroups);var height=this._calculateHeight(margin),foreground=this.dom.foreground;this.top=foreground.offsetTop,this.left=foreground.offsetLeft,this.width=foreground.offsetWidth,resized=util.updateProperty(this,"height",height)||resized,resized=util.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||resized,resized=util.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||resized,this.dom.background.style.height=height+"px",this.dom.foreground.style.height=height+"px",this.dom.label.style.height=height+"px";for(var i=0,ii=this.visibleItems.length;ii>i;i++){var item=this.visibleItems[i];item.repositionY(margin)}return resized},Group.prototype._calculateHeight=function(margin){var height,visibleItems=this.visibleItems;this.resetSubgroups();var me=this;if(visibleItems.length){var min=visibleItems[0].top,max=visibleItems[0].top+visibleItems[0].height;if(util.forEach(visibleItems,function(item){min=Math.min(min,item.top),max=Math.max(max,item.top+item.height),void 0!==item.data.subgroup&&(me.subgroups[item.data.subgroup].height=Math.max(me.subgroups[item.data.subgroup].height,item.height),me.subgroups[item.data.subgroup].visible=!0)}),min>margin.axis){var offset=min-margin.axis;max-=offset,util.forEach(visibleItems,function(item){item.top-=offset})}height=max+margin.item.vertical/2}else height=margin.axis+margin.item.vertical;return height=Math.max(height,this.props.label.height)},Group.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},Group.prototype.hide=function(){var label=this.dom.label;label.parentNode&&label.parentNode.removeChild(label);var foreground=this.dom.foreground;foreground.parentNode&&foreground.parentNode.removeChild(foreground);var background=this.dom.background;background.parentNode&&background.parentNode.removeChild(background);var axis=this.dom.axis;axis.parentNode&&axis.parentNode.removeChild(axis)},Group.prototype.add=function(item){if(this.items[item.id]=item,item.setParent(this),void 0!==item.data.subgroup&&(void 0===this.subgroups[item.data.subgroup]&&(this.subgroups[item.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[item.data.subgroup].items.push(item)),this.orderSubgroups(),-1==this.visibleItems.indexOf(item)){var range=this.itemSet.body.range;this._checkIfVisible(item,this.visibleItems,range)}},Group.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var sortArray=[];if("string"==typeof this.subgroupOrderer){for(var subgroup in this.subgroups)sortArray.push({subgroup:subgroup,sortField:this.subgroups[subgroup].items[0].data[this.subgroupOrderer]});sortArray.sort(function(a,b){return a.sortField-b.sortField})}else if("function"==typeof this.subgroupOrderer){for(var subgroup in this.subgroups)sortArray.push(this.subgroups[subgroup].items[0].data);sortArray.sort(this.subgroupOrderer)}if(sortArray.length>0)for(var i=0;i<sortArray.length;i++)this.subgroups[sortArray[i].subgroup].index=i}},Group.prototype.resetSubgroups=function(){for(var subgroup in this.subgroups)this.subgroups.hasOwnProperty(subgroup)&&(this.subgroups[subgroup].visible=!1)},Group.prototype.remove=function(item){delete this.items[item.id],item.setParent(null);var index=this.visibleItems.indexOf(item);-1!=index&&this.visibleItems.splice(index,1)},Group.prototype.removeFromDataSet=function(item){this.itemSet.removeItem(item.id)},Group.prototype.order=function(){for(var array=util.toArray(this.items),startArray=[],endArray=[],i=0;i<array.length;i++)void 0!==array[i].data.end&&endArray.push(array[i]),startArray.push(array[i]);this.orderedItems={byStart:startArray,byEnd:endArray},stack.orderByStart(this.orderedItems.byStart),stack.orderByEnd(this.orderedItems.byEnd)},Group.prototype._updateVisibleItems=function(orderedItems,oldVisibleItems,range){var item,i,visibleItems=[],visibleItemsLookup={},interval=(range.end-range.start)/4,lowerBound=range.start-interval,upperBound=range.end+interval,searchFunction=function(value){return lowerBound>value?-1:upperBound>=value?0:1};if(oldVisibleItems.length>0)for(i=0;i<oldVisibleItems.length;i++)this._checkIfVisibleWithReference(oldVisibleItems[i],visibleItems,visibleItemsLookup,range);var initialPosByStart=util.binarySearchCustom(orderedItems.byStart,searchFunction,"data","start");if(this._traceVisible(initialPosByStart,orderedItems.byStart,visibleItems,visibleItemsLookup,function(item){return item.data.start<lowerBound||item.data.start>upperBound}),1==this.checkRangedItems)for(this.checkRangedItems=!1,i=0;i<orderedItems.byEnd.length;i++)this._checkIfVisibleWithReference(orderedItems.byEnd[i],visibleItems,visibleItemsLookup,range);else{var initialPosByEnd=util.binarySearchCustom(orderedItems.byEnd,searchFunction,"data","end");this._traceVisible(initialPosByEnd,orderedItems.byEnd,visibleItems,visibleItemsLookup,function(item){return item.data.end<lowerBound||item.data.end>upperBound})}for(i=0;i<visibleItems.length;i++)item=visibleItems[i],item.displayed||item.show(),item.repositionX();return visibleItems},Group.prototype._traceVisible=function(initialPos,items,visibleItems,visibleItemsLookup,breakCondition){var item,i;if(-1!=initialPos){for(i=initialPos;i>=0&&(item=items[i],!breakCondition(item));i--)void 0===visibleItemsLookup[item.id]&&(visibleItemsLookup[item.id]=!0,visibleItems.push(item));for(i=initialPos+1;i<items.length&&(item=items[i],!breakCondition(item));i++)void 0===visibleItemsLookup[item.id]&&(visibleItemsLookup[item.id]=!0,visibleItems.push(item))}},Group.prototype._checkIfVisible=function(item,visibleItems,range){item.isVisible(range)?(item.displayed||item.show(),item.repositionX(),visibleItems.push(item)):item.displayed&&item.hide()},Group.prototype._checkIfVisibleWithReference=function(item,visibleItems,visibleItemsLookup,range){item.isVisible(range)?void 0===visibleItemsLookup[item.id]&&(visibleItemsLookup[item.id]=!0,visibleItems.push(item)):item.displayed&&item.hide()},module.exports=Group},function(module,exports,__webpack_require__){function BackgroundGroup(groupId,data,itemSet){Group.call(this,groupId,data,itemSet),this.width=0,this.height=0,this.top=0,this.left=0}var Group=(__webpack_require__(1),__webpack_require__(30));BackgroundGroup.prototype=Object.create(Group.prototype),BackgroundGroup.prototype.redraw=function(range,margin){var resized=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var i=0,ii=this.visibleItems.length;ii>i;i++){var item=this.visibleItems[i];item.repositionY(margin)}return resized},BackgroundGroup.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},module.exports=BackgroundGroup},function(module,exports,__webpack_require__){function ItemSet(body,options){this.body=body,this.defaultOptions={type:null,orientation:"bottom",align:"auto",stack:!0,groupOrder:null,selectable:!0,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},snap:TimeStep.snap,onAdd:function(item,callback){callback(item)},onUpdate:function(item,callback){callback(item)},onMove:function(item,callback){callback(item)},onRemove:function(item,callback){callback(item)},onMoving:function(item,callback){callback(item)},margin:{item:{horizontal:10,vertical:10},axis:20},padding:5},this.options=util.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:body.util.toScreen,toTime:body.util.toTime},this.dom={},this.props={},this.hammer=null;var me=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(event,params){me._onAdd(params.items)},update:function(event,params){me._onUpdate(params.items)},remove:function(event,params){me._onRemove(params.items)}},this.groupListeners={add:function(event,params){me._onAddGroups(params.items)},update:function(event,params){me._onUpdateGroups(params.items)},remove:function(event,params){me._onRemoveGroups(params.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this._create(),this.setOptions(options)}var Hammer=__webpack_require__(45),util=__webpack_require__(1),DataSet=__webpack_require__(3),DataView=__webpack_require__(4),TimeStep=__webpack_require__(19),Component=__webpack_require__(25),Group=__webpack_require__(30),BackgroundGroup=__webpack_require__(31),BoxItem=__webpack_require__(22),PointItem=__webpack_require__(23),RangeItem=__webpack_require__(24),BackgroundItem=__webpack_require__(21),UNGROUPED="__ungrouped__",BACKGROUND="__background__";ItemSet.prototype=new Component,ItemSet.types={background:BackgroundItem,box:BoxItem,range:RangeItem,point:PointItem},ItemSet.prototype._create=function(){var frame=document.createElement("div");frame.className="itemset",frame["timeline-itemset"]=this,this.dom.frame=frame;var background=document.createElement("div");background.className="background",frame.appendChild(background),this.dom.background=background;var foreground=document.createElement("div");foreground.className="foreground",frame.appendChild(foreground),this.dom.foreground=foreground;var axis=document.createElement("div");axis.className="axis",this.dom.axis=axis;var labelSet=document.createElement("div");labelSet.className="labelset",this.dom.labelSet=labelSet,this._updateUngrouped();var backgroundGroup=new BackgroundGroup(BACKGROUND,null,this);backgroundGroup.show(),this.groups[BACKGROUND]=backgroundGroup,this.hammer=Hammer(this.body.dom.centerContainer,{preventDefault:!0}),this.hammer.on("touch",this._onTouch.bind(this)),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this)),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("hold",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.show()},ItemSet.prototype.setOptions=function(options){if(options){var fields=["type","align","orientation","padding","stack","selectable","groupOrder","dataAttributes","template","hide","snap"];util.selectiveExtend(fields,this.options,options),"margin"in options&&("number"==typeof options.margin?(this.options.margin.axis=options.margin,this.options.margin.item.horizontal=options.margin,this.options.margin.item.vertical=options.margin):"object"==typeof options.margin&&(util.selectiveExtend(["axis"],this.options.margin,options.margin),"item"in options.margin&&("number"==typeof options.margin.item?(this.options.margin.item.horizontal=options.margin.item,this.options.margin.item.vertical=options.margin.item):"object"==typeof options.margin.item&&util.selectiveExtend(["horizontal","vertical"],this.options.margin.item,options.margin.item)))),"editable"in options&&("boolean"==typeof options.editable?(this.options.editable.updateTime=options.editable,this.options.editable.updateGroup=options.editable,this.options.editable.add=options.editable,this.options.editable.remove=options.editable):"object"==typeof options.editable&&util.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,options.editable));var addCallback=function(name){var fn=options[name];if(fn){if(!(fn instanceof Function))throw new Error("option "+name+" must be a function "+name+"(item, callback)");this.options[name]=fn}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving"].forEach(addCallback),this.markDirty()}},ItemSet.prototype.markDirty=function(options){this.groupIds=[],this.stackDirty=!0,options&&options.refreshItems&&util.forEach(this.items,function(item){item.dirty=!0,item.displayed&&item.redraw()})},ItemSet.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},ItemSet.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},ItemSet.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},ItemSet.prototype.setSelection=function(ids){var i,ii,id,item;for(void 0==ids&&(ids=[]),Array.isArray(ids)||(ids=[ids]),i=0,ii=this.selection.length;ii>i;i++)id=this.selection[i],item=this.items[id],item&&item.unselect();for(this.selection=[],i=0,ii=ids.length;ii>i;i++)id=ids[i],item=this.items[id],item&&(this.selection.push(id),item.select())},ItemSet.prototype.getSelection=function(){return this.selection.concat([])},ItemSet.prototype.getVisibleItems=function(){var range=this.body.range.getRange(),left=this.body.util.toScreen(range.start),right=this.body.util.toScreen(range.end),ids=[];for(var groupId in this.groups)if(this.groups.hasOwnProperty(groupId))for(var group=this.groups[groupId],rawVisibleItems=group.visibleItems,i=0;i<rawVisibleItems.length;i++){var item=rawVisibleItems[i];item.left<right&&item.left+item.width>left&&ids.push(item.id)}return ids},ItemSet.prototype._deselect=function(id){for(var selection=this.selection,i=0,ii=selection.length;ii>i;i++)if(selection[i]==id){selection.splice(i,1);break}},ItemSet.prototype.redraw=function(){var margin=this.options.margin,range=this.body.range,asSize=util.option.asSize,options=this.options,orientation=options.orientation,resized=!1,frame=this.dom.frame,editable=options.editable.updateTime||options.editable.updateGroup;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,frame.className="itemset"+(editable?" editable":""),resized=this._orderGroups()||resized;var visibleInterval=range.end-range.start,zoomed=visibleInterval!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;zoomed&&(this.stackDirty=!0),this.lastVisibleInterval=visibleInterval,this.props.lastWidth=this.props.width;var restack=this.stackDirty,firstGroup=this._firstGroup(),firstMargin={item:margin.item,axis:margin.axis},nonFirstMargin={item:margin.item,axis:margin.item.vertical/2},height=0,minHeight=margin.axis+margin.item.vertical;return this.groups[BACKGROUND].redraw(range,nonFirstMargin,restack),util.forEach(this.groups,function(group){var groupMargin=group==firstGroup?firstMargin:nonFirstMargin,groupResized=group.redraw(range,groupMargin,restack);resized=groupResized||resized,height+=group.height}),height=Math.max(height,minHeight),this.stackDirty=!1,frame.style.height=asSize(height),this.props.width=frame.offsetWidth,this.props.height=height,this.dom.axis.style.top=asSize("top"==orientation?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.dom.axis.style.left="0",resized=this._isResized()||resized},ItemSet.prototype._firstGroup=function(){var firstGroupIndex="top"==this.options.orientation?0:this.groupIds.length-1,firstGroupId=this.groupIds[firstGroupIndex],firstGroup=this.groups[firstGroupId]||this.groups[UNGROUPED];return firstGroup||null},ItemSet.prototype._updateUngrouped=function(){{var item,itemId,ungrouped=this.groups[UNGROUPED];this.groups[BACKGROUND]}if(this.groupsData){if(ungrouped){ungrouped.hide(),delete this.groups[UNGROUPED];for(itemId in this.items)if(this.items.hasOwnProperty(itemId)){item=this.items[itemId],item.parent&&item.parent.remove(item);var groupId=this._getGroupId(item.data),group=this.groups[groupId];group&&group.add(item)||item.hide()}}}else if(!ungrouped){var id=null,data=null;ungrouped=new Group(id,data,this),this.groups[UNGROUPED]=ungrouped;for(itemId in this.items)this.items.hasOwnProperty(itemId)&&(item=this.items[itemId],ungrouped.add(item));ungrouped.show()}},ItemSet.prototype.getLabelSet=function(){return this.dom.labelSet},ItemSet.prototype.setItems=function(items){var ids,me=this,oldItemsData=this.itemsData;if(items){if(!(items instanceof DataSet||items instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=items}else this.itemsData=null;if(oldItemsData&&(util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback)}),ids=oldItemsData.getIds(),this._onRemove(ids)),this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id)}),ids=this.itemsData.getIds(),this._onAdd(ids),this._updateUngrouped()}},ItemSet.prototype.getItems=function(){return this.itemsData},ItemSet.prototype.setGroups=function(groups){var ids,me=this;if(this.groupsData&&(util.forEach(this.groupListeners,function(callback,event){me.groupsData.unsubscribe(event,callback)}),ids=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(ids)),groups){if(!(groups instanceof DataSet||groups instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=groups}else this.groupsData=null;if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id)}),ids=this.groupsData.getIds(),this._onAddGroups(ids)}this._updateUngrouped(),this._order(),this.body.emitter.emit("change",{queue:!0})},ItemSet.prototype.getGroups=function(){return this.groupsData},ItemSet.prototype.removeItem=function(id){var item=this.itemsData.get(id),dataset=this.itemsData.getDataSet();
item&&this.options.onRemove(item,function(item){item&&dataset.remove(id)})},ItemSet.prototype._getType=function(itemData){return itemData.type||this.options.type||(itemData.end?"range":"box")},ItemSet.prototype._getGroupId=function(itemData){var type=this._getType(itemData);return"background"==type&&void 0==itemData.group?BACKGROUND:this.groupsData?itemData.group:UNGROUPED},ItemSet.prototype._onUpdate=function(ids){var me=this;ids.forEach(function(id){var itemData=me.itemsData.get(id,me.itemOptions),item=me.items[id],type=me._getType(itemData),constructor=ItemSet.types[type];if(item&&(constructor&&item instanceof constructor?me._updateItem(item,itemData):(me._removeItem(item),item=null)),!item){if(!constructor)throw new TypeError("rangeoverflow"==type?'Item type "rangeoverflow" is deprecated. Use css styling instead: .vis.timeline .item.range .content {overflow: visible;}':'Unknown item type "'+type+'"');item=new constructor(itemData,me.conversion,me.options),item.id=id,me._addItem(item)}}),this._order(),this.stackDirty=!0,this.body.emitter.emit("change",{queue:!0})},ItemSet.prototype._onAdd=ItemSet.prototype._onUpdate,ItemSet.prototype._onRemove=function(ids){var count=0,me=this;ids.forEach(function(id){var item=me.items[id];item&&(count++,me._removeItem(item))}),count&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("change",{queue:!0}))},ItemSet.prototype._order=function(){util.forEach(this.groups,function(group){group.order()})},ItemSet.prototype._onUpdateGroups=function(ids){this._onAddGroups(ids)},ItemSet.prototype._onAddGroups=function(ids){var me=this;ids.forEach(function(id){var groupData=me.groupsData.get(id),group=me.groups[id];if(group)group.setData(groupData);else{if(id==UNGROUPED||id==BACKGROUND)throw new Error("Illegal group id. "+id+" is a reserved id.");var groupOptions=Object.create(me.options);util.extend(groupOptions,{height:null}),group=new Group(id,groupData,me),me.groups[id]=group;for(var itemId in me.items)if(me.items.hasOwnProperty(itemId)){var item=me.items[itemId];item.data.group==id&&group.add(item)}group.order(),group.show()}}),this.body.emitter.emit("change",{queue:!0})},ItemSet.prototype._onRemoveGroups=function(ids){var groups=this.groups;ids.forEach(function(id){var group=groups[id];group&&(group.hide(),delete groups[id])}),this.markDirty(),this.body.emitter.emit("change",{queue:!0})},ItemSet.prototype._orderGroups=function(){if(this.groupsData){var groupIds=this.groupsData.getIds({order:this.options.groupOrder}),changed=!util.equalArray(groupIds,this.groupIds);if(changed){var groups=this.groups;groupIds.forEach(function(groupId){groups[groupId].hide()}),groupIds.forEach(function(groupId){groups[groupId].show()}),this.groupIds=groupIds}return changed}return!1},ItemSet.prototype._addItem=function(item){this.items[item.id]=item;var groupId=this._getGroupId(item.data),group=this.groups[groupId];group&&group.add(item)},ItemSet.prototype._updateItem=function(item,itemData){var oldGroupId=item.data.group;if(item.setData(itemData),oldGroupId!=item.data.group){var oldGroup=this.groups[oldGroupId];oldGroup&&oldGroup.remove(item);var groupId=this._getGroupId(item.data),group=this.groups[groupId];group&&group.add(item)}},ItemSet.prototype._removeItem=function(item){item.hide(),delete this.items[item.id];var index=this.selection.indexOf(item.id);-1!=index&&this.selection.splice(index,1),item.parent&&item.parent.remove(item)},ItemSet.prototype._constructByEndArray=function(array){for(var endArray=[],i=0;i<array.length;i++)array[i]instanceof RangeItem&&endArray.push(array[i]);return endArray},ItemSet.prototype._onTouch=function(event){this.touchParams.item=ItemSet.itemFromTarget(event)},ItemSet.prototype._onDragStart=function(event){if(this.options.editable.updateTime||this.options.editable.updateGroup){var props,item=this.touchParams.item||null,me=this;if(item&&item.selected){var dragLeftItem=event.target.dragLeftItem,dragRightItem=event.target.dragRightItem;dragLeftItem?(props={item:dragLeftItem,initialX:event.gesture.center.clientX},me.options.editable.updateTime&&(props.start=item.data.start.valueOf()),me.options.editable.updateGroup&&"group"in item.data&&(props.group=item.data.group),this.touchParams.itemProps=[props]):dragRightItem?(props={item:dragRightItem,initialX:event.gesture.center.clientX},me.options.editable.updateTime&&(props.end=item.data.end.valueOf()),me.options.editable.updateGroup&&"group"in item.data&&(props.group=item.data.group),this.touchParams.itemProps=[props]):this.touchParams.itemProps=this.getSelection().map(function(id){var item=me.items[id],props={item:item,initialX:event.gesture.center.clientX};return me.options.editable.updateTime&&"start"in item.data&&(props.start=item.data.start.valueOf(),"end"in item.data&&(props.duration=item.data.end.valueOf()-props.start)),me.options.editable.updateGroup&&"group"in item.data&&(props.group=item.data.group),props}),event.stopPropagation()}}},ItemSet.prototype._onDrag=function(event){if(event.preventDefault(),this.touchParams.itemProps){var me=this,snap=this.options.snap||null,xOffset=this.body.dom.root.offsetLeft+this.body.domProps.left.width,scale=this.body.util.getScale(),step=this.body.util.getStep();this.touchParams.itemProps.forEach(function(props){var newProps={},current=me.body.util.toTime(event.gesture.center.clientX-xOffset),initial=me.body.util.toTime(props.initialX-xOffset),offset=current-initial;if("start"in props){var start=new Date(props.start+offset);newProps.start=snap?snap(start,scale,step):start}if("end"in props){var end=new Date(props.end+offset);newProps.end=snap?snap(end,scale,step):end}else"duration"in props&&(newProps.end=new Date(newProps.start.valueOf()+props.duration));if("group"in props){var group=me.groupFromTarget(event);newProps.group=group&&group.groupId}var itemData=util.extend({},props.item.data,newProps);me.options.onMoving(itemData,function(itemData){itemData&&me._updateItemProps(props.item,itemData)})}),this.stackDirty=!0,this.body.emitter.emit("change"),event.stopPropagation()}},ItemSet.prototype._updateItemProps=function(item,props){"start"in props&&(item.data.start=props.start),"end"in props&&(item.data.end=props.end),"group"in props&&item.data.group!=props.group&&this._moveToGroup(item,props.group)},ItemSet.prototype._moveToGroup=function(item,groupId){var group=this.groups[groupId];if(group&&group.groupId!=item.data.group){var oldGroup=item.parent;oldGroup.remove(item),oldGroup.order(),group.add(item),group.order(),item.data.group=group.groupId}},ItemSet.prototype._onDragEnd=function(event){if(event.preventDefault(),this.touchParams.itemProps){var changes=[],me=this,dataset=this.itemsData.getDataSet(),itemProps=this.touchParams.itemProps;this.touchParams.itemProps=null,itemProps.forEach(function(props){var id=props.item.id,itemData=me.itemsData.get(id,me.itemOptions),changed=!1;"start"in props.item.data&&(changed=props.start!=props.item.data.start.valueOf(),itemData.start=util.convert(props.item.data.start,dataset._options.type&&dataset._options.type.start||"Date")),"end"in props.item.data&&(changed=changed||props.end!=props.item.data.end.valueOf(),itemData.end=util.convert(props.item.data.end,dataset._options.type&&dataset._options.type.end||"Date")),"group"in props.item.data&&(changed=changed||props.group!=props.item.data.group,itemData.group=props.item.data.group),changed&&me.options.onMove(itemData,function(itemData){itemData?(itemData[dataset._fieldId]=id,changes.push(itemData)):(me._updateItemProps(props.item,props),me.stackDirty=!0,me.body.emitter.emit("change"))})}),changes.length&&dataset.update(changes),event.stopPropagation()}},ItemSet.prototype._onSelectItem=function(event){if(this.options.selectable){var ctrlKey=event.gesture.srcEvent&&event.gesture.srcEvent.ctrlKey,shiftKey=event.gesture.srcEvent&&event.gesture.srcEvent.shiftKey;if(ctrlKey||shiftKey)return void this._onMultiSelectItem(event);var oldSelection=this.getSelection(),item=ItemSet.itemFromTarget(event),selection=item?[item.id]:[];this.setSelection(selection);var newSelection=this.getSelection();(newSelection.length>0||oldSelection.length>0)&&this.body.emitter.emit("select",{items:newSelection})}},ItemSet.prototype._onAddItem=function(event){if(this.options.selectable&&this.options.editable.add){var me=this,snap=this.options.snap||null,item=ItemSet.itemFromTarget(event);if(item){var itemData=me.itemsData.get(item.id);this.options.onUpdate(itemData,function(itemData){itemData&&me.itemsData.getDataSet().update(itemData)})}else{var xAbs=util.getAbsoluteLeft(this.dom.frame),x=event.gesture.center.pageX-xAbs,start=this.body.util.toTime(x),scale=this.body.util.getScale(),step=this.body.util.getStep(),newItem={start:snap?snap(start,scale,step):start,content:"new item"};if("range"===this.options.type){var end=this.body.util.toTime(x+this.props.width/5);newItem.end=snap?snap(end,scale,step):end}newItem[this.itemsData._fieldId]=util.randomUUID();var group=this.groupFromTarget(event);group&&(newItem.group=group.groupId),this.options.onAdd(newItem,function(item){item&&me.itemsData.getDataSet().add(item)})}}},ItemSet.prototype._onMultiSelectItem=function(event){if(this.options.selectable){var selection,item=ItemSet.itemFromTarget(event);if(item){selection=this.getSelection();var shiftKey=event.gesture.touches[0]&&event.gesture.touches[0].shiftKey||!1;if(shiftKey){selection.push(item.id);var range=ItemSet._getItemRange(this.itemsData.get(selection,this.itemOptions));selection=[];for(var id in this.items)if(this.items.hasOwnProperty(id)){var _item=this.items[id],start=_item.data.start,end=void 0!==_item.data.end?_item.data.end:start;start>=range.min&&end<=range.max&&selection.push(_item.id)}}else{var index=selection.indexOf(item.id);-1==index?selection.push(item.id):selection.splice(index,1)}this.setSelection(selection),this.body.emitter.emit("select",{items:this.getSelection()})}}},ItemSet._getItemRange=function(itemsData){var max=null,min=null;return itemsData.forEach(function(data){(null==min||data.start<min)&&(min=data.start),void 0!=data.end?(null==max||data.end>max)&&(max=data.end):(null==max||data.start>max)&&(max=data.start)}),{min:min,max:max}},ItemSet.itemFromTarget=function(event){for(var target=event.target;target;){if(target.hasOwnProperty("timeline-item"))return target["timeline-item"];target=target.parentNode}return null},ItemSet.prototype.groupFromTarget=function(event){for(var clientY=event.gesture.center.clientY,i=0;i<this.groupIds.length;i++){var groupId=this.groupIds[i],group=this.groups[groupId],foreground=group.dom.foreground,top=util.getAbsoluteTop(foreground);if(clientY>top&&clientY<top+foreground.offsetHeight)return group;if("top"===this.options.orientation){if(i===this.groupIds.length-1&&clientY>top)return group}else if(0===i&&clientY<top+foreground.offset)return group}return null},ItemSet.itemSetFromTarget=function(event){for(var target=event.target;target;){if(target.hasOwnProperty("timeline-itemset"))return target["timeline-itemset"];target=target.parentNode}return null},module.exports=ItemSet},function(module,exports,__webpack_require__){function Legend(body,options,side,linegraphOptions){this.body=body,this.defaultOptions={enabled:!0,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-left"}},this.side=side,this.options=util.extend({},this.defaultOptions),this.linegraphOptions=linegraphOptions,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.setOptions(options)}var util=__webpack_require__(1),DOMutil=__webpack_require__(2),Component=__webpack_require__(25);Legend.prototype=new Component,Legend.prototype.clear=function(){this.groups={},this.amountOfGroups=0},Legend.prototype.addGroup=function(label,graphOptions){this.groups.hasOwnProperty(label)||(this.groups[label]=graphOptions),this.amountOfGroups+=1},Legend.prototype.updateGroup=function(label,graphOptions){this.groups[label]=graphOptions},Legend.prototype.removeGroup=function(label){this.groups.hasOwnProperty(label)&&(delete this.groups[label],this.amountOfGroups-=1)},Legend.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="legendText",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},Legend.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},Legend.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},Legend.prototype.setOptions=function(options){var fields=["enabled","orientation","icons","left","right"];util.selectiveDeepExtend(fields,this.options,options)},Legend.prototype.redraw=function(){var activeGroups=0;for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||activeGroups++);if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==activeGroups)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var scrollableHeight=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+scrollableHeight+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var content="";for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||(content+=this.groups[groupId].content+"<br />"));this.dom.textArea.innerHTML=content,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},Legend.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){DOMutil.prepareElements(this.svgElements);var padding=window.getComputedStyle(this.dom.frame).paddingTop,iconOffset=Number(padding.replace("px","")),x=iconOffset,iconWidth=this.options.iconSize,iconHeight=.75*this.options.iconSize,y=iconOffset+.5*iconHeight+3;this.svg.style.width=iconWidth+5+iconOffset+"px";for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||(this.groups[groupId].drawIcon(x,y,this.svgElements,this.svg,iconWidth,iconHeight),y+=iconHeight+this.options.iconSpacing));DOMutil.cleanupElements(this.svgElements)}},module.exports=Legend},function(module,exports,__webpack_require__){function LineGraph(body,options){this.id=util.randomUUID(),this.body=body,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,handleOverlap:"overlap",align:"center"},catmullRom:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:"40px",visible:!0,alignZeros:!0,customRange:{left:{min:void 0,max:void 0},right:{min:void 0,max:void 0}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},groups:{visibility:{}}},this.options=util.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1;var me=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(event,params){me._onAdd(params.items)},update:function(event,params){me._onUpdate(params.items)},remove:function(event,params){me._onRemove(params.items)}},this.groupListeners={add:function(event,params){me._onAddGroups(params.items)},update:function(event,params){me._onUpdateGroups(params.items)},remove:function(event,params){me._onRemoveGroups(params.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(options),this.groupsUsingDefaultStyles=[0],this.COUNTER=0,this.body.emitter.on("rangechanged",function(){me.lastStart=me.body.range.start,me.svg.style.left=util.option.asSize(-me.props.width),me.redraw.call(me,!0)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.body.emitter.emit("change")}var util=__webpack_require__(1),DOMutil=__webpack_require__(2),DataSet=__webpack_require__(3),DataView=__webpack_require__(4),Component=__webpack_require__(25),DataAxis=__webpack_require__(28),GraphGroup=__webpack_require__(29),Legend=__webpack_require__(33),BarGraphFunctions=__webpack_require__(50),UNGROUPED="__ungrouped__";LineGraph.prototype=new Component,LineGraph.prototype._create=function(){var frame=document.createElement("div");frame.className="LineGraph",this.dom.frame=frame,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",frame.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new Legend(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new Legend(this.body,this.options.legend,"right",this.options.groups),this.show()},LineGraph.prototype.setOptions=function(options){if(options){var fields=["sampling","defaultGroup","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];void 0===options.graphHeight&&void 0!==options.height&&void 0!==this.body.domProps.centerContainer.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==options.graphHeight&&parseInt((options.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),util.selectiveDeepExtend(fields,this.options,options),util.mergeOptions(this.options,options,"catmullRom"),util.mergeOptions(this.options,options,"drawPoints"),util.mergeOptions(this.options,options,"shaded"),util.mergeOptions(this.options,options,"legend"),options.catmullRom&&"object"==typeof options.catmullRom&&options.catmullRom.parametrization&&("uniform"==options.catmullRom.parametrization?this.options.catmullRom.alpha=0:"chordal"==options.catmullRom.parametrization?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5)),this.yAxisLeft&&void 0!==options.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==options.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(UNGROUPED)&&this.groups[UNGROUPED].setOptions(options)}this.dom.frame&&this.redraw(!0)},LineGraph.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},LineGraph.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},LineGraph.prototype.setItems=function(items){var ids,me=this,oldItemsData=this.itemsData;if(items){if(!(items instanceof DataSet||items instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=items}else this.itemsData=null;if(oldItemsData&&(util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback)}),ids=oldItemsData.getIds(),this._onRemove(ids)),this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id)}),ids=this.itemsData.getIds(),this._onAdd(ids)}this._updateUngrouped(),this.redraw(!0)},LineGraph.prototype.setGroups=function(groups){var ids,me=this;if(this.groupsData&&(util.forEach(this.groupListeners,function(callback,event){me.groupsData.unsubscribe(event,callback)}),ids=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(ids)),groups){if(!(groups instanceof DataSet||groups instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=groups}else this.groupsData=null;if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id)}),ids=this.groupsData.getIds(),this._onAddGroups(ids)}this._onUpdate()},LineGraph.prototype._onUpdate=function(){this._updateUngrouped(),this._updateAllGroupData(),this.redraw(!0)},LineGraph.prototype._onAdd=function(ids){this._onUpdate(ids)},LineGraph.prototype._onRemove=function(ids){this._onUpdate(ids)},LineGraph.prototype._onUpdateGroups=function(groupIds){for(var i=0;i<groupIds.length;i++){var group=this.groupsData.get(groupIds[i]);this._updateGroup(group,groupIds[i])}this.redraw(!0)},LineGraph.prototype._onAddGroups=function(groupIds){this._onUpdateGroups(groupIds)},LineGraph.prototype._onRemoveGroups=function(groupIds){for(var i=0;i<groupIds.length;i++)this.groups.hasOwnProperty(groupIds[i])&&("right"==this.groups[groupIds[i]].options.yAxisOrientation?(this.yAxisRight.removeGroup(groupIds[i]),this.legendRight.removeGroup(groupIds[i]),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(groupIds[i]),this.legendLeft.removeGroup(groupIds[i]),this.legendLeft.redraw()),delete this.groups[groupIds[i]]);this._updateUngrouped(),this.redraw(!0)},LineGraph.prototype._updateGroup=function(group,groupId){this.groups.hasOwnProperty(groupId)?(this.groups[groupId].update(group),"right"==this.groups[groupId].options.yAxisOrientation?(this.yAxisRight.updateGroup(groupId,this.groups[groupId]),this.legendRight.updateGroup(groupId,this.groups[groupId])):(this.yAxisLeft.updateGroup(groupId,this.groups[groupId]),this.legendLeft.updateGroup(groupId,this.groups[groupId]))):(this.groups[groupId]=new GraphGroup(group,groupId,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[groupId].options.yAxisOrientation?(this.yAxisRight.addGroup(groupId,this.groups[groupId]),this.legendRight.addGroup(groupId,this.groups[groupId])):(this.yAxisLeft.addGroup(groupId,this.groups[groupId]),this.legendLeft.addGroup(groupId,this.groups[groupId]))),this.legendLeft.redraw(),this.legendRight.redraw()},LineGraph.prototype._updateAllGroupData=function(){if(null!=this.itemsData){var groupId,groupsContent={};for(groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(groupsContent[groupId]=[]);for(var itemId in this.itemsData._data)if(this.itemsData._data.hasOwnProperty(itemId)){var item=this.itemsData._data[itemId];if(void 0===groupsContent[item.group])throw new Error("Cannot find referenced group. Possible reason: items added before groups? Groups need to be added before items, as items refer to groups.");item.x=util.convert(item.x,"Date"),groupsContent[item.group].push(item)}for(groupId in this.groups)this.groups.hasOwnProperty(groupId)&&this.groups[groupId].setItems(groupsContent[groupId])}},LineGraph.prototype._updateUngrouped=function(){if(this.itemsData&&null!=this.itemsData){var ungroupedCounter=0;for(var itemId in this.itemsData._data)if(this.itemsData._data.hasOwnProperty(itemId)){var item=this.itemsData._data[itemId];void 0!=item&&(item.hasOwnProperty("group")?void 0===item.group&&(item.group=UNGROUPED):item.group=UNGROUPED,ungroupedCounter=item.group==UNGROUPED?ungroupedCounter+1:ungroupedCounter)}if(0==ungroupedCounter)delete this.groups[UNGROUPED],this.legendLeft.removeGroup(UNGROUPED),this.legendRight.removeGroup(UNGROUPED),this.yAxisLeft.removeGroup(UNGROUPED),this.yAxisRight.removeGroup(UNGROUPED);else{var group={id:UNGROUPED,content:this.options.defaultGroup};this._updateGroup(group,UNGROUPED)}}else delete this.groups[UNGROUPED],this.legendLeft.removeGroup(UNGROUPED),this.legendRight.removeGroup(UNGROUPED),this.yAxisLeft.removeGroup(UNGROUPED),this.yAxisRight.removeGroup(UNGROUPED);this.legendLeft.redraw(),this.legendRight.redraw()},LineGraph.prototype.redraw=function(forceGraphUpdate){var resized=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height,void 0===this.lastWidth&&this.props.width&&(forceGraphUpdate=!0),resized=this._isResized()||resized;var visibleInterval=this.body.range.end-this.body.range.start,zoomed=visibleInterval!=this.lastVisibleInterval;if(this.lastVisibleInterval=visibleInterval,1==resized&&(this.svg.style.width=util.option.asSize(3*this.props.width),this.svg.style.left=util.option.asSize(-this.props.width),(-1!=(this.options.height+"").indexOf("%")||1==this.updateSVGheightOnResize)&&(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.body.domProps.centerContainer.height+"px"&&(this.options.graphHeight=this.body.domProps.centerContainer.height+"px",this.svg.style.height=this.body.domProps.centerContainer.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==resized||1==zoomed||1==this.abortedGraphUpdate||1==forceGraphUpdate)resized=this._updateGraph()||resized;else if(0!=this.lastStart){var offset=this.body.range.start-this.lastStart,range=this.body.range.end-this.body.range.start;if(0!=this.props.width){var rangePerPixelInv=this.props.width/range,xOffset=offset*rangePerPixelInv;this.svg.style.left=-this.props.width-xOffset+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),resized},LineGraph.prototype._updateGraph=function(){if(DOMutil.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var group,i,preprocessedGroupData={},processedGroupData={},groupRanges={},changeCalled=!1,groupIds=[];for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(group=this.groups[groupId],1!=group.visible||void 0!==this.options.groups.visibility[groupId]&&1!=this.options.groups.visibility[groupId]||groupIds.push(groupId));if(groupIds.length>0){var minDate=this.body.util.toGlobalTime(-this.body.domProps.root.width),maxDate=this.body.util.toGlobalTime(2*this.body.domProps.root.width),groupsData={};for(this._getRelevantData(groupIds,groupsData,minDate,maxDate),this._applySampling(groupIds,groupsData),i=0;i<groupIds.length;i++)preprocessedGroupData[groupIds[i]]=this._convertXcoordinates(groupsData[groupIds[i]]);this._getYRanges(groupIds,preprocessedGroupData,groupRanges),changeCalled=this._updateYAxis(groupIds,groupRanges);var MAX_CYCLES=5;if(1==changeCalled&&this.COUNTER<MAX_CYCLES)return DOMutil.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,this.COUNTER++,this.body.emitter.emit("change"),!0;for(this.COUNTER>MAX_CYCLES&&console.log("WARNING: there may be an infinite loop in the _updateGraph emitter cycle."),this.COUNTER=0,this.abortedGraphUpdate=!1,i=0;i<groupIds.length;i++)group=this.groups[groupIds[i]],processedGroupData[groupIds[i]]=this._convertYcoordinates(groupsData[groupIds[i]],group);for(i=0;i<groupIds.length;i++)group=this.groups[groupIds[i]],"bar"!=group.options.style&&group.draw(processedGroupData[groupIds[i]],group,this.framework);BarGraphFunctions.draw(groupIds,processedGroupData,this.framework)}}return DOMutil.cleanupElements(this.svgElements),!1},LineGraph.prototype._getRelevantData=function(groupIds,groupsData,minDate,maxDate){var group,i,j,item;if(groupIds.length>0)for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]],groupsData[groupIds[i]]=[];var dataContainer=groupsData[groupIds[i]];if(1==group.options.sort){var guess=Math.max(0,util.binarySearchValue(group.itemsData,minDate,"x","before"));for(j=guess;j<group.itemsData.length;j++)if(item=group.itemsData[j],void 0!==item){if(item.x>maxDate){dataContainer.push(item);break}dataContainer.push(item)}}else for(j=0;j<group.itemsData.length;j++)item=group.itemsData[j],void 0!==item&&item.x>minDate&&item.x<maxDate&&dataContainer.push(item)}},LineGraph.prototype._applySampling=function(groupIds,groupsData){var group;if(groupIds.length>0)for(var i=0;i<groupIds.length;i++)if(group=this.groups[groupIds[i]],1==group.options.sampling){var dataContainer=groupsData[groupIds[i]];if(dataContainer.length>0){var increment=1,amountOfPoints=dataContainer.length,xDistance=this.body.util.toGlobalScreen(dataContainer[dataContainer.length-1].x)-this.body.util.toGlobalScreen(dataContainer[0].x),pointsPerPixel=amountOfPoints/xDistance;increment=Math.min(Math.ceil(.2*amountOfPoints),Math.max(1,Math.round(pointsPerPixel)));for(var sampledData=[],j=0;amountOfPoints>j;j+=increment)sampledData.push(dataContainer[j]);groupsData[groupIds[i]]=sampledData}}},LineGraph.prototype._getYRanges=function(groupIds,groupsData,groupRanges){var groupData,group,i,options,barCombinedDataLeft=[],barCombinedDataRight=[];if(groupIds.length>0){for(i=0;i<groupIds.length;i++)groupData=groupsData[groupIds[i]],options=this.groups[groupIds[i]].options,groupData.length>0&&(group=this.groups[groupIds[i]],"stack"==options.barChart.handleOverlap&&"bar"==options.style?"left"==options.yAxisOrientation?barCombinedDataLeft=barCombinedDataLeft.concat(group.getYRange(groupData)):barCombinedDataRight=barCombinedDataRight.concat(group.getYRange(groupData)):groupRanges[groupIds[i]]=group.getYRange(groupData,groupIds[i]));BarGraphFunctions.getStackedBarYRange(barCombinedDataLeft,groupRanges,groupIds,"__barchartLeft","left"),BarGraphFunctions.getStackedBarYRange(barCombinedDataRight,groupRanges,groupIds,"__barchartRight","right")}},LineGraph.prototype._updateYAxis=function(groupIds,groupRanges){var minVal,maxVal,resized=!1,yAxisLeftUsed=!1,yAxisRightUsed=!1,minLeft=1e9,minRight=1e9,maxLeft=-1e9,maxRight=-1e9;if(groupIds.length>0){for(var i=0;i<groupIds.length;i++){var group=this.groups[groupIds[i]];group&&"right"!=group.options.yAxisOrientation?(yAxisLeftUsed=!0,minLeft=0,maxLeft=0):group&&group.options.yAxisOrientation&&(yAxisRightUsed=!0,minRight=0,maxRight=0)}for(var i=0;i<groupIds.length;i++)groupRanges.hasOwnProperty(groupIds[i])&&groupRanges[groupIds[i]].ignore!==!0&&(minVal=groupRanges[groupIds[i]].min,maxVal=groupRanges[groupIds[i]].max,"right"!=groupRanges[groupIds[i]].yAxisOrientation?(yAxisLeftUsed=!0,minLeft=minLeft>minVal?minVal:minLeft,maxLeft=maxVal>maxLeft?maxVal:maxLeft):(yAxisRightUsed=!0,minRight=minRight>minVal?minVal:minRight,maxRight=maxVal>maxRight?maxVal:maxRight));1==yAxisLeftUsed&&this.yAxisLeft.setRange(minLeft,maxLeft),1==yAxisRightUsed&&this.yAxisRight.setRange(minRight,maxRight)}return resized=this._toggleAxisVisiblity(yAxisLeftUsed,this.yAxisLeft)||resized,resized=this._toggleAxisVisiblity(yAxisRightUsed,this.yAxisRight)||resized,1==yAxisRightUsed&&1==yAxisLeftUsed?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!yAxisLeftUsed,0==this.yAxisRight.master?(this.yAxisLeft.lineOffset=1==yAxisRightUsed?this.yAxisRight.width:0,resized=this.yAxisLeft.redraw()||resized,this.yAxisRight.stepPixelsForced=this.yAxisLeft.stepPixels,this.yAxisRight.zeroCrossing=this.yAxisLeft.zeroCrossing,resized=this.yAxisRight.redraw()||resized):resized=this.yAxisRight.redraw()||resized,-1!=groupIds.indexOf("__barchartLeft")&&groupIds.splice(groupIds.indexOf("__barchartLeft"),1),-1!=groupIds.indexOf("__barchartRight")&&groupIds.splice(groupIds.indexOf("__barchartRight"),1),resized
},LineGraph.prototype._toggleAxisVisiblity=function(axisUsed,axis){var changed=!1;return 0==axisUsed?axis.dom.frame.parentNode&&0==axis.hidden&&(axis.hide(),changed=!0):axis.dom.frame.parentNode||1!=axis.hidden||(axis.show(),changed=!0),changed},LineGraph.prototype._convertXcoordinates=function(datapoints){for(var xValue,yValue,extractedData=[],toScreen=this.body.util.toScreen,i=0;i<datapoints.length;i++)xValue=toScreen(datapoints[i].x)+this.props.width,yValue=datapoints[i].y,extractedData.push({x:xValue,y:yValue});return extractedData},LineGraph.prototype._convertYcoordinates=function(datapoints,group){var xValue,yValue,extractedData=[],toScreen=this.body.util.toScreen,axis=this.yAxisLeft,svgHeight=Number(this.svg.style.height.replace("px",""));"right"==group.options.yAxisOrientation&&(axis=this.yAxisRight);for(var i=0;i<datapoints.length;i++)xValue=toScreen(datapoints[i].x)+this.props.width,yValue=Math.round(axis.convertValue(datapoints[i].y)),extractedData.push({x:xValue,y:yValue});return group.setZeroPosition(Math.min(svgHeight,axis.convertValue(0))),extractedData},module.exports=LineGraph},function(module,exports,__webpack_require__){function TimeAxis(body,options){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:"bottom",showMinorLabels:!0,showMajorLabels:!0,format:null,timeAxis:null},this.options=util.extend({},this.defaultOptions),this.body=body,this._create(),this.setOptions(options)}var util=__webpack_require__(1),Component=__webpack_require__(25),TimeStep=__webpack_require__(19),DateUtil=__webpack_require__(15),moment=__webpack_require__(44);TimeAxis.prototype=new Component,TimeAxis.prototype.setOptions=function(options){options&&(util.selectiveExtend(["orientation","showMinorLabels","showMajorLabels","hiddenDates","format","timeAxis"],this.options,options),"locale"in options&&("function"==typeof moment.locale?moment.locale(options.locale):moment.lang(options.locale)))},TimeAxis.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="timeaxis foreground",this.dom.background.className="timeaxis background"},TimeAxis.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},TimeAxis.prototype.redraw=function(){var options=this.options,props=this.props,foreground=this.dom.foreground,background=this.dom.background,parent="top"==options.orientation?this.body.dom.top:this.body.dom.bottom,parentChanged=foreground.parentNode!==parent;this._calculateCharSize();var showMinorLabels=(this.options.orientation,this.options.showMinorLabels),showMajorLabels=this.options.showMajorLabels;props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0,props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0,props.height=props.minorLabelHeight+props.majorLabelHeight,props.width=foreground.offsetWidth,props.minorLineHeight=this.body.domProps.root.height-props.majorLabelHeight-("top"==options.orientation?this.body.domProps.bottom.height:this.body.domProps.top.height),props.minorLineWidth=1,props.majorLineHeight=props.minorLineHeight+props.majorLabelHeight,props.majorLineWidth=1;var foregroundNextSibling=foreground.nextSibling,backgroundNextSibling=background.nextSibling;return foreground.parentNode&&foreground.parentNode.removeChild(foreground),background.parentNode&&background.parentNode.removeChild(background),foreground.style.height=this.props.height+"px",this._repaintLabels(),foregroundNextSibling?parent.insertBefore(foreground,foregroundNextSibling):parent.appendChild(foreground),backgroundNextSibling?this.body.dom.backgroundVertical.insertBefore(background,backgroundNextSibling):this.body.dom.backgroundVertical.appendChild(background),this._isResized()||parentChanged},TimeAxis.prototype._repaintLabels=function(){var orientation=this.options.orientation,start=util.convert(this.body.range.start,"Number"),end=util.convert(this.body.range.end,"Number"),timeLabelsize=this.body.util.toTime(7*(this.props.minorCharWidth||10)).valueOf(),minimumStep=timeLabelsize-DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this.body.range,timeLabelsize);minimumStep-=this.body.util.toTime(0).valueOf();var step=new TimeStep(new Date(start),new Date(end),minimumStep,this.body.hiddenDates);this.options.format&&step.setFormat(this.options.format),this.options.timeAxis&&step.setScale(this.options.timeAxis),this.step=step;var dom=this.dom;dom.redundant.lines=dom.lines,dom.redundant.majorTexts=dom.majorTexts,dom.redundant.minorTexts=dom.minorTexts,dom.lines=[],dom.majorTexts=[],dom.minorTexts=[];var cur,isMajor,prevLine,className,x=0,xPrev=0,width=0,xFirstMajorLabel=void 0,max=0;for(step.first();step.hasNext()&&1e3>max;)max++,cur=step.getCurrent(),isMajor=step.isMajor(),className=step.getClassName(),xPrev=x,x=this.body.util.toScreen(cur),width=x-xPrev,prevLine&&(prevLine.style.width=width+"px"),this.options.showMinorLabels&&this._repaintMinorText(x,step.getLabelMinor(),orientation,className),isMajor&&this.options.showMajorLabels?(x>0&&(void 0==xFirstMajorLabel&&(xFirstMajorLabel=x),this._repaintMajorText(x,step.getLabelMajor(),orientation,className)),prevLine=this._repaintMajorLine(x,orientation,className)):prevLine=this._repaintMinorLine(x,orientation,className),step.next();if(this.options.showMajorLabels){var leftTime=this.body.util.toTime(0),leftText=step.getLabelMajor(leftTime),widthText=leftText.length*(this.props.majorCharWidth||10)+10;(void 0==xFirstMajorLabel||xFirstMajorLabel>widthText)&&this._repaintMajorText(0,leftText,orientation,className)}util.forEach(this.dom.redundant,function(arr){for(;arr.length;){var elem=arr.pop();elem&&elem.parentNode&&elem.parentNode.removeChild(elem)}})},TimeAxis.prototype._repaintMinorText=function(x,text,orientation,className){var label=this.dom.redundant.minorTexts.shift();if(!label){var content=document.createTextNode("");label=document.createElement("div"),label.appendChild(content),this.dom.foreground.appendChild(label)}this.dom.minorTexts.push(label),label.childNodes[0].nodeValue=text,label.style.top="top"==orientation?this.props.majorLabelHeight+"px":"0",label.style.left=x+"px",label.className="text minor "+className},TimeAxis.prototype._repaintMajorText=function(x,text,orientation,className){var label=this.dom.redundant.majorTexts.shift();if(!label){var content=document.createTextNode(text);label=document.createElement("div"),label.appendChild(content),this.dom.foreground.appendChild(label)}this.dom.majorTexts.push(label),label.childNodes[0].nodeValue=text,label.className="text major "+className,label.style.top="top"==orientation?"0":this.props.minorLabelHeight+"px",label.style.left=x+"px"},TimeAxis.prototype._repaintMinorLine=function(x,orientation,className){var line=this.dom.redundant.lines.shift();line||(line=document.createElement("div"),this.dom.background.appendChild(line)),this.dom.lines.push(line);var props=this.props;return line.style.top="top"==orientation?props.majorLabelHeight+"px":this.body.domProps.top.height+"px",line.style.height=props.minorLineHeight+"px",line.style.left=x-props.minorLineWidth/2+"px",line.className="grid vertical minor "+className,line},TimeAxis.prototype._repaintMajorLine=function(x,orientation,className){var line=this.dom.redundant.lines.shift();line||(line=document.createElement("div"),this.dom.background.appendChild(line)),this.dom.lines.push(line);var props=this.props;return line.style.top="top"==orientation?"0":this.body.domProps.top.height+"px",line.style.left=x-props.majorLineWidth/2+"px",line.style.height=props.majorLineHeight+"px",line.className="grid vertical major "+className,line},TimeAxis.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="text minor measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="text major measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth},module.exports=TimeAxis},function(module,exports,__webpack_require__){function Network(container,data,options){if(!(this instanceof Network))throw new SyntaxError("Constructor must be called with the new operator");this._determineBrowserMethod(),this._initializeMixinLoaders(),this.containerElement=container,this.renderRefreshRate=60,this.renderTimestep=1e3/this.renderRefreshRate,this.renderTime=0,this.physicsTime=0,this.runDoubleSpeed=!1,this.physicsDiscreteStepsize=.5,this.initializing=!0,this.triggerFunctions={add:null,edit:null,editEdge:null,connect:null,del:null};var customScalingFunction=function(min,max,total,value){if(max==min)return.5;var scale=1/(max-min);return Math.max(0,(value-min)*scale)};this.defaultOptions={nodes:{customScalingFunction:customScalingFunction,mass:1,radiusMin:10,radiusMax:30,radius:10,shape:"ellipse",image:void 0,widthMin:16,widthMax:64,fontColor:"black",fontSize:14,fontFace:"verdana",fontFill:void 0,fontStrokeWidth:0,fontStrokeColor:"#ffffff",fontDrawThreshold:3,scaleFontWithValue:!1,fontSizeMin:14,fontSizeMax:30,fontSizeMaxVisible:30,level:-1,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},group:void 0,borderWidth:1,borderWidthSelected:void 0},edges:{customScalingFunction:customScalingFunction,widthMin:1,widthMax:15,width:1,widthSelectionMultiplier:2,hoverWidth:1.5,style:"line",color:{color:"#848484",highlight:"#848484",hover:"#848484"},opacity:1,fontColor:"#343434",fontSize:14,fontFace:"arial",fontFill:"white",fontStrokeWidth:0,fontStrokeColor:"white",labelAlignment:"horizontal",arrowScaleFactor:1,dash:{length:10,gap:5,altLength:void 0},inheritColor:"from"},configurePhysics:!1,physics:{barnesHut:{enabled:!0,thetaInverted:2,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09},repulsion:{centralGravity:0,springLength:200,springConstant:.05,nodeDistance:100,damping:.09},hierarchicalRepulsion:{enabled:!1,centralGravity:0,springLength:100,springConstant:.01,nodeDistance:150,damping:.09},damping:null,centralGravity:null,springLength:null,springConstant:null},clustering:{enabled:!1,initialMaxNodes:100,clusterThreshold:500,reduceToNodes:300,chainThreshold:.4,clusterEdgeThreshold:20,sectorThreshold:100,screenSizeThreshold:.2,fontSizeMultiplier:4,maxFontSize:1e3,forceAmplification:.1,distanceAmplification:.1,edgeGrowth:20,nodeScaling:{width:1,height:1,radius:1},maxNodeSizeIncrements:600,activeAreaBoxSize:80,clusterLevelDifference:2,clusterByZoom:!0},navigation:{enabled:!1},keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},dataManipulation:{enabled:!1,initiallyVisible:!1},hierarchicalLayout:{enabled:!1,levelSeparation:150,nodeSpacing:100,direction:"UD",layout:"hubsize"},freezeForStabilization:!1,smoothCurves:{enabled:!0,dynamic:!0,type:"continuous",roundness:.5},maxVelocity:50,minVelocity:.1,stabilize:!0,stabilizationIterations:1e3,zoomExtentOnStabilize:!0,locale:"en",locales:locales,tooltip:{delay:300,fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}},dragNetwork:!0,dragNodes:!0,zoomable:!0,hover:!1,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,width:"100%",height:"100%",selectable:!0},this.constants=util.extend({},this.defaultOptions),this.pixelRatio=1,this.hoverObj={nodes:{},edges:{}},this.controlNodesActive=!1,this.navigationHammers={existing:[],_new:[]},this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.animating=!1,this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=null,this.lockedOnNodeOffset=null,this.touchTime=0;var network=this;this.groups=new Groups,this.images=new Images,this.images.setOnloadCallback(function(){network._redraw()}),this.xIncrement=0,this.yIncrement=0,this.zoomIncrement=0,this._loadPhysicsSystem(),this._create(),this._loadSectorSystem(),this._loadClusterSystem(),this._loadSelectionSystem(),this._loadHierarchySystem(),this._setTranslation(this.frame.clientWidth/2,this.frame.clientHeight/2),this._setScale(1),this.setOptions(options),this.freezeSimulationEnabled=!1,this.cachedFunctions={},this.startedStabilization=!1,this.stabilized=!1,this.stabilizationIterations=null,this.draggingNodes=!1,this.calculationNodes={},this.calculationNodeIndices=[],this.nodeIndices=[],this.nodes={},this.edges={},this.canvasTopLeft={x:0,y:0},this.canvasBottomRight={x:0,y:0},this.pointerPosition={x:0,y:0},this.areaCenter={},this.scale=1,this.previousScale=this.scale,this.nodesData=null,this.edgesData=null,this.nodesListeners={add:function(event,params){network._addNodes(params.items),network.start()},update:function(event,params){network._updateNodes(params.items,params.data),network.start()},remove:function(event,params){network._removeNodes(params.items),network.start()}},this.edgesListeners={add:function(event,params){network._addEdges(params.items),network.start()},update:function(event,params){network._updateEdges(params.items),network.start()},remove:function(event,params){network._removeEdges(params.items),network.start()}},this.moving=!0,this.timer=void 0,this.setData(data,this.constants.clustering.enabled||this.constants.hierarchicalLayout.enabled),this.initializing=!1,1==this.constants.hierarchicalLayout.enabled?this._setupHierarchicalLayout():0==this.constants.stabilize&&this.zoomExtent({duration:0},!0,this.constants.clustering.enabled),this.constants.clustering.enabled&&this.startWithClustering()}var Emitter=__webpack_require__(56),Hammer=__webpack_require__(45),keycharm=__webpack_require__(59),util=__webpack_require__(1),hammerUtil=__webpack_require__(47),DataSet=__webpack_require__(3),DataView=__webpack_require__(4),dotparser=__webpack_require__(42),gephiParser=__webpack_require__(43),Groups=__webpack_require__(38),Images=__webpack_require__(39),Node=__webpack_require__(40),Edge=__webpack_require__(37),Popup=__webpack_require__(41),MixinLoader=__webpack_require__(52),Activator=__webpack_require__(53),locales=__webpack_require__(54);__webpack_require__(55),Emitter(Network.prototype),Network.prototype._determineBrowserMethod=function(){var browserType=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=browserType.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=browserType.indexOf("safari")&&browserType.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)},Network.prototype._getScriptPath=function(){for(var scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){var src=scripts[i].src,match=src&&/\/?vis(.min)?\.js$/.exec(src);if(match)return src.substring(0,src.length-match[0].length)}return null},Network.prototype._getRange=function(specificNodes){var node,minY=1e9,maxY=-1e9,minX=1e9,maxX=-1e9;if(specificNodes.length>0)for(var i=0;i<specificNodes.length;i++)node=this.nodes[specificNodes[i]],minX>node.boundingBox.left&&(minX=node.boundingBox.left),maxX<node.boundingBox.right&&(maxX=node.boundingBox.right),minY>node.boundingBox.bottom&&(minY=node.boundingBox.top),maxY<node.boundingBox.top&&(maxY=node.boundingBox.bottom);else for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],minX>node.boundingBox.left&&(minX=node.boundingBox.left),maxX<node.boundingBox.right&&(maxX=node.boundingBox.right),minY>node.boundingBox.bottom&&(minY=node.boundingBox.top),maxY<node.boundingBox.top&&(maxY=node.boundingBox.bottom));return 1e9==minX&&-1e9==maxX&&1e9==minY&&-1e9==maxY&&(minY=0,maxY=0,minX=0,maxX=0),{minX:minX,maxX:maxX,minY:minY,maxY:maxY}},Network.prototype._findCenter=function(range){return{x:.5*(range.maxX+range.minX),y:.5*(range.maxY+range.minY)}},Network.prototype.zoomExtent=function(options,initialZoom,disableStart){this._redraw(!0),void 0===initialZoom&&(initialZoom=!1),void 0===disableStart&&(disableStart=!1),void 0===options&&(options={nodes:[]}),void 0===options.nodes&&(options.nodes=[]);var range,zoomLevel;if(1==initialZoom){var positionDefined=0;for(var nodeId in this.nodes)if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];1==node.predefinedPosition&&(positionDefined+=1)}if(positionDefined>.5*this.nodeIndices.length)return void this.zoomExtent(options,!1,disableStart);range=this._getRange(options.nodes);var numberOfNodes=this.nodeIndices.length;zoomLevel=1==this.constants.smoothCurves?1==this.constants.clustering.enabled&&numberOfNodes>=this.constants.clustering.initialMaxNodes?49.07548/(numberOfNodes+142.05338)+91444e-8:12.662/(numberOfNodes+7.4147)+.0964822:1==this.constants.clustering.enabled&&numberOfNodes>=this.constants.clustering.initialMaxNodes?77.5271985/(numberOfNodes+187.266146)+476710517e-13:30.5062972/(numberOfNodes+19.93597763)+.08413486;var factor=Math.min(this.frame.canvas.clientWidth/600,this.frame.canvas.clientHeight/600);zoomLevel*=factor}else{range=this._getRange(options.nodes);var xDistance=1.1*Math.abs(range.maxX-range.minX),yDistance=1.1*Math.abs(range.maxY-range.minY),xZoomLevel=this.frame.canvas.clientWidth/xDistance,yZoomLevel=this.frame.canvas.clientHeight/yDistance;zoomLevel=yZoomLevel>=xZoomLevel?xZoomLevel:yZoomLevel}zoomLevel>1&&(zoomLevel=1);var center=this._findCenter(range);if(0==disableStart){var options={position:center,scale:zoomLevel,animation:options};this.moveTo(options),this.moving=!0,this.start()}else center.x*=zoomLevel,center.y*=zoomLevel,center.x-=.5*this.frame.canvas.clientWidth,center.y-=.5*this.frame.canvas.clientHeight,this._setScale(zoomLevel),this._setTranslation(-center.x,-center.y)},Network.prototype._updateNodeIndexList=function(){this._clearNodeIndexList();for(var idx in this.nodes)this.nodes.hasOwnProperty(idx)&&this.nodeIndices.push(idx)},Network.prototype.setData=function(data,disableStart){if(void 0===disableStart&&(disableStart=!1),this._unselectAll(!0),this.initializing=!0,data&&data.dot&&(data.nodes||data.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(1==this.constants.dataManipulation.enabled&&this._createManipulatorBar(),this.setOptions(data&&data.options),data&&data.dot){if(data&&data.dot){var dotData=dotparser.DOTToGraph(data.dot);return void this.setData(dotData)}}else if(data&&data.gephi){if(data&&data.gephi){var gephiData=gephiParser.parseGephi(data.gephi);return void this.setData(gephiData)}}else this._setNodes(data&&data.nodes),this._setEdges(data&&data.edges);this._putDataInSector(),0==disableStart&&(1==this.constants.hierarchicalLayout.enabled?(this._resetLevels(),this._setupHierarchicalLayout()):1==this.constants.stabilize&&this._stabilize(),this.start()),this.initializing=!1},Network.prototype.setOptions=function(options){if(options){var prop,fields=["nodes","edges","smoothCurves","hierarchicalLayout","clustering","navigation","keyboard","dataManipulation","onAdd","onEdit","onEditEdge","onConnect","onDelete","clickToUse"];if(util.selectiveNotDeepExtend(fields,this.constants,options),util.selectiveNotDeepExtend(["color"],this.constants.nodes,options.nodes),util.selectiveNotDeepExtend(["color","length"],this.constants.edges,options.edges),options.physics&&(util.mergeOptions(this.constants.physics,options.physics,"barnesHut"),util.mergeOptions(this.constants.physics,options.physics,"repulsion"),options.physics.hierarchicalRepulsion)){this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1;for(prop in options.physics.hierarchicalRepulsion)options.physics.hierarchicalRepulsion.hasOwnProperty(prop)&&(this.constants.physics.hierarchicalRepulsion[prop]=options.physics.hierarchicalRepulsion[prop])}if(options.onAdd&&(this.triggerFunctions.add=options.onAdd),options.onEdit&&(this.triggerFunctions.edit=options.onEdit),options.onEditEdge&&(this.triggerFunctions.editEdge=options.onEditEdge),options.onConnect&&(this.triggerFunctions.connect=options.onConnect),options.onDelete&&(this.triggerFunctions.del=options.onDelete),util.mergeOptions(this.constants,options,"smoothCurves"),util.mergeOptions(this.constants,options,"hierarchicalLayout"),util.mergeOptions(this.constants,options,"clustering"),util.mergeOptions(this.constants,options,"navigation"),util.mergeOptions(this.constants,options,"keyboard"),util.mergeOptions(this.constants,options,"dataManipulation"),options.dataManipulation&&(this.editMode=this.constants.dataManipulation.initiallyVisible),options.edges&&(void 0!==options.edges.color&&(util.isString(options.edges.color)?(this.constants.edges.color={},this.constants.edges.color.color=options.edges.color,this.constants.edges.color.highlight=options.edges.color,this.constants.edges.color.hover=options.edges.color):(void 0!==options.edges.color.color&&(this.constants.edges.color.color=options.edges.color.color),void 0!==options.edges.color.highlight&&(this.constants.edges.color.highlight=options.edges.color.highlight),void 0!==options.edges.color.hover&&(this.constants.edges.color.hover=options.edges.color.hover)),this.constants.edges.inheritColor=!1),options.edges.fontColor||void 0!==options.edges.color&&(util.isString(options.edges.color)?this.constants.edges.fontColor=options.edges.color:void 0!==options.edges.color.color&&(this.constants.edges.fontColor=options.edges.color.color))),options.nodes&&options.nodes.color){var newColorObj=util.parseColor(options.nodes.color);this.constants.nodes.color.background=newColorObj.background,this.constants.nodes.color.border=newColorObj.border,this.constants.nodes.color.highlight.background=newColorObj.highlight.background,this.constants.nodes.color.highlight.border=newColorObj.highlight.border,this.constants.nodes.color.hover.background=newColorObj.hover.background,this.constants.nodes.color.hover.border=newColorObj.hover.border}if(options.groups)for(var groupname in options.groups)if(options.groups.hasOwnProperty(groupname)){var group=options.groups[groupname];this.groups.add(groupname,group)}if(options.tooltip){for(prop in options.tooltip)options.tooltip.hasOwnProperty(prop)&&(this.constants.tooltip[prop]=options.tooltip[prop]);options.tooltip.color&&(this.constants.tooltip.color=util.parseColor(options.tooltip.color))}if("clickToUse"in options&&(options.clickToUse?this.activator||(this.activator=new Activator(this.frame),this.activator.on("change",this._createKeyBinds.bind(this))):this.activator&&(this.activator.destroy(),delete this.activator)),options.labels)throw new Error('Option "labels" is deprecated. Use options "locale" and "locales" instead.');this._loadPhysicsSystem(),this._loadNavigationControls(),this._loadManipulationSystem(),this._configureSmoothCurves(),this._bindHammer(),this._createKeyBinds(),this._markAllEdgesAsDirty(),this.setSize(this.constants.width,this.constants.height),this.moving=!0,this.start()}},Network.prototype._create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis network-frame",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext){var ctx=this.frame.canvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1),this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var noCanvas=document.createElement("DIV");noCanvas.style.color="red",noCanvas.style.fontWeight="bold",noCanvas.style.padding="10px",noCanvas.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(noCanvas)}this._bindHammer()},Network.prototype._bindHammer=function(){var me=this;void 0!==this.hammer&&this.hammer.dispose(),this.drag={},this.pinch={},this.hammer=Hammer(this.frame.canvas,{prevent_default:!0}),this.hammer.on("tap",me._onTap.bind(me)),this.hammer.on("doubletap",me._onDoubleTap.bind(me)),this.hammer.on("hold",me._onHold.bind(me)),this.hammer.on("touch",me._onTouch.bind(me)),this.hammer.on("dragstart",me._onDragStart.bind(me)),this.hammer.on("drag",me._onDrag.bind(me)),this.hammer.on("dragend",me._onDragEnd.bind(me)),1==this.constants.zoomable&&(this.hammer.on("mousewheel",me._onMouseWheel.bind(me)),this.hammer.on("DOMMouseScroll",me._onMouseWheel.bind(me)),this.hammer.on("pinch",me._onPinch.bind(me))),this.hammer.on("mousemove",me._onMouseMoveTitle.bind(me)),this.hammerFrame=Hammer(this.frame,{prevent_default:!0}),this.hammerFrame.on("release",me._onRelease.bind(me)),this.containerElement.appendChild(this.frame)},Network.prototype._createKeyBinds=function(){var me=this;void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=keycharm(1==this.constants.keyboard.bindToWindow?{container:window,preventDefault:!1}:{container:this.frame,preventDefault:!1}),this.keycharm.reset(),this.constants.keyboard.enabled&&this.isActive()&&(this.keycharm.bind("up",this._moveUp.bind(me),"keydown"),this.keycharm.bind("up",this._yStopMoving.bind(me),"keyup"),this.keycharm.bind("down",this._moveDown.bind(me),"keydown"),this.keycharm.bind("down",this._yStopMoving.bind(me),"keyup"),this.keycharm.bind("left",this._moveLeft.bind(me),"keydown"),this.keycharm.bind("left",this._xStopMoving.bind(me),"keyup"),this.keycharm.bind("right",this._moveRight.bind(me),"keydown"),this.keycharm.bind("right",this._xStopMoving.bind(me),"keyup"),this.keycharm.bind("=",this._zoomIn.bind(me),"keydown"),this.keycharm.bind("=",this._stopZoom.bind(me),"keyup"),this.keycharm.bind("num+",this._zoomIn.bind(me),"keydown"),this.keycharm.bind("num+",this._stopZoom.bind(me),"keyup"),this.keycharm.bind("num-",this._zoomOut.bind(me),"keydown"),this.keycharm.bind("num-",this._stopZoom.bind(me),"keyup"),this.keycharm.bind("-",this._zoomOut.bind(me),"keydown"),this.keycharm.bind("-",this._stopZoom.bind(me),"keyup"),this.keycharm.bind("[",this._zoomIn.bind(me),"keydown"),this.keycharm.bind("[",this._stopZoom.bind(me),"keyup"),this.keycharm.bind("]",this._zoomOut.bind(me),"keydown"),this.keycharm.bind("]",this._stopZoom.bind(me),"keyup"),this.keycharm.bind("pageup",this._zoomIn.bind(me),"keydown"),this.keycharm.bind("pageup",this._stopZoom.bind(me),"keyup"),this.keycharm.bind("pagedown",this._zoomOut.bind(me),"keydown"),this.keycharm.bind("pagedown",this._stopZoom.bind(me),"keyup")),1==this.constants.dataManipulation.enabled&&(this.keycharm.bind("esc",this._createManipulatorBar.bind(me)),this.keycharm.bind("delete",this._deleteSelected.bind(me)))},Network.prototype.destroy=function(){this.start=function(){},this.redraw=function(){},this.timer=!1,this._cleanupPhysicsConfiguration(),this.keycharm.reset(),this.hammer.dispose(),this.off(),this._recursiveDOMDelete(this.containerElement)},Network.prototype._recursiveDOMDelete=function(DOMobject){for(;1==DOMobject.hasChildNodes();)this._recursiveDOMDelete(DOMobject.firstChild),DOMobject.removeChild(DOMobject.firstChild)},Network.prototype._getPointer=function(touch){return{x:touch.pageX-util.getAbsoluteLeft(this.frame.canvas),y:touch.pageY-util.getAbsoluteTop(this.frame.canvas)}},Network.prototype._onTouch=function(event){(new Date).valueOf()-this.touchTime>100&&(this.drag.pointer=this._getPointer(event.gesture.center),this.drag.pinched=!1,this.pinch.scale=this._getScale(),this.touchTime=(new Date).valueOf(),this._handleTouch(this.drag.pointer))},Network.prototype._onDragStart=function(event){this._handleDragStart(event)},Network.prototype._handleDragStart=function(event){void 0===this.drag.pointer&&this._onTouch(event);var node=this._getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=this._getTranslation(),this.drag.nodeId=null,this.draggingNodes=!1,null!=node&&1==this.constants.dragNodes){this.draggingNodes=!0,this.drag.nodeId=node.id,node.isSelected()||this._selectObject(node,!1),this.emit("dragStart",{nodeIds:this.getSelection().nodes});for(var objectId in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(objectId)){var object=this.selectionObj.nodes[objectId],s={id:object.id,node:object,x:object.x,y:object.y,xFixed:object.xFixed,yFixed:object.yFixed};object.xFixed=!0,object.yFixed=!0,this.drag.selection.push(s)}}},Network.prototype._onDrag=function(event){this._handleOnDrag(event)},Network.prototype._handleOnDrag=function(event){if(!this.drag.pinched){this.releaseNode();var pointer=this._getPointer(event.gesture.center),me=this,drag=this.drag,selection=drag.selection;if(selection&&selection.length&&1==this.constants.dragNodes){var deltaX=pointer.x-drag.pointer.x,deltaY=pointer.y-drag.pointer.y;selection.forEach(function(s){var node=s.node;s.xFixed||(node.x=me._XconvertDOMtoCanvas(me._XconvertCanvasToDOM(s.x)+deltaX)),s.yFixed||(node.y=me._YconvertDOMtoCanvas(me._YconvertCanvasToDOM(s.y)+deltaY))}),this.moving||(this.moving=!0,this.start())}else if(1==this.constants.dragNetwork){if(void 0===this.drag.pointer)return void this._handleDragStart(event);var diffX=pointer.x-this.drag.pointer.x,diffY=pointer.y-this.drag.pointer.y;this._setTranslation(this.drag.translation.x+diffX,this.drag.translation.y+diffY),this._redraw()}}},Network.prototype._onDragEnd=function(event){this._handleDragEnd(event)},Network.prototype._handleDragEnd=function(){this.drag.dragging=!1;var selection=this.drag.selection;selection&&selection.length?(selection.forEach(function(s){s.node.xFixed=s.xFixed,s.node.yFixed=s.yFixed}),this.moving=!0,this.start()):this._redraw(),0==this.draggingNodes?this.emit("dragEnd",{nodeIds:[]}):this.emit("dragEnd",{nodeIds:this.getSelection().nodes})},Network.prototype._onTap=function(event){var pointer=this._getPointer(event.gesture.center);this.pointerPosition=pointer,this._handleTap(pointer)},Network.prototype._onDoubleTap=function(event){var pointer=this._getPointer(event.gesture.center);this._handleDoubleTap(pointer)},Network.prototype._onHold=function(event){var pointer=this._getPointer(event.gesture.center);this.pointerPosition=pointer,this._handleOnHold(pointer)},Network.prototype._onRelease=function(event){var pointer=this._getPointer(event.gesture.center);this._handleOnRelease(pointer)},Network.prototype._onPinch=function(event){var pointer=this._getPointer(event.gesture.center);this.drag.pinched=!0,"scale"in this.pinch||(this.pinch.scale=1);var scale=this.pinch.scale*event.gesture.scale;this._zoom(scale,pointer)},Network.prototype._zoom=function(scale,pointer){if(1==this.constants.zoomable){var scaleOld=this._getScale();1e-5>scale&&(scale=1e-5),scale>10&&(scale=10);var preScaleDragPointer=null;void 0!==this.drag&&1==this.drag.dragging&&(preScaleDragPointer=this.DOMtoCanvas(this.drag.pointer));var translation=this._getTranslation(),scaleFrac=scale/scaleOld,tx=(1-scaleFrac)*pointer.x+translation.x*scaleFrac,ty=(1-scaleFrac)*pointer.y+translation.y*scaleFrac;if(this.areaCenter={x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)},this._setScale(scale),this._setTranslation(tx,ty),this.updateClustersDefault(),null!=preScaleDragPointer){var postScaleDragPointer=this.canvasToDOM(preScaleDragPointer);this.drag.pointer.x=postScaleDragPointer.x,this.drag.pointer.y=postScaleDragPointer.y}return this._redraw(),scale>scaleOld?this.emit("zoom",{direction:"+"}):this.emit("zoom",{direction:"-"}),scale}},Network.prototype._onMouseWheel=function(event){var delta=0;if(event.wheelDelta?delta=event.wheelDelta/120:event.detail&&(delta=-event.detail/3),delta){var scale=this._getScale(),zoom=delta/10;0>delta&&(zoom/=1-zoom),scale*=1+zoom;var gesture=hammerUtil.fakeGesture(this,event),pointer=this._getPointer(gesture.center);this._zoom(scale,pointer)}event.preventDefault()},Network.prototype._onMouseMoveTitle=function(event){var gesture=hammerUtil.fakeGesture(this,event),pointer=this._getPointer(gesture.center);
this.popupObj&&this._checkHidePopup(pointer),0==this.constants.keyboard.bindToWindow&&1==this.constants.keyboard.enabled&&this.frame.focus();var me=this,checkShow=function(){me._checkShowPopup(pointer)};if(this.popupTimer&&clearInterval(this.popupTimer),this.drag.dragging||(this.popupTimer=setTimeout(checkShow,this.constants.tooltip.delay)),1==this.constants.hover){for(var edgeId in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(edgeId)&&(this.hoverObj.edges[edgeId].hover=!1,delete this.hoverObj.edges[edgeId]);var obj=this._getNodeAt(pointer);null==obj&&(obj=this._getEdgeAt(pointer)),null!=obj&&this._hoverObject(obj);for(var nodeId in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(nodeId)&&(obj instanceof Node&&obj.id!=nodeId||obj instanceof Edge||null==obj)&&(this._blurObject(this.hoverObj.nodes[nodeId]),delete this.hoverObj.nodes[nodeId]);this.redraw()}},Network.prototype._checkShowPopup=function(pointer){var id,obj={left:this._XconvertDOMtoCanvas(pointer.x),top:this._YconvertDOMtoCanvas(pointer.y),right:this._XconvertDOMtoCanvas(pointer.x),bottom:this._YconvertDOMtoCanvas(pointer.y)},lastPopupNode=this.popupObj,nodeUnderCursor=!1;if(void 0==this.popupObj){var nodes=this.nodes,overlappingNodes=[];for(id in nodes)if(nodes.hasOwnProperty(id)){var node=nodes[id];node.isOverlappingWith(obj)&&void 0!==node.getTitle()&&overlappingNodes.push(id)}overlappingNodes.length>0&&(this.popupObj=this.nodes[overlappingNodes[overlappingNodes.length-1]],nodeUnderCursor=!0)}if(void 0===this.popupObj&&0==nodeUnderCursor){var edges=this.edges,overlappingEdges=[];for(id in edges)if(edges.hasOwnProperty(id)){var edge=edges[id];edge.connected&&void 0!==edge.getTitle()&&edge.isOverlappingWith(obj)&&overlappingEdges.push(id)}overlappingEdges.length>0&&(this.popupObj=this.edges[overlappingEdges[overlappingEdges.length-1]])}if(this.popupObj){if(this.popupObj!=lastPopupNode){var me=this;me.popup||(me.popup=new Popup(me.frame,me.constants.tooltip)),me.popup.setPosition(pointer.x-3,pointer.y-3),me.popup.setText(me.popupObj.getTitle()),me.popup.show()}}else this.popup&&this.popup.hide()},Network.prototype._checkHidePopup=function(pointer){this.popupObj&&this._getNodeAt(pointer)||(this.popupObj=void 0,this.popup&&this.popup.hide())},Network.prototype.setSize=function(width,height){var emitEvent=!1,oldWidth=this.frame.canvas.width,oldHeight=this.frame.canvas.height;width!=this.constants.width||height!=this.constants.height||this.frame.style.width!=width||this.frame.style.height!=height?(this.frame.style.width=width,this.frame.style.height=height,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth*this.pixelRatio,this.frame.canvas.height=this.frame.canvas.clientHeight*this.pixelRatio,this.constants.width=width,this.constants.height=height,emitEvent=!0):(this.frame.canvas.width!=this.frame.canvas.clientWidth*this.pixelRatio&&(this.frame.canvas.width=this.frame.canvas.clientWidth*this.pixelRatio,emitEvent=!0),this.frame.canvas.height!=this.frame.canvas.clientHeight*this.pixelRatio&&(this.frame.canvas.height=this.frame.canvas.clientHeight*this.pixelRatio,emitEvent=!0)),1==emitEvent&&this.emit("resize",{width:this.frame.canvas.width*this.pixelRatio,height:this.frame.canvas.height*this.pixelRatio,oldWidth:oldWidth*this.pixelRatio,oldHeight:oldHeight*this.pixelRatio})},Network.prototype._setNodes=function(nodes){var oldNodesData=this.nodesData;if(nodes instanceof DataSet||nodes instanceof DataView)this.nodesData=nodes;else if(Array.isArray(nodes))this.nodesData=new DataSet,this.nodesData.add(nodes);else{if(nodes)throw new TypeError("Array or DataSet expected");this.nodesData=new DataSet}if(oldNodesData&&util.forEach(this.nodesListeners,function(callback,event){oldNodesData.off(event,callback)}),this.nodes={},this.nodesData){var me=this;util.forEach(this.nodesListeners,function(callback,event){me.nodesData.on(event,callback)});var ids=this.nodesData.getIds();this._addNodes(ids)}this._updateSelection()},Network.prototype._addNodes=function(ids){for(var id,i=0,len=ids.length;len>i;i++){id=ids[i];var data=this.nodesData.get(id),node=new Node(data,this.images,this.groups,this.constants);if(this.nodes[id]=node,!(0!=node.xFixed&&0!=node.yFixed||null!==node.x&&null!==node.y)){var radius=1*ids.length+10,angle=2*Math.PI*Math.random();0==node.xFixed&&(node.x=radius*Math.cos(angle)),0==node.yFixed&&(node.y=radius*Math.sin(angle))}this.moving=!0}this._updateNodeIndexList(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes(),this._reconnectEdges(),this._updateValueRange(this.nodes),this.updateLabels()},Network.prototype._updateNodes=function(ids,changedData){for(var nodes=this.nodes,i=0,len=ids.length;len>i;i++){var id=ids[i],node=nodes[id],data=changedData[i];node?node.setProperties(data,this.constants):(node=new Node(properties,this.images,this.groups,this.constants),nodes[id]=node)}this.moving=!0,1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateNodeIndexList(),this._updateValueRange(nodes),this._markAllEdgesAsDirty()},Network.prototype._markAllEdgesAsDirty=function(){for(var edgeId in this.edges)this.edges[edgeId].colorDirty=!0},Network.prototype._removeNodes=function(ids){for(var nodes=this.nodes,i=0,len=ids.length;len>i;i++)void 0!==this.selectionObj.nodes[ids[i]]&&(this.nodes[ids[i]].unselect(),this._removeFromSelection(this.nodes[ids[i]]));for(var i=0,len=ids.length;len>i;i++){var id=ids[i];delete nodes[id]}this._updateNodeIndexList(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes(),this._reconnectEdges(),this._updateSelection(),this._updateValueRange(nodes)},Network.prototype._setEdges=function(edges){var oldEdgesData=this.edgesData;if(edges instanceof DataSet||edges instanceof DataView)this.edgesData=edges;else if(Array.isArray(edges))this.edgesData=new DataSet,this.edgesData.add(edges);else{if(edges)throw new TypeError("Array or DataSet expected");this.edgesData=new DataSet}if(oldEdgesData&&util.forEach(this.edgesListeners,function(callback,event){oldEdgesData.off(event,callback)}),this.edges={},this.edgesData){var me=this;util.forEach(this.edgesListeners,function(callback,event){me.edgesData.on(event,callback)});var ids=this.edgesData.getIds();this._addEdges(ids)}this._reconnectEdges()},Network.prototype._addEdges=function(ids){for(var edges=this.edges,edgesData=this.edgesData,i=0,len=ids.length;len>i;i++){var id=ids[i],oldEdge=edges[id];oldEdge&&oldEdge.disconnect();var data=edgesData.get(id,{showInternalIds:!0});edges[id]=new Edge(data,this,this.constants)}this.moving=!0,this._updateValueRange(edges),this._createBezierNodes(),this._updateCalculationNodes(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout())},Network.prototype._updateEdges=function(ids){for(var edges=this.edges,edgesData=this.edgesData,i=0,len=ids.length;len>i;i++){var id=ids[i],data=edgesData.get(id),edge=edges[id];edge?(edge.disconnect(),edge.setProperties(data,this.constants),edge.connect()):(edge=new Edge(data,this,this.constants),this.edges[id]=edge)}this._createBezierNodes(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this.moving=!0,this._updateValueRange(edges)},Network.prototype._removeEdges=function(ids){for(var edges=this.edges,i=0,len=ids.length;len>i;i++)void 0!==this.selectionObj.edges[ids[i]]&&(edges[ids[i]].unselect(),this._removeFromSelection(edges[ids[i]]));for(var i=0,len=ids.length;len>i;i++){var id=ids[i],edge=edges[id];edge&&(null!=edge.via&&delete this.sectors.support.nodes[edge.via.id],edge.disconnect(),delete edges[id])}this.moving=!0,this._updateValueRange(edges),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes()},Network.prototype._reconnectEdges=function(){var id,nodes=this.nodes,edges=this.edges;for(id in nodes)nodes.hasOwnProperty(id)&&(nodes[id].edges=[],nodes[id].dynamicEdges=[]);for(id in edges)if(edges.hasOwnProperty(id)){var edge=edges[id];edge.from=null,edge.to=null,edge.connect()}},Network.prototype._updateValueRange=function(obj){var id,valueMin=void 0,valueMax=void 0,valueTotal=0;for(id in obj)if(obj.hasOwnProperty(id)){var value=obj[id].getValue();void 0!==value&&(valueMin=void 0===valueMin?value:Math.min(value,valueMin),valueMax=void 0===valueMax?value:Math.max(value,valueMax),valueTotal+=value)}if(void 0!==valueMin&&void 0!==valueMax)for(id in obj)obj.hasOwnProperty(id)&&obj[id].setValueRange(valueMin,valueMax,valueTotal)},Network.prototype.redraw=function(){this.setSize(this.constants.width,this.constants.height),this._redraw()},Network.prototype._redraw=function(hidden){var ctx=this.frame.canvas.getContext("2d");ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.frame.canvas.clientWidth,h=this.frame.canvas.clientHeight;ctx.clearRect(0,0,w,h),ctx.save(),ctx.translate(this.translation.x,this.translation.y),ctx.scale(this.scale,this.scale),this.canvasTopLeft={x:this._XconvertDOMtoCanvas(0),y:this._YconvertDOMtoCanvas(0)},this.canvasBottomRight={x:this._XconvertDOMtoCanvas(this.frame.canvas.clientWidth),y:this._YconvertDOMtoCanvas(this.frame.canvas.clientHeight)},1!=hidden&&(this._doInAllSectors("_drawAllSectorNodes",ctx),(0==this.drag.dragging||void 0===this.drag.dragging||0==this.constants.hideEdgesOnDrag)&&this._doInAllSectors("_drawEdges",ctx)),(0==this.drag.dragging||void 0===this.drag.dragging||0==this.constants.hideNodesOnDrag)&&this._doInAllSectors("_drawNodes",ctx,!1),1!=hidden&&1==this.controlNodesActive&&this._doInAllSectors("_drawControlNodes",ctx),ctx.restore(),1==hidden&&ctx.clearRect(0,0,w,h)},Network.prototype._setTranslation=function(offsetX,offsetY){void 0===this.translation&&(this.translation={x:0,y:0}),void 0!==offsetX&&(this.translation.x=offsetX),void 0!==offsetY&&(this.translation.y=offsetY),this.emit("viewChanged")},Network.prototype._getTranslation=function(){return{x:this.translation.x,y:this.translation.y}},Network.prototype._setScale=function(scale){this.scale=scale},Network.prototype._getScale=function(){return this.scale},Network.prototype._XconvertDOMtoCanvas=function(x){return(x-this.translation.x)/this.scale},Network.prototype._XconvertCanvasToDOM=function(x){return x*this.scale+this.translation.x},Network.prototype._YconvertDOMtoCanvas=function(y){return(y-this.translation.y)/this.scale},Network.prototype._YconvertCanvasToDOM=function(y){return y*this.scale+this.translation.y},Network.prototype.canvasToDOM=function(pos){return{x:this._XconvertCanvasToDOM(pos.x),y:this._YconvertCanvasToDOM(pos.y)}},Network.prototype.DOMtoCanvas=function(pos){return{x:this._XconvertDOMtoCanvas(pos.x),y:this._YconvertDOMtoCanvas(pos.y)}},Network.prototype._drawNodes=function(ctx,alwaysShow){void 0===alwaysShow&&(alwaysShow=!1);var nodes=this.nodes,selected=[];for(var id in nodes)nodes.hasOwnProperty(id)&&(nodes[id].setScaleAndPos(this.scale,this.canvasTopLeft,this.canvasBottomRight),nodes[id].isSelected()?selected.push(id):(nodes[id].inArea()||alwaysShow)&&nodes[id].draw(ctx));for(var s=0,sMax=selected.length;sMax>s;s++)(nodes[selected[s]].inArea()||alwaysShow)&&nodes[selected[s]].draw(ctx)},Network.prototype._drawEdges=function(ctx){var edges=this.edges;for(var id in edges)if(edges.hasOwnProperty(id)){var edge=edges[id];edge.setScale(this.scale),edge.connected&&edges[id].draw(ctx)}},Network.prototype._drawControlNodes=function(ctx){var edges=this.edges;for(var id in edges)edges.hasOwnProperty(id)&&edges[id]._drawControlNodes(ctx)},Network.prototype._stabilize=function(){1==this.constants.freezeForStabilization&&this._freezeDefinedNodes();for(var count=0;this.moving&&count<this.constants.stabilizationIterations;)this._physicsTick(),count++;1==this.constants.zoomExtentOnStabilize&&this.zoomExtent({duration:0},!1,!0),1==this.constants.freezeForStabilization&&this._restoreFrozenNodes(),this.emit("stabilizationIterationsDone")},Network.prototype._freezeDefinedNodes=function(){var nodes=this.nodes;for(var id in nodes)nodes.hasOwnProperty(id)&&null!=nodes[id].x&&null!=nodes[id].y&&(nodes[id].fixedData.x=nodes[id].xFixed,nodes[id].fixedData.y=nodes[id].yFixed,nodes[id].xFixed=!0,nodes[id].yFixed=!0)},Network.prototype._restoreFrozenNodes=function(){var nodes=this.nodes;for(var id in nodes)nodes.hasOwnProperty(id)&&null!=nodes[id].fixedData.x&&(nodes[id].xFixed=nodes[id].fixedData.x,nodes[id].yFixed=nodes[id].fixedData.y)},Network.prototype._isMoving=function(vmin){var nodes=this.nodes;for(var id in nodes)if(void 0!==nodes[id]&&1==nodes[id].isMoving(vmin))return!0;return!1},Network.prototype._discreteStepNodes=function(){var nodeId,interval=this.physicsDiscreteStepsize,nodes=this.nodes,nodesPresent=!1;if(this.constants.maxVelocity>0)for(nodeId in nodes)nodes.hasOwnProperty(nodeId)&&(nodes[nodeId].discreteStepLimited(interval,this.constants.maxVelocity),nodesPresent=!0);else for(nodeId in nodes)nodes.hasOwnProperty(nodeId)&&(nodes[nodeId].discreteStep(interval),nodesPresent=!0);if(1==nodesPresent){var vminCorrected=this.constants.minVelocity/Math.max(this.scale,.05);return vminCorrected>.5*this.constants.maxVelocity?!0:this._isMoving(vminCorrected)}return!1},Network.prototype._revertPhysicsState=function(){var nodes=this.nodes;for(var nodeId in nodes)nodes.hasOwnProperty(nodeId)&&nodes[nodeId].revertPosition()},Network.prototype._revertPhysicsTick=function(){this._doInAllActiveSectors("_revertPhysicsState"),1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic&&this._doInSupportSector("_revertPhysicsState")},Network.prototype._physicsTick=function(){if(!this.freezeSimulationEnabled&&1==this.moving){var mainMovingStatus=!1,supportMovingStatus=!1;this._doInAllActiveSectors("_initializeForceCalculation");var mainMoving=this._doInAllActiveSectors("_discreteStepNodes");1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic&&(supportMovingStatus=this._doInSupportSector("_discreteStepNodes"));for(var i=0;i<mainMoving.length;i++)mainMovingStatus=mainMoving[i]||mainMovingStatus;this.moving=mainMovingStatus||supportMovingStatus,0==this.moving?this._revertPhysicsTick():0==this.startedStabilization&&(this.emit("startStabilization"),this.startedStabilization=!0),this.stabilizationIterations++}},Network.prototype._animationStep=function(){if(this.timer=void 0,this._handleNavigation(),1==this.moving){var startTime=Date.now();this._physicsTick();var physicsTime=Date.now()-startTime;(this.renderTimestep-this.renderTime>2*physicsTime||1==this.runDoubleSpeed)&&1==this.moving&&(this._physicsTick(),0!=this.renderTime&&(this.runDoubleSpeed=!0))}var renderStartTime=Date.now();this._redraw(),this.renderTime=Date.now()-renderStartTime,this.start()},"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),Network.prototype.start=function(){if(1==this.moving||0!=this.xIncrement||0!=this.yIncrement||0!=this.zoomIncrement||1==this.animating)this.timer||(this.timer=1==this.requiresTimeout?window.setTimeout(this._animationStep.bind(this),this.renderTimestep):window.requestAnimationFrame(this._animationStep.bind(this)));else if(this._redraw(),this.stabilizationIterations>1){var me=this,params={iterations:me.stabilizationIterations};this.stabilizationIterations=0,this.startedStabilization=!1,setTimeout(function(){me.emit("stabilized",params)},0)}else this.stabilizationIterations=0},Network.prototype._handleNavigation=function(){if(0!=this.xIncrement||0!=this.yIncrement){var translation=this._getTranslation();this._setTranslation(translation.x+this.xIncrement,translation.y+this.yIncrement)}if(0!=this.zoomIncrement){var center={x:this.frame.canvas.clientWidth/2,y:this.frame.canvas.clientHeight/2};this._zoom(this.scale*(1+this.zoomIncrement),center)}},Network.prototype.freezeSimulation=function(freeze){1==freeze?(this.freezeSimulationEnabled=!0,this.moving=!1):(this.freezeSimulationEnabled=!1,this.moving=!0,this.start())},Network.prototype._configureSmoothCurves=function(disableStart){if(void 0===disableStart&&(disableStart=!0),1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic){this._createBezierNodes();for(var nodeId in this.sectors.support.nodes)this.sectors.support.nodes.hasOwnProperty(nodeId)&&void 0===this.edges[this.sectors.support.nodes[nodeId].parentEdgeId]&&delete this.sectors.support.nodes[nodeId]}else{this.sectors.support.nodes={};for(var edgeId in this.edges)this.edges.hasOwnProperty(edgeId)&&(this.edges[edgeId].via=null)}this._updateCalculationNodes(),disableStart||(this.moving=!0,this.start())},Network.prototype._createBezierNodes=function(){if(1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic)for(var edgeId in this.edges)if(this.edges.hasOwnProperty(edgeId)){var edge=this.edges[edgeId];if(null==edge.via){var nodeId="edgeId:".concat(edge.id);this.sectors.support.nodes[nodeId]=new Node({id:nodeId,mass:1,shape:"circle",image:"",internalMultiplier:1},{},{},this.constants),edge.via=this.sectors.support.nodes[nodeId],edge.via.parentEdgeId=edge.id,edge.positionBezierNode()}}},Network.prototype._initializeMixinLoaders=function(){for(var mixin in MixinLoader)MixinLoader.hasOwnProperty(mixin)&&(Network.prototype[mixin]=MixinLoader[mixin])},Network.prototype.storePosition=function(){console.log("storePosition is depricated: use .storePositions() from now on."),this.storePositions()},Network.prototype.storePositions=function(){var dataArray=[];for(var nodeId in this.nodes)if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId],allowedToMoveX=!this.nodes.xFixed,allowedToMoveY=!this.nodes.yFixed;(this.nodesData._data[nodeId].x!=Math.round(node.x)||this.nodesData._data[nodeId].y!=Math.round(node.y))&&dataArray.push({id:nodeId,x:Math.round(node.x),y:Math.round(node.y),allowedToMoveX:allowedToMoveX,allowedToMoveY:allowedToMoveY})}this.nodesData.update(dataArray)},Network.prototype.getPositions=function(ids){var dataArray={};if(void 0!==ids){if(1==Array.isArray(ids)){for(var i=0;i<ids.length;i++)if(void 0!==this.nodes[ids[i]]){var node=this.nodes[ids[i]];dataArray[ids[i]]={x:Math.round(node.x),y:Math.round(node.y)}}}else if(void 0!==this.nodes[ids]){var node=this.nodes[ids];dataArray[ids]={x:Math.round(node.x),y:Math.round(node.y)}}}else for(var nodeId in this.nodes)if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];dataArray[nodeId]={x:Math.round(node.x),y:Math.round(node.y)}}return dataArray},Network.prototype.focusOnNode=function(nodeId,options){if(this.nodes.hasOwnProperty(nodeId)){void 0===options&&(options={});var nodePosition={x:this.nodes[nodeId].x,y:this.nodes[nodeId].y};options.position=nodePosition,options.lockedOnNode=nodeId,this.moveTo(options)}else console.log("This nodeId cannot be found.")},Network.prototype.moveTo=function(options){return void 0===options?void(options={}):(void 0===options.offset&&(options.offset={x:0,y:0}),void 0===options.offset.x&&(options.offset.x=0),void 0===options.offset.y&&(options.offset.y=0),void 0===options.scale&&(options.scale=this._getScale()),void 0===options.position&&(options.position=this._getTranslation()),void 0===options.animation&&(options.animation={duration:0}),options.animation===!1&&(options.animation={duration:0}),options.animation===!0&&(options.animation={}),void 0===options.animation.duration&&(options.animation.duration=1e3),void 0===options.animation.easingFunction&&(options.animation.easingFunction="easeInOutQuad"),void this.animateView(options))},Network.prototype.animateView=function(options){if(void 0===options)return void(options={});this.releaseNode(),1==options.locked&&(this.lockedOnNodeId=options.lockedOnNode,this.lockedOnNodeOffset=options.offset),0!=this.easingTime&&this._transitionRedraw(1),this.sourceScale=this._getScale(),this.sourceTranslation=this._getTranslation(),this.targetScale=options.scale,this._setScale(this.targetScale);var viewCenter=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),distanceFromCenter={x:viewCenter.x-options.position.x,y:viewCenter.y-options.position.y};this.targetTranslation={x:this.sourceTranslation.x+distanceFromCenter.x*this.targetScale+options.offset.x,y:this.sourceTranslation.y+distanceFromCenter.y*this.targetScale+options.offset.y},0==options.animation.duration?null!=this.lockedOnNodeId?(this._classicRedraw=this._redraw,this._redraw=this._lockedRedraw):(this._setScale(this.targetScale),this._setTranslation(this.targetTranslation.x,this.targetTranslation.y),this._redraw()):(this.animating=!0,this.animationSpeed=1/(this.renderRefreshRate*options.animation.duration*.001)||1/this.renderRefreshRate,this.animationEasingFunction=options.animation.easingFunction,this._classicRedraw=this._redraw,this._redraw=this._transitionRedraw,this._redraw(),this.start())},Network.prototype._lockedRedraw=function(){var nodePosition={x:this.nodes[this.lockedOnNodeId].x,y:this.nodes[this.lockedOnNodeId].y},viewCenter=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),distanceFromCenter={x:viewCenter.x-nodePosition.x,y:viewCenter.y-nodePosition.y},sourceTranslation=this._getTranslation(),targetTranslation={x:sourceTranslation.x+distanceFromCenter.x*this.scale+this.lockedOnNodeOffset.x,y:sourceTranslation.y+distanceFromCenter.y*this.scale+this.lockedOnNodeOffset.y};this._setTranslation(targetTranslation.x,targetTranslation.y),this._classicRedraw()},Network.prototype.releaseNode=function(){null!=this.lockedOnNodeId&&(this._redraw=this._classicRedraw,this.lockedOnNodeId=null,this.lockedOnNodeOffset=null)},Network.prototype._transitionRedraw=function(easingTime){this.easingTime=easingTime||this.easingTime+this.animationSpeed,this.easingTime+=this.animationSpeed;var progress=util.easingFunctions[this.animationEasingFunction](this.easingTime);this._setScale(this.sourceScale+(this.targetScale-this.sourceScale)*progress),this._setTranslation(this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*progress,this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*progress),this._classicRedraw(),this.easingTime>=1&&(this.animating=!1,this.easingTime=0,this._redraw=null!=this.lockedOnNodeId?this._lockedRedraw:this._classicRedraw,this.emit("animationFinished"))},Network.prototype._classicRedraw=function(){},Network.prototype.isActive=function(){return!this.activator||this.activator.active},Network.prototype.setScale=function(){return this._setScale()},Network.prototype.getScale=function(){return this._getScale()},Network.prototype.getCenterCoordinates=function(){return this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight})},Network.prototype.getBoundingBox=function(nodeId){return void 0!==this.nodes[nodeId]?this.nodes[nodeId].boundingBox:void 0},Network.prototype.getConnectedNodes=function(nodeId){var nodeList=[];if(void 0!==this.nodes[nodeId])for(var node=this.nodes[nodeId],nodeObj={nodeId:!0},i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.toId==nodeId?void 0===nodeObj[edge.fromId]&&(nodeList.push(edge.fromId),nodeObj[edge.fromId]=!0):edge.fromId==nodeId&&void 0===nodeObj[edge.toId]&&(nodeList.push(edge.toId),nodeObj[edge.toId]=!0)}return nodeList},module.exports=Network},function(module,exports,__webpack_require__){function Edge(properties,network,networkConstants){if(!network)throw"No network provided";var fields=["edges","physics"],constants=util.selectiveBridgeObject(fields,networkConstants);this.options=constants.edges,this.physics=constants.physics,this.options.smoothCurves=networkConstants.smoothCurves,this.network=network,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.title=void 0,this.widthSelected=this.options.width*this.options.widthSelectionMultiplier,this.value=void 0,this.selected=!1,this.hover=!1,this.labelDimensions={top:0,left:0,width:0,height:0,yLine:0},this.dirtyLabel=!0,this.colorDirty=!0,this.from=null,this.to=null,this.via=null,this.fromBackup=null,this.toBackup=null,this.originalFromId=[],this.originalToId=[],this.connected=!1,this.widthFixed=!1,this.lengthFixed=!1,this.setProperties(properties),this.controlNodesEnabled=!1,this.controlNodes={from:null,to:null,positions:{}},this.connectedNode=null}var util=__webpack_require__(1),Node=__webpack_require__(40);Edge.prototype.setProperties=function(properties){if(this.colorDirty=!0,properties){var fields=["style","fontSize","fontFace","fontColor","fontFill","fontStrokeWidth","fontStrokeColor","width","widthSelectionMultiplier","hoverWidth","arrowScaleFactor","dash","inheritColor","labelAlignment","opacity","customScalingFunction"];switch(util.selectiveDeepExtend(fields,this.options,properties),void 0!==properties.from&&(this.fromId=properties.from),void 0!==properties.to&&(this.toId=properties.to),void 0!==properties.id&&(this.id=properties.id),void 0!==properties.label&&(this.label=properties.label,this.dirtyLabel=!0),void 0!==properties.title&&(this.title=properties.title),void 0!==properties.value&&(this.value=properties.value),void 0!==properties.length&&(this.physics.springLength=properties.length),void 0!==properties.color&&(this.options.inheritColor=!1,util.isString(properties.color)?(this.options.color.color=properties.color,this.options.color.highlight=properties.color):(void 0!==properties.color.color&&(this.options.color.color=properties.color.color),void 0!==properties.color.highlight&&(this.options.color.highlight=properties.color.highlight),void 0!==properties.color.hover&&(this.options.color.hover=properties.color.hover))),this.connect(),this.widthFixed=this.widthFixed||void 0!==properties.width,this.lengthFixed=this.lengthFixed||void 0!==properties.length,this.widthSelected=this.options.width*this.options.widthSelectionMultiplier,this.options.style){case"line":this.draw=this._drawLine;break;case"arrow":this.draw=this._drawArrow;break;case"arrow-center":this.draw=this._drawArrowCenter;break;case"dash-line":this.draw=this._drawDashLine;break;default:this.draw=this._drawLine}}},Edge.prototype.connect=function(){this.disconnect(),this.from=this.network.nodes[this.fromId]||null,this.to=this.network.nodes[this.toId]||null,this.connected=this.from&&this.to,this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this))},Edge.prototype.disconnect=function(){this.from&&(this.from.detachEdge(this),this.from=null),this.to&&(this.to.detachEdge(this),this.to=null),this.connected=!1},Edge.prototype.getTitle=function(){return"function"==typeof this.title?this.title():this.title},Edge.prototype.getValue=function(){return this.value},Edge.prototype.setValueRange=function(min,max,total){if(!this.widthFixed&&void 0!==this.value){var scale=this.options.customScalingFunction(min,max,total,this.value),widthDiff=this.options.widthMax-this.options.widthMin;this.options.width=this.options.widthMin+scale*widthDiff,this.widthSelected=this.options.width*this.options.widthSelectionMultiplier}},Edge.prototype.draw=function(){throw"Method draw not initialized in edge"},Edge.prototype.isOverlappingWith=function(obj){if(this.connected){var distMax=10,xFrom=this.from.x,yFrom=this.from.y,xTo=this.to.x,yTo=this.to.y,xObj=obj.left,yObj=obj.top,dist=this._getDistanceToEdge(xFrom,yFrom,xTo,yTo,xObj,yObj);return distMax>dist}return!1},Edge.prototype._getColor=function(){var colorObj=this.options.color;return this.colorDirty===!0&&("to"==this.options.inheritColor?colorObj={highlight:this.to.options.color.highlight.border,hover:this.to.options.color.hover.border,color:util.overrideOpacity(this.from.options.color.border,this.options.opacity)}:("from"==this.options.inheritColor||1==this.options.inheritColor)&&(colorObj={highlight:this.from.options.color.highlight.border,hover:this.from.options.color.hover.border,color:util.overrideOpacity(this.from.options.color.border,this.options.opacity)}),this.options.color=colorObj,this.colorDirty=!1),1==this.selected?colorObj.highlight:1==this.hover?colorObj.hover:colorObj.color},Edge.prototype._drawLine=function(ctx){if(ctx.strokeStyle=this._getColor(),ctx.lineWidth=this._getLineWidth(),this.from!=this.to){var point,via=this._line(ctx);if(this.label){if(1==this.options.smoothCurves.enabled&&null!=via){var midpointX=.5*(.5*(this.from.x+via.x)+.5*(this.to.x+via.x)),midpointY=.5*(.5*(this.from.y+via.y)+.5*(this.to.y+via.y));point={x:midpointX,y:midpointY}}else point=this._pointOnLine(.5);this._label(ctx,this.label,point.x,point.y)}}else{var x,y,radius=this.physics.springLength/4,node=this.from;node.width||node.resize(ctx),node.width>node.height?(x=node.x+node.width/2,y=node.y-radius):(x=node.x+radius,y=node.y-node.height/2),this._circle(ctx,x,y,radius),point=this._pointOnCircle(x,y,radius,.5),this._label(ctx,this.label,point.x,point.y)}},Edge.prototype._getLineWidth=function(){return 1==this.selected?Math.max(Math.min(this.widthSelected,this.options.widthMax),.3*this.networkScaleInv):1==this.hover?Math.max(Math.min(this.options.hoverWidth,this.options.widthMax),.3*this.networkScaleInv):Math.max(this.options.width,.3*this.networkScaleInv)},Edge.prototype._getViaCoordinates=function(){if(1==this.options.smoothCurves.dynamic&&1==this.options.smoothCurves.enabled)return this.via;if(0==this.options.smoothCurves.enabled)return{x:0,y:0};var xVia=null,yVia=null,factor=this.options.smoothCurves.roundness,type=this.options.smoothCurves.type,dx=Math.abs(this.from.x-this.to.x),dy=Math.abs(this.from.y-this.to.y);return"discrete"==type||"diagonalCross"==type?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(this.from.y>this.to.y?this.from.x<this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y-factor*dy):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y-factor*dy):this.from.y<this.to.y&&(this.from.x<this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y+factor*dy):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y+factor*dy)),"discrete"==type&&(xVia=factor*dy>dx?this.from.x:xVia)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y-factor*dx):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y-factor*dx):this.from.y<this.to.y&&(this.from.x<this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y+factor*dx):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y+factor*dx)),"discrete"==type&&(yVia=factor*dx>dy?this.from.y:yVia)):"straightCross"==type?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(xVia=this.from.x,yVia=this.from.y<this.to.y?this.to.y-(1-factor)*dy:this.to.y+(1-factor)*dy):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(xVia=this.from.x<this.to.x?this.to.x-(1-factor)*dx:this.to.x+(1-factor)*dx,yVia=this.from.y):"horizontal"==type?(xVia=this.from.x<this.to.x?this.to.x-(1-factor)*dx:this.to.x+(1-factor)*dx,yVia=this.from.y):"vertical"==type?(xVia=this.from.x,yVia=this.from.y<this.to.y?this.to.y-(1-factor)*dy:this.to.y+(1-factor)*dy):Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?this.from.y>this.to.y?this.from.x<this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y-factor*dy,xVia=this.to.x<xVia?this.to.x:xVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y-factor*dy,xVia=this.to.x>xVia?this.to.x:xVia):this.from.y<this.to.y&&(this.from.x<this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y+factor*dy,xVia=this.to.x<xVia?this.to.x:xVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y+factor*dy,xVia=this.to.x>xVia?this.to.x:xVia)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y-factor*dx,yVia=this.to.y>yVia?this.to.y:yVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y-factor*dx,yVia=this.to.y>yVia?this.to.y:yVia):this.from.y<this.to.y&&(this.from.x<this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y+factor*dx,yVia=this.to.y<yVia?this.to.y:yVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y+factor*dx,yVia=this.to.y<yVia?this.to.y:yVia))),{x:xVia,y:yVia}},Edge.prototype._line=function(ctx){if(ctx.beginPath(),ctx.moveTo(this.from.x,this.from.y),1==this.options.smoothCurves.enabled){if(0==this.options.smoothCurves.dynamic){var via=this._getViaCoordinates();
return null==via.x?(ctx.lineTo(this.to.x,this.to.y),ctx.stroke(),null):(ctx.quadraticCurveTo(via.x,via.y,this.to.x,this.to.y),ctx.stroke(),via)}return ctx.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y),ctx.stroke(),this.via}return ctx.lineTo(this.to.x,this.to.y),ctx.stroke(),null},Edge.prototype._circle=function(ctx,x,y,radius){ctx.beginPath(),ctx.arc(x,y,radius,0,2*Math.PI,!1),ctx.stroke()},Edge.prototype._label=function(ctx,text,x,y){if(text){ctx.font=(this.from.selected||this.to.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var yLine;if(1==this.dirtyLabel){var lines=String(text).split("\n"),lineCount=lines.length,fontSize=Number(this.options.fontSize);yLine=y+(1-lineCount)/2*fontSize;for(var width=ctx.measureText(lines[0]).width,i=1;lineCount>i;i++){var lineWidth=ctx.measureText(lines[i]).width;width=lineWidth>width?lineWidth:width}var height=this.options.fontSize*lineCount,left=x-width/2,top=y-height/2;this.labelDimensions={top:top,left:left,width:width,height:height,yLine:yLine}}var yLine=this.labelDimensions.yLine;ctx.save(),"horizontal"!=this.options.labelAlignment&&(ctx.translate(x,yLine),this._rotateForLabelAlignment(ctx),x=0,yLine=0),this._drawLabelRect(ctx),this._drawLabelText(ctx,x,yLine,lines,lineCount,fontSize),ctx.restore()}},Edge.prototype._rotateForLabelAlignment=function(ctx){var dy=this.from.y-this.to.y,dx=this.from.x-this.to.x,angleInDegrees=Math.atan2(dy,dx);(-1>angleInDegrees&&0>dx||angleInDegrees>0&&0>dx)&&(angleInDegrees+=Math.PI),ctx.rotate(angleInDegrees)},Edge.prototype._drawLabelRect=function(ctx){if(void 0!==this.options.fontFill&&null!==this.options.fontFill&&"none"!==this.options.fontFill){ctx.fillStyle=this.options.fontFill;var lineMargin=2;"line-center"==this.options.labelAlignment?ctx.fillRect(.5*-this.labelDimensions.width,.5*-this.labelDimensions.height,this.labelDimensions.width,this.labelDimensions.height):"line-above"==this.options.labelAlignment?ctx.fillRect(.5*-this.labelDimensions.width,-(this.labelDimensions.height+lineMargin),this.labelDimensions.width,this.labelDimensions.height):"line-below"==this.options.labelAlignment?ctx.fillRect(.5*-this.labelDimensions.width,lineMargin,this.labelDimensions.width,this.labelDimensions.height):ctx.fillRect(this.labelDimensions.left,this.labelDimensions.top,this.labelDimensions.width,this.labelDimensions.height)}},Edge.prototype._drawLabelText=function(ctx,x,yLine,lines,lineCount,fontSize){if(ctx.fillStyle=this.options.fontColor||"black",ctx.textAlign="center","horizontal"!=this.options.labelAlignment){var lineMargin=2;"line-above"==this.options.labelAlignment?(ctx.textBaseline="alphabetic",yLine-=2*lineMargin):"line-below"==this.options.labelAlignment?(ctx.textBaseline="hanging",yLine+=2*lineMargin):ctx.textBaseline="middle"}else ctx.textBaseline="middle";this.options.fontStrokeWidth>0&&(ctx.lineWidth=this.options.fontStrokeWidth,ctx.strokeStyle=this.options.fontStrokeColor,ctx.lineJoin="round");for(var i=0;lineCount>i;i++)this.options.fontStrokeWidth>0&&ctx.strokeText(lines[i],x,yLine),ctx.fillText(lines[i],x,yLine),yLine+=fontSize},Edge.prototype._drawDashLine=function(ctx){ctx.strokeStyle=this._getColor(),ctx.lineWidth=this._getLineWidth();var via=null;if(void 0!==ctx.setLineDash){ctx.save();var pattern=[0];pattern=void 0!==this.options.dash.length&&void 0!==this.options.dash.gap?[this.options.dash.length,this.options.dash.gap]:[5,5],ctx.setLineDash(pattern),ctx.lineDashOffset=0,via=this._line(ctx),ctx.setLineDash([0]),ctx.lineDashOffset=0,ctx.restore()}else ctx.beginPath(),ctx.lineCap="round",void 0!==this.options.dash.altLength?ctx.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap,this.options.dash.altLength,this.options.dash.gap]):void 0!==this.options.dash.length&&void 0!==this.options.dash.gap?ctx.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap]):(ctx.moveTo(this.from.x,this.from.y),ctx.lineTo(this.to.x,this.to.y)),ctx.stroke();if(this.label){var point;if(1==this.options.smoothCurves.enabled&&null!=via){var midpointX=.5*(.5*(this.from.x+via.x)+.5*(this.to.x+via.x)),midpointY=.5*(.5*(this.from.y+via.y)+.5*(this.to.y+via.y));point={x:midpointX,y:midpointY}}else point=this._pointOnLine(.5);this._label(ctx,this.label,point.x,point.y)}},Edge.prototype._pointOnLine=function(percentage){return{x:(1-percentage)*this.from.x+percentage*this.to.x,y:(1-percentage)*this.from.y+percentage*this.to.y}},Edge.prototype._pointOnCircle=function(x,y,radius,percentage){var angle=2*(percentage-3/8)*Math.PI;return{x:x+radius*Math.cos(angle),y:y-radius*Math.sin(angle)}},Edge.prototype._drawArrowCenter=function(ctx){var point;if(ctx.strokeStyle=this._getColor(),ctx.fillStyle=ctx.strokeStyle,ctx.lineWidth=this._getLineWidth(),this.from!=this.to){var via=this._line(ctx),angle=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),length=(10+5*this.options.width)*this.options.arrowScaleFactor;if(1==this.options.smoothCurves.enabled&&null!=via){var midpointX=.5*(.5*(this.from.x+via.x)+.5*(this.to.x+via.x)),midpointY=.5*(.5*(this.from.y+via.y)+.5*(this.to.y+via.y));point={x:midpointX,y:midpointY}}else point=this._pointOnLine(.5);ctx.arrow(point.x,point.y,angle,length),ctx.fill(),ctx.stroke(),this.label&&this._label(ctx,this.label,point.x,point.y)}else{var x,y,radius=.25*Math.max(100,this.physics.springLength),node=this.from;node.width||node.resize(ctx),node.width>node.height?(x=node.x+.5*node.width,y=node.y-radius):(x=node.x+radius,y=node.y-.5*node.height),this._circle(ctx,x,y,radius);var angle=.2*Math.PI,length=(10+5*this.options.width)*this.options.arrowScaleFactor;point=this._pointOnCircle(x,y,radius,.5),ctx.arrow(point.x,point.y,angle,length),ctx.fill(),ctx.stroke(),this.label&&(point=this._pointOnCircle(x,y,radius,.5),this._label(ctx,this.label,point.x,point.y))}},Edge.prototype._pointOnBezier=function(t){var via=this._getViaCoordinates(),x=Math.pow(1-t,2)*this.from.x+2*t*(1-t)*via.x+Math.pow(t,2)*this.to.x,y=Math.pow(1-t,2)*this.from.y+2*t*(1-t)*via.y+Math.pow(t,2)*this.to.y;return{x:x,y:y}},Edge.prototype._findBorderPosition=function(from,ctx){var pos,angle,distanceToBorder,distanceToNodes,difference,maxIterations=10,iteration=0,low=0,high=1,threshold=.2,node=this.to;for(1==from&&(node=this.from);high>=low&&maxIterations>iteration;){var middle=.5*(low+high);if(pos=this._pointOnBezier(middle),angle=Math.atan2(node.y-pos.y,node.x-pos.x),distanceToBorder=node.distanceToBorder(ctx,angle),distanceToNodes=Math.sqrt(Math.pow(pos.x-node.x,2)+Math.pow(pos.y-node.y,2)),difference=distanceToBorder-distanceToNodes,Math.abs(difference)<threshold)break;0>difference?0==from?low=middle:high=middle:0==from?high=middle:low=middle,iteration++}return pos.t=middle,pos},Edge.prototype._drawArrow=function(ctx){ctx.strokeStyle=this._getColor(),ctx.fillStyle=ctx.strokeStyle,ctx.lineWidth=this._getLineWidth();var angle,length,arrowPos;if(this.from!=this.to){if(this._line(ctx),1==this.options.smoothCurves.enabled){var via=this._getViaCoordinates();arrowPos=this._findBorderPosition(!1,ctx);var guidePos=this._pointOnBezier(Math.max(0,arrowPos.t-.1));angle=Math.atan2(arrowPos.y-guidePos.y,arrowPos.x-guidePos.x)}else{angle=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var dx=this.to.x-this.from.x,dy=this.to.y-this.from.y,edgeSegmentLength=Math.sqrt(dx*dx+dy*dy),toBorderDist=this.to.distanceToBorder(ctx,angle),toBorderPoint=(edgeSegmentLength-toBorderDist)/edgeSegmentLength;arrowPos={},arrowPos.x=(1-toBorderPoint)*this.from.x+toBorderPoint*this.to.x,arrowPos.y=(1-toBorderPoint)*this.from.y+toBorderPoint*this.to.y}if(length=(10+5*this.options.width)*this.options.arrowScaleFactor,ctx.arrow(arrowPos.x,arrowPos.y,angle,length),ctx.fill(),ctx.stroke(),this.label){var point;point=1==this.options.smoothCurves.enabled&&null!=via?this._pointOnBezier(.5):this._pointOnLine(.5),this._label(ctx,this.label,point.x,point.y)}}else{var x,y,arrow,node=this.from,radius=.25*Math.max(100,this.physics.springLength);node.width||node.resize(ctx),node.width>node.height?(x=node.x+.5*node.width,y=node.y-radius,arrow={x:x,y:node.y,angle:.9*Math.PI}):(x=node.x+radius,y=node.y-.5*node.height,arrow={x:node.x,y:y,angle:.6*Math.PI}),ctx.beginPath(),ctx.arc(x,y,radius,0,2*Math.PI,!1),ctx.stroke();var length=(10+5*this.options.width)*this.options.arrowScaleFactor;ctx.arrow(arrow.x,arrow.y,arrow.angle,length),ctx.fill(),ctx.stroke(),this.label&&(point=this._pointOnCircle(x,y,radius,.5),this._label(ctx,this.label,point.x,point.y))}},Edge.prototype._getDistanceToEdge=function(x1,y1,x2,y2,x3,y3){var returnValue=0;if(this.from!=this.to)if(1==this.options.smoothCurves.enabled){var xVia,yVia;if(1==this.options.smoothCurves.enabled&&1==this.options.smoothCurves.dynamic)xVia=this.via.x,yVia=this.via.y;else{var via=this._getViaCoordinates();xVia=via.x,yVia=via.y}var distance,i,t,x,y,lastX,lastY,minDistance=1e9;for(i=0;10>i;i++)t=.1*i,x=Math.pow(1-t,2)*x1+2*t*(1-t)*xVia+Math.pow(t,2)*x2,y=Math.pow(1-t,2)*y1+2*t*(1-t)*yVia+Math.pow(t,2)*y2,i>0&&(distance=this._getDistanceToLine(lastX,lastY,x,y,x3,y3),minDistance=minDistance>distance?distance:minDistance),lastX=x,lastY=y;returnValue=minDistance}else returnValue=this._getDistanceToLine(x1,y1,x2,y2,x3,y3);else{var x,y,dx,dy,radius=.25*this.physics.springLength,node=this.from;node.width>node.height?(x=node.x+.5*node.width,y=node.y-radius):(x=node.x+radius,y=node.y-.5*node.height),dx=x-x3,dy=y-y3,returnValue=Math.abs(Math.sqrt(dx*dx+dy*dy)-radius)}return this.labelDimensions.left<x3&&this.labelDimensions.left+this.labelDimensions.width>x3&&this.labelDimensions.top<y3&&this.labelDimensions.top+this.labelDimensions.height>y3?0:returnValue},Edge.prototype._getDistanceToLine=function(x1,y1,x2,y2,x3,y3){var px=x2-x1,py=y2-y1,something=px*px+py*py,u=((x3-x1)*px+(y3-y1)*py)/something;u>1?u=1:0>u&&(u=0);var x=x1+u*px,y=y1+u*py,dx=x-x3,dy=y-y3;return Math.sqrt(dx*dx+dy*dy)},Edge.prototype.setScale=function(scale){this.networkScaleInv=1/scale},Edge.prototype.select=function(){this.selected=!0},Edge.prototype.unselect=function(){this.selected=!1},Edge.prototype.positionBezierNode=function(){null!==this.via&&null!==this.from&&null!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):null!==this.via&&(this.via.x=0,this.via.y=0)},Edge.prototype._drawControlNodes=function(ctx){if(1==this.controlNodesEnabled){if(null===this.controlNodes.from&&null===this.controlNodes.to){var nodeIdFrom="edgeIdFrom:".concat(this.id),nodeIdTo="edgeIdTo:".concat(this.id),constants={nodes:{group:"",radius:7,borderWidth:2,borderWidthSelected:2},physics:{damping:0},clustering:{maxNodeSizeIncrements:0,nodeScaling:{width:0,height:0,radius:0}}};this.controlNodes.from=new Node({id:nodeIdFrom,shape:"dot",color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},constants),this.controlNodes.to=new Node({id:nodeIdTo,shape:"dot",color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},constants)}this.controlNodes.positions={},0==this.controlNodes.from.selected&&(this.controlNodes.positions.from=this.getControlNodeFromPosition(ctx),this.controlNodes.from.x=this.controlNodes.positions.from.x,this.controlNodes.from.y=this.controlNodes.positions.from.y),0==this.controlNodes.to.selected&&(this.controlNodes.positions.to=this.getControlNodeToPosition(ctx),this.controlNodes.to.x=this.controlNodes.positions.to.x,this.controlNodes.to.y=this.controlNodes.positions.to.y),this.controlNodes.from.draw(ctx),this.controlNodes.to.draw(ctx)}else this.controlNodes={from:null,to:null,positions:{}}},Edge.prototype._enableControlNodes=function(){this.fromBackup=this.from,this.toBackup=this.to,this.controlNodesEnabled=!0},Edge.prototype._disableControlNodes=function(){this.fromId=this.from.id,this.toId=this.to.id,this.fromId!=this.fromBackup.id?this.fromBackup.detachEdge(this):this.toId!=this.toBackup.id&&this.toBackup.detachEdge(this),this.fromBackup=null,this.toBackup=null,this.controlNodesEnabled=!1},Edge.prototype._getSelectedControlNode=function(x,y){var positions=this.controlNodes.positions,fromDistance=Math.sqrt(Math.pow(x-positions.from.x,2)+Math.pow(y-positions.from.y,2)),toDistance=Math.sqrt(Math.pow(x-positions.to.x,2)+Math.pow(y-positions.to.y,2));return 15>fromDistance?(this.connectedNode=this.from,this.from=this.controlNodes.from,this.controlNodes.from):15>toDistance?(this.connectedNode=this.to,this.to=this.controlNodes.to,this.controlNodes.to):null},Edge.prototype._restoreControlNodes=function(){1==this.controlNodes.from.selected?(this.from=this.connectedNode,this.connectedNode=null,this.controlNodes.from.unselect()):1==this.controlNodes.to.selected&&(this.to=this.connectedNode,this.connectedNode=null,this.controlNodes.to.unselect())},Edge.prototype.getControlNodeFromPosition=function(ctx){var controlnodeFromPos;if(1==this.options.smoothCurves.enabled)controlnodeFromPos=this._findBorderPosition(!0,ctx);else{var angle=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),dx=this.to.x-this.from.x,dy=this.to.y-this.from.y,edgeSegmentLength=Math.sqrt(dx*dx+dy*dy),fromBorderDist=this.from.distanceToBorder(ctx,angle+Math.PI),fromBorderPoint=(edgeSegmentLength-fromBorderDist)/edgeSegmentLength;controlnodeFromPos={},controlnodeFromPos.x=fromBorderPoint*this.from.x+(1-fromBorderPoint)*this.to.x,controlnodeFromPos.y=fromBorderPoint*this.from.y+(1-fromBorderPoint)*this.to.y}return controlnodeFromPos},Edge.prototype.getControlNodeToPosition=function(ctx){var controlnodeToPos;if(1==this.options.smoothCurves.enabled)controlnodeToPos=this._findBorderPosition(!1,ctx);else{var angle=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),dx=this.to.x-this.from.x,dy=this.to.y-this.from.y,edgeSegmentLength=Math.sqrt(dx*dx+dy*dy),toBorderDist=this.to.distanceToBorder(ctx,angle),toBorderPoint=(edgeSegmentLength-toBorderDist)/edgeSegmentLength;controlnodeToPos={},controlnodeToPos.x=(1-toBorderPoint)*this.from.x+toBorderPoint*this.to.x,controlnodeToPos.y=(1-toBorderPoint)*this.from.y+toBorderPoint*this.to.y}return controlnodeToPos},module.exports=Edge},function(module,exports,__webpack_require__){function Groups(){this.clear(),this.defaultIndex=0}__webpack_require__(1);Groups.DEFAULT=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}}],Groups.prototype.clear=function(){this.groups={},this.groups.length=function(){var i=0;for(var p in this)this.hasOwnProperty(p)&&i++;return i}},Groups.prototype.get=function(groupname){var group=this.groups[groupname];if(void 0==group){var index=this.defaultIndex%Groups.DEFAULT.length;this.defaultIndex++,group={},group.color=Groups.DEFAULT[index],this.groups[groupname]=group}return group},Groups.prototype.add=function(groupname,style){return this.groups[groupname]=style,style},module.exports=Groups},function(module){function Images(){this.images={},this.imageBroken={},this.callback=void 0}Images.prototype.setOnloadCallback=function(callback){this.callback=callback},Images.prototype.load=function(url,brokenUrl){var img=this.images[url];if(void 0===img){var me=this;img=new Image,img.onload=function(){0==this.width&&(document.body.appendChild(this),this.width=this.offsetWidth,this.height=this.offsetHeight,document.body.removeChild(this)),me.callback&&(me.images[url]=img,me.callback(this))},img.onerror=function(){void 0===brokenUrl?(console.error("Could not load image:",url),delete this.src,me.callback&&me.callback(this)):me.imageBroken[url]===!0?this.src==brokenUrl?(console.error("Could not load brokenImage:",brokenUrl),delete this.src,me.callback&&me.callback(this)):(console.error("Could not load image:",url),this.src=brokenUrl):(console.error("Could not load image:",url),this.src=brokenUrl,me.imageBroken[url]=!0)},img.src=url}return img},module.exports=Images},function(module,exports,__webpack_require__){function Node(properties,imagelist,grouplist,networkConstants){var constants=util.selectiveBridgeObject(["nodes"],networkConstants);this.options=constants.nodes,this.selected=!1,this.hover=!1,this.edges=[],this.dynamicEdges=[],this.reroutedEdges={},this.id=void 0,this.allowedToMoveX=!1,this.allowedToMoveY=!1,this.xFixed=!1,this.yFixed=!1,this.horizontalAlignLeft=!0,this.verticalAlignTop=!0,this.baseRadiusValue=networkConstants.nodes.radius,this.radiusFixed=!1,this.level=-1,this.preassignedLevel=!1,this.hierarchyEnumerated=!1,this.labelDimensions={top:0,left:0,width:0,height:0,yLine:0},this.boundingBox={top:0,left:0,right:0,bottom:0},this.imagelist=imagelist,this.grouplist=grouplist,this.fx=0,this.fy=0,this.vx=0,this.vy=0,this.x=null,this.y=null,this.predefinedPosition=!1,this.previousState={vx:0,vy:0,x:0,y:0},this.damping=networkConstants.physics.damping,this.fixedData={x:null,y:null},this.setProperties(properties,constants),this.resetCluster(),this.clusterSession=0,this.clusterSizeWidthFactor=networkConstants.clustering.nodeScaling.width,this.clusterSizeHeightFactor=networkConstants.clustering.nodeScaling.height,this.clusterSizeRadiusFactor=networkConstants.clustering.nodeScaling.radius,this.maxNodeSizeIncrements=networkConstants.clustering.maxNodeSizeIncrements,this.growthIndicator=0,this.networkScaleInv=1,this.networkScale=1,this.canvasTopLeft={x:-300,y:-300},this.canvasBottomRight={x:300,y:300},this.parentEdgeId=null}var util=__webpack_require__(1);Node.prototype.revertPosition=function(){this.x=this.previousState.x,this.y=this.previousState.y,this.vx=this.previousState.vx,this.vy=this.previousState.vy},Node.prototype.resetCluster=function(){this.formationScale=void 0,this.clusterSize=1,this.containedNodes={},this.containedEdges={},this.clusterSessions=[]},Node.prototype.attachEdge=function(edge){-1==this.edges.indexOf(edge)&&this.edges.push(edge),-1==this.dynamicEdges.indexOf(edge)&&this.dynamicEdges.push(edge)},Node.prototype.detachEdge=function(edge){var index=this.edges.indexOf(edge);-1!=index&&this.edges.splice(index,1),index=this.dynamicEdges.indexOf(edge),-1!=index&&this.dynamicEdges.splice(index,1)},Node.prototype.setProperties=function(properties,constants){if(properties){var fields=["borderWidth","borderWidthSelected","shape","image","brokenImage","radius","fontColor","fontSize","fontFace","fontFill","fontStrokeWidth","fontStrokeColor","group","mass","fontDrawThreshold","scaleFontWithValue","fontSizeMaxVisible","customScalingFunction"];if(util.selectiveDeepExtend(fields,this.options,properties),void 0!==properties.id&&(this.id=properties.id),void 0!==properties.label&&(this.label=properties.label,this.originalLabel=properties.label),void 0!==properties.title&&(this.title=properties.title),void 0!==properties.x&&(this.x=properties.x,this.predefinedPosition=!0),void 0!==properties.y&&(this.y=properties.y,this.predefinedPosition=!0),void 0!==properties.value&&(this.value=properties.value),void 0!==properties.level&&(this.level=properties.level,this.preassignedLevel=!0),void 0!==properties.horizontalAlignLeft&&(this.horizontalAlignLeft=properties.horizontalAlignLeft),void 0!==properties.verticalAlignTop&&(this.verticalAlignTop=properties.verticalAlignTop),void 0!==properties.triggerFunction&&(this.triggerFunction=properties.triggerFunction),void 0===this.id)throw"Node must have an id";if("number"==typeof properties.group||"string"==typeof properties.group&&""!=properties.group){var groupObj=this.grouplist.get(properties.group);util.deepExtend(this.options,groupObj),this.options.color=util.parseColor(this.options.color)}if(void 0!==properties.radius&&(this.baseRadiusValue=this.options.radius),void 0!==properties.color&&(this.options.color=util.parseColor(properties.color)),void 0!==this.options.image&&""!=this.options.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage)}switch(void 0!==properties.allowedToMoveX?(this.xFixed=!properties.allowedToMoveX,this.allowedToMoveX=properties.allowedToMoveX):void 0!==properties.x&&0==this.allowedToMoveX&&(this.xFixed=!0),void 0!==properties.allowedToMoveY?(this.yFixed=!properties.allowedToMoveY,this.allowedToMoveY=properties.allowedToMoveY):void 0!==properties.y&&0==this.allowedToMoveY&&(this.yFixed=!0),this.radiusFixed=this.radiusFixed||void 0!==properties.radius,("image"===this.options.shape||"circularImage"===this.options.shape)&&(this.options.radiusMin=constants.nodes.widthMin,this.options.radiusMax=constants.nodes.widthMax),this.options.shape){case"database":this.draw=this._drawDatabase,this.resize=this._resizeDatabase;break;case"box":this.draw=this._drawBox,this.resize=this._resizeBox;break;case"circle":this.draw=this._drawCircle,this.resize=this._resizeCircle;break;case"ellipse":this.draw=this._drawEllipse,this.resize=this._resizeEllipse;break;case"image":this.draw=this._drawImage,this.resize=this._resizeImage;break;case"circularImage":this.draw=this._drawCircularImage,this.resize=this._resizeCircularImage;break;case"text":this.draw=this._drawText,this.resize=this._resizeText;break;case"dot":this.draw=this._drawDot,this.resize=this._resizeShape;break;case"square":this.draw=this._drawSquare,this.resize=this._resizeShape;break;case"triangle":this.draw=this._drawTriangle,this.resize=this._resizeShape;break;case"triangleDown":this.draw=this._drawTriangleDown,this.resize=this._resizeShape;break;case"star":this.draw=this._drawStar,this.resize=this._resizeShape;break;default:this.draw=this._drawEllipse,this.resize=this._resizeEllipse}this._reset()}},Node.prototype.select=function(){this.selected=!0,this._reset()},Node.prototype.unselect=function(){this.selected=!1,this._reset()},Node.prototype.clearSizeCache=function(){this._reset()},Node.prototype._reset=function(){this.width=void 0,this.height=void 0},Node.prototype.getTitle=function(){return"function"==typeof this.title?this.title():this.title},Node.prototype.distanceToBorder=function(ctx,angle){var borderWidth=1;switch(this.width||this.resize(ctx),this.options.shape){case"circle":case"dot":return this.options.radius+borderWidth;case"ellipse":var a=this.width/2,b=this.height/2,w=Math.sin(angle)*a,h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h);case"box":case"image":case"text":default:return this.width?Math.min(Math.abs(this.width/2/Math.cos(angle)),Math.abs(this.height/2/Math.sin(angle)))+borderWidth:0}},Node.prototype._setForce=function(fx,fy){this.fx=fx,this.fy=fy},Node.prototype._addForce=function(fx,fy){this.fx+=fx,this.fy+=fy},Node.prototype.storeState=function(){this.previousState.x=this.x,this.previousState.y=this.y,this.previousState.vx=this.vx,this.previousState.vy=this.vy},Node.prototype.discreteStep=function(interval){if(this.storeState(),this.xFixed)this.fx=0,this.vx=0;else{var dx=this.damping*this.vx,ax=(this.fx-dx)/this.options.mass;this.vx+=ax*interval,this.x+=this.vx*interval}if(this.yFixed)this.fy=0,this.vy=0;else{var dy=this.damping*this.vy,ay=(this.fy-dy)/this.options.mass;this.vy+=ay*interval,this.y+=this.vy*interval}},Node.prototype.discreteStepLimited=function(interval,maxVelocity){if(this.storeState(),this.xFixed)this.fx=0,this.vx=0;else{var dx=this.damping*this.vx,ax=(this.fx-dx)/this.options.mass;this.vx+=ax*interval,this.vx=Math.abs(this.vx)>maxVelocity?this.vx>0?maxVelocity:-maxVelocity:this.vx,this.x+=this.vx*interval}if(this.yFixed)this.fy=0,this.vy=0;else{var dy=this.damping*this.vy,ay=(this.fy-dy)/this.options.mass;this.vy+=ay*interval,this.vy=Math.abs(this.vy)>maxVelocity?this.vy>0?maxVelocity:-maxVelocity:this.vy,this.y+=this.vy*interval}},Node.prototype.isFixed=function(){return this.xFixed&&this.yFixed},Node.prototype.isMoving=function(vmin){var velocity=Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2));return velocity>vmin},Node.prototype.isSelected=function(){return this.selected},Node.prototype.getValue=function(){return this.value},Node.prototype.getDistance=function(x,y){var dx=this.x-x,dy=this.y-y;return Math.sqrt(dx*dx+dy*dy)},Node.prototype.setValueRange=function(min,max,total){if(!this.radiusFixed&&void 0!==this.value){var scale=this.options.customScalingFunction(min,max,total,this.value),radiusDiff=this.options.radiusMax-this.options.radiusMin;if(1==this.options.scaleFontWithValue){var fontDiff=this.options.fontSizeMax-this.options.fontSizeMin;this.options.fontSize=this.options.fontSizeMin+scale*fontDiff}this.options.radius=this.options.radiusMin+scale*radiusDiff}this.baseRadiusValue=this.options.radius},Node.prototype.draw=function(){throw"Draw method not initialized for node"},Node.prototype.resize=function(){throw"Resize method not initialized for node"},Node.prototype.isOverlappingWith=function(obj){return this.left<obj.right&&this.left+this.width>obj.left&&this.top<obj.bottom&&this.top+this.height>obj.top},Node.prototype._resizeImage=function(){if(!this.width||!this.height){var width,height;if(this.value){this.options.radius=this.baseRadiusValue;var scale=this.imageObj.height/this.imageObj.width;void 0!==scale?(width=this.options.radius||this.imageObj.width,height=this.options.radius*scale||this.imageObj.height):(width=0,height=0)}else width=this.imageObj.width,height=this.imageObj.height;this.width=width,this.height=height,this.growthIndicator=0,this.width>0&&this.height>0&&(this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-width)}},Node.prototype._drawImageAtPosition=function(ctx){if(0!=this.imageObj.width){if(this.clusterSize>1){var lineWidth=this.clusterSize>1?10:0;lineWidth*=this.networkScaleInv,lineWidth=Math.min(.2*this.width,lineWidth),ctx.globalAlpha=.5,ctx.drawImage(this.imageObj,this.left-lineWidth,this.top-lineWidth,this.width+2*lineWidth,this.height+2*lineWidth)}ctx.globalAlpha=1,ctx.drawImage(this.imageObj,this.left,this.top,this.width,this.height)}},Node.prototype._drawImageLabel=function(ctx){var yLabel,offset=0;if(this.height){offset=this.height/2;var labelDimensions=this.getTextSize(ctx);labelDimensions.lineCount>=1&&(offset+=labelDimensions.height/2,offset+=3)}yLabel=this.y+offset,this._label(ctx,this.label,this.x,yLabel,void 0)},Node.prototype._drawImage=function(ctx){this._resizeImage(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2,this._drawImageAtPosition(ctx),this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,this._drawImageLabel(ctx),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelDimensions.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelDimensions.left+this.labelDimensions.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelDimensions.height)},Node.prototype._resizeCircularImage=function(ctx){if(this.imageObj.src&&this.imageObj.width&&this.imageObj.height)this._swapToImageResizeWhenImageLoaded&&(this.width=0,this.height=0,delete this._swapToImageResizeWhenImageLoaded),this._resizeImage(ctx);else if(!this.width){var diameter=2*this.options.radius;this.width=diameter,this.height=diameter,this.options.radius+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.options.radius-.5*diameter,this._swapToImageResizeWhenImageLoaded=!0}},Node.prototype._drawCircularImage=function(ctx){this._resizeCircularImage(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var centerX=this.left+this.width/2,centerY=this.top+this.height/2,radius=Math.abs(this.height/2);this._drawRawCircle(ctx,centerX,centerY,radius),ctx.save(),ctx.circle(this.x,this.y,radius),ctx.stroke(),ctx.clip(),this._drawImageAtPosition(ctx),ctx.restore(),this.boundingBox.top=this.y-this.options.radius,this.boundingBox.left=this.x-this.options.radius,this.boundingBox.right=this.x+this.options.radius,this.boundingBox.bottom=this.y+this.options.radius,this._drawImageLabel(ctx),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelDimensions.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelDimensions.left+this.labelDimensions.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelDimensions.height)},Node.prototype._resizeBox=function(ctx){if(!this.width){var margin=5,textSize=this.getTextSize(ctx);this.width=textSize.width+2*margin,this.height=textSize.height+2*margin,this.width+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.growthIndicator=this.width-(textSize.width+2*margin)}},Node.prototype._drawBox=function(ctx){this._resizeBox(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var clusterLineWidth=2.5,borderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.roundRect(this.left-2*ctx.lineWidth,this.top-2*ctx.lineWidth,this.width+4*ctx.lineWidth,this.height+4*ctx.lineWidth,this.options.radius),ctx.stroke()),ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,ctx.roundRect(this.left,this.top,this.width,this.height,this.options.radius),ctx.fill(),ctx.stroke(),this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,this._label(ctx,this.label,this.x,this.y)},Node.prototype._resizeDatabase=function(ctx){if(!this.width){var margin=5,textSize=this.getTextSize(ctx),size=textSize.width+2*margin;this.width=size,this.height=size,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-size}},Node.prototype._drawDatabase=function(ctx){this._resizeDatabase(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var clusterLineWidth=2.5,borderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.database(this.x-this.width/2-2*ctx.lineWidth,this.y-.5*this.height-2*ctx.lineWidth,this.width+4*ctx.lineWidth,this.height+4*ctx.lineWidth),ctx.stroke()),ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,ctx.database(this.x-this.width/2,this.y-.5*this.height,this.width,this.height),ctx.fill(),ctx.stroke(),this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,this._label(ctx,this.label,this.x,this.y)
},Node.prototype._resizeCircle=function(ctx){if(!this.width){var margin=5,textSize=this.getTextSize(ctx),diameter=Math.max(textSize.width,textSize.height)+2*margin;this.options.radius=diameter/2,this.width=diameter,this.height=diameter,this.options.radius+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.options.radius-.5*diameter}},Node.prototype._drawRawCircle=function(ctx,x,y,radius){var clusterLineWidth=2.5,borderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.circle(x,y,radius+2*ctx.lineWidth),ctx.stroke()),ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,ctx.circle(this.x,this.y,radius),ctx.fill(),ctx.stroke()},Node.prototype._drawCircle=function(ctx){this._resizeCircle(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2,this._drawRawCircle(ctx,this.x,this.y,this.options.radius),this.boundingBox.top=this.y-this.options.radius,this.boundingBox.left=this.x-this.options.radius,this.boundingBox.right=this.x+this.options.radius,this.boundingBox.bottom=this.y+this.options.radius,this._label(ctx,this.label,this.x,this.y)},Node.prototype._resizeEllipse=function(ctx){if(!this.width){var textSize=this.getTextSize(ctx);this.width=1.5*textSize.width,this.height=2*textSize.height,this.width<this.height&&(this.width=this.height);var defaultSize=this.width;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-defaultSize}},Node.prototype._drawEllipse=function(ctx){this._resizeEllipse(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var clusterLineWidth=2.5,borderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.ellipse(this.left-2*ctx.lineWidth,this.top-2*ctx.lineWidth,this.width+4*ctx.lineWidth,this.height+4*ctx.lineWidth),ctx.stroke()),ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,ctx.ellipse(this.left,this.top,this.width,this.height),ctx.fill(),ctx.stroke(),this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,this._label(ctx,this.label,this.x,this.y)},Node.prototype._drawDot=function(ctx){this._drawShape(ctx,"circle")},Node.prototype._drawTriangle=function(ctx){this._drawShape(ctx,"triangle")},Node.prototype._drawTriangleDown=function(ctx){this._drawShape(ctx,"triangleDown")},Node.prototype._drawSquare=function(ctx){this._drawShape(ctx,"square")},Node.prototype._drawStar=function(ctx){this._drawShape(ctx,"star")},Node.prototype._resizeShape=function(){if(!this.width){this.options.radius=this.baseRadiusValue;var size=2*this.options.radius;this.width=size,this.height=size,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-size}},Node.prototype._drawShape=function(ctx,shape){this._resizeShape(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var clusterLineWidth=2.5,borderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth,radiusMultiplier=2;switch(shape){case"dot":radiusMultiplier=2;break;case"square":radiusMultiplier=2;break;case"triangle":radiusMultiplier=3;break;case"triangleDown":radiusMultiplier=3;break;case"star":radiusMultiplier=4}ctx.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx[shape](this.x,this.y,this.options.radius+radiusMultiplier*ctx.lineWidth),ctx.stroke()),ctx.lineWidth=(this.selected?selectionLineWidth:borderWidth)+(this.clusterSize>1?clusterLineWidth:0),ctx.lineWidth*=this.networkScaleInv,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,ctx[shape](this.x,this.y,this.options.radius),ctx.fill(),ctx.stroke(),this.boundingBox.top=this.y-this.options.radius,this.boundingBox.left=this.x-this.options.radius,this.boundingBox.right=this.x+this.options.radius,this.boundingBox.bottom=this.y+this.options.radius,this.label&&(this._label(ctx,this.label,this.x,this.y+this.height/2,void 0,"hanging",!0),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelDimensions.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelDimensions.left+this.labelDimensions.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelDimensions.height))},Node.prototype._resizeText=function(ctx){if(!this.width){var margin=5,textSize=this.getTextSize(ctx);this.width=textSize.width+2*margin,this.height=textSize.height+2*margin,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-(textSize.width+2*margin)}},Node.prototype._drawText=function(ctx){this._resizeText(ctx),this.left=this.x-this.width/2,this.top=this.y-this.height/2,this._label(ctx,this.label,this.x,this.y),this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height},Node.prototype._label=function(ctx,text,x,y,align,baseline,labelUnderNode){var relativeFontSize=Number(this.options.fontSize)*this.networkScale;if(text&&relativeFontSize>=this.options.fontDrawThreshold-1){var fontSize=Number(this.options.fontSize);relativeFontSize>=this.options.fontSizeMaxVisible&&(fontSize=Number(this.options.fontSizeMaxVisible)*this.networkScaleInv);var fontColor=this.options.fontColor||"#000000",strokecolor=this.options.fontStrokeColor;if(relativeFontSize<=this.options.fontDrawThreshold){var opacity=Math.max(0,Math.min(1,1-(this.options.fontDrawThreshold-relativeFontSize)));fontColor=util.overrideOpacity(fontColor,opacity),strokecolor=util.overrideOpacity(strokecolor,opacity)}ctx.font=(this.selected?"bold ":"")+fontSize+"px "+this.options.fontFace;var lines=text.split("\n"),lineCount=lines.length,yLine=y+(1-lineCount)/2*fontSize;1==labelUnderNode&&(yLine=y+(1-lineCount)/(2*fontSize));for(var width=ctx.measureText(lines[0]).width,i=1;lineCount>i;i++){var lineWidth=ctx.measureText(lines[i]).width;width=lineWidth>width?lineWidth:width}var height=fontSize*lineCount,left=x-width/2,top=y-height/2;"hanging"==baseline&&(top+=.5*fontSize,top+=4,yLine+=4),this.labelDimensions={top:top,left:left,width:width,height:height,yLine:yLine},void 0!==this.options.fontFill&&null!==this.options.fontFill&&"none"!==this.options.fontFill&&(ctx.fillStyle=this.options.fontFill,ctx.fillRect(left,top,width,height)),ctx.fillStyle=fontColor,ctx.textAlign=align||"center",ctx.textBaseline=baseline||"middle",this.options.fontStrokeWidth>0&&(ctx.lineWidth=this.options.fontStrokeWidth,ctx.strokeStyle=strokecolor,ctx.lineJoin="round");for(var i=0;lineCount>i;i++)this.options.fontStrokeWidth&&ctx.strokeText(lines[i],x,yLine),ctx.fillText(lines[i],x,yLine),yLine+=fontSize}},Node.prototype.getTextSize=function(ctx){if(void 0!==this.label){var fontSize=Number(this.options.fontSize);fontSize*this.networkScale>this.options.fontSizeMaxVisible&&(fontSize=Number(this.options.fontSizeMaxVisible)*this.networkScaleInv),ctx.font=(this.selected?"bold ":"")+fontSize+"px "+this.options.fontFace;for(var lines=this.label.split("\n"),height=(fontSize+4)*lines.length,width=0,i=0,iMax=lines.length;iMax>i;i++)width=Math.max(width,ctx.measureText(lines[i]).width);return{width:width,height:height,lineCount:lines.length}}return{width:0,height:0,lineCount:0}},Node.prototype.inArea=function(){return void 0!==this.width?this.x+this.width*this.networkScaleInv>=this.canvasTopLeft.x&&this.x-this.width*this.networkScaleInv<this.canvasBottomRight.x&&this.y+this.height*this.networkScaleInv>=this.canvasTopLeft.y&&this.y-this.height*this.networkScaleInv<this.canvasBottomRight.y:!0},Node.prototype.inView=function(){return this.x>=this.canvasTopLeft.x&&this.x<this.canvasBottomRight.x&&this.y>=this.canvasTopLeft.y&&this.y<this.canvasBottomRight.y},Node.prototype.setScaleAndPos=function(scale,canvasTopLeft,canvasBottomRight){this.networkScaleInv=1/scale,this.networkScale=scale,this.canvasTopLeft=canvasTopLeft,this.canvasBottomRight=canvasBottomRight},Node.prototype.setScale=function(scale){this.networkScaleInv=1/scale,this.networkScale=scale},Node.prototype.clearVelocity=function(){this.vx=0,this.vy=0},Node.prototype.updateVelocity=function(massBeforeClustering){var energyBefore=this.vx*this.vx*massBeforeClustering;this.vx=Math.sqrt(energyBefore/this.options.mass),energyBefore=this.vy*this.vy*massBeforeClustering,this.vy=Math.sqrt(energyBefore/this.options.mass)},module.exports=Node},function(module){function Popup(container,x,y,text,style){this.container=container?container:document.body,void 0===style&&("object"==typeof x?(style=x,x=void 0):"object"==typeof text?(style=text,text=void 0):style={fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}}),this.x=0,this.y=0,this.padding=5,void 0!==x&&void 0!==y&&this.setPosition(x,y),void 0!==text&&this.setText(text),this.frame=document.createElement("div"),this.frame.className="network-tooltip",this.frame.style.color=style.fontColor,this.frame.style.backgroundColor=style.color.background,this.frame.style.borderColor=style.color.border,this.frame.style.fontSize=style.fontSize+"px",this.frame.style.fontFamily=style.fontFace,this.container.appendChild(this.frame)}Popup.prototype.setPosition=function(x,y){this.x=parseInt(x),this.y=parseInt(y)},Popup.prototype.setText=function(content){content instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(content)):this.frame.innerHTML=content},Popup.prototype.show=function(show){if(void 0===show&&(show=!0),show){var height=this.frame.clientHeight,width=this.frame.clientWidth,maxHeight=this.frame.parentNode.clientHeight,maxWidth=this.frame.parentNode.clientWidth,top=this.y-height;top+height+this.padding>maxHeight&&(top=maxHeight-height-this.padding),top<this.padding&&(top=this.padding);var left=this.x;left+width+this.padding>maxWidth&&(left=maxWidth-width-this.padding),left<this.padding&&(left=this.padding),this.frame.style.left=left+"px",this.frame.style.top=top+"px",this.frame.style.visibility="visible"}else this.hide()},Popup.prototype.hide=function(){this.frame.style.visibility="hidden"},module.exports=Popup},function(module,exports){function parseDOT(data){return dot=data,parseGraph()}function first(){index=0,c=dot.charAt(0)}function next(){index++,c=dot.charAt(index)}function nextPreview(){return dot.charAt(index+1)}function isAlphaNumeric(c){return regexAlphaNumeric.test(c)}function merge(a,b){if(a||(a={}),b)for(var name in b)b.hasOwnProperty(name)&&(a[name]=b[name]);return a}function setValue(obj,path,value){for(var keys=path.split("."),o=obj;keys.length;){var key=keys.shift();keys.length?(o[key]||(o[key]={}),o=o[key]):o[key]=value}}function addNode(graph,node){for(var i,len,current=null,graphs=[graph],root=graph;root.parent;)graphs.push(root.parent),root=root.parent;if(root.nodes)for(i=0,len=root.nodes.length;len>i;i++)if(node.id===root.nodes[i].id){current=root.nodes[i];break}for(current||(current={id:node.id},graph.node&&(current.attr=merge(current.attr,graph.node))),i=graphs.length-1;i>=0;i--){var g=graphs[i];g.nodes||(g.nodes=[]),-1==g.nodes.indexOf(current)&&g.nodes.push(current)}node.attr&&(current.attr=merge(current.attr,node.attr))}function addEdge(graph,edge){if(graph.edges||(graph.edges=[]),graph.edges.push(edge),graph.edge){var attr=merge({},graph.edge);edge.attr=merge(attr,edge.attr)}}function createEdge(graph,from,to,type,attr){var edge={from:from,to:to,type:type};return graph.edge&&(edge.attr=merge({},graph.edge)),edge.attr=merge(edge.attr||{},attr),edge}function getToken(){for(tokenType=TOKENTYPE.NULL,token="";" "==c||"	"==c||"\n"==c||"\r"==c;)next();do{var isComment=!1;if("#"==c){for(var i=index-1;" "==dot.charAt(i)||"	"==dot.charAt(i);)i--;if("\n"==dot.charAt(i)||""==dot.charAt(i)){for(;""!=c&&"\n"!=c;)next();isComment=!0}}if("/"==c&&"/"==nextPreview()){for(;""!=c&&"\n"!=c;)next();isComment=!0}if("/"==c&&"*"==nextPreview()){for(;""!=c;){if("*"==c&&"/"==nextPreview()){next(),next();break}next()}isComment=!0}for(;" "==c||"	"==c||"\n"==c||"\r"==c;)next()}while(isComment);if(""==c)return void(tokenType=TOKENTYPE.DELIMITER);var c2=c+nextPreview();if(DELIMITERS[c2])return tokenType=TOKENTYPE.DELIMITER,token=c2,next(),void next();if(DELIMITERS[c])return tokenType=TOKENTYPE.DELIMITER,token=c,void next();if(isAlphaNumeric(c)||"-"==c){for(token+=c,next();isAlphaNumeric(c);)token+=c,next();return"false"==token?token=!1:"true"==token?token=!0:isNaN(Number(token))||(token=Number(token)),void(tokenType=TOKENTYPE.IDENTIFIER)}if('"'==c){for(next();""!=c&&('"'!=c||'"'==c&&'"'==nextPreview());)token+=c,'"'==c&&next(),next();if('"'!=c)throw newSyntaxError('End of string " expected');return next(),void(tokenType=TOKENTYPE.IDENTIFIER)}for(tokenType=TOKENTYPE.UNKNOWN;""!=c;)token+=c,next();throw new SyntaxError('Syntax error in part "'+chop(token,30)+'"')}function parseGraph(){var graph={};if(first(),getToken(),"strict"==token&&(graph.strict=!0,getToken()),("graph"==token||"digraph"==token)&&(graph.type=token,getToken()),tokenType==TOKENTYPE.IDENTIFIER&&(graph.id=token,getToken()),"{"!=token)throw newSyntaxError("Angle bracket { expected");if(getToken(),parseStatements(graph),"}"!=token)throw newSyntaxError("Angle bracket } expected");if(getToken(),""!==token)throw newSyntaxError("End of file expected");return getToken(),delete graph.node,delete graph.edge,delete graph.graph,graph}function parseStatements(graph){for(;""!==token&&"}"!=token;)parseStatement(graph),";"==token&&getToken()}function parseStatement(graph){var subgraph=parseSubgraph(graph);if(subgraph)return void parseEdge(graph,subgraph);var attr=parseAttributeStatement(graph);if(!attr){if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier expected");var id=token;if(getToken(),"="==token){if(getToken(),tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier expected");graph[id]=token,getToken()}else parseNodeStatement(graph,id)}}function parseSubgraph(graph){var subgraph=null;if("subgraph"==token&&(subgraph={},subgraph.type="subgraph",getToken(),tokenType==TOKENTYPE.IDENTIFIER&&(subgraph.id=token,getToken())),"{"==token){if(getToken(),subgraph||(subgraph={}),subgraph.parent=graph,subgraph.node=graph.node,subgraph.edge=graph.edge,subgraph.graph=graph.graph,parseStatements(subgraph),"}"!=token)throw newSyntaxError("Angle bracket } expected");getToken(),delete subgraph.node,delete subgraph.edge,delete subgraph.graph,delete subgraph.parent,graph.subgraphs||(graph.subgraphs=[]),graph.subgraphs.push(subgraph)}return subgraph}function parseAttributeStatement(graph){return"node"==token?(getToken(),graph.node=parseAttributeList(),"node"):"edge"==token?(getToken(),graph.edge=parseAttributeList(),"edge"):"graph"==token?(getToken(),graph.graph=parseAttributeList(),"graph"):null}function parseNodeStatement(graph,id){var node={id:id},attr=parseAttributeList();attr&&(node.attr=attr),addNode(graph,node),parseEdge(graph,id)}function parseEdge(graph,from){for(;"->"==token||"--"==token;){var to,type=token;getToken();var subgraph=parseSubgraph(graph);if(subgraph)to=subgraph;else{if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier or subgraph expected");to=token,addNode(graph,{id:to}),getToken()}var attr=parseAttributeList(),edge=createEdge(graph,from,to,type,attr);addEdge(graph,edge),from=to}}function parseAttributeList(){for(var attr=null;"["==token;){for(getToken(),attr={};""!==token&&"]"!=token;){if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Attribute name expected");var name=token;if(getToken(),"="!=token)throw newSyntaxError("Equal sign = expected");if(getToken(),tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Attribute value expected");var value=token;setValue(attr,name,value),getToken(),","==token&&getToken()}if("]"!=token)throw newSyntaxError("Bracket ] expected");getToken()}return attr}function newSyntaxError(message){return new SyntaxError(message+', got "'+chop(token,30)+'" (char '+index+")")}function chop(text,maxLength){return text.length<=maxLength?text:text.substr(0,27)+"..."}function forEach2(array1,array2,fn){Array.isArray(array1)?array1.forEach(function(elem1){Array.isArray(array2)?array2.forEach(function(elem2){fn(elem1,elem2)}):fn(elem1,array2)}):Array.isArray(array2)?array2.forEach(function(elem2){fn(array1,elem2)}):fn(array1,array2)}function DOTToGraph(data){var dotData=parseDOT(data),graphData={nodes:[],edges:[],options:{}};if(dotData.nodes&&dotData.nodes.forEach(function(dotNode){var graphNode={id:dotNode.id,label:String(dotNode.label||dotNode.id)};merge(graphNode,dotNode.attr),graphNode.image&&(graphNode.shape="image"),graphData.nodes.push(graphNode)}),dotData.edges){var convertEdge=function(dotEdge){var graphEdge={from:dotEdge.from,to:dotEdge.to};return merge(graphEdge,dotEdge.attr),graphEdge.style="->"==dotEdge.type?"arrow":"line",graphEdge};dotData.edges.forEach(function(dotEdge){var from,to;from=dotEdge.from instanceof Object?dotEdge.from.nodes:{id:dotEdge.from},to=dotEdge.to instanceof Object?dotEdge.to.nodes:{id:dotEdge.to},dotEdge.from instanceof Object&&dotEdge.from.edges&&dotEdge.from.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)}),forEach2(from,to,function(from,to){var subEdge=createEdge(graphData,from.id,to.id,dotEdge.type,dotEdge.attr),graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)}),dotEdge.to instanceof Object&&dotEdge.to.edges&&dotEdge.to.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)})})}return dotData.attr&&(graphData.options=dotData.attr),graphData}var TOKENTYPE={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},DELIMITERS={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},dot="",index=0,c="",token="",tokenType=TOKENTYPE.NULL,regexAlphaNumeric=/[a-zA-Z_0-9.:#]/;exports.parseDOT=parseDOT,exports.DOTToGraph=DOTToGraph},function(module,exports){function parseGephi(gephiJSON,options){var edges=[],nodes=[];this.options={edges:{inheritColor:!0},nodes:{allowedToMove:!1,parseColor:!1}},void 0!==options&&(this.options.nodes.allowedToMove=options.allowedToMove|!1,this.options.nodes.parseColor=options.parseColor|!1,this.options.edges.inheritColor=options.inheritColor|!0);for(var gEdges=gephiJSON.edges,gNodes=gephiJSON.nodes,i=0;i<gEdges.length;i++){var edge={},gEdge=gEdges[i];edge.id=gEdge.id,edge.from=gEdge.source,edge.to=gEdge.target,edge.attributes=gEdge.attributes,edge.color=gEdge.color,edge.inheritColor=void 0!==edge.color?!1:this.options.inheritColor,edges.push(edge)}for(var i=0;i<gNodes.length;i++){var node={},gNode=gNodes[i];node.id=gNode.id,node.attributes=gNode.attributes,node.x=gNode.x,node.y=gNode.y,node.label=gNode.label,node.color=1==this.options.nodes.parseColor?gNode.color:void 0!==gNode.color?{background:gNode.color,border:gNode.color}:void 0,node.radius=gNode.size,node.allowedToMoveX=this.options.nodes.allowedToMove,node.allowedToMoveY=this.options.nodes.allowedToMove,nodes.push(node)}return{nodes:nodes,edges:edges}}exports.parseGephi=parseGephi},function(module,exports,__webpack_require__){module.exports="undefined"!=typeof window&&window.moment||__webpack_require__(58)},function(module,exports,__webpack_require__){module.exports="undefined"!=typeof window?window.Hammer||__webpack_require__(57):function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(module,exports,__webpack_require__){function Core(){}var Emitter=__webpack_require__(56),Hammer=__webpack_require__(45),util=__webpack_require__(1),Activator=(__webpack_require__(3),__webpack_require__(4),__webpack_require__(17),__webpack_require__(32),__webpack_require__(53)),DateUtil=__webpack_require__(15);Emitter(Core.prototype),Core.prototype._create=function(container){this.dom={},this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis timeline root",this.dom.background.className="vispanel background",this.dom.backgroundVertical.className="vispanel background vertical",this.dom.backgroundHorizontal.className="vispanel background horizontal",this.dom.centerContainer.className="vispanel center",this.dom.leftContainer.className="vispanel left",this.dom.rightContainer.className="vispanel right",this.dom.top.className="vispanel top",this.dom.bottom.className="vispanel bottom",this.dom.left.className="content",this.dom.center.className="content",this.dom.right.className="content",this.dom.shadowTop.className="shadow top",this.dom.shadowBottom.className="shadow bottom",this.dom.shadowTopLeft.className="shadow top",this.dom.shadowBottomLeft.className="shadow bottom",this.dom.shadowTopRight.className="shadow top",this.dom.shadowBottomRight.className="shadow bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",this._redraw.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pinch",this._onPinch.bind(this)),this.on("dragstart",this._onDragStart.bind(this)),this.on("drag",this._onDrag.bind(this));var me=this;this.on("change",function(properties){properties&&1==properties.queue?me._redrawTimer||(me._redrawTimer=setTimeout(function(){me._redrawTimer=null,me._redraw()},0)):me._redraw()}),this.hammer=Hammer(this.dom.root,{preventDefault:!0}),this.listeners={};var events=["touch","pinch","tap","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];if(events.forEach(function(event){var listener=function(){var args=[event].concat(Array.prototype.slice.call(arguments,0));me.isActive()&&me.emit.apply(me,args)};me.hammer.on(event,listener),me.listeners[event]=listener}),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.touch={},this.redrawCount=0,!container)throw new Error("No container provided");container.appendChild(this.dom.root)},Core.prototype.setOptions=function(options){if(options){var fields=["width","height","minHeight","maxHeight","autoResize","start","end","orientation","clickToUse","dataAttributes","hiddenDates"];util.selectiveExtend(fields,this.options,options),"hiddenDates"in this.options&&DateUtil.convertHiddenOptions(this.body,this.options.hiddenDates),"clickToUse"in options&&(options.clickToUse?this.activator||(this.activator=new Activator(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(this.components.forEach(function(component){component.setOptions(options)}),options&&options.order)throw new Error("Option order is deprecated. There is no replacement for this feature.");this._redraw()},Core.prototype.isActive=function(){return!this.activator||this.activator.active},Core.prototype.destroy=function(){this.clear(),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var event in this.listeners)this.listeners.hasOwnProperty(event)&&delete this.listeners[event];this.listeners=null,this.hammer=null,this.components.forEach(function(component){component.destroy()}),this.body=null},Core.prototype.setCustomTime=function(time){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");this.customTime.setCustomTime(time)},Core.prototype.getCustomTime=function(){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");return this.customTime.getCustomTime()},Core.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},Core.prototype.clear=function(what){(!what||what.items)&&this.setItems(null),(!what||what.groups)&&this.setGroups(null),(!what||what.options)&&(this.components.forEach(function(component){component.setOptions(component.defaultOptions)}),this.setOptions(this.defaultOptions))},Core.prototype.fit=function(options){var range=this._getDataRange();if(null!==range.start||null!==range.end){var animate=options&&void 0!==options.animate?options.animate:!0;this.range.setRange(range.start,range.end,animate)}},Core.prototype._getDataRange=function(){var dataRange=this.getItemRange(),start=dataRange.min,end=dataRange.max;if(null!=start&&null!=end){var interval=end.valueOf()-start.valueOf();0>=interval&&(interval=864e5),start=new Date(start.valueOf()-.05*interval),end=new Date(end.valueOf()+.05*interval)}return{start:start,end:end}},Core.prototype.setWindow=function(start,end,options){var animate;if(1==arguments.length){var range=arguments[0];animate=void 0!==range.animate?range.animate:!0,this.range.setRange(range.start,range.end,animate)}else animate=options&&void 0!==options.animate?options.animate:!0,this.range.setRange(start,end,animate)},Core.prototype.moveTo=function(time,options){var interval=this.range.end-this.range.start,t=util.convert(time,"Date").valueOf(),start=t-interval/2,end=t+interval/2,animate=options&&void 0!==options.animate?options.animate:!0;this.range.setRange(start,end,animate)},Core.prototype.getWindow=function(){var range=this.range.getRange();return{start:new Date(range.start),end:new Date(range.end)}},Core.prototype.redraw=function(){this._redraw()},Core.prototype._redraw=function(){var resized=!1,options=this.options,props=this.props,dom=this.dom;if(dom){DateUtil.updateHiddenDates(this.body,this.options.hiddenDates),"top"==options.orientation?(util.addClassName(dom.root,"top"),util.removeClassName(dom.root,"bottom")):(util.removeClassName(dom.root,"top"),util.addClassName(dom.root,"bottom")),dom.root.style.maxHeight=util.option.asSize(options.maxHeight,""),dom.root.style.minHeight=util.option.asSize(options.minHeight,""),dom.root.style.width=util.option.asSize(options.width,""),props.border.left=(dom.centerContainer.offsetWidth-dom.centerContainer.clientWidth)/2,props.border.right=props.border.left,props.border.top=(dom.centerContainer.offsetHeight-dom.centerContainer.clientHeight)/2,props.border.bottom=props.border.top;var borderRootHeight=dom.root.offsetHeight-dom.root.clientHeight,borderRootWidth=dom.root.offsetWidth-dom.root.clientWidth;0===dom.centerContainer.clientHeight&&(props.border.left=props.border.top,props.border.right=props.border.left),0===dom.root.clientHeight&&(borderRootWidth=borderRootHeight),props.center.height=dom.center.offsetHeight,props.left.height=dom.left.offsetHeight,props.right.height=dom.right.offsetHeight,props.top.height=dom.top.clientHeight||-props.border.top,props.bottom.height=dom.bottom.clientHeight||-props.border.bottom;var contentHeight=Math.max(props.left.height,props.center.height,props.right.height),autoHeight=props.top.height+contentHeight+props.bottom.height+borderRootHeight+props.border.top+props.border.bottom;dom.root.style.height=util.option.asSize(options.height,autoHeight+"px"),props.root.height=dom.root.offsetHeight,props.background.height=props.root.height-borderRootHeight;var containerHeight=props.root.height-props.top.height-props.bottom.height-borderRootHeight;props.centerContainer.height=containerHeight,props.leftContainer.height=containerHeight,props.rightContainer.height=props.leftContainer.height,props.root.width=dom.root.offsetWidth,props.background.width=props.root.width-borderRootWidth,props.left.width=dom.leftContainer.clientWidth||-props.border.left,props.leftContainer.width=props.left.width,props.right.width=dom.rightContainer.clientWidth||-props.border.right,props.rightContainer.width=props.right.width;var centerWidth=props.root.width-props.left.width-props.right.width-borderRootWidth;props.center.width=centerWidth,props.centerContainer.width=centerWidth,props.top.width=centerWidth,props.bottom.width=centerWidth,dom.background.style.height=props.background.height+"px",dom.backgroundVertical.style.height=props.background.height+"px",dom.backgroundHorizontal.style.height=props.centerContainer.height+"px",dom.centerContainer.style.height=props.centerContainer.height+"px",dom.leftContainer.style.height=props.leftContainer.height+"px",dom.rightContainer.style.height=props.rightContainer.height+"px",dom.background.style.width=props.background.width+"px",dom.backgroundVertical.style.width=props.centerContainer.width+"px",dom.backgroundHorizontal.style.width=props.background.width+"px",dom.centerContainer.style.width=props.center.width+"px",dom.top.style.width=props.top.width+"px",dom.bottom.style.width=props.bottom.width+"px",dom.background.style.left="0",dom.background.style.top="0",dom.backgroundVertical.style.left=props.left.width+props.border.left+"px",dom.backgroundVertical.style.top="0",dom.backgroundHorizontal.style.left="0",dom.backgroundHorizontal.style.top=props.top.height+"px",dom.centerContainer.style.left=props.left.width+"px",dom.centerContainer.style.top=props.top.height+"px",dom.leftContainer.style.left="0",dom.leftContainer.style.top=props.top.height+"px",dom.rightContainer.style.left=props.left.width+props.center.width+"px",dom.rightContainer.style.top=props.top.height+"px",dom.top.style.left=props.left.width+"px",dom.top.style.top="0",dom.bottom.style.left=props.left.width+"px",dom.bottom.style.top=props.top.height+props.centerContainer.height+"px",this._updateScrollTop();
var offset=this.props.scrollTop;"bottom"==options.orientation&&(offset+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),dom.center.style.left="0",dom.center.style.top=offset+"px",dom.left.style.left="0",dom.left.style.top=offset+"px",dom.right.style.left="0",dom.right.style.top=offset+"px";var visibilityTop=0==this.props.scrollTop?"hidden":"",visibilityBottom=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";if(dom.shadowTop.style.visibility=visibilityTop,dom.shadowBottom.style.visibility=visibilityBottom,dom.shadowTopLeft.style.visibility=visibilityTop,dom.shadowBottomLeft.style.visibility=visibilityBottom,dom.shadowTopRight.style.visibility=visibilityTop,dom.shadowBottomRight.style.visibility=visibilityBottom,this.components.forEach(function(component){resized=component.redraw()||resized}),resized){var MAX_REDRAWS=3;this.redrawCount<MAX_REDRAWS?(this.redrawCount++,this._redraw()):console.log("WARNING: infinite loop in redraw?"),this.redrawCount=0}this.emit("finishedRedraw")}},Core.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},Core.prototype.setCurrentTime=function(time){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(time)},Core.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},Core.prototype._toTime=function(x){return DateUtil.toTime(this,x,this.props.center.width)},Core.prototype._toGlobalTime=function(x){return DateUtil.toTime(this,x,this.props.root.width)},Core.prototype._toScreen=function(time){return DateUtil.toScreen(this,time,this.props.center.width)},Core.prototype._toGlobalScreen=function(time){return DateUtil.toScreen(this,time,this.props.root.width)},Core.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},Core.prototype._startAutoResize=function(){var me=this;this._stopAutoResize(),this._onResize=function(){return 1!=me.options.autoResize?void me._stopAutoResize():void(me.dom.root&&(me.dom.root.offsetWidth!=me.props.lastWidth||me.dom.root.offsetHeight!=me.props.lastHeight)&&(me.props.lastWidth=me.dom.root.offsetWidth,me.props.lastHeight=me.dom.root.offsetHeight,me.emit("change")))},util.addEventListener(window,"resize",this._onResize),this.watchTimer=setInterval(this._onResize,1e3)},Core.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),util.removeEventListener(window,"resize",this._onResize),this._onResize=null},Core.prototype._onTouch=function(){this.touch.allowDragging=!0},Core.prototype._onPinch=function(){this.touch.allowDragging=!1},Core.prototype._onDragStart=function(){this.touch.initialScrollTop=this.props.scrollTop},Core.prototype._onDrag=function(event){if(this.touch.allowDragging){var delta=event.gesture.deltaY,oldScrollTop=this._getScrollTop(),newScrollTop=this._setScrollTop(this.touch.initialScrollTop+delta);newScrollTop!=oldScrollTop&&(this._redraw(),this.emit("verticalDrag"))}},Core.prototype._setScrollTop=function(scrollTop){return this.props.scrollTop=scrollTop,this._updateScrollTop(),this.props.scrollTop},Core.prototype._updateScrollTop=function(){var scrollTopMin=Math.min(this.props.centerContainer.height-this.props.center.height,0);return scrollTopMin!=this.props.scrollTopMin&&("bottom"==this.options.orientation&&(this.props.scrollTop+=scrollTopMin-this.props.scrollTopMin),this.props.scrollTopMin=scrollTopMin),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<scrollTopMin&&(this.props.scrollTop=scrollTopMin),this.props.scrollTop},Core.prototype._getScrollTop=function(){return this.props.scrollTop},module.exports=Core},function(module,exports,__webpack_require__){var Hammer=__webpack_require__(45);exports.fakeGesture=function(element,event){var eventType=null,touches=Hammer.event.getTouchList(event,eventType),gesture=Hammer.event.collectEventData(this,eventType,touches,event);return isNaN(gesture.center.pageX)&&(gesture.center.pageX=event.pageX),isNaN(gesture.center.pageY)&&(gesture.center.pageY=event.pageY),gesture}},function(module,exports){exports.en={current:"current",time:"time"},exports.en_EN=exports.en,exports.en_US=exports.en,exports.nl={custom:"aangepaste",time:"tijd"},exports.nl_NL=exports.nl,exports.nl_BE=exports.nl},function(module,exports,__webpack_require__){function Line(groupId,options){this.groupId=groupId,this.options=options}var DOMutil=__webpack_require__(2),Points=__webpack_require__(51);Line.prototype.getYRange=function(groupData){for(var yMin=groupData[0].y,yMax=groupData[0].y,j=0;j<groupData.length;j++)yMin=yMin>groupData[j].y?groupData[j].y:yMin,yMax=yMax<groupData[j].y?groupData[j].y:yMax;return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation}},Line.prototype.draw=function(dataset,group,framework){if(null!=dataset&&dataset.length>0){var path,d,svgHeight=Number(framework.svg.style.height.replace("px",""));if(path=DOMutil.getSVGElement("path",framework.svgElements,framework.svg),path.setAttributeNS(null,"class",group.className),void 0!==group.style&&path.setAttributeNS(null,"style",group.style),d=1==group.options.catmullRom.enabled?Line._catmullRom(dataset,group):Line._linear(dataset),1==group.options.shaded.enabled){var dFill,fillPath=DOMutil.getSVGElement("path",framework.svgElements,framework.svg);dFill="top"==group.options.shaded.orientation?"M"+dataset[0].x+",0 "+d+"L"+dataset[dataset.length-1].x+",0":"M"+dataset[0].x+","+svgHeight+" "+d+"L"+dataset[dataset.length-1].x+","+svgHeight,fillPath.setAttributeNS(null,"class",group.className+" fill"),void 0!==group.options.shaded.style&&fillPath.setAttributeNS(null,"style",group.options.shaded.style),fillPath.setAttributeNS(null,"d",dFill)}path.setAttributeNS(null,"d","M"+d),1==group.options.drawPoints.enabled&&Points.draw(dataset,group,framework)}},Line._catmullRomUniform=function(data){for(var p0,p1,p2,p3,bp1,bp2,d=Math.round(data[0].x)+","+Math.round(data[0].y)+" ",normalization=1/6,length=data.length,i=0;length-1>i;i++)p0=0==i?data[0]:data[i-1],p1=data[i],p2=data[i+1],p3=length>i+2?data[i+2]:p2,bp1={x:(-p0.x+6*p1.x+p2.x)*normalization,y:(-p0.y+6*p1.y+p2.y)*normalization},bp2={x:(p1.x+6*p2.x-p3.x)*normalization,y:(p1.y+6*p2.y-p3.y)*normalization},d+="C"+bp1.x+","+bp1.y+" "+bp2.x+","+bp2.y+" "+p2.x+","+p2.y+" ";return d},Line._catmullRom=function(data,group){var alpha=group.options.catmullRom.alpha;if(0==alpha||void 0===alpha)return this._catmullRomUniform(data);for(var p0,p1,p2,p3,bp1,bp2,d1,d2,d3,A,B,N,M,d3powA,d2powA,d3pow2A,d2pow2A,d1pow2A,d1powA,d=Math.round(data[0].x)+","+Math.round(data[0].y)+" ",length=data.length,i=0;length-1>i;i++)p0=0==i?data[0]:data[i-1],p1=data[i],p2=data[i+1],p3=length>i+2?data[i+2]:p2,d1=Math.sqrt(Math.pow(p0.x-p1.x,2)+Math.pow(p0.y-p1.y,2)),d2=Math.sqrt(Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2)),d3=Math.sqrt(Math.pow(p2.x-p3.x,2)+Math.pow(p2.y-p3.y,2)),d3powA=Math.pow(d3,alpha),d3pow2A=Math.pow(d3,2*alpha),d2powA=Math.pow(d2,alpha),d2pow2A=Math.pow(d2,2*alpha),d1powA=Math.pow(d1,alpha),d1pow2A=Math.pow(d1,2*alpha),A=2*d1pow2A+3*d1powA*d2powA+d2pow2A,B=2*d3pow2A+3*d3powA*d2powA+d2pow2A,N=3*d1powA*(d1powA+d2powA),N>0&&(N=1/N),M=3*d3powA*(d3powA+d2powA),M>0&&(M=1/M),bp1={x:(-d2pow2A*p0.x+A*p1.x+d1pow2A*p2.x)*N,y:(-d2pow2A*p0.y+A*p1.y+d1pow2A*p2.y)*N},bp2={x:(d3pow2A*p1.x+B*p2.x-d2pow2A*p3.x)*M,y:(d3pow2A*p1.y+B*p2.y-d2pow2A*p3.y)*M},0==bp1.x&&0==bp1.y&&(bp1=p1),0==bp2.x&&0==bp2.y&&(bp2=p2),d+="C"+bp1.x+","+bp1.y+" "+bp2.x+","+bp2.y+" "+p2.x+","+p2.y+" ";return d},Line._linear=function(data){for(var d="",i=0;i<data.length;i++)d+=0==i?data[i].x+","+data[i].y:" "+data[i].x+","+data[i].y;return d},module.exports=Line},function(module,exports,__webpack_require__){function Bargraph(groupId,options){this.groupId=groupId,this.options=options}{var DOMutil=__webpack_require__(2);__webpack_require__(51)}Bargraph.prototype.getYRange=function(groupData){if("stack"!=this.options.barChart.handleOverlap){for(var yMin=groupData[0].y,yMax=groupData[0].y,j=0;j<groupData.length;j++)yMin=yMin>groupData[j].y?groupData[j].y:yMin,yMax=yMax<groupData[j].y?groupData[j].y:yMax;return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation}}for(var barCombinedData=[],j=0;j<groupData.length;j++)barCombinedData.push({x:groupData[j].x,y:groupData[j].y,groupId:this.groupId});return barCombinedData},Bargraph.draw=function(groupIds,processedGroupData,framework){var coreDistance,key,drawData,group,i,j,combinedData=[],intersections={},barPoints=0;for(i=0;i<groupIds.length;i++)if(group=framework.groups[groupIds[i]],"bar"==group.options.style&&1==group.visible&&(void 0===framework.options.groups.visibility[groupIds[i]]||1==framework.options.groups.visibility[groupIds[i]]))for(j=0;j<processedGroupData[groupIds[i]].length;j++)combinedData.push({x:processedGroupData[groupIds[i]][j].x,y:processedGroupData[groupIds[i]][j].y,groupId:groupIds[i]}),barPoints+=1;if(0!=barPoints)for(combinedData.sort(function(a,b){return a.x==b.x?a.groupId-b.groupId:a.x-b.x}),Bargraph._getDataIntersections(intersections,combinedData),i=0;i<combinedData.length;i++){group=framework.groups[combinedData[i].groupId];var minWidth=.1*group.options.barChart.width;key=combinedData[i].x;var heightOffset=0;if(void 0===intersections[key])i+1<combinedData.length&&(coreDistance=Math.abs(combinedData[i+1].x-key)),i>0&&(coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].x-key))),drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth);else{var nextKey=i+(intersections[key].amount-intersections[key].resolved),prevKey=i-(intersections[key].resolved+1);nextKey<combinedData.length&&(coreDistance=Math.abs(combinedData[nextKey].x-key)),prevKey>0&&(coreDistance=Math.min(coreDistance,Math.abs(combinedData[prevKey].x-key))),drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth),intersections[key].resolved+=1,"stack"==group.options.barChart.handleOverlap?(heightOffset=intersections[key].accumulated,intersections[key].accumulated+=group.zeroPosition-combinedData[i].y):"sideBySide"==group.options.barChart.handleOverlap&&(drawData.width=drawData.width/intersections[key].amount,drawData.offset+=intersections[key].resolved*drawData.width-.5*drawData.width*(intersections[key].amount+1),"left"==group.options.barChart.align?drawData.offset-=.5*drawData.width:"right"==group.options.barChart.align&&(drawData.offset+=.5*drawData.width))}DOMutil.drawBar(combinedData[i].x+drawData.offset,combinedData[i].y-heightOffset,drawData.width,group.zeroPosition-combinedData[i].y,group.className+" bar",framework.svgElements,framework.svg),1==group.options.drawPoints.enabled&&DOMutil.drawPoint(combinedData[i].x+drawData.offset,combinedData[i].y,group,framework.svgElements,framework.svg)}},Bargraph._getDataIntersections=function(intersections,combinedData){for(var coreDistance,i=0;i<combinedData.length;i++)i+1<combinedData.length&&(coreDistance=Math.abs(combinedData[i+1].x-combinedData[i].x)),i>0&&(coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].x-combinedData[i].x))),0==coreDistance&&(void 0===intersections[combinedData[i].x]&&(intersections[combinedData[i].x]={amount:0,resolved:0,accumulated:0}),intersections[combinedData[i].x].amount+=1)},Bargraph._getSafeDrawData=function(coreDistance,group,minWidth){var width,offset;return coreDistance<group.options.barChart.width&&coreDistance>0?(width=minWidth>coreDistance?minWidth:coreDistance,offset=0,"left"==group.options.barChart.align?offset-=.5*coreDistance:"right"==group.options.barChart.align&&(offset+=.5*coreDistance)):(width=group.options.barChart.width,offset=0,"left"==group.options.barChart.align?offset-=.5*group.options.barChart.width:"right"==group.options.barChart.align&&(offset+=.5*group.options.barChart.width)),{width:width,offset:offset}},Bargraph.getStackedBarYRange=function(barCombinedData,groupRanges,groupIds,groupLabel,orientation){if(barCombinedData.length>0){barCombinedData.sort(function(a,b){return a.x==b.x?a.groupId-b.groupId:a.x-b.x});var intersections={};Bargraph._getDataIntersections(intersections,barCombinedData),groupRanges[groupLabel]=Bargraph._getStackedBarYRange(intersections,barCombinedData),groupRanges[groupLabel].yAxisOrientation=orientation,groupIds.push(groupLabel)}},Bargraph._getStackedBarYRange=function(intersections,combinedData){for(var key,yMin=combinedData[0].y,yMax=combinedData[0].y,i=0;i<combinedData.length;i++)key=combinedData[i].x,void 0===intersections[key]?(yMin=yMin>combinedData[i].y?combinedData[i].y:yMin,yMax=yMax<combinedData[i].y?combinedData[i].y:yMax):intersections[key].accumulated+=combinedData[i].y;for(var xpos in intersections)intersections.hasOwnProperty(xpos)&&(yMin=yMin>intersections[xpos].accumulated?intersections[xpos].accumulated:yMin,yMax=yMax<intersections[xpos].accumulated?intersections[xpos].accumulated:yMax);return{min:yMin,max:yMax}},module.exports=Bargraph},function(module,exports,__webpack_require__){function Points(groupId,options){this.groupId=groupId,this.options=options}var DOMutil=__webpack_require__(2);Points.prototype.getYRange=function(groupData){for(var yMin=groupData[0].y,yMax=groupData[0].y,j=0;j<groupData.length;j++)yMin=yMin>groupData[j].y?groupData[j].y:yMin,yMax=yMax<groupData[j].y?groupData[j].y:yMax;return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation}},Points.prototype.draw=function(dataset,group,framework,offset){Points.draw(dataset,group,framework,offset)},Points.draw=function(dataset,group,framework,offset){void 0===offset&&(offset=0);for(var i=0;i<dataset.length;i++)DOMutil.drawPoint(dataset[i].x+offset,dataset[i].y,group,framework.svgElements,framework.svg)},module.exports=Points},function(module,exports,__webpack_require__){var PhysicsMixin=__webpack_require__(60),ClusterMixin=__webpack_require__(61),SectorsMixin=__webpack_require__(62),SelectionMixin=__webpack_require__(63),ManipulationMixin=__webpack_require__(64),NavigationMixin=__webpack_require__(65),HierarchicalLayoutMixin=__webpack_require__(66);exports._loadMixin=function(sourceVariable){for(var mixinFunction in sourceVariable)sourceVariable.hasOwnProperty(mixinFunction)&&(this[mixinFunction]=sourceVariable[mixinFunction])},exports._clearMixin=function(sourceVariable){for(var mixinFunction in sourceVariable)sourceVariable.hasOwnProperty(mixinFunction)&&(this[mixinFunction]=void 0)},exports._loadPhysicsSystem=function(){this._loadMixin(PhysicsMixin),this._loadSelectedForceSolver(),1==this.constants.configurePhysics?this._loadPhysicsConfiguration():this._cleanupPhysicsConfiguration()},exports._loadClusterSystem=function(){this.clusterSession=0,this.hubThreshold=5,this._loadMixin(ClusterMixin)},exports._loadSectorSystem=function(){this.sectors={},this.activeSector=["default"],this.sectors.active={},this.sectors.active["default"]={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:void 0},this.sectors.frozen={},this.sectors.support={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:void 0},this.nodeIndices=this.sectors.active["default"].nodeIndices,this._loadMixin(SectorsMixin)},exports._loadSelectionSystem=function(){this.selectionObj={nodes:{},edges:{}},this._loadMixin(SelectionMixin)},exports._loadManipulationSystem=function(){this.blockConnectingEdgeSelection=!1,this.forceAppendSelection=!1,1==this.constants.dataManipulation.enabled?(void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="network-manipulationDiv",this.manipulationDiv.style.display=1==this.editMode?"block":"none",this.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="network-manipulation-editMode",this.editModeDiv.style.display=1==this.editMode?"none":"block",this.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="network-manipulation-closeDiv",this.closeDiv.style.display=this.manipulationDiv.style.display,this.frame.appendChild(this.closeDiv)),this._loadMixin(ManipulationMixin),this._createManipulatorBar()):void 0!==this.manipulationDiv&&(this._createManipulatorBar(),this.frame.removeChild(this.manipulationDiv),this.frame.removeChild(this.editModeDiv),this.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._clearMixin(ManipulationMixin))},exports._loadNavigationControls=function(){this._loadMixin(NavigationMixin),this._cleanNavigation(),1==this.constants.navigation.enabled&&this._loadNavigationElements()},exports._loadHierarchySystem=function(){this._loadMixin(HierarchicalLayoutMixin)}},function(module,exports,__webpack_require__){function Activator(container){this.active=!1,this.dom={container:container},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Hammer(this.dom.overlay,{prevent_default:!1}),this.hammer.on("tap",this._onTapOverlay.bind(this));var me=this,events=["touch","pinch","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];events.forEach(function(event){me.hammer.on(event,function(event){event.stopPropagation()})}),this.windowHammer=Hammer(window,{prevent_default:!1}),this.windowHammer.on("tap",function(event){_hasParent(event.target,container)||me.deactivate()}),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=keycharm(),this.escListener=this.deactivate.bind(this)}function _hasParent(element,parent){for(;element;){if(element===parent)return!0;element=element.parentNode}return!1}var keycharm=__webpack_require__(59),Emitter=__webpack_require__(56),Hammer=__webpack_require__(45),util=__webpack_require__(1);Emitter(Activator.prototype),Activator.current=null,Activator.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.hammer=null,this.windowHammer=null},Activator.prototype.activate=function(){Activator.current&&Activator.current.deactivate(),Activator.current=this,this.active=!0,this.dom.overlay.style.display="none",util.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},Activator.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",util.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Activator.prototype._onTapOverlay=function(event){this.activate(),event.stopPropagation()},module.exports=Activator},function(module,exports){exports.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted."},exports.en_EN=exports.en,exports.en_US=exports.en,exports.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd."},exports.nl_NL=exports.nl,exports.nl_BE=exports.nl},function(){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(x,y,r){this.beginPath(),this.arc(x,y,r,0,2*Math.PI,!1)},CanvasRenderingContext2D.prototype.square=function(x,y,r){this.beginPath(),this.rect(x-r,y-r,2*r,2*r)},CanvasRenderingContext2D.prototype.triangle=function(x,y,r){this.beginPath();var s=2*r,s2=s/2,ir=Math.sqrt(3)/6*s,h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y-(h-ir)),this.lineTo(x+s2,y+ir),this.lineTo(x-s2,y+ir),this.lineTo(x,y-(h-ir)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(x,y,r){this.beginPath();var s=2*r,s2=s/2,ir=Math.sqrt(3)/6*s,h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y+(h-ir)),this.lineTo(x+s2,y-ir),this.lineTo(x-s2,y-ir),this.lineTo(x,y+(h-ir)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(x,y,r){this.beginPath();for(var n=0;10>n;n++){var radius=n%2===0?1.3*r:.5*r;this.lineTo(x+radius*Math.sin(2*n*Math.PI/10),y-radius*Math.cos(2*n*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){var r2d=Math.PI/180;0>w-2*r&&(r=w/2),0>h-2*r&&(r=h/2),this.beginPath(),this.moveTo(x+r,y),this.lineTo(x+w-r,y),this.arc(x+w-r,y+r,r,270*r2d,360*r2d,!1),this.lineTo(x+w,y+h-r),this.arc(x+w-r,y+h-r,r,0,90*r2d,!1),this.lineTo(x+r,y+h),this.arc(x+r,y+h-r,r,90*r2d,180*r2d,!1),this.lineTo(x,y+r),this.arc(x+r,y+r,r,180*r2d,270*r2d,!1)},CanvasRenderingContext2D.prototype.ellipse=function(x,y,w,h){var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;this.beginPath(),this.moveTo(x,ym),this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym)},CanvasRenderingContext2D.prototype.database=function(x,y,w,h){var f=1/3,wEllipse=w,hEllipse=h*f,kappa=.5522848,ox=wEllipse/2*kappa,oy=hEllipse/2*kappa,xe=x+wEllipse,ye=y+hEllipse,xm=x+wEllipse/2,ym=y+hEllipse/2,ymb=y+(h-hEllipse/2),yeb=y+h;this.beginPath(),this.moveTo(xe,ym),this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym),this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),this.lineTo(xe,ymb),this.bezierCurveTo(xe,ymb+oy,xm+ox,yeb,xm,yeb),this.bezierCurveTo(xm-ox,yeb,x,ymb+oy,x,ymb),this.lineTo(x,ym)},CanvasRenderingContext2D.prototype.arrow=function(x,y,angle,length){var xt=x-length*Math.cos(angle),yt=y-length*Math.sin(angle),xi=x-.9*length*Math.cos(angle),yi=y-.9*length*Math.sin(angle),xl=xt+length/3*Math.cos(angle+.5*Math.PI),yl=yt+length/3*Math.sin(angle+.5*Math.PI),xr=xt+length/3*Math.cos(angle-.5*Math.PI),yr=yt+length/3*Math.sin(angle-.5*Math.PI);this.beginPath(),this.moveTo(x,y),this.lineTo(xl,yl),this.lineTo(xi,yi),this.lineTo(xr,yr),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(x,y,x2,y2,dashArray){dashArray||(dashArray=[10,5]),0==dashLength&&(dashLength=.001);var dashCount=dashArray.length;this.moveTo(x,y);for(var dx=x2-x,dy=y2-y,slope=dy/dx,distRemaining=Math.sqrt(dx*dx+dy*dy),dashIndex=0,draw=!0;distRemaining>=.1;){var dashLength=dashArray[dashIndex++%dashCount];dashLength>distRemaining&&(dashLength=distRemaining);var xStep=Math.sqrt(dashLength*dashLength/(1+slope*slope));0>dx&&(xStep=-xStep),x+=xStep,y+=slope*xStep,this[draw?"lineTo":"moveTo"](x,y),distRemaining-=dashLength,draw=!draw}})},function(module){function Emitter(obj){return obj?mixin(obj):void 0}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)}var self=this;return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;len>i;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;/*! Hammer.JS - v1.1.3 - 2014-05-20
   * http://eightmedia.github.io/hammer.js
   *
   * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
   * Licensed under the MIT license */
!function(window,undefined){function setup(){Hammer.READY||(Event.determineEventTypes(),Utils.each(Hammer.gestures,function(gesture){Detection.register(gesture)}),Event.onTouch(Hammer.DOCUMENT,EVENT_MOVE,Detection.detect),Event.onTouch(Hammer.DOCUMENT,EVENT_END,Detection.detect),Hammer.READY=!0)}var Hammer=function Hammer(element,options){return new Hammer.Instance(element,options||{})};Hammer.VERSION="1.1.3",Hammer.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Hammer.DOCUMENT=document,Hammer.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,Hammer.HAS_TOUCHEVENTS="ontouchstart"in window,Hammer.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),Hammer.NO_MOUSEEVENTS=Hammer.HAS_TOUCHEVENTS&&Hammer.IS_MOBILE||Hammer.HAS_POINTEREVENTS,Hammer.CALCULATE_INTERVAL=25;var EVENT_TYPES={},DIRECTION_DOWN=Hammer.DIRECTION_DOWN="down",DIRECTION_LEFT=Hammer.DIRECTION_LEFT="left",DIRECTION_UP=Hammer.DIRECTION_UP="up",DIRECTION_RIGHT=Hammer.DIRECTION_RIGHT="right",POINTER_MOUSE=Hammer.POINTER_MOUSE="mouse",POINTER_TOUCH=Hammer.POINTER_TOUCH="touch",POINTER_PEN=Hammer.POINTER_PEN="pen",EVENT_START=Hammer.EVENT_START="start",EVENT_MOVE=Hammer.EVENT_MOVE="move",EVENT_END=Hammer.EVENT_END="end",EVENT_RELEASE=Hammer.EVENT_RELEASE="release",EVENT_TOUCH=Hammer.EVENT_TOUCH="touch";Hammer.READY=!1,Hammer.plugins=Hammer.plugins||{},Hammer.gestures=Hammer.gestures||{};var Utils=Hammer.utils={extend:function(dest,src,merge){for(var key in src)!src.hasOwnProperty(key)||dest[key]!==undefined&&merge||(dest[key]=src[key]);return dest},on:function(element,type,handler){element.addEventListener(type,handler,!1)},off:function(element,type,handler){element.removeEventListener(type,handler,!1)},each:function(obj,iterator,context){var i,len;if("forEach"in obj)obj.forEach(iterator,context);else if(obj.length!==undefined){for(i=0,len=obj.length;len>i;i++)if(iterator.call(context,obj[i],i,obj)===!1)return}else for(i in obj)if(obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)===!1)return},inStr:function(src,find){return src.indexOf(find)>-1},inArray:function(src,find){if(src.indexOf){var index=src.indexOf(find);return-1===index?!1:index}for(var i=0,len=src.length;len>i;i++)if(src[i]===find)return i;return!1},toArray:function(obj){return Array.prototype.slice.call(obj,0)},hasParent:function(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1},getCenter:function(touches){var pageX=[],pageY=[],clientX=[],clientY=[],min=Math.min,max=Math.max;return 1===touches.length?{pageX:touches[0].pageX,pageY:touches[0].pageY,clientX:touches[0].clientX,clientY:touches[0].clientY}:(Utils.each(touches,function(touch){pageX.push(touch.pageX),pageY.push(touch.pageY),clientX.push(touch.clientX),clientY.push(touch.clientY)}),{pageX:(min.apply(Math,pageX)+max.apply(Math,pageX))/2,pageY:(min.apply(Math,pageY)+max.apply(Math,pageY))/2,clientX:(min.apply(Math,clientX)+max.apply(Math,clientX))/2,clientY:(min.apply(Math,clientY)+max.apply(Math,clientY))/2})},getVelocity:function(deltaTime,deltaX,deltaY){return{x:Math.abs(deltaX/deltaTime)||0,y:Math.abs(deltaY/deltaTime)||0}},getAngle:function(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return 180*Math.atan2(y,x)/Math.PI},getDirection:function(touch1,touch2){var x=Math.abs(touch1.clientX-touch2.clientX),y=Math.abs(touch1.clientY-touch2.clientY);return x>=y?touch1.clientX-touch2.clientX>0?DIRECTION_LEFT:DIRECTION_RIGHT:touch1.clientY-touch2.clientY>0?DIRECTION_UP:DIRECTION_DOWN},getDistance:function(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.sqrt(x*x+y*y)},getScale:function(start,end){return start.length>=2&&end.length>=2?this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]):1},getRotation:function(start,end){return start.length>=2&&end.length>=2?this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0]):0},isVertical:function(direction){return direction==DIRECTION_UP||direction==DIRECTION_DOWN},setPrefixedCss:function(element,prop,value,toggle){var prefixes=["","Webkit","Moz","O","ms"];prop=Utils.toCamelCase(prop);for(var i=0;i<prefixes.length;i++){var p=prop;if(prefixes[i]&&(p=prefixes[i]+p.slice(0,1).toUpperCase()+p.slice(1)),p in element.style){element.style[p]=(null==toggle||toggle)&&value||"";break}}},toggleBehavior:function(element,props,toggle){if(props&&element&&element.style){Utils.each(props,function(value,prop){Utils.setPrefixedCss(element,prop,value,toggle)});var falseFn=toggle&&function(){return!1};"none"==props.userSelect&&(element.onselectstart=falseFn),"none"==props.userDrag&&(element.ondragstart=falseFn)}},toCamelCase:function(str){return str.replace(/[_-]([a-z])/g,function(s){return s[1].toUpperCase()})}},Event=Hammer.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(element,type,handler,hook){var types=type.split(" ");Utils.each(types,function(type){Utils.on(element,type,handler),hook&&hook(type)})},off:function(element,type,handler,hook){var types=type.split(" ");Utils.each(types,function(type){Utils.off(element,type,handler),hook&&hook(type)})},onTouch:function(element,eventType,handler){var self=this,onTouchHandler=function(ev){var triggerType,srcType=ev.type.toLowerCase(),isPointer=Hammer.HAS_POINTEREVENTS,isMouse=Utils.inStr(srcType,"mouse");isMouse&&self.preventMouseEvents||(isMouse&&eventType==EVENT_START&&0===ev.button?(self.preventMouseEvents=!1,self.shouldDetect=!0):isPointer&&eventType==EVENT_START?self.shouldDetect=1===ev.buttons||PointerEvent.matchType(POINTER_TOUCH,ev):isMouse||eventType!=EVENT_START||(self.preventMouseEvents=!0,self.shouldDetect=!0),isPointer&&eventType!=EVENT_END&&PointerEvent.updatePointer(eventType,ev),self.shouldDetect&&(triggerType=self.doDetect.call(self,ev,eventType,element,handler)),triggerType==EVENT_END&&(self.preventMouseEvents=!1,self.shouldDetect=!1,PointerEvent.reset()),isPointer&&eventType==EVENT_END&&PointerEvent.updatePointer(eventType,ev))};return this.on(element,EVENT_TYPES[eventType],onTouchHandler),onTouchHandler},doDetect:function(ev,eventType,element,handler){var touchList=this.getTouchList(ev,eventType),touchListLength=touchList.length,triggerType=eventType,triggerChange=touchList.trigger,changedLength=touchListLength;eventType==EVENT_START?triggerChange=EVENT_TOUCH:eventType==EVENT_END&&(triggerChange=EVENT_RELEASE,changedLength=touchList.length-(ev.changedTouches?ev.changedTouches.length:1)),changedLength>0&&this.started&&(triggerType=EVENT_MOVE),this.started=!0;var evData=this.collectEventData(element,triggerType,touchList,ev);return eventType!=EVENT_END&&handler.call(Detection,evData),triggerChange&&(evData.changedLength=changedLength,evData.eventType=triggerChange,handler.call(Detection,evData),evData.eventType=triggerType,delete evData.changedLength),triggerType==EVENT_END&&(handler.call(Detection,evData),this.started=!1),triggerType},determineEventTypes:function(){var types;return types=Hammer.HAS_POINTEREVENTS?window.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:Hammer.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],EVENT_TYPES[EVENT_START]=types[0],EVENT_TYPES[EVENT_MOVE]=types[1],EVENT_TYPES[EVENT_END]=types[2],EVENT_TYPES},getTouchList:function(ev,eventType){if(Hammer.HAS_POINTEREVENTS)return PointerEvent.getTouchList();if(ev.touches){if(eventType==EVENT_MOVE)return ev.touches;var identifiers=[],concat=[].concat(Utils.toArray(ev.touches),Utils.toArray(ev.changedTouches)),touchList=[];return Utils.each(concat,function(touch){Utils.inArray(identifiers,touch.identifier)===!1&&touchList.push(touch),identifiers.push(touch.identifier)}),touchList}return ev.identifier=1,[ev]},collectEventData:function(element,eventType,touches,ev){var pointerType=POINTER_TOUCH;return Utils.inStr(ev.type,"mouse")||PointerEvent.matchType(POINTER_MOUSE,ev)?pointerType=POINTER_MOUSE:PointerEvent.matchType(POINTER_PEN,ev)&&(pointerType=POINTER_PEN),{center:Utils.getCenter(touches),timeStamp:Date.now(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){var srcEvent=this.srcEvent;srcEvent.preventManipulation&&srcEvent.preventManipulation(),srcEvent.preventDefault&&srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return Detection.stopDetect()}}}},PointerEvent=Hammer.PointerEvent={pointers:{},getTouchList:function(){var touchlist=[];return Utils.each(this.pointers,function(pointer){touchlist.push(pointer)}),touchlist},updatePointer:function(eventType,pointerEvent){eventType==EVENT_END||eventType!=EVENT_END&&1!==pointerEvent.buttons?delete this.pointers[pointerEvent.pointerId]:(pointerEvent.identifier=pointerEvent.pointerId,this.pointers[pointerEvent.pointerId]=pointerEvent)},matchType:function(pointerType,ev){if(!ev.pointerType)return!1;var pt=ev.pointerType,types={};return types[POINTER_MOUSE]=pt===(ev.MSPOINTER_TYPE_MOUSE||POINTER_MOUSE),types[POINTER_TOUCH]=pt===(ev.MSPOINTER_TYPE_TOUCH||POINTER_TOUCH),types[POINTER_PEN]=pt===(ev.MSPOINTER_TYPE_PEN||POINTER_PEN),types[pointerType]},reset:function(){this.pointers={}}},Detection=Hammer.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(inst,eventData){this.current||(this.stopped=!1,this.current={inst:inst,startEvent:Utils.extend({},eventData),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(eventData))},detect:function(eventData){if(this.current&&!this.stopped){eventData=this.extendEventData(eventData);var inst=this.current.inst,instOptions=inst.options;return Utils.each(this.gestures,function(gesture){!this.stopped&&inst.enabled&&instOptions[gesture.name]&&gesture.handler.call(gesture,eventData,inst)},this),this.current&&(this.current.lastEvent=eventData),eventData.eventType==EVENT_END&&this.stopDetect(),eventData}},stopDetect:function(){this.previous=Utils.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(ev,center,deltaTime,deltaX,deltaY){var cur=this.current,recalc=!1,calcEv=cur.lastCalcEvent,calcData=cur.lastCalcData;calcEv&&ev.timeStamp-calcEv.timeStamp>Hammer.CALCULATE_INTERVAL&&(center=calcEv.center,deltaTime=ev.timeStamp-calcEv.timeStamp,deltaX=ev.center.clientX-calcEv.center.clientX,deltaY=ev.center.clientY-calcEv.center.clientY,recalc=!0),(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE)&&(cur.futureCalcEvent=ev),(!cur.lastCalcEvent||recalc)&&(calcData.velocity=Utils.getVelocity(deltaTime,deltaX,deltaY),calcData.angle=Utils.getAngle(center,ev.center),calcData.direction=Utils.getDirection(center,ev.center),cur.lastCalcEvent=cur.futureCalcEvent||ev,cur.futureCalcEvent=ev),ev.velocityX=calcData.velocity.x,ev.velocityY=calcData.velocity.y,ev.interimAngle=calcData.angle,ev.interimDirection=calcData.direction},extendEventData:function(ev){var cur=this.current,startEv=cur.startEvent,lastEv=cur.lastEvent||startEv;(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE)&&(startEv.touches=[],Utils.each(ev.touches,function(touch){startEv.touches.push({clientX:touch.clientX,clientY:touch.clientY})}));var deltaTime=ev.timeStamp-startEv.timeStamp,deltaX=ev.center.clientX-startEv.center.clientX,deltaY=ev.center.clientY-startEv.center.clientY;return this.getCalculatedData(ev,lastEv.center,deltaTime,deltaX,deltaY),Utils.extend(ev,{startEvent:startEv,deltaTime:deltaTime,deltaX:deltaX,deltaY:deltaY,distance:Utils.getDistance(startEv.center,ev.center),angle:Utils.getAngle(startEv.center,ev.center),direction:Utils.getDirection(startEv.center,ev.center),scale:Utils.getScale(startEv.touches,ev.touches),rotation:Utils.getRotation(startEv.touches,ev.touches)}),ev},register:function(gesture){var options=gesture.defaults||{};return options[gesture.name]===undefined&&(options[gesture.name]=!0),Utils.extend(Hammer.defaults,options,!0),gesture.index=gesture.index||1e3,this.gestures.push(gesture),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}};Hammer.Instance=function(element,options){var self=this;setup(),this.element=element,this.enabled=!0,Utils.each(options,function(value,name){delete options[name],options[Utils.toCamelCase(name)]=value}),this.options=Utils.extend(Utils.extend({},Hammer.defaults),options||{}),this.options.behavior&&Utils.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=Event.onTouch(element,EVENT_START,function(ev){self.enabled&&ev.eventType==EVENT_START?Detection.startDetect(self,ev):ev.eventType==EVENT_TOUCH&&Detection.detect(ev)}),this.eventHandlers=[]},Hammer.Instance.prototype={on:function(gestures,handler){var self=this;return Event.on(self.element,gestures,handler,function(type){self.eventHandlers.push({gesture:type,handler:handler})}),self},off:function(gestures,handler){var self=this;return Event.off(self.element,gestures,handler,function(type){var index=Utils.inArray({gesture:type,handler:handler});index!==!1&&self.eventHandlers.splice(index,1)}),self},trigger:function(gesture,eventData){eventData||(eventData={});var event=Hammer.DOCUMENT.createEvent("Event");event.initEvent(gesture,!0,!0),event.gesture=eventData;var element=this.element;return Utils.hasParent(eventData.target,element)&&(element=eventData.target),element.dispatchEvent(event),this},enable:function(state){return this.enabled=state,this},dispose:function(){var i,eh;for(Utils.toggleBehavior(this.element,this.options.behavior,!1),i=-1;eh=this.eventHandlers[++i];)Utils.off(this.element,eh.gesture,eh.handler);return this.eventHandlers=[],Event.off(this.element,EVENT_TYPES[EVENT_START],this.eventStartHandler),null}},function(name){function dragGesture(ev,inst){var cur=Detection.current;if(!(inst.options.dragMaxTouches>0&&ev.touches.length>inst.options.dragMaxTouches))switch(ev.eventType){case EVENT_START:triggered=!1;break;case EVENT_MOVE:if(ev.distance<inst.options.dragMinDistance&&cur.name!=name)return;var startCenter=cur.startEvent.center;if(cur.name!=name&&(cur.name=name,inst.options.dragDistanceCorrection&&ev.distance>0)){var factor=Math.abs(inst.options.dragMinDistance/ev.distance);startCenter.pageX+=ev.deltaX*factor,startCenter.pageY+=ev.deltaY*factor,startCenter.clientX+=ev.deltaX*factor,startCenter.clientY+=ev.deltaY*factor,ev=Detection.extendEventData(ev)}(cur.lastEvent.dragLockToAxis||inst.options.dragLockToAxis&&inst.options.dragLockMinDistance<=ev.distance)&&(ev.dragLockToAxis=!0);var lastDirection=cur.lastEvent.direction;ev.dragLockToAxis&&lastDirection!==ev.direction&&(ev.direction=Utils.isVertical(lastDirection)?ev.deltaY<0?DIRECTION_UP:DIRECTION_DOWN:ev.deltaX<0?DIRECTION_LEFT:DIRECTION_RIGHT),triggered||(inst.trigger(name+"start",ev),triggered=!0),inst.trigger(name,ev),inst.trigger(name+ev.direction,ev);var isVertical=Utils.isVertical(ev.direction);(inst.options.dragBlockVertical&&isVertical||inst.options.dragBlockHorizontal&&!isVertical)&&ev.preventDefault();break;case EVENT_RELEASE:triggered&&ev.changedLength<=inst.options.dragMaxTouches&&(inst.trigger(name+"end",ev),triggered=!1);break;case EVENT_END:triggered=!1}}var triggered=!1;Hammer.gestures.Drag={name:name,index:50,handler:dragGesture,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),Hammer.gestures.Gesture={name:"gesture",index:1337,handler:function(ev,inst){inst.trigger(this.name,ev)}},function(name){function holdGesture(ev,inst){var options=inst.options,current=Detection.current;switch(ev.eventType){case EVENT_START:clearTimeout(timer),current.name=name,timer=setTimeout(function(){current&&current.name==name&&inst.trigger(name,ev)},options.holdTimeout);break;case EVENT_MOVE:ev.distance>options.holdThreshold&&clearTimeout(timer);break;case EVENT_RELEASE:clearTimeout(timer)}}var timer;Hammer.gestures.Hold={name:name,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:holdGesture}}("hold"),Hammer.gestures.Release={name:"release",index:1/0,handler:function(ev,inst){ev.eventType==EVENT_RELEASE&&inst.trigger(this.name,ev)}},Hammer.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(ev,inst){if(ev.eventType==EVENT_RELEASE){var touches=ev.touches.length,options=inst.options;if(touches<options.swipeMinTouches||touches>options.swipeMaxTouches)return;(ev.velocityX>options.swipeVelocityX||ev.velocityY>options.swipeVelocityY)&&(inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev))}}},function(name){function tapGesture(ev,inst){var sincePrev,didDoubleTap,options=inst.options,current=Detection.current,prev=Detection.previous;switch(ev.eventType){case EVENT_START:hasMoved=!1;break;case EVENT_MOVE:hasMoved=hasMoved||ev.distance>options.tapMaxDistance;break;case EVENT_END:!Utils.inStr(ev.srcEvent.type,"cancel")&&ev.deltaTime<options.tapMaxTime&&!hasMoved&&(sincePrev=prev&&prev.lastEvent&&ev.timeStamp-prev.lastEvent.timeStamp,didDoubleTap=!1,prev&&prev.name==name&&sincePrev&&sincePrev<options.doubleTapInterval&&ev.distance<options.doubleTapDistance&&(inst.trigger("doubletap",ev),didDoubleTap=!0),(!didDoubleTap||options.tapAlways)&&(current.name=name,inst.trigger(current.name,ev)))}}var hasMoved=!1;Hammer.gestures.Tap={name:name,index:100,handler:tapGesture,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),Hammer.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(ev,inst){return inst.options.preventMouse&&ev.pointerType==POINTER_MOUSE?void ev.stopDetect():(inst.options.preventDefault&&ev.preventDefault(),void(ev.eventType==EVENT_TOUCH&&inst.trigger("touch",ev)))}},function(name){function transformGesture(ev,inst){switch(ev.eventType){case EVENT_START:triggered=!1;break;case EVENT_MOVE:if(ev.touches.length<2)return;var scaleThreshold=Math.abs(1-ev.scale),rotationThreshold=Math.abs(ev.rotation);if(scaleThreshold<inst.options.transformMinScale&&rotationThreshold<inst.options.transformMinRotation)return;Detection.current.name=name,triggered||(inst.trigger(name+"start",ev),triggered=!0),inst.trigger(name,ev),rotationThreshold>inst.options.transformMinRotation&&inst.trigger("rotate",ev),scaleThreshold>inst.options.transformMinScale&&(inst.trigger("pinch",ev),inst.trigger("pinch"+(ev.scale<1?"in":"out"),ev));break;case EVENT_RELEASE:triggered&&ev.changedLength<2&&(inst.trigger(name+"end",ev),triggered=!1)}}var triggered=!1;Hammer.gestures.Transform={name:name,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:transformGesture}}("transform"),__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(window)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global,module){//! moment.js
//! version : 2.9.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(undefined){function dfl(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function hasOwnProp(a,b){return hasOwnProperty.call(a,b)}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function printMsg(msg){moment.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(printMsg(msg),firstTime=!1),fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){deprecations[name]||(printMsg(msg),deprecations[name]=!0)}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.localeData().ordinal(func.call(this,a),period)}}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return 0>b-anchor?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&12>hour&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function Locale(){}function Moment(config,skipOverflow){skipOverflow!==!1&&checkOverflow(config),copyConfig(this,config),this._d=new Date(+config._d),updateInProgress===!1&&(updateInProgress=!0,moment.updateOffset(this),updateInProgress=!1)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=moment.localeData(),this._bubble()}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function copyConfig(to,from){var i,prop,val;if("undefined"!=typeof from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),"undefined"!=typeof from._i&&(to._i=from._i),"undefined"!=typeof from._f&&(to._f=from._f),"undefined"!=typeof from._l&&(to._l=from._l),"undefined"!=typeof from._strict&&(to._strict=from._strict),"undefined"!=typeof from._tzm&&(to._tzm=from._tzm),"undefined"!=typeof from._isUTC&&(to._isUTC=from._isUTC),"undefined"!=typeof from._offset&&(to._offset=from._offset),"undefined"!=typeof from._pf&&(to._pf=from._pf),"undefined"!=typeof from._locale&&(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],val=from[prop],"undefined"!=typeof val&&(to[prop]=val);return to}function absRound(number){return 0>number?Math.ceil(number):Math.floor(number)}function leftZeroFill(number,targetLength,forceSign){for(var output=""+Math.abs(number),sign=number>=0;output.length<targetLength;)output="0"+output;return(sign?forceSign?"+":"":"-")+output}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return other=makeAs(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=moment.duration(val,period),addOrSubtractDurationFromMoment(this,dur,direction),this}}function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset?!0:updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&rawSetter(mom,"Date",rawGetter(mom,"Date")+days*isAdding),months&&rawMonthSetter(mom,rawGetter(mom,"Month")+months*isAdding),updateOffset&&moment.updateOffset(mom,days||months)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;len>i;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else{if(0!==field.indexOf("month"))return;count=12,setter="month"}moment[field]=function(format,index){var i,getter,method=moment._locale[field],results=[];if("number"==typeof format&&(index=format,format=undefined),getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment._locale,m,format||"")},null!=index)return getter(index);for(i=0;count>i;i++)results.push(getter(i));return results}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=coercedNumber>=0?Math.floor(coercedNumber):Math.ceil(coercedNumber)),value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;m._a&&-2===m._pf.overflow&&(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>24||24===m._a[HOUR]&&(0!==m._a[MINUTE]||0!==m._a[SECOND]||0!==m._a[MILLISECOND])?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(YEAR>overflow||overflow>DATE)&&(overflow=DATE),m._pf.overflow=overflow)}function isValid(m){return null==m._isValid&&(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated,m._strict&&(m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length&&m._pf.bigHour===undefined)),m._isValid}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&hasModule)try{oldLocale=moment.locale(),!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),moment.locale(oldLocale)}catch(e){}return locales[name]}function makeAs(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(moment.isMoment(input)||isDate(input)?+input:+moment(input))-+res,res._d.setTime(+res._d+diff),moment.updateOffset(res,!1),res):moment(input).local()}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;length>i;i++)array[i]=formatTokenFunctions[array[i]]?formatTokenFunctions[array[i]]:removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]||(formatFunctions[format]=makeFormatFunction(format)),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case"Q":return parseTokenOneDigit;case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict)return parseTokenOneDigit;case"SS":if(strict)return parseTokenTwoDigits;case"SSS":if(strict)return parseTokenThreeDigits;case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return config._locale._meridiemParse;case"x":return parseTokenOffsetMs;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;case"Do":return strict?config._locale._ordinalParse:config._locale._ordinalParseLenient;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function utcOffsetFromString(string){string=string||"";var possibleTzMatches=string.match(parseTokenTimezone)||[],tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"Q":null!=input&&(datePartArray[MONTH]=3*(toInt(input)-1));break;case"M":case"MM":null!=input&&(datePartArray[MONTH]=toInt(input)-1);break;case"MMM":case"MMMM":a=config._locale.monthsParse(input,token,config._strict),null!=a?datePartArray[MONTH]=a:config._pf.invalidMonth=input;break;case"D":case"DD":null!=input&&(datePartArray[DATE]=toInt(input));break;case"Do":null!=input&&(datePartArray[DATE]=toInt(parseInt(input.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=input&&(config._dayOfYear=toInt(input));break;case"YY":datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._meridiem=input;break;case"h":case"hh":config._pf.bigHour=!0;case"H":case"HH":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"x":config._d=new Date(toInt(input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=utcOffsetFromString(input);break;case"dd":case"ddd":case"dddd":a=config._locale.weekdaysParse(input),null!=a?(config._w=config._w||{},config._w.d=a):config._pf.invalidWeekday=input;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":token=token.substr(0,1);case"gggg":case"GGGG":case"GGGGG":token=token.substr(0,2),input&&(config._w=config._w||{},config._w[token]=toInt(input));break;case"gg":case"GG":config._w=config._w||{},config._w[token]=moment.parseTwoDigitYear(input)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=dfl(w.GG,config._a[YEAR],weekOfYear(moment(),1,4).year),week=dfl(w.W,1),weekday=dfl(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=dfl(w.gg,config._a[YEAR],weekOfYear(moment(),dow,doy).year),week=dfl(w.w,1),null!=w.d?(weekday=w.d,dow>weekday&&++week):weekday=null!=w.e?w.e+dow:dow),temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}function dateFromConfig(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=dfl(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(config._pf._overflowDayOfYear=!0),date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dateFromObject(config){var normalizedInput;config._d||(normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day||normalizedInput.date,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config))}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){if(config._f===moment.ISO_8601)return void parseISO(config);config._a=[],config._pf.empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&config._pf.unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?config._pf.empty=!1:config._pf.unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&config._pf.unusedTokens.push(token);config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&config._pf.unusedInput.push(string),config._pf.bigHour===!0&&config._a[HOUR]<=12&&(config._pf.bigHour=undefined),config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return config._pf.invalidFormat=!0,void(config._d=new Date(0/0));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._pf=defaultParsingFlags(),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,(null==scoreToBeat||scoreToBeat>currentScore)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function parseISO(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){for(config._pf.iso=!0,i=0,l=isoDates.length;l>i;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}for(i=0,l=isoTimes.length;l>i;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}string.match(parseTokenTimezone)&&(config._f+="Z"),makeDateFromStringAndFormat(config)}else config._isValid=!1}function makeDateFromString(config){parseISO(config),config._isValid===!1&&(delete config._isValid,moment.createFromInputFallback(config))}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function makeDateFromInput(config){var matched,input=config._i;input===undefined?config._d=new Date:isDate(input)?config._d=new Date(+input):null!==(matched=aspNetJsonRegex.exec(input))?config._d=new Date(+matched[1]):"string"==typeof input?makeDateFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),dateFromConfig(config)):"object"==typeof input?dateFromObject(config):"number"==typeof input?config._d=new Date(input):moment.createFromInputFallback(config)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return 1970>y&&date.setFullYear(y),date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return 1970>y&&date.setUTCFullYear(y),date}function parseWeekday(input,locale){if("string"==typeof input)if(isNaN(input)){if(input=locale.weekdaysParse(input),"number"!=typeof input)return null}else input=parseInt(input,10);return input}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(posNegDuration,withoutSuffix,locale){var duration=moment.duration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),args=seconds<relativeTimeThresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<relativeTimeThresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<relativeTimeThresholds.h&&["hh",hours]||1===days&&["d"]||days<relativeTimeThresholds.d&&["dd",days]||1===months&&["M"]||months<relativeTimeThresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=+posNegDuration>0,args[4]=locale,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),end-7>daysToDayOfWeek&&(daysToDayOfWeek+=7),adjustedMoment=moment(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var daysToAdd,dayOfYear,d=makeUTCDate(year,0,1).getUTCDay();return d=0===d?7:d,weekday=null!=weekday?weekday:firstDayOfWeek,daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(firstDayOfWeek>d?7:0),dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1,{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function makeMoment(config){var res,input=config._i,format=config._f;return config._locale=config._locale||moment.localeData(config._l),null===input||format===undefined&&""===input?moment.invalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),moment.isMoment(input)?new Moment(input,!0):(format?isArray(format)?makeDateFromStringAndArray(config):makeDateFromStringAndFormat(config):makeDateFromInput(config),res=new Moment(config),res._nextDay&&(res.add(1,"d"),res._nextDay=undefined),res))}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return moment();for(res=moments[0],i=1;i<moments.length;++i)moments[i][fn](res)&&(res=moments[i]);return res}function rawMonthSetter(mom,value){var dayOfMonth;return"string"==typeof value&&(value=mom.localeData().monthsParse(value),"number"!=typeof value)?mom:(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom)}function rawGetter(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function rawSetter(mom,unit,value){return"Month"===unit?rawMonthSetter(mom,value):mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function makeAccessor(unit,keepTime){return function(value){return null!=value?(rawSetter(this,unit,value),moment.updateOffset(this,keepTime),this):rawGetter(this,unit)}}function daysToYears(days){return 400*days/146097}function yearsToDays(years){return 146097*years/400}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeGlobal(shouldDeprecate){"undefined"==typeof ender&&(oldGlobalMoment=globalScope.moment,globalScope.moment=shouldDeprecate?deprecate("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",moment):moment)}for(var moment,oldGlobalMoment,i,VERSION="2.9.0",globalScope="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,round=Math.round,hasOwnProperty=Object.prototype.hasOwnProperty,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,locales={},momentProperties=[],hasModule="undefined"!=typeof module&&module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenOffsetMs=/[\+\-]?\d+/,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,unitMillisecondFactors=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},relativeTimeThresholds={s:45,m:45,h:22,d:26,M:11},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.localeData().monthsShort(this,format)},MMMM:function(format){return this.localeData().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.localeData().weekdaysMin(this,format)},ddd:function(format){return this.localeData().weekdaysShort(this,format)},dddd:function(format){return this.localeData().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},deprecations={},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],updateInProgress=!1;ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Locale.prototype,{set:function(config){var prop,i;for(i in config)prop=config[i],"function"==typeof prop?this[i]=prop:this["_"+i]=prop;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName,format,strict){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(mom=moment.utc([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;7>i;i++)if(this._weekdaysParse[i]||(mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];return!output&&this._longDateFormat[key.toUpperCase()]&&(output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output),output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom,now){var output=this._calendar[key];return"function"==typeof output?output.apply(mom,[now]):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,locale,strict){var c;return"boolean"==typeof locale&&(strict=locale,locale=undefined),c={},c._isAMomentObject=!0,c._i=input,c._f=format,c._l=locale,c._strict=strict,c._isUTC=!1,c._pf=defaultParsingFlags(),makeMoment(c)},moment.suppressDeprecationWarnings=!1,moment.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),moment.min=function(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)},moment.max=function(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)},moment.utc=function(input,format,locale,strict){var c;return"boolean"==typeof locale&&(strict=locale,locale=undefined),c={},c._isAMomentObject=!0,c._useUTC=!0,c._isUTC=!0,c._l=locale,c._i=input,c._f=format,c._strict=strict,c._pf=defaultParsingFlags(),makeMoment(c).utc()
},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var sign,ret,parseIso,diffRes,duration=input,match=null;return moment.isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetTimeSpanJsonRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=isoDurationRegex.exec(input))?(sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(moment(duration.from),moment(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),moment.isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.ISO_8601=function(){},moment.momentProperties=momentProperties,moment.updateOffset=function(){},moment.relativeTimeThreshold=function(threshold,limit){return relativeTimeThresholds[threshold]===undefined?!1:limit===undefined?relativeTimeThresholds[threshold]:(relativeTimeThresholds[threshold]=limit,!0)},moment.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",function(key,value){return moment.locale(key,value)}),moment.locale=function(key,values){var data;return key&&(data="undefined"!=typeof values?moment.defineLocale(key,values):moment.localeData(key),data&&(moment.duration._locale=moment._locale=data)),moment._locale._abbr},moment.defineLocale=function(name,values){return null!==values?(values.abbr=name,locales[name]||(locales[name]=new Locale),locales[name].set(values),moment.locale(name),locales[name]):(delete locales[name],null)},moment.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",function(key){return moment.localeData(key)}),moment.localeData=function(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return moment._locale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)},moment.isMoment=function(obj){return obj instanceof Moment||null!=obj&&hasOwnProp(obj,"_isAMomentObject")},moment.isDuration=function(obj){return obj instanceof Duration};for(i=lists.length-1;i>=0;--i)makeList(lists[i]);moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(0/0);return null!=flags?extend(m._pf,flags):m._pf.userInvalidated=!0,m},moment.parseZone=function(){return moment.apply(null,arguments).parseZone()},moment.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)},moment.isDate=isDate,extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();return 0<m.year()&&m.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){return this._a?this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0:!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(keepLocalTime){return this.utcOffset(0,keepLocalTime)},local:function(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.localeData().postformat(output)},add:createAdder(1,"add"),subtract:createAdder(-1,"subtract"),diff:function(input,units,asFloat){var diff,output,that=makeAs(input,this),zoneDiff=6e4*(that.utcOffset()-this.utcOffset());return units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff),asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(time){var now=time||moment(),sod=makeAs(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.localeData().calendar(format,this,moment(now)))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day},month:makeAccessor("Month",!0),startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units?this.weekday(0):"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(units){return units=normalizeUnits(units),units===undefined||"millisecond"===units?this:this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")},isAfter:function(input,units){var inputMs;return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+this>+input):(inputMs=moment.isMoment(input)?+input:+moment(input),inputMs<+this.clone().startOf(units))},isBefore:function(input,units){var inputMs;return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+input>+this):(inputMs=moment.isMoment(input)?+input:+moment(input),+this.clone().endOf(units)<inputMs)},isBetween:function(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)},isSame:function(input,units){var inputMs;return units=normalizeUnits(units||"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+this===+input):(inputMs=+moment(input),+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units))},min:deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(other){return other=moment.apply(null,arguments),this>other?this:other}),max:deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(other){return other=moment.apply(null,arguments),other>this?this:other}),zone:deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}),utcOffset:function(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null!=input?("string"==typeof input&&(input=utcOffsetFromString(input)),Math.abs(input)<16&&(input=60*input),!this._isUTC&&keepLocalTime&&(localAdjust=this._dateUtcOffset()),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?addOrSubtractDurationFromMoment(this,moment.duration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,moment.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(utcOffsetFromString(this._i)),this},hasAlignedHourOffset:function(input){return input=input?moment(input).utcOffset():0,(this.utcOffset()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")},quarter:function(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")},week:function(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")},weekday:function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){return units=normalizeUnits(units),this[units]()},set:function(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else units=normalizeUnits(units),"function"==typeof this[units]&&this[units](value);return this},locale:function(key){var newLocaleData;return key===undefined?this._locale._abbr:(newLocaleData=moment.localeData(key),null!=newLocaleData&&(this._locale=newLocaleData),this)},lang:deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return key===undefined?this.localeData():this.locale(key)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),moment.fn.millisecond=moment.fn.milliseconds=makeAccessor("Milliseconds",!1),moment.fn.second=moment.fn.seconds=makeAccessor("Seconds",!1),moment.fn.minute=moment.fn.minutes=makeAccessor("Minutes",!1),moment.fn.hour=moment.fn.hours=makeAccessor("Hours",!0),moment.fn.date=makeAccessor("Date",!0),moment.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",!0)),moment.fn.year=makeAccessor("FullYear",!0),moment.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",!0)),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.quarters=moment.fn.quarter,moment.fn.toJSON=moment.fn.toISOString,moment.fn.isUTC=moment.fn.isUtc,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var seconds,minutes,hours,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,years=0;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),years=absRound(daysToYears(days)),days-=absRound(yearsToDays(years)),months+=absRound(days/30),days%=30,years+=absRound(months/12),months%=12,data.days=days,data.months=months,data.years=years},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var output=relativeTime(this,!withSuffix,this.localeData());return withSuffix&&(output=this.localeData().pastFuture(+this,output)),this.localeData().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){var days,months;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+this._milliseconds/864e5,months=this._months+12*daysToYears(days),"month"===units?months:months/12;switch(days=this._days+Math.round(yearsToDays(this._months/12)),units){case"week":return days/7+this._milliseconds/6048e5;case"day":return days+this._milliseconds/864e5;case"hour":return 24*days+this._milliseconds/36e5;case"minute":return 24*days*60+this._milliseconds/6e4;case"second":return 24*days*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*days*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+units)}},lang:moment.fn.lang,locale:moment.fn.locale,toIsoString:deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),moment.duration.fn.toString=moment.duration.fn.toISOString;for(i in unitMillisecondFactors)hasOwnProp(unitMillisecondFactors,i)&&makeDurationGetter(i.toLowerCase());moment.duration.fn.asMilliseconds=function(){return this.as("ms")},moment.duration.fn.asSeconds=function(){return this.as("s")},moment.duration.fn.asMinutes=function(){return this.as("m")},moment.duration.fn.asHours=function(){return this.as("h")},moment.duration.fn.asDays=function(){return this.as("d")},moment.duration.fn.asWeeks=function(){return this.as("weeks")},moment.duration.fn.asMonths=function(){return this.as("M")},moment.duration.fn.asYears=function(){return this.as("y")},moment.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule?module.exports=moment:(__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){return module.config&&module.config()&&module.config().noGlobal===!0&&(globalScope.moment=oldGlobalMoment),moment}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),makeGlobal(!0))}).call(this)}).call(exports,function(){return this}(),__webpack_require__(71)(module))},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(){function keycharm(options){var i,preventDefault=options&&options.preventDefault||!1,container=options&&options.container||window,_exportFunctions={},_bound={keydown:{},keyup:{}},_keys={};for(i=97;122>=i;i++)_keys[String.fromCharCode(i)]={code:65+(i-97),shift:!1};for(i=65;90>=i;i++)_keys[String.fromCharCode(i)]={code:i,shift:!0};for(i=0;9>=i;i++)_keys[""+i]={code:48+i,shift:!1};for(i=1;12>=i;i++)_keys["F"+i]={code:111+i,shift:!1};for(i=0;9>=i;i++)_keys["num"+i]={code:96+i,shift:!1};_keys["num*"]={code:106,shift:!1},_keys["num+"]={code:107,shift:!1},_keys["num-"]={code:109,shift:!1},_keys["num/"]={code:111,shift:!1},_keys["num."]={code:110,shift:!1},_keys.left={code:37,shift:!1},_keys.up={code:38,shift:!1},_keys.right={code:39,shift:!1},_keys.down={code:40,shift:!1},_keys.space={code:32,shift:!1},_keys.enter={code:13,shift:!1},_keys.shift={code:16,shift:void 0},_keys.esc={code:27,shift:!1},_keys.backspace={code:8,shift:!1},_keys.tab={code:9,shift:!1},_keys.ctrl={code:17,shift:!1},_keys.alt={code:18,shift:!1},_keys["delete"]={code:46,shift:!1},_keys.pageup={code:33,shift:!1},_keys.pagedown={code:34,shift:!1},_keys["="]={code:187,shift:!1},_keys["-"]={code:189,shift:!1},_keys["]"]={code:221,shift:!1},_keys["["]={code:219,shift:!1};var down=function(event){handleEvent(event,"keydown")},up=function(event){handleEvent(event,"keyup")},handleEvent=function(event,type){if(void 0!==_bound[type][event.keyCode]){for(var bound=_bound[type][event.keyCode],i=0;i<bound.length;i++)void 0===bound[i].shift?bound[i].fn(event):1==bound[i].shift&&1==event.shiftKey?bound[i].fn(event):0==bound[i].shift&&0==event.shiftKey&&bound[i].fn(event);1==preventDefault&&event.preventDefault()}};return _exportFunctions.bind=function(key,callback,type){if(void 0===type&&(type="keydown"),void 0===_keys[key])throw new Error("unsupported key: "+key);void 0===_bound[type][_keys[key].code]&&(_bound[type][_keys[key].code]=[]),_bound[type][_keys[key].code].push({fn:callback,shift:_keys[key].shift})},_exportFunctions.bindAll=function(callback,type){void 0===type&&(type="keydown");for(var key in _keys)_keys.hasOwnProperty(key)&&_exportFunctions.bind(key,callback,type)},_exportFunctions.getKey=function(event){for(var key in _keys)if(_keys.hasOwnProperty(key)){if(1==event.shiftKey&&1==_keys[key].shift&&event.keyCode==_keys[key].code)return key;if(0==event.shiftKey&&0==_keys[key].shift&&event.keyCode==_keys[key].code)return key;if(event.keyCode==_keys[key].code&&"shift"==key)return key}return"unknown key, currently not supported"},_exportFunctions.unbind=function(key,callback,type){if(void 0===type&&(type="keydown"),void 0===_keys[key])throw new Error("unsupported key: "+key);if(void 0!==callback){var newBindings=[],bound=_bound[type][_keys[key].code];if(void 0!==bound)for(var i=0;i<bound.length;i++)(bound[i].fn!=callback||bound[i].shift!=_keys[key].shift)&&newBindings.push(_bound[type][_keys[key].code][i]);_bound[type][_keys[key].code]=newBindings}else _bound[type][_keys[key].code]=[]},_exportFunctions.reset=function(){_bound={keydown:{},keyup:{}}},_exportFunctions.destroy=function(){_bound={keydown:{},keyup:{}},container.removeEventListener("keydown",down,!0),container.removeEventListener("keyup",up,!0)},container.addEventListener("keydown",down,!0),container.addEventListener("keyup",up,!0),_exportFunctions}return keycharm})},function(module,exports,__webpack_require__){function graphToggleSmoothCurves(){this.constants.smoothCurves.enabled=!this.constants.smoothCurves.enabled;var graph_toggleSmooth=document.getElementById("graph_toggleSmooth");graph_toggleSmooth.style.background=1==this.constants.smoothCurves.enabled?"#A4FF56":"#FF8532",this._configureSmoothCurves(!1)}function graphRepositionNodes(){for(var nodeId in this.calculationNodes)this.calculationNodes.hasOwnProperty(nodeId)&&(this.calculationNodes[nodeId].vx=0,this.calculationNodes[nodeId].vy=0,this.calculationNodes[nodeId].fx=0,this.calculationNodes[nodeId].fy=0);1==this.constants.hierarchicalLayout.enabled?(this._setupHierarchicalLayout(),showValueOfRange.call(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance"),showValueOfRange.call(this,"graph_H_cg",1,"physics_centralGravity"),showValueOfRange.call(this,"graph_H_sc",1,"physics_springConstant"),showValueOfRange.call(this,"graph_H_sl",1,"physics_springLength"),showValueOfRange.call(this,"graph_H_damp",1,"physics_damping")):this.repositionNodes(),this.moving=!0,this.start()}function graphGenerateOptions(){var options="No options are required, default values used.",optionsSpecific=[],radioButton1=document.getElementById("graph_physicsMethod1"),radioButton2=document.getElementById("graph_physicsMethod2");if(1==radioButton1.checked){if(this.constants.physics.barnesHut.gravitationalConstant!=this.backupConstants.physics.barnesHut.gravitationalConstant&&optionsSpecific.push("gravitationalConstant: "+this.constants.physics.barnesHut.gravitationalConstant),this.constants.physics.centralGravity!=this.backupConstants.physics.barnesHut.centralGravity&&optionsSpecific.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.barnesHut.springLength&&optionsSpecific.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.barnesHut.springConstant&&optionsSpecific.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.barnesHut.damping&&optionsSpecific.push("damping: "+this.constants.physics.damping),0!=optionsSpecific.length){options="var options = {",options+="physics: {barnesHut: {";for(var i=0;i<optionsSpecific.length;i++)options+=optionsSpecific[i],i<optionsSpecific.length-1&&(options+=", ");options+="}}"}this.constants.smoothCurves.enabled!=this.backupConstants.smoothCurves.enabled&&(0==optionsSpecific.length?options="var options = {":options+=", ",options+="smoothCurves: "+this.constants.smoothCurves.enabled),"No options are required, default values used."!=options&&(options+="};")}else if(1==radioButton2.checked){if(options="var options = {",options+="physics: {barnesHut: {enabled: false}",this.constants.physics.repulsion.nodeDistance!=this.backupConstants.physics.repulsion.nodeDistance&&optionsSpecific.push("nodeDistance: "+this.constants.physics.repulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.repulsion.centralGravity&&optionsSpecific.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.repulsion.springLength&&optionsSpecific.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.repulsion.springConstant&&optionsSpecific.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.repulsion.damping&&optionsSpecific.push("damping: "+this.constants.physics.damping),0!=optionsSpecific.length){options+=", repulsion: {";for(var i=0;i<optionsSpecific.length;i++)options+=optionsSpecific[i],i<optionsSpecific.length-1&&(options+=", ");options+="}}"}0==optionsSpecific.length&&(options+="}"),this.constants.smoothCurves!=this.backupConstants.smoothCurves&&(options+=", smoothCurves: "+this.constants.smoothCurves),options+="};"}else{if(options="var options = {",this.constants.physics.hierarchicalRepulsion.nodeDistance!=this.backupConstants.physics.hierarchicalRepulsion.nodeDistance&&optionsSpecific.push("nodeDistance: "+this.constants.physics.hierarchicalRepulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.hierarchicalRepulsion.centralGravity&&optionsSpecific.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.hierarchicalRepulsion.springLength&&optionsSpecific.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.hierarchicalRepulsion.springConstant&&optionsSpecific.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.hierarchicalRepulsion.damping&&optionsSpecific.push("damping: "+this.constants.physics.damping),0!=optionsSpecific.length){options+="physics: {hierarchicalRepulsion: {";for(var i=0;i<optionsSpecific.length;i++)options+=optionsSpecific[i],i<optionsSpecific.length-1&&(options+=", ");options+="}},"}if(options+="hierarchicalLayout: {",optionsSpecific=[],this.constants.hierarchicalLayout.direction!=this.backupConstants.hierarchicalLayout.direction&&optionsSpecific.push("direction: "+this.constants.hierarchicalLayout.direction),Math.abs(this.constants.hierarchicalLayout.levelSeparation)!=this.backupConstants.hierarchicalLayout.levelSeparation&&optionsSpecific.push("levelSeparation: "+this.constants.hierarchicalLayout.levelSeparation),this.constants.hierarchicalLayout.nodeSpacing!=this.backupConstants.hierarchicalLayout.nodeSpacing&&optionsSpecific.push("nodeSpacing: "+this.constants.hierarchicalLayout.nodeSpacing),0!=optionsSpecific.length){for(var i=0;i<optionsSpecific.length;i++)options+=optionsSpecific[i],i<optionsSpecific.length-1&&(options+=", ");options+="}"}else options+="enabled:true}";options+="};"}this.optionsDiv.innerHTML=options}function switchConfigurations(){var ids=["graph_BH_table","graph_R_table","graph_H_table"],radioButton=document.querySelector('input[name="graph_physicsMethod"]:checked').value,tableId="graph_"+radioButton+"_table",table=document.getElementById(tableId);table.style.display="block";for(var i=0;i<ids.length;i++)ids[i]!=tableId&&(table=document.getElementById(ids[i]),table.style.display="none");this._restoreNodes(),"R"==radioButton?(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!1):"H"==radioButton?0==this.constants.hierarchicalLayout.enabled&&(this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1,this.constants.smoothCurves.enabled=!1,this._setupHierarchicalLayout()):(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!0),this._loadSelectedForceSolver();var graph_toggleSmooth=document.getElementById("graph_toggleSmooth");graph_toggleSmooth.style.background=1==this.constants.smoothCurves.enabled?"#A4FF56":"#FF8532",this.moving=!0,this.start()}function showValueOfRange(id,map,constantsVariableName){var valueId=id+"_value",rangeValue=document.getElementById(id).value;Array.isArray(map)?(document.getElementById(valueId).value=map[parseInt(rangeValue)],this._overWriteGraphConstants(constantsVariableName,map[parseInt(rangeValue)])):(document.getElementById(valueId).value=parseInt(map)*parseFloat(rangeValue),this._overWriteGraphConstants(constantsVariableName,parseInt(map)*parseFloat(rangeValue))),("hierarchicalLayout_direction"==constantsVariableName||"hierarchicalLayout_levelSeparation"==constantsVariableName||"hierarchicalLayout_nodeSpacing"==constantsVariableName)&&this._setupHierarchicalLayout(),this.moving=!0,this.start()}var util=__webpack_require__(1),RepulsionMixin=__webpack_require__(68),HierarchialRepulsionMixin=__webpack_require__(69),BarnesHutMixin=__webpack_require__(70);exports._toggleBarnesHut=function(){this.constants.physics.barnesHut.enabled=!this.constants.physics.barnesHut.enabled,this._loadSelectedForceSolver(),this.moving=!0,this.start()},exports._loadSelectedForceSolver=function(){1==this.constants.physics.barnesHut.enabled?(this._clearMixin(RepulsionMixin),this._clearMixin(HierarchialRepulsionMixin),this.constants.physics.centralGravity=this.constants.physics.barnesHut.centralGravity,this.constants.physics.springLength=this.constants.physics.barnesHut.springLength,this.constants.physics.springConstant=this.constants.physics.barnesHut.springConstant,this.constants.physics.damping=this.constants.physics.barnesHut.damping,this._loadMixin(BarnesHutMixin)):1==this.constants.physics.hierarchicalRepulsion.enabled?(this._clearMixin(BarnesHutMixin),this._clearMixin(RepulsionMixin),this.constants.physics.centralGravity=this.constants.physics.hierarchicalRepulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.hierarchicalRepulsion.springLength,this.constants.physics.springConstant=this.constants.physics.hierarchicalRepulsion.springConstant,this.constants.physics.damping=this.constants.physics.hierarchicalRepulsion.damping,this._loadMixin(HierarchialRepulsionMixin)):(this._clearMixin(BarnesHutMixin),this._clearMixin(HierarchialRepulsionMixin),this.barnesHutTree=void 0,this.constants.physics.centralGravity=this.constants.physics.repulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.repulsion.springLength,this.constants.physics.springConstant=this.constants.physics.repulsion.springConstant,this.constants.physics.damping=this.constants.physics.repulsion.damping,this._loadMixin(RepulsionMixin))},exports._initializeForceCalculation=function(){1==this.nodeIndices.length?this.nodes[this.nodeIndices[0]]._setForce(0,0):(this.nodeIndices.length>this.constants.clustering.clusterThreshold&&1==this.constants.clustering.enabled&&this.clusterToFit(this.constants.clustering.reduceToNodes,!1),this._calculateForces())},exports._calculateForces=function(){this._calculateGravitationalForces(),this._calculateNodeForces(),this.constants.physics.springConstant>0&&(1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic?this._calculateSpringForcesWithSupport():1==this.constants.physics.hierarchicalRepulsion.enabled?this._calculateHierarchicalSpringForces():this._calculateSpringForces())},exports._updateCalculationNodes=function(){if(1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic){this.calculationNodes={},this.calculationNodeIndices=[];for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(this.calculationNodes[nodeId]=this.nodes[nodeId]);var supportNodes=this.sectors.support.nodes;for(var supportNodeId in supportNodes)supportNodes.hasOwnProperty(supportNodeId)&&(this.edges.hasOwnProperty(supportNodes[supportNodeId].parentEdgeId)?this.calculationNodes[supportNodeId]=supportNodes[supportNodeId]:supportNodes[supportNodeId]._setForce(0,0));for(var idx in this.calculationNodes)this.calculationNodes.hasOwnProperty(idx)&&this.calculationNodeIndices.push(idx)}else this.calculationNodes=this.nodes,this.calculationNodeIndices=this.nodeIndices},exports._calculateGravitationalForces=function(){var dx,dy,distance,node,i,nodes=this.calculationNodes,gravity=this.constants.physics.centralGravity,gravityForce=0;for(i=0;i<this.calculationNodeIndices.length;i++)node=nodes[this.calculationNodeIndices[i]],node.damping=this.constants.physics.damping,"default"==this._sector()&&0!=gravity?(dx=-node.x,dy=-node.y,distance=Math.sqrt(dx*dx+dy*dy),gravityForce=0==distance?0:gravity/distance,node.fx=dx*gravityForce,node.fy=dy*gravityForce):(node.fx=0,node.fy=0)},exports._calculateSpringForces=function(){var edgeLength,edge,edgeId,dx,dy,fx,fy,springForce,distance,edges=this.edges;for(edgeId in edges)edges.hasOwnProperty(edgeId)&&(edge=edges[edgeId],edge.connected&&this.nodes.hasOwnProperty(edge.toId)&&this.nodes.hasOwnProperty(edge.fromId)&&(edgeLength=edge.physics.springLength,edgeLength+=(edge.to.clusterSize+edge.from.clusterSize-2)*this.constants.clustering.edgeGrowth,dx=edge.from.x-edge.to.x,dy=edge.from.y-edge.to.y,distance=Math.sqrt(dx*dx+dy*dy),0==distance&&(distance=.01),springForce=this.constants.physics.springConstant*(edgeLength-distance)/distance,fx=dx*springForce,fy=dy*springForce,edge.from.fx+=fx,edge.from.fy+=fy,edge.to.fx-=fx,edge.to.fy-=fy))
},exports._calculateSpringForcesWithSupport=function(){var edgeLength,edge,edgeId,combinedClusterSize,edges=this.edges;for(edgeId in edges)if(edges.hasOwnProperty(edgeId)&&(edge=edges[edgeId],edge.connected&&this.nodes.hasOwnProperty(edge.toId)&&this.nodes.hasOwnProperty(edge.fromId)&&null!=edge.via)){var node1=edge.to,node2=edge.via,node3=edge.from;edgeLength=edge.physics.springLength,combinedClusterSize=node1.clusterSize+node3.clusterSize-2,edgeLength+=combinedClusterSize*this.constants.clustering.edgeGrowth,this._calculateSpringForce(node1,node2,.5*edgeLength),this._calculateSpringForce(node2,node3,.5*edgeLength)}},exports._calculateSpringForce=function(node1,node2,edgeLength){var dx,dy,fx,fy,springForce,distance;dx=node1.x-node2.x,dy=node1.y-node2.y,distance=Math.sqrt(dx*dx+dy*dy),0==distance&&(distance=.01),springForce=this.constants.physics.springConstant*(edgeLength-distance)/distance,fx=dx*springForce,fy=dy*springForce,node1.fx+=fx,node1.fy+=fy,node2.fx-=fx,node2.fy-=fy},exports._cleanupPhysicsConfiguration=function(){if(void 0!==this.physicsConfiguration){for(;this.physicsConfiguration.hasChildNodes();)this.physicsConfiguration.removeChild(this.physicsConfiguration.firstChild);this.physicsConfiguration.parentNode.removeChild(this.physicsConfiguration),this.physicsConfiguration=void 0}},exports._loadPhysicsConfiguration=function(){if(void 0===this.physicsConfiguration){this.backupConstants={},util.deepExtend(this.backupConstants,this.constants);var maxGravitational=Math.max(2e4,-1*this.constants.physics.barnesHut.gravitationalConstant*10),maxSpring=Math.min(.05,10*this.constants.physics.barnesHut.springConstant),hierarchicalLayoutDirections=["LR","RL","UD","DU"];this.physicsConfiguration=document.createElement("div"),this.physicsConfiguration.className="PhysicsConfiguration",this.physicsConfiguration.innerHTML='<table><tr><td><b>Simulation Mode:</b></td></tr><tr><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod1" value="BH" checked="checked">Barnes Hut</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod2" value="R">Repulsion</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod3" value="H">Hierarchical</td></tr></table><table id="graph_BH_table" style="display:none"><tr><td><b>Barnes Hut</b></td></tr><tr><td width="150px">gravitationalConstant</td><td>0</td><td><input type="range" min="0" max="'+maxGravitational+'" value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" step="25" style="width:300px" id="graph_BH_gc"></td><td  width="50px">-'+maxGravitational+'</td><td><input value="'+this.constants.physics.barnesHut.gravitationalConstant+'" id="graph_BH_gc_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="6"  value="'+this.constants.physics.barnesHut.centralGravity+'" step="0.05"  style="width:300px" id="graph_BH_cg"></td><td>3</td><td><input value="'+this.constants.physics.barnesHut.centralGravity+'" id="graph_BH_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.barnesHut.springLength+'" step="1" style="width:300px" id="graph_BH_sl"></td><td>500</td><td><input value="'+this.constants.physics.barnesHut.springLength+'" id="graph_BH_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="'+maxSpring+'" value="'+this.constants.physics.barnesHut.springConstant+'" step="0.0001" style="width:300px" id="graph_BH_sc"></td><td>'+maxSpring+'</td><td><input value="'+this.constants.physics.barnesHut.springConstant+'" id="graph_BH_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.barnesHut.damping+'" step="0.005" style="width:300px" id="graph_BH_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.barnesHut.damping+'" id="graph_BH_damp_value" style="width:60px"></td></tr></table><table id="graph_R_table" style="display:none"><tr><td><b>Repulsion</b></td></tr><tr><td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.repulsion.nodeDistance+'" step="1" style="width:300px" id="graph_R_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.repulsion.nodeDistance+'" id="graph_R_nd_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.repulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_R_cg"></td><td>3</td><td><input value="'+this.constants.physics.repulsion.centralGravity+'" id="graph_R_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.repulsion.springLength+'" step="1" style="width:300px" id="graph_R_sl"></td><td>500</td><td><input value="'+this.constants.physics.repulsion.springLength+'" id="graph_R_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.repulsion.springConstant+'" step="0.001" style="width:300px" id="graph_R_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.repulsion.springConstant+'" id="graph_R_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.repulsion.damping+'" step="0.005" style="width:300px" id="graph_R_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.repulsion.damping+'" id="graph_R_damp_value" style="width:60px"></td></tr></table><table id="graph_H_table" style="display:none"><tr><td width="150"><b>Hierarchical</b></td></tr><tr><td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" step="1" style="width:300px" id="graph_H_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" id="graph_H_nd_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_H_cg"></td><td>3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" id="graph_H_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" step="1" style="width:300px" id="graph_H_sl"></td><td>500</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" id="graph_H_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" step="0.001" style="width:300px" id="graph_H_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" id="graph_H_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.hierarchicalRepulsion.damping+'" step="0.005" style="width:300px" id="graph_H_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.damping+'" id="graph_H_damp_value" style="width:60px"></td></tr><tr><td width="150px">direction</td><td>1</td><td><input type="range" min="0" max="3" value="'+hierarchicalLayoutDirections.indexOf(this.constants.hierarchicalLayout.direction)+'" step="1" style="width:300px" id="graph_H_direction"></td><td>4</td><td><input value="'+this.constants.hierarchicalLayout.direction+'" id="graph_H_direction_value" style="width:60px"></td></tr><tr><td width="150px">levelSeparation</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.levelSeparation+'" step="1" style="width:300px" id="graph_H_levsep"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.levelSeparation+'" id="graph_H_levsep_value" style="width:60px"></td></tr><tr><td width="150px">nodeSpacing</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.nodeSpacing+'" step="1" style="width:300px" id="graph_H_nspac"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.nodeSpacing+'" id="graph_H_nspac_value" style="width:60px"></td></tr></table><table><tr><td><b>Options:</b></td></tr><tr><td width="180px"><input type="button" id="graph_toggleSmooth" value="Toggle smoothCurves" style="width:150px"></td><td width="180px"><input type="button" id="graph_repositionNodes" value="Reinitialize" style="width:150px"></td><td width="180px"><input type="button" id="graph_generateOptions" value="Generate Options" style="width:150px"></td></tr></table>',this.containerElement.parentElement.insertBefore(this.physicsConfiguration,this.containerElement),this.optionsDiv=document.createElement("div"),this.optionsDiv.style.fontSize="14px",this.optionsDiv.style.fontFamily="verdana",this.containerElement.parentElement.insertBefore(this.optionsDiv,this.containerElement);var rangeElement;rangeElement=document.getElementById("graph_BH_gc"),rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_gc",-1,"physics_barnesHut_gravitationalConstant"),rangeElement=document.getElementById("graph_BH_cg"),rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_cg",1,"physics_centralGravity"),rangeElement=document.getElementById("graph_BH_sc"),rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_sc",1,"physics_springConstant"),rangeElement=document.getElementById("graph_BH_sl"),rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_sl",1,"physics_springLength"),rangeElement=document.getElementById("graph_BH_damp"),rangeElement.onchange=showValueOfRange.bind(this,"graph_BH_damp",1,"physics_damping"),rangeElement=document.getElementById("graph_R_nd"),rangeElement.onchange=showValueOfRange.bind(this,"graph_R_nd",1,"physics_repulsion_nodeDistance"),rangeElement=document.getElementById("graph_R_cg"),rangeElement.onchange=showValueOfRange.bind(this,"graph_R_cg",1,"physics_centralGravity"),rangeElement=document.getElementById("graph_R_sc"),rangeElement.onchange=showValueOfRange.bind(this,"graph_R_sc",1,"physics_springConstant"),rangeElement=document.getElementById("graph_R_sl"),rangeElement.onchange=showValueOfRange.bind(this,"graph_R_sl",1,"physics_springLength"),rangeElement=document.getElementById("graph_R_damp"),rangeElement.onchange=showValueOfRange.bind(this,"graph_R_damp",1,"physics_damping"),rangeElement=document.getElementById("graph_H_nd"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance"),rangeElement=document.getElementById("graph_H_cg"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_cg",1,"physics_centralGravity"),rangeElement=document.getElementById("graph_H_sc"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_sc",1,"physics_springConstant"),rangeElement=document.getElementById("graph_H_sl"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_sl",1,"physics_springLength"),rangeElement=document.getElementById("graph_H_damp"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_damp",1,"physics_damping"),rangeElement=document.getElementById("graph_H_direction"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_direction",hierarchicalLayoutDirections,"hierarchicalLayout_direction"),rangeElement=document.getElementById("graph_H_levsep"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_levsep",1,"hierarchicalLayout_levelSeparation"),rangeElement=document.getElementById("graph_H_nspac"),rangeElement.onchange=showValueOfRange.bind(this,"graph_H_nspac",1,"hierarchicalLayout_nodeSpacing");var radioButton1=document.getElementById("graph_physicsMethod1"),radioButton2=document.getElementById("graph_physicsMethod2"),radioButton3=document.getElementById("graph_physicsMethod3");radioButton2.checked=!0,this.constants.physics.barnesHut.enabled&&(radioButton1.checked=!0),this.constants.hierarchicalLayout.enabled&&(radioButton3.checked=!0);var graph_toggleSmooth=document.getElementById("graph_toggleSmooth"),graph_repositionNodes=document.getElementById("graph_repositionNodes"),graph_generateOptions=document.getElementById("graph_generateOptions");graph_toggleSmooth.onclick=graphToggleSmoothCurves.bind(this),graph_repositionNodes.onclick=graphRepositionNodes.bind(this),graph_generateOptions.onclick=graphGenerateOptions.bind(this),graph_toggleSmooth.style.background=1==this.constants.smoothCurves&&0==this.constants.dynamicSmoothCurves?"#A4FF56":"#FF8532",switchConfigurations.apply(this),radioButton1.onchange=switchConfigurations.bind(this),radioButton2.onchange=switchConfigurations.bind(this),radioButton3.onchange=switchConfigurations.bind(this)}},exports._overWriteGraphConstants=function(constantsVariableName,value){var nameArray=constantsVariableName.split("_");1==nameArray.length?this.constants[nameArray[0]]=value:2==nameArray.length?this.constants[nameArray[0]][nameArray[1]]=value:3==nameArray.length&&(this.constants[nameArray[0]][nameArray[1]][nameArray[2]]=value)}},function(module,exports){exports.startWithClustering=function(){this.clusterToFit(this.constants.clustering.initialMaxNodes,!0),this.updateLabels(),1==this.constants.stabilize&&this._stabilize(),this.start()},exports.clusterToFit=function(maxNumberOfNodes,reposition){for(var numberOfNodes=this.nodeIndices.length,maxLevels=50,level=0;numberOfNodes>maxNumberOfNodes&&maxLevels>level;)level%3==0?(this.forceAggregateHubs(!0),this.normalizeClusterLevels()):this.increaseClusterLevel(),this.forceAggregateHubs(!0),numberOfNodes=this.nodeIndices.length,level+=1;level>0&&1==reposition&&this.repositionNodes(),this._updateCalculationNodes()},exports.openCluster=function(node){var isMovingBeforeClustering=this.moving;if(node.clusterSize>this.constants.clustering.sectorThreshold&&this._nodeInActiveArea(node)&&("default"!=this._sector()||1!=this.nodeIndices.length)){this._addSector(node);for(var level=0;this.nodeIndices.length<this.constants.clustering.initialMaxNodes&&10>level;)this.decreaseClusterLevel(),level+=1}else this._expandClusterNode(node,!1,!0),this._updateNodeIndexList(),this._updateCalculationNodes(),this.updateLabels();this.moving!=isMovingBeforeClustering&&this.start()},exports.updateClustersDefault=function(){1==this.constants.clustering.enabled&&1==this.constants.clustering.clusterByZoom&&this.updateClusters(0,!1,!1)},exports.increaseClusterLevel=function(){this.updateClusters(-1,!1,!0)},exports.decreaseClusterLevel=function(){this.updateClusters(1,!1,!0)},exports.updateClusters=function(zoomDirection,recursive,force,doNotStart){var isMovingBeforeClustering=this.moving,amountOfNodes=this.nodeIndices.length,detectedZoomingIn=this.previousScale<this.scale&&0==zoomDirection,detectedZoomingOut=this.previousScale>this.scale&&0==zoomDirection;1==detectedZoomingOut&&this._collapseSector(),1==detectedZoomingOut||-1==zoomDirection?this._formClusters(force):(1==detectedZoomingIn||1==zoomDirection)&&(1==force?this._openClusters(recursive,force):this._openClusters(recursive,!1)),this._updateNodeIndexList(),this.nodeIndices.length!=amountOfNodes||1!=detectedZoomingOut&&-1!=zoomDirection||(this._aggregateHubs(force),this._updateNodeIndexList()),(1==detectedZoomingOut||-1==zoomDirection)&&(this.handleChains(),this._updateNodeIndexList()),this.previousScale=this.scale,this.updateLabels(),this.nodeIndices.length<amountOfNodes&&(this.clusterSession+=1,this.normalizeClusterLevels()),(0==doNotStart||void 0===doNotStart)&&this.moving!=isMovingBeforeClustering&&this.start(),this._updateCalculationNodes()},exports.handleChains=function(){var chainPercentage=this._getChainFraction();chainPercentage>this.constants.clustering.chainThreshold&&this._reduceAmountOfChains(1-this.constants.clustering.chainThreshold/chainPercentage)},exports._aggregateHubs=function(force){this._getHubSize(),this._formClustersByHub(force,!1)},exports.forceAggregateHubs=function(doNotStart){var isMovingBeforeClustering=this.moving,amountOfNodes=this.nodeIndices.length;this._aggregateHubs(!0),this._updateNodeIndexList(),this.updateLabels(),this._updateCalculationNodes(),this.nodeIndices.length!=amountOfNodes&&(this.clusterSession+=1),(0==doNotStart||void 0===doNotStart)&&this.moving!=isMovingBeforeClustering&&this.start()},exports._openClustersBySize=function(){if(1==this.constants.clustering.clusterByZoom)for(var nodeId in this.nodes)if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];1==node.inView()&&(node.width*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||node.height*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)&&this.openCluster(node)}},exports._openClusters=function(recursive,force){for(var i=0;i<this.nodeIndices.length;i++){var node=this.nodes[this.nodeIndices[i]];this._expandClusterNode(node,recursive,force),this._updateCalculationNodes()}},exports._expandClusterNode=function(parentNode,recursive,force,openAll){if(parentNode.clusterSize>1&&(void 0===openAll&&(openAll=!1),recursive=openAll||recursive,parentNode.formationScale<this.scale||1==force))for(var containedNodeId in parentNode.containedNodes)if(parentNode.containedNodes.hasOwnProperty(containedNodeId)){var childNode=parentNode.containedNodes[containedNodeId];1==force?(childNode.clusterSession==parentNode.clusterSessions[parentNode.clusterSessions.length-1]||openAll)&&this._expelChildFromParent(parentNode,containedNodeId,recursive,force,openAll):this._nodeInActiveArea(parentNode)&&this._expelChildFromParent(parentNode,containedNodeId,recursive,force,openAll)}},exports._expelChildFromParent=function(parentNode,containedNodeId,recursive,force,openAll){var childNode=parentNode.containedNodes[containedNodeId];if(childNode.formationScale<this.scale||1==force){this._unselectAll(),this.nodes[containedNodeId]=childNode,this._releaseContainedEdges(parentNode,childNode),this._connectEdgeBackToChild(parentNode,childNode),this._validateEdges(parentNode),parentNode.options.mass-=childNode.options.mass,parentNode.clusterSize-=childNode.clusterSize,parentNode.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*(parentNode.clusterSize-1)),childNode.x=parentNode.x+parentNode.growthIndicator*(.5-Math.random()),childNode.y=parentNode.y+parentNode.growthIndicator*(.5-Math.random()),delete parentNode.containedNodes[containedNodeId];var othersPresent=!1;for(var childNodeId in parentNode.containedNodes)if(parentNode.containedNodes.hasOwnProperty(childNodeId)&&parentNode.containedNodes[childNodeId].clusterSession==childNode.clusterSession){othersPresent=!0;break}0==othersPresent&&parentNode.clusterSessions.pop(),this._repositionBezierNodes(childNode),childNode.clusterSession=0,parentNode.clearSizeCache(),this.moving=!0}1==recursive&&this._expandClusterNode(childNode,recursive,force,openAll)},exports._repositionBezierNodes=function(node){for(var i=0;i<node.dynamicEdges.length;i++)node.dynamicEdges[i].positionBezierNode()},exports._formClusters=function(force){0==force?1==this.constants.clustering.clusterByZoom&&this._formClustersByZoom():this._forceClustersByZoom()},exports._formClustersByZoom=function(){var dx,dy,length,minLength=this.constants.clustering.clusterEdgeThreshold/this.scale;for(var edgeId in this.edges)if(this.edges.hasOwnProperty(edgeId)){var edge=this.edges[edgeId];if(edge.connected&&edge.toId!=edge.fromId&&(dx=edge.to.x-edge.from.x,dy=edge.to.y-edge.from.y,length=Math.sqrt(dx*dx+dy*dy),minLength>length)){var parentNode=edge.from,childNode=edge.to;edge.to.options.mass>edge.from.options.mass&&(parentNode=edge.to,childNode=edge.from),1==childNode.dynamicEdges.length?this._addToCluster(parentNode,childNode,!1):1==parentNode.dynamicEdges.length&&this._addToCluster(childNode,parentNode,!1)}}},exports._forceClustersByZoom=function(){for(var nodeId in this.nodes)if(this.nodes.hasOwnProperty(nodeId)){var childNode=this.nodes[nodeId];if(1==childNode.dynamicEdges.length){var edge=childNode.dynamicEdges[0],parentNode=edge.toId==childNode.id?this.nodes[edge.fromId]:this.nodes[edge.toId];childNode.id!=parentNode.id&&(parentNode.options.mass>childNode.options.mass?this._addToCluster(parentNode,childNode,!0):this._addToCluster(childNode,parentNode,!0))}}},exports._clusterToSmallestNeighbour=function(node){for(var smallestNeighbour=-1,smallestNeighbourNode=null,i=0;i<node.dynamicEdges.length;i++)if(void 0!==node.dynamicEdges[i]){var neighbour=null;node.dynamicEdges[i].fromId!=node.id?neighbour=node.dynamicEdges[i].from:node.dynamicEdges[i].toId!=node.id&&(neighbour=node.dynamicEdges[i].to),null!=neighbour&&smallestNeighbour>neighbour.clusterSessions.length&&(smallestNeighbour=neighbour.clusterSessions.length,smallestNeighbourNode=neighbour)}null!=neighbour&&void 0!==this.nodes[neighbour.id]&&this._addToCluster(neighbour,node,!0)},exports._formClustersByHub=function(force,onlyEqual){for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&this._formClusterFromHub(this.nodes[nodeId],force,onlyEqual)},exports._formClusterFromHub=function(hubNode,force,onlyEqual,absorptionSizeOffset){if(void 0===absorptionSizeOffset&&(absorptionSizeOffset=0),hubNode.dynamicEdges.length>=this.hubThreshold&&0==onlyEqual||hubNode.dynamicEdges.length==this.hubThreshold&&1==onlyEqual){for(var dx,dy,length,minLength=this.constants.clustering.clusterEdgeThreshold/this.scale,allowCluster=!1,edgesIdarray=[],amountOfInitialEdges=hubNode.dynamicEdges.length,j=0;amountOfInitialEdges>j;j++)edgesIdarray.push(hubNode.dynamicEdges[j].id);if(0==force)for(allowCluster=!1,j=0;amountOfInitialEdges>j;j++){var edge=this.edges[edgesIdarray[j]];if(void 0!==edge&&edge.connected&&edge.toId!=edge.fromId&&(dx=edge.to.x-edge.from.x,dy=edge.to.y-edge.from.y,length=Math.sqrt(dx*dx+dy*dy),minLength>length)){allowCluster=!0;break}}if(!force&&allowCluster||force){var children=[],childrenIds={};for(j=0;amountOfInitialEdges>j;j++){edge=this.edges[edgesIdarray[j]];var childNode=this.nodes[edge.fromId==hubNode.id?edge.toId:edge.fromId];void 0===childrenIds[childNode.id]&&(childrenIds[childNode.id]=!0,children.push(childNode))}for(j=0;j<children.length;j++){var childNode=children[j];childNode.dynamicEdges.length<=this.hubThreshold+absorptionSizeOffset&&childNode.id!=hubNode.id&&this._addToCluster(hubNode,childNode,force)}}}},exports._addToCluster=function(parentNode,childNode,force){parentNode.containedNodes[childNode.id]=childNode;for(var i=0;i<childNode.dynamicEdges.length;i++){var edge=childNode.dynamicEdges[i];edge.toId==parentNode.id||edge.fromId==parentNode.id?this._addToContainedEdges(parentNode,childNode,edge):this._connectEdgeToCluster(parentNode,childNode,edge)}childNode.dynamicEdges=[],this._containCircularEdgesFromNode(parentNode,childNode),delete this.nodes[childNode.id];var massBefore=parentNode.options.mass;childNode.clusterSession=this.clusterSession,parentNode.options.mass+=childNode.options.mass,parentNode.clusterSize+=childNode.clusterSize,parentNode.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*parentNode.clusterSize),parentNode.clusterSessions[parentNode.clusterSessions.length-1]!=this.clusterSession&&parentNode.clusterSessions.push(this.clusterSession),parentNode.formationScale=1==force?0:this.scale,parentNode.clearSizeCache(),parentNode.containedNodes[childNode.id].formationScale=parentNode.formationScale,childNode.clearVelocity(),parentNode.updateVelocity(massBefore),this.moving=!0},exports._addToContainedEdges=function(parentNode,childNode,edge){void 0===parentNode.containedEdges[childNode.id]&&(parentNode.containedEdges[childNode.id]=[]),parentNode.containedEdges[childNode.id].push(edge),delete this.edges[edge.id];for(var i=0;i<parentNode.dynamicEdges.length;i++)if(parentNode.dynamicEdges[i].id==edge.id){parentNode.dynamicEdges.splice(i,1);break}},exports._connectEdgeToCluster=function(parentNode,childNode,edge){edge.toId==edge.fromId?this._addToContainedEdges(parentNode,childNode,edge):(edge.toId==childNode.id?(edge.originalToId.push(childNode.id),edge.to=parentNode,edge.toId=parentNode.id):(edge.originalFromId.push(childNode.id),edge.from=parentNode,edge.fromId=parentNode.id),this._addToReroutedEdges(parentNode,childNode,edge))},exports._containCircularEdgesFromNode=function(parentNode,childNode){for(var i=0;i<parentNode.dynamicEdges.length;i++){var edge=parentNode.dynamicEdges[i];edge.toId==edge.fromId&&this._addToContainedEdges(parentNode,childNode,edge)}},exports._addToReroutedEdges=function(parentNode,childNode,edge){parentNode.reroutedEdges.hasOwnProperty(childNode.id)||(parentNode.reroutedEdges[childNode.id]=[]),parentNode.reroutedEdges[childNode.id].push(edge),parentNode.dynamicEdges.push(edge)},exports._connectEdgeBackToChild=function(parentNode,childNode){if(parentNode.reroutedEdges.hasOwnProperty(childNode.id)){for(var i=0;i<parentNode.reroutedEdges[childNode.id].length;i++){var edge=parentNode.reroutedEdges[childNode.id][i];edge.originalFromId[edge.originalFromId.length-1]==childNode.id?(edge.originalFromId.pop(),edge.fromId=childNode.id,edge.from=childNode):(edge.originalToId.pop(),edge.toId=childNode.id,edge.to=childNode),childNode.dynamicEdges.push(edge);for(var j=0;j<parentNode.dynamicEdges.length;j++)if(parentNode.dynamicEdges[j].id==edge.id){parentNode.dynamicEdges.splice(j,1);break}}delete parentNode.reroutedEdges[childNode.id]}},exports._validateEdges=function(parentNode){for(var dynamicEdges=[],i=0;i<parentNode.dynamicEdges.length;i++){var edge=parentNode.dynamicEdges[i];(parentNode.id==edge.toId||parentNode.id==edge.fromId)&&dynamicEdges.push(edge)}parentNode.dynamicEdges=dynamicEdges},exports._releaseContainedEdges=function(parentNode,childNode){for(var i=0;i<parentNode.containedEdges[childNode.id].length;i++){var edge=parentNode.containedEdges[childNode.id][i];this.edges[edge.id]=edge,childNode.dynamicEdges.push(edge),parentNode.dynamicEdges.push(edge)}delete parentNode.containedEdges[childNode.id]},exports.updateLabels=function(){var nodeId;for(nodeId in this.nodes)if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];node.clusterSize>1&&(node.label="[".concat(String(node.clusterSize),"]"))}for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],1==node.clusterSize&&(node.label=void 0!==node.originalLabel?node.originalLabel:String(node.id)))},exports.normalizeClusterLevels=function(){var nodeId,maxLevel=0,minLevel=1e9,clusterLevel=0;for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(clusterLevel=this.nodes[nodeId].clusterSessions.length,clusterLevel>maxLevel&&(maxLevel=clusterLevel),minLevel>clusterLevel&&(minLevel=clusterLevel));if(maxLevel-minLevel>this.constants.clustering.clusterLevelDifference){var amountOfNodes=this.nodeIndices.length,targetLevel=maxLevel-this.constants.clustering.clusterLevelDifference;for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&this.nodes[nodeId].clusterSessions.length<targetLevel&&this._clusterToSmallestNeighbour(this.nodes[nodeId]);this._updateNodeIndexList(),this.nodeIndices.length!=amountOfNodes&&(this.clusterSession+=1)}},exports._nodeInActiveArea=function(node){return Math.abs(node.x-this.areaCenter.x)<=this.constants.clustering.activeAreaBoxSize/this.scale&&Math.abs(node.y-this.areaCenter.y)<=this.constants.clustering.activeAreaBoxSize/this.scale},exports.repositionNodes=function(){for(var i=0;i<this.nodeIndices.length;i++){var node=this.nodes[this.nodeIndices[i]];if(0==node.xFixed||0==node.yFixed){var radius=1*this.nodeIndices.length*Math.min(100,node.options.mass),angle=2*Math.PI*Math.random();0==node.xFixed&&(node.x=radius*Math.cos(angle)),0==node.yFixed&&(node.y=radius*Math.sin(angle)),this._repositionBezierNodes(node)}}},exports._getHubSize=function(){for(var average=0,averageSquared=0,hubCounter=0,largestHub=0,i=0;i<this.nodeIndices.length;i++){var node=this.nodes[this.nodeIndices[i]];node.dynamicEdges.length>largestHub&&(largestHub=node.dynamicEdges.length),average+=node.dynamicEdges.length,averageSquared+=Math.pow(node.dynamicEdges.length,2),hubCounter+=1}average/=hubCounter,averageSquared/=hubCounter;var variance=averageSquared-Math.pow(average,2),standardDeviation=Math.sqrt(variance);this.hubThreshold=Math.floor(average+2*standardDeviation),this.hubThreshold>largestHub&&(this.hubThreshold=largestHub)},exports._reduceAmountOfChains=function(fraction){this.hubThreshold=2;var reduceAmount=Math.floor(this.nodeIndices.length*fraction);for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&2==this.nodes[nodeId].dynamicEdges.length&&reduceAmount>0&&(this._formClusterFromHub(this.nodes[nodeId],!0,!0,1),reduceAmount-=1)},exports._getChainFraction=function(){var chains=0,total=0;for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(2==this.nodes[nodeId].dynamicEdges.length&&(chains+=1),total+=1);return chains/total}},function(module,exports,__webpack_require__){var util=__webpack_require__(1),Node=__webpack_require__(40);exports._putDataInSector=function(){this.sectors.active[this._sector()].nodes=this.nodes,this.sectors.active[this._sector()].edges=this.edges,this.sectors.active[this._sector()].nodeIndices=this.nodeIndices},exports._switchToSector=function(sectorId,sectorType){void 0===sectorType||"active"==sectorType?this._switchToActiveSector(sectorId):this._switchToFrozenSector(sectorId)},exports._switchToActiveSector=function(sectorId){this.nodeIndices=this.sectors.active[sectorId].nodeIndices,this.nodes=this.sectors.active[sectorId].nodes,this.edges=this.sectors.active[sectorId].edges},exports._switchToSupportSector=function(){this.nodeIndices=this.sectors.support.nodeIndices,this.nodes=this.sectors.support.nodes,this.edges=this.sectors.support.edges},exports._switchToFrozenSector=function(sectorId){this.nodeIndices=this.sectors.frozen[sectorId].nodeIndices,this.nodes=this.sectors.frozen[sectorId].nodes,this.edges=this.sectors.frozen[sectorId].edges},exports._loadLatestSector=function(){this._switchToSector(this._sector())},exports._sector=function(){return this.activeSector[this.activeSector.length-1]},exports._previousSector=function(){if(this.activeSector.length>1)return this.activeSector[this.activeSector.length-2];throw new TypeError("there are not enough sectors in the this.activeSector array.")},exports._setActiveSector=function(newId){this.activeSector.push(newId)},exports._forgetLastSector=function(){this.activeSector.pop()},exports._createNewSector=function(newId){this.sectors.active[newId]={nodes:{},edges:{},nodeIndices:[],formationScale:this.scale,drawingNode:void 0},this.sectors.active[newId].drawingNode=new Node({id:newId,color:{background:"#eaefef",border:"495c5e"}},{},{},this.constants),this.sectors.active[newId].drawingNode.clusterSize=2},exports._deleteActiveSector=function(sectorId){delete this.sectors.active[sectorId]},exports._deleteFrozenSector=function(sectorId){delete this.sectors.frozen[sectorId]},exports._freezeSector=function(sectorId){this.sectors.frozen[sectorId]=this.sectors.active[sectorId],this._deleteActiveSector(sectorId)},exports._activateSector=function(sectorId){this.sectors.active[sectorId]=this.sectors.frozen[sectorId],this._deleteFrozenSector(sectorId)},exports._mergeThisWithFrozen=function(sectorId){for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(this.sectors.frozen[sectorId].nodes[nodeId]=this.nodes[nodeId]);for(var edgeId in this.edges)this.edges.hasOwnProperty(edgeId)&&(this.sectors.frozen[sectorId].edges[edgeId]=this.edges[edgeId]);for(var i=0;i<this.nodeIndices.length;i++)this.sectors.frozen[sectorId].nodeIndices.push(this.nodeIndices[i])},exports._collapseThisToSingleCluster=function(){this.clusterToFit(1,!1)},exports._addSector=function(node){var sector=this._sector();delete this.nodes[node.id];var unqiueIdentifier=util.randomUUID();this._freezeSector(sector),this._createNewSector(unqiueIdentifier),this._setActiveSector(unqiueIdentifier),this._switchToSector(this._sector()),this.nodes[node.id]=node},exports._collapseSector=function(){var sector=this._sector();if("default"!=sector&&(1==this.nodeIndices.length||this.sectors.active[sector].drawingNode.width*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||this.sectors.active[sector].drawingNode.height*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)){var previousSector=this._previousSector();
this._collapseThisToSingleCluster(),this._mergeThisWithFrozen(previousSector),this._deleteActiveSector(sector),this._activateSector(previousSector),this._switchToSector(previousSector),this._forgetLastSector(),this._updateNodeIndexList(),this._updateCalculationNodes()}},exports._doInAllActiveSectors=function(runFunction,argument){var returnValues=[];if(void 0===argument)for(var sector in this.sectors.active)this.sectors.active.hasOwnProperty(sector)&&(this._switchToActiveSector(sector),returnValues.push(this[runFunction]()));else for(var sector in this.sectors.active)if(this.sectors.active.hasOwnProperty(sector)){this._switchToActiveSector(sector);var args=Array.prototype.splice.call(arguments,1);returnValues.push(args.length>1?this[runFunction](args[0],args[1]):this[runFunction](argument))}return this._loadLatestSector(),returnValues},exports._doInSupportSector=function(runFunction,argument){var returnValues=!1;if(void 0===argument)this._switchToSupportSector(),returnValues=this[runFunction]();else{this._switchToSupportSector();var args=Array.prototype.splice.call(arguments,1);returnValues=args.length>1?this[runFunction](args[0],args[1]):this[runFunction](argument)}return this._loadLatestSector(),returnValues},exports._doInAllFrozenSectors=function(runFunction,argument){if(void 0===argument)for(var sector in this.sectors.frozen)this.sectors.frozen.hasOwnProperty(sector)&&(this._switchToFrozenSector(sector),this[runFunction]());else for(var sector in this.sectors.frozen)if(this.sectors.frozen.hasOwnProperty(sector)){this._switchToFrozenSector(sector);var args=Array.prototype.splice.call(arguments,1);args.length>1?this[runFunction](args[0],args[1]):this[runFunction](argument)}this._loadLatestSector()},exports._doInAllSectors=function(runFunction,argument){var args=Array.prototype.splice.call(arguments,1);void 0===argument?(this._doInAllActiveSectors(runFunction),this._doInAllFrozenSectors(runFunction)):args.length>1?(this._doInAllActiveSectors(runFunction,args[0],args[1]),this._doInAllFrozenSectors(runFunction,args[0],args[1])):(this._doInAllActiveSectors(runFunction,argument),this._doInAllFrozenSectors(runFunction,argument))},exports._clearNodeIndexList=function(){var sector=this._sector();this.sectors.active[sector].nodeIndices=[],this.nodeIndices=this.sectors.active[sector].nodeIndices},exports._drawSectorNodes=function(ctx,sectorType){var node,minY=1e9,maxY=-1e9,minX=1e9,maxX=-1e9;for(var sector in this.sectors[sectorType])if(this.sectors[sectorType].hasOwnProperty(sector)&&void 0!==this.sectors[sectorType][sector].drawingNode){this._switchToSector(sector,sectorType),minY=1e9,maxY=-1e9,minX=1e9,maxX=-1e9;for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],node.resize(ctx),minX>node.x-.5*node.width&&(minX=node.x-.5*node.width),maxX<node.x+.5*node.width&&(maxX=node.x+.5*node.width),minY>node.y-.5*node.height&&(minY=node.y-.5*node.height),maxY<node.y+.5*node.height&&(maxY=node.y+.5*node.height));node=this.sectors[sectorType][sector].drawingNode,node.x=.5*(maxX+minX),node.y=.5*(maxY+minY),node.width=2*(node.x-minX),node.height=2*(node.y-minY),node.options.radius=Math.sqrt(Math.pow(.5*node.width,2)+Math.pow(.5*node.height,2)),node.setScale(this.scale),node._drawCircle(ctx)}},exports._drawAllSectorNodes=function(ctx){this._drawSectorNodes(ctx,"frozen"),this._drawSectorNodes(ctx,"active"),this._loadLatestSector()}},function(module,exports,__webpack_require__){var Node=__webpack_require__(40);exports._getNodesOverlappingWith=function(object,overlappingNodes){var nodes=this.nodes;for(var nodeId in nodes)nodes.hasOwnProperty(nodeId)&&nodes[nodeId].isOverlappingWith(object)&&overlappingNodes.push(nodeId)},exports._getAllNodesOverlappingWith=function(object){var overlappingNodes=[];return this._doInAllActiveSectors("_getNodesOverlappingWith",object,overlappingNodes),overlappingNodes},exports._pointerToPositionObject=function(pointer){var x=this._XconvertDOMtoCanvas(pointer.x),y=this._YconvertDOMtoCanvas(pointer.y);return{left:x,top:y,right:x,bottom:y}},exports._getNodeAt=function(pointer){var positionObject=this._pointerToPositionObject(pointer),overlappingNodes=this._getAllNodesOverlappingWith(positionObject);return overlappingNodes.length>0?this.nodes[overlappingNodes[overlappingNodes.length-1]]:null},exports._getEdgesOverlappingWith=function(object,overlappingEdges){var edges=this.edges;for(var edgeId in edges)edges.hasOwnProperty(edgeId)&&edges[edgeId].isOverlappingWith(object)&&overlappingEdges.push(edgeId)},exports._getAllEdgesOverlappingWith=function(object){var overlappingEdges=[];return this._doInAllActiveSectors("_getEdgesOverlappingWith",object,overlappingEdges),overlappingEdges},exports._getEdgeAt=function(pointer){var positionObject=this._pointerToPositionObject(pointer),overlappingEdges=this._getAllEdgesOverlappingWith(positionObject);return overlappingEdges.length>0?this.edges[overlappingEdges[overlappingEdges.length-1]]:null},exports._addToSelection=function(obj){obj instanceof Node?this.selectionObj.nodes[obj.id]=obj:this.selectionObj.edges[obj.id]=obj},exports._addToHover=function(obj){obj instanceof Node?this.hoverObj.nodes[obj.id]=obj:this.hoverObj.edges[obj.id]=obj},exports._removeFromSelection=function(obj){obj instanceof Node?delete this.selectionObj.nodes[obj.id]:delete this.selectionObj.edges[obj.id]},exports._unselectAll=function(doNotTrigger){void 0===doNotTrigger&&(doNotTrigger=!1);for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&this.selectionObj.nodes[nodeId].unselect();for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&this.selectionObj.edges[edgeId].unselect();this.selectionObj={nodes:{},edges:{}},0==doNotTrigger&&this.emit("select",this.getSelection())},exports._unselectClusters=function(doNotTrigger){void 0===doNotTrigger&&(doNotTrigger=!1);for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&this.selectionObj.nodes[nodeId].clusterSize>1&&(this.selectionObj.nodes[nodeId].unselect(),this._removeFromSelection(this.selectionObj.nodes[nodeId]));0==doNotTrigger&&this.emit("select",this.getSelection())},exports._getSelectedNodeCount=function(){var count=0;for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&(count+=1);return count},exports._getSelectedNode=function(){for(var nodeId in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(nodeId))return this.selectionObj.nodes[nodeId];return null},exports._getSelectedEdge=function(){for(var edgeId in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(edgeId))return this.selectionObj.edges[edgeId];return null},exports._getSelectedEdgeCount=function(){var count=0;for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&(count+=1);return count},exports._getSelectedObjectCount=function(){var count=0;for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&(count+=1);for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&(count+=1);return count},exports._selectionIsEmpty=function(){for(var nodeId in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(nodeId))return!1;for(var edgeId in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(edgeId))return!1;return!0},exports._clusterInSelection=function(){for(var nodeId in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(nodeId)&&this.selectionObj.nodes[nodeId].clusterSize>1)return!0;return!1},exports._selectConnectedEdges=function(node){for(var i=0;i<node.dynamicEdges.length;i++){var edge=node.dynamicEdges[i];edge.select(),this._addToSelection(edge)}},exports._hoverConnectedEdges=function(node){for(var i=0;i<node.dynamicEdges.length;i++){var edge=node.dynamicEdges[i];edge.hover=!0,this._addToHover(edge)}},exports._unselectConnectedEdges=function(node){for(var i=0;i<node.dynamicEdges.length;i++){var edge=node.dynamicEdges[i];edge.unselect(),this._removeFromSelection(edge)}},exports._selectObject=function(object,append,doNotTrigger,highlightEdges,overrideSelectable){void 0===doNotTrigger&&(doNotTrigger=!1),void 0===highlightEdges&&(highlightEdges=!0),0==this._selectionIsEmpty()&&0==append&&0==this.forceAppendSelection&&this._unselectAll(!0),0!=object.selected||1!=this.constants.selectable&&!overrideSelectable?0==object.selected?(this._addToSelection(object),doNotTrigger=!0):(object.unselect(),this._removeFromSelection(object)):(object.select(),this._addToSelection(object),object instanceof Node&&0==this.blockConnectingEdgeSelection&&1==highlightEdges&&this._selectConnectedEdges(object)),0==doNotTrigger&&this.emit("select",this.getSelection())},exports._blurObject=function(object){1==object.hover&&(object.hover=!1,this.emit("blurNode",{node:object.id}))},exports._hoverObject=function(object){0==object.hover&&(object.hover=!0,this._addToHover(object),object instanceof Node&&this.emit("hoverNode",{node:object.id})),object instanceof Node&&this._hoverConnectedEdges(object)},exports._handleTouch=function(){},exports._handleTap=function(pointer){var node=this._getNodeAt(pointer);if(null!=node)this._selectObject(node,!1);else{var edge=this._getEdgeAt(pointer);null!=edge?this._selectObject(edge,!1):this._unselectAll()}var properties=this.getSelection();properties.pointer={DOM:{x:pointer.x,y:pointer.y},canvas:{x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)}},this.emit("click",properties),this._redraw()},exports._handleDoubleTap=function(pointer){var node=this._getNodeAt(pointer);null!=node&&void 0!==node&&(this.areaCenter={x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)},this.openCluster(node));var properties=this.getSelection();properties.pointer={DOM:{x:pointer.x,y:pointer.y},canvas:{x:this._XconvertDOMtoCanvas(pointer.x),y:this._YconvertDOMtoCanvas(pointer.y)}},this.emit("doubleClick",properties)},exports._handleOnHold=function(pointer){var node=this._getNodeAt(pointer);if(null!=node)this._selectObject(node,!0);else{var edge=this._getEdgeAt(pointer);null!=edge&&this._selectObject(edge,!0)}this._redraw()},exports._handleOnRelease=function(pointer){this._manipulationReleaseOverload(pointer),this._navigationReleaseOverload(pointer)},exports._manipulationReleaseOverload=function(){},exports._navigationReleaseOverload=function(){},exports.getSelection=function(){var nodeIds=this.getSelectedNodes(),edgeIds=this.getSelectedEdges();return{nodes:nodeIds,edges:edgeIds}},exports.getSelectedNodes=function(){var idArray=[];if(1==this.constants.selectable)for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&idArray.push(nodeId);return idArray},exports.getSelectedEdges=function(){var idArray=[];if(1==this.constants.selectable)for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&idArray.push(edgeId);return idArray},exports.setSelection=function(){console.log("setSelection is deprecated. Please use selectNodes instead.")},exports.selectNodes=function(selection,highlightEdges){var i,iMax,id;if(!selection||void 0==selection.length)throw"Selection must be an array with ids";for(this._unselectAll(!0),i=0,iMax=selection.length;iMax>i;i++){id=selection[i];var node=this.nodes[id];if(!node)throw new RangeError('Node with id "'+id+'" not found');this._selectObject(node,!0,!0,highlightEdges,!0)}this.redraw()},exports.selectEdges=function(selection){var i,iMax,id;if(!selection||void 0==selection.length)throw"Selection must be an array with ids";for(this._unselectAll(!0),i=0,iMax=selection.length;iMax>i;i++){id=selection[i];var edge=this.edges[id];if(!edge)throw new RangeError('Edge with id "'+id+'" not found');this._selectObject(edge,!0,!0,!1,!0)}this.redraw()},exports._updateSelection=function(){for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&(this.nodes.hasOwnProperty(nodeId)||delete this.selectionObj.nodes[nodeId]);for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&(this.edges.hasOwnProperty(edgeId)||delete this.selectionObj.edges[edgeId])}},function(module,exports,__webpack_require__){var util=__webpack_require__(1),Node=__webpack_require__(40),Edge=__webpack_require__(37);exports._clearManipulatorBar=function(){this._recursiveDOMDelete(this.manipulationDiv),this.manipulationDOM={},this._manipulationReleaseOverload=function(){},delete this.sectors.support.nodes.targetNode,delete this.sectors.support.nodes.targetViaNode,this.controlNodesActive=!1,this.freezeSimulationEnabled=!1},exports._restoreOverloadedFunctions=function(){for(var functionName in this.cachedFunctions)this.cachedFunctions.hasOwnProperty(functionName)&&(this[functionName]=this.cachedFunctions[functionName],delete this.cachedFunctions[functionName])},exports._toggleEditMode=function(){this.editMode=!this.editMode;var toolbar=this.manipulationDiv,closeDiv=this.closeDiv,editModeDiv=this.editModeDiv;1==this.editMode?(toolbar.style.display="block",closeDiv.style.display="block",editModeDiv.style.display="none",closeDiv.onclick=this._toggleEditMode.bind(this)):(toolbar.style.display="none",closeDiv.style.display="none",editModeDiv.style.display="block",closeDiv.onclick=null),this._createManipulatorBar()},exports._createManipulatorBar=function(){this.boundFunction&&this.off("select",this.boundFunction);var locale=this.constants.locales[this.constants.locale];if(void 0!==this.edgeBeingEdited&&(this.edgeBeingEdited._disableControlNodes(),this.edgeBeingEdited=void 0,this.selectedControlNode=null,this.controlNodesActive=!1,this._redraw()),this._restoreOverloadedFunctions(),this.freezeSimulationEnabled=!1,this.blockConnectingEdgeSelection=!1,this.forceAppendSelection=!1,this.manipulationDOM={},1==this.editMode){for(;this.manipulationDiv.hasChildNodes();)this.manipulationDiv.removeChild(this.manipulationDiv.firstChild);this.manipulationDOM.addNodeSpan=document.createElement("span"),this.manipulationDOM.addNodeSpan.className="network-manipulationUI add",this.manipulationDOM.addNodeLabelSpan=document.createElement("span"),this.manipulationDOM.addNodeLabelSpan.className="network-manipulationLabel",this.manipulationDOM.addNodeLabelSpan.innerHTML=locale.addNode,this.manipulationDOM.addNodeSpan.appendChild(this.manipulationDOM.addNodeLabelSpan),this.manipulationDOM.seperatorLineDiv1=document.createElement("div"),this.manipulationDOM.seperatorLineDiv1.className="network-seperatorLine",this.manipulationDOM.addEdgeSpan=document.createElement("span"),this.manipulationDOM.addEdgeSpan.className="network-manipulationUI connect",this.manipulationDOM.addEdgeLabelSpan=document.createElement("span"),this.manipulationDOM.addEdgeLabelSpan.className="network-manipulationLabel",this.manipulationDOM.addEdgeLabelSpan.innerHTML=locale.addEdge,this.manipulationDOM.addEdgeSpan.appendChild(this.manipulationDOM.addEdgeLabelSpan),this.manipulationDiv.appendChild(this.manipulationDOM.addNodeSpan),this.manipulationDiv.appendChild(this.manipulationDOM.seperatorLineDiv1),this.manipulationDiv.appendChild(this.manipulationDOM.addEdgeSpan),1==this._getSelectedNodeCount()&&this.triggerFunctions.edit?(this.manipulationDOM.seperatorLineDiv2=document.createElement("div"),this.manipulationDOM.seperatorLineDiv2.className="network-seperatorLine",this.manipulationDOM.editNodeSpan=document.createElement("span"),this.manipulationDOM.editNodeSpan.className="network-manipulationUI edit",this.manipulationDOM.editNodeLabelSpan=document.createElement("span"),this.manipulationDOM.editNodeLabelSpan.className="network-manipulationLabel",this.manipulationDOM.editNodeLabelSpan.innerHTML=locale.editNode,this.manipulationDOM.editNodeSpan.appendChild(this.manipulationDOM.editNodeLabelSpan),this.manipulationDiv.appendChild(this.manipulationDOM.seperatorLineDiv2),this.manipulationDiv.appendChild(this.manipulationDOM.editNodeSpan)):1==this._getSelectedEdgeCount()&&0==this._getSelectedNodeCount()&&(this.manipulationDOM.seperatorLineDiv3=document.createElement("div"),this.manipulationDOM.seperatorLineDiv3.className="network-seperatorLine",this.manipulationDOM.editEdgeSpan=document.createElement("span"),this.manipulationDOM.editEdgeSpan.className="network-manipulationUI edit",this.manipulationDOM.editEdgeLabelSpan=document.createElement("span"),this.manipulationDOM.editEdgeLabelSpan.className="network-manipulationLabel",this.manipulationDOM.editEdgeLabelSpan.innerHTML=locale.editEdge,this.manipulationDOM.editEdgeSpan.appendChild(this.manipulationDOM.editEdgeLabelSpan),this.manipulationDiv.appendChild(this.manipulationDOM.seperatorLineDiv3),this.manipulationDiv.appendChild(this.manipulationDOM.editEdgeSpan)),0==this._selectionIsEmpty()&&(this.manipulationDOM.seperatorLineDiv4=document.createElement("div"),this.manipulationDOM.seperatorLineDiv4.className="network-seperatorLine",this.manipulationDOM.deleteSpan=document.createElement("span"),this.manipulationDOM.deleteSpan.className="network-manipulationUI delete",this.manipulationDOM.deleteLabelSpan=document.createElement("span"),this.manipulationDOM.deleteLabelSpan.className="network-manipulationLabel",this.manipulationDOM.deleteLabelSpan.innerHTML=locale.del,this.manipulationDOM.deleteSpan.appendChild(this.manipulationDOM.deleteLabelSpan),this.manipulationDiv.appendChild(this.manipulationDOM.seperatorLineDiv4),this.manipulationDiv.appendChild(this.manipulationDOM.deleteSpan)),this.manipulationDOM.addNodeSpan.onclick=this._createAddNodeToolbar.bind(this),this.manipulationDOM.addEdgeSpan.onclick=this._createAddEdgeToolbar.bind(this),1==this._getSelectedNodeCount()&&this.triggerFunctions.edit?this.manipulationDOM.editNodeSpan.onclick=this._editNode.bind(this):1==this._getSelectedEdgeCount()&&0==this._getSelectedNodeCount()&&(this.manipulationDOM.editEdgeSpan.onclick=this._createEditEdgeToolbar.bind(this)),0==this._selectionIsEmpty()&&(this.manipulationDOM.deleteSpan.onclick=this._deleteSelected.bind(this)),this.closeDiv.onclick=this._toggleEditMode.bind(this);var me=this;this.boundFunction=me._createManipulatorBar,this.on("select",this.boundFunction)}else{for(;this.editModeDiv.hasChildNodes();)this.editModeDiv.removeChild(this.editModeDiv.firstChild);this.manipulationDOM.editModeSpan=document.createElement("span"),this.manipulationDOM.editModeSpan.className="network-manipulationUI edit editmode",this.manipulationDOM.editModeLabelSpan=document.createElement("span"),this.manipulationDOM.editModeLabelSpan.className="network-manipulationLabel",this.manipulationDOM.editModeLabelSpan.innerHTML=locale.edit,this.manipulationDOM.editModeSpan.appendChild(this.manipulationDOM.editModeLabelSpan),this.editModeDiv.appendChild(this.manipulationDOM.editModeSpan),this.manipulationDOM.editModeSpan.onclick=this._toggleEditMode.bind(this)}},exports._createAddNodeToolbar=function(){this._clearManipulatorBar(),this.boundFunction&&this.off("select",this.boundFunction);var locale=this.constants.locales[this.constants.locale];this.manipulationDOM={},this.manipulationDOM.backSpan=document.createElement("span"),this.manipulationDOM.backSpan.className="network-manipulationUI back",this.manipulationDOM.backLabelSpan=document.createElement("span"),this.manipulationDOM.backLabelSpan.className="network-manipulationLabel",this.manipulationDOM.backLabelSpan.innerHTML=locale.back,this.manipulationDOM.backSpan.appendChild(this.manipulationDOM.backLabelSpan),this.manipulationDOM.seperatorLineDiv1=document.createElement("div"),this.manipulationDOM.seperatorLineDiv1.className="network-seperatorLine",this.manipulationDOM.descriptionSpan=document.createElement("span"),this.manipulationDOM.descriptionSpan.className="network-manipulationUI none",this.manipulationDOM.descriptionLabelSpan=document.createElement("span"),this.manipulationDOM.descriptionLabelSpan.className="network-manipulationLabel",this.manipulationDOM.descriptionLabelSpan.innerHTML=locale.addDescription,this.manipulationDOM.descriptionSpan.appendChild(this.manipulationDOM.descriptionLabelSpan),this.manipulationDiv.appendChild(this.manipulationDOM.backSpan),this.manipulationDiv.appendChild(this.manipulationDOM.seperatorLineDiv1),this.manipulationDiv.appendChild(this.manipulationDOM.descriptionSpan),this.manipulationDOM.backSpan.onclick=this._createManipulatorBar.bind(this);var me=this;this.boundFunction=me._addNode,this.on("select",this.boundFunction)},exports._createAddEdgeToolbar=function(){this._clearManipulatorBar(),this._unselectAll(!0),this.freezeSimulationEnabled=!0,this.boundFunction&&this.off("select",this.boundFunction);var locale=this.constants.locales[this.constants.locale];this._unselectAll(),this.forceAppendSelection=!1,this.blockConnectingEdgeSelection=!0,this.manipulationDOM={},this.manipulationDOM.backSpan=document.createElement("span"),this.manipulationDOM.backSpan.className="network-manipulationUI back",this.manipulationDOM.backLabelSpan=document.createElement("span"),this.manipulationDOM.backLabelSpan.className="network-manipulationLabel",this.manipulationDOM.backLabelSpan.innerHTML=locale.back,this.manipulationDOM.backSpan.appendChild(this.manipulationDOM.backLabelSpan),this.manipulationDOM.seperatorLineDiv1=document.createElement("div"),this.manipulationDOM.seperatorLineDiv1.className="network-seperatorLine",this.manipulationDOM.descriptionSpan=document.createElement("span"),this.manipulationDOM.descriptionSpan.className="network-manipulationUI none",this.manipulationDOM.descriptionLabelSpan=document.createElement("span"),this.manipulationDOM.descriptionLabelSpan.className="network-manipulationLabel",this.manipulationDOM.descriptionLabelSpan.innerHTML=locale.edgeDescription,this.manipulationDOM.descriptionSpan.appendChild(this.manipulationDOM.descriptionLabelSpan),this.manipulationDiv.appendChild(this.manipulationDOM.backSpan),this.manipulationDiv.appendChild(this.manipulationDOM.seperatorLineDiv1),this.manipulationDiv.appendChild(this.manipulationDOM.descriptionSpan),this.manipulationDOM.backSpan.onclick=this._createManipulatorBar.bind(this);var me=this;this.boundFunction=me._handleConnect,this.on("select",this.boundFunction),this.cachedFunctions._handleTouch=this._handleTouch,this.cachedFunctions._manipulationReleaseOverload=this._manipulationReleaseOverload,this.cachedFunctions._handleDragStart=this._handleDragStart,this.cachedFunctions._handleDragEnd=this._handleDragEnd,this.cachedFunctions._handleOnHold=this._handleOnHold,this._handleTouch=this._handleConnect,this._manipulationReleaseOverload=function(){},this._handleOnHold=function(){},this._handleDragStart=function(){},this._handleDragEnd=this._finishConnect,this._redraw()},exports._createEditEdgeToolbar=function(){this._clearManipulatorBar(),this.controlNodesActive=!0,this.boundFunction&&this.off("select",this.boundFunction),this.edgeBeingEdited=this._getSelectedEdge(),this.edgeBeingEdited._enableControlNodes();var locale=this.constants.locales[this.constants.locale];this.manipulationDOM={},this.manipulationDOM.backSpan=document.createElement("span"),this.manipulationDOM.backSpan.className="network-manipulationUI back",this.manipulationDOM.backLabelSpan=document.createElement("span"),this.manipulationDOM.backLabelSpan.className="network-manipulationLabel",this.manipulationDOM.backLabelSpan.innerHTML=locale.back,this.manipulationDOM.backSpan.appendChild(this.manipulationDOM.backLabelSpan),this.manipulationDOM.seperatorLineDiv1=document.createElement("div"),this.manipulationDOM.seperatorLineDiv1.className="network-seperatorLine",this.manipulationDOM.descriptionSpan=document.createElement("span"),this.manipulationDOM.descriptionSpan.className="network-manipulationUI none",this.manipulationDOM.descriptionLabelSpan=document.createElement("span"),this.manipulationDOM.descriptionLabelSpan.className="network-manipulationLabel",this.manipulationDOM.descriptionLabelSpan.innerHTML=locale.editEdgeDescription,this.manipulationDOM.descriptionSpan.appendChild(this.manipulationDOM.descriptionLabelSpan),this.manipulationDiv.appendChild(this.manipulationDOM.backSpan),this.manipulationDiv.appendChild(this.manipulationDOM.seperatorLineDiv1),this.manipulationDiv.appendChild(this.manipulationDOM.descriptionSpan),this.manipulationDOM.backSpan.onclick=this._createManipulatorBar.bind(this),this.cachedFunctions._handleTouch=this._handleTouch,this.cachedFunctions._manipulationReleaseOverload=this._manipulationReleaseOverload,this.cachedFunctions._handleTap=this._handleTap,this.cachedFunctions._handleDragStart=this._handleDragStart,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleTouch=this._selectControlNode,this._handleTap=function(){},this._handleOnDrag=this._controlNodeDrag,this._handleDragStart=function(){},this._manipulationReleaseOverload=this._releaseControlNode,this._redraw()},exports._selectControlNode=function(pointer){this.edgeBeingEdited.controlNodes.from.unselect(),this.edgeBeingEdited.controlNodes.to.unselect(),this.selectedControlNode=this.edgeBeingEdited._getSelectedControlNode(this._XconvertDOMtoCanvas(pointer.x),this._YconvertDOMtoCanvas(pointer.y)),null!==this.selectedControlNode&&(this.selectedControlNode.select(),this.freezeSimulationEnabled=!0),this._redraw()},exports._controlNodeDrag=function(event){var pointer=this._getPointer(event.gesture.center);null!==this.selectedControlNode&&void 0!==this.selectedControlNode&&(this.selectedControlNode.x=this._XconvertDOMtoCanvas(pointer.x),this.selectedControlNode.y=this._YconvertDOMtoCanvas(pointer.y)),this._redraw()},exports._releaseControlNode=function(pointer){var newNode=this._getNodeAt(pointer);null!==newNode?(1==this.edgeBeingEdited.controlNodes.from.selected&&(this.edgeBeingEdited._restoreControlNodes(),this._editEdge(newNode.id,this.edgeBeingEdited.to.id),this.edgeBeingEdited.controlNodes.from.unselect()),1==this.edgeBeingEdited.controlNodes.to.selected&&(this.edgeBeingEdited._restoreControlNodes(),this._editEdge(this.edgeBeingEdited.from.id,newNode.id),this.edgeBeingEdited.controlNodes.to.unselect())):this.edgeBeingEdited._restoreControlNodes(),this.freezeSimulationEnabled=!1,this._redraw()},exports._handleConnect=function(pointer){if(0==this._getSelectedNodeCount()){var node=this._getNodeAt(pointer);if(null!=node)if(node.clusterSize>1)alert(this.constants.locales[this.constants.locale].createEdgeError);else{this._selectObject(node,!1);var supportNodes=this.sectors.support.nodes;supportNodes.targetNode=new Node({id:"targetNode"},{},{},this.constants);var targetNode=supportNodes.targetNode;targetNode.x=node.x,targetNode.y=node.y,this.edges.connectionEdge=new Edge({id:"connectionEdge",from:node.id,to:targetNode.id},this,this.constants);var connectionEdge=this.edges.connectionEdge;connectionEdge.from=node,connectionEdge.connected=!0,connectionEdge.options.smoothCurves={enabled:!0,dynamic:!1,type:"continuous",roundness:.5},connectionEdge.selected=!0,connectionEdge.to=targetNode,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleOnDrag=function(event){var pointer=this._getPointer(event.gesture.center),connectionEdge=this.edges.connectionEdge;connectionEdge.to.x=this._XconvertDOMtoCanvas(pointer.x),connectionEdge.to.y=this._YconvertDOMtoCanvas(pointer.y)},this.moving=!0,this.start()}}},exports._finishConnect=function(event){if(1==this._getSelectedNodeCount()){var pointer=this._getPointer(event.gesture.center);this._handleOnDrag=this.cachedFunctions._handleOnDrag,delete this.cachedFunctions._handleOnDrag;var connectFromId=this.edges.connectionEdge.fromId;delete this.edges.connectionEdge,delete this.sectors.support.nodes.targetNode,delete this.sectors.support.nodes.targetViaNode;var node=this._getNodeAt(pointer);null!=node&&(node.clusterSize>1?alert(this.constants.locales[this.constants.locale].createEdgeError):(this._createEdge(connectFromId,node.id),this._createManipulatorBar())),this._unselectAll()}},exports._addNode=function(){if(this._selectionIsEmpty()&&1==this.editMode){var positionObject=this._pointerToPositionObject(this.pointerPosition),defaultData={id:util.randomUUID(),x:positionObject.left,y:positionObject.top,label:"new",allowedToMoveX:!0,allowedToMoveY:!0};if(this.triggerFunctions.add){if(2!=this.triggerFunctions.add.length)throw new Error("The function for add does not support two arguments (data,callback)");var me=this;this.triggerFunctions.add(defaultData,function(finalizedData){me.nodesData.add(finalizedData),me._createManipulatorBar(),me.moving=!0,me.start()})}else this.nodesData.add(defaultData),this._createManipulatorBar(),this.moving=!0,this.start()}},exports._createEdge=function(sourceNodeId,targetNodeId){if(1==this.editMode){var defaultData={from:sourceNodeId,to:targetNodeId};if(this.triggerFunctions.connect){if(2!=this.triggerFunctions.connect.length)throw new Error("The function for connect does not support two arguments (data,callback)");var me=this;this.triggerFunctions.connect(defaultData,function(finalizedData){me.edgesData.add(finalizedData),me.moving=!0,me.start()})}else this.edgesData.add(defaultData),this.moving=!0,this.start()}},exports._editEdge=function(sourceNodeId,targetNodeId){if(1==this.editMode){var defaultData={id:this.edgeBeingEdited.id,from:sourceNodeId,to:targetNodeId};if(this.triggerFunctions.editEdge){if(2!=this.triggerFunctions.editEdge.length)throw new Error("The function for edit does not support two arguments (data, callback)");var me=this;this.triggerFunctions.editEdge(defaultData,function(finalizedData){me.edgesData.update(finalizedData),me.moving=!0,me.start()})}else this.edgesData.update(defaultData),this.moving=!0,this.start()}},exports._editNode=function(){if(!this.triggerFunctions.edit||1!=this.editMode)throw new Error("No edit function has been bound to this button");var node=this._getSelectedNode(),data={id:node.id,label:node.label,group:node.options.group,shape:node.options.shape,color:{background:node.options.color.background,border:node.options.color.border,highlight:{background:node.options.color.highlight.background,border:node.options.color.highlight.border}}};if(2!=this.triggerFunctions.edit.length)throw new Error("The function for edit does not support two arguments (data, callback)");var me=this;this.triggerFunctions.edit(data,function(finalizedData){me.nodesData.update(finalizedData),me._createManipulatorBar(),me.moving=!0,me.start()})},exports._deleteSelected=function(){if(!this._selectionIsEmpty()&&1==this.editMode)if(this._clusterInSelection())alert(this.constants.locales[this.constants.locale].deleteClusterError);else{var selectedNodes=this.getSelectedNodes(),selectedEdges=this.getSelectedEdges();if(this.triggerFunctions.del){var me=this,data={nodes:selectedNodes,edges:selectedEdges};if(2!=this.triggerFunctions.del.length)throw new Error("The function for delete does not support two arguments (data, callback)");this.triggerFunctions.del(data,function(finalizedData){me.edgesData.remove(finalizedData.edges),me.nodesData.remove(finalizedData.nodes),me._unselectAll(),me.moving=!0,me.start()})}else this.edgesData.remove(selectedEdges),this.nodesData.remove(selectedNodes),this._unselectAll(),this.moving=!0,this.start()}}},function(module,exports,__webpack_require__){var Hammer=(__webpack_require__(1),__webpack_require__(45));exports._cleanNavigation=function(){if(0!=this.navigationHammers.existing.length){for(var i=0;i<this.navigationHammers.existing.length;i++)this.navigationHammers.existing[i].dispose();this.navigationHammers.existing=[]}this._navigationReleaseOverload=function(){},this.navigationDivs&&this.navigationDivs.wrapper&&this.navigationDivs.wrapper.parentNode&&this.navigationDivs.wrapper.parentNode.removeChild(this.navigationDivs.wrapper)},exports._loadNavigationElements=function(){this._cleanNavigation(),this.navigationDivs={};var navigationDivs=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],navigationDivActions=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_zoomExtent"];this.navigationDivs.wrapper=document.createElement("div"),this.frame.appendChild(this.navigationDivs.wrapper);for(var i=0;i<navigationDivs.length;i++){this.navigationDivs[navigationDivs[i]]=document.createElement("div"),this.navigationDivs[navigationDivs[i]].className="network-navigation "+navigationDivs[i],this.navigationDivs.wrapper.appendChild(this.navigationDivs[navigationDivs[i]]);var hammer=Hammer(this.navigationDivs[navigationDivs[i]],{prevent_default:!0});hammer.on("touch",this[navigationDivActions[i]].bind(this)),this.navigationHammers._new.push(hammer)}this._navigationReleaseOverload=this._stopMovement,this.navigationHammers.existing=this.navigationHammers._new},exports._zoomExtent=function(event){this.zoomExtent({duration:700}),event.stopPropagation()},exports._stopMovement=function(){this._xStopMoving(),this._yStopMoving(),this._stopZoom()
},exports._moveUp=function(event){this.yIncrement=this.constants.keyboard.speed.y,this.start(),event.preventDefault()},exports._moveDown=function(event){this.yIncrement=-this.constants.keyboard.speed.y,this.start(),event.preventDefault()},exports._moveLeft=function(event){this.xIncrement=this.constants.keyboard.speed.x,this.start(),event.preventDefault()},exports._moveRight=function(event){this.xIncrement=-this.constants.keyboard.speed.y,this.start(),event.preventDefault()},exports._zoomIn=function(event){this.zoomIncrement=this.constants.keyboard.speed.zoom,this.start(),event.preventDefault()},exports._zoomOut=function(event){this.zoomIncrement=-this.constants.keyboard.speed.zoom,this.start(),event.preventDefault()},exports._stopZoom=function(event){this.zoomIncrement=0,event&&event.preventDefault()},exports._yStopMoving=function(event){this.yIncrement=0,event&&event.preventDefault()},exports._xStopMoving=function(event){this.xIncrement=0,event&&event.preventDefault()}},function(module,exports){exports._resetLevels=function(){for(var nodeId in this.nodes)if(this.nodes.hasOwnProperty(nodeId)){var node=this.nodes[nodeId];0==node.preassignedLevel&&(node.level=-1,node.hierarchyEnumerated=!1)}},exports._setupHierarchicalLayout=function(){if(1==this.constants.hierarchicalLayout.enabled&&this.nodeIndices.length>0){var node,nodeId,hubsize=0,definedLevel=!1,undefinedLevel=!1;for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],-1!=node.level?definedLevel=!0:undefinedLevel=!0,hubsize<node.edges.length&&(hubsize=node.edges.length));if(1==undefinedLevel&&1==definedLevel)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");this._changeConstants(),1==undefinedLevel&&("hubsize"==this.constants.hierarchicalLayout.layout?this._determineLevels(hubsize):this._determineLevelsDirected(!1));var distribution=this._getDistribution();this._placeNodesByHierarchy(distribution),this.start()}},exports._placeNodesByHierarchy=function(distribution){var nodeId,node;for(var level in distribution)if(distribution.hasOwnProperty(level))for(nodeId in distribution[level].nodes)distribution[level].nodes.hasOwnProperty(nodeId)&&(node=distribution[level].nodes[nodeId],"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?node.xFixed&&(node.x=distribution[level].minPos,node.xFixed=!1,distribution[level].minPos+=distribution[level].nodeSpacing):node.yFixed&&(node.y=distribution[level].minPos,node.yFixed=!1,distribution[level].minPos+=distribution[level].nodeSpacing),this._placeBranchNodes(node.edges,node.id,distribution,node.level));this._stabilize()},exports._getDistribution=function(){var nodeId,node,level,distribution={};for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],node.xFixed=!0,node.yFixed=!0,"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?node.y=this.constants.hierarchicalLayout.levelSeparation*node.level:node.x=this.constants.hierarchicalLayout.levelSeparation*node.level,void 0===distribution[node.level]&&(distribution[node.level]={amount:0,nodes:{},minPos:0,nodeSpacing:0}),distribution[node.level].amount+=1,distribution[node.level].nodes[nodeId]=node);var maxCount=0;for(level in distribution)distribution.hasOwnProperty(level)&&maxCount<distribution[level].amount&&(maxCount=distribution[level].amount);for(level in distribution)distribution.hasOwnProperty(level)&&(distribution[level].nodeSpacing=(maxCount+1)*this.constants.hierarchicalLayout.nodeSpacing,distribution[level].nodeSpacing/=distribution[level].amount+1,distribution[level].minPos=distribution[level].nodeSpacing-.5*(distribution[level].amount+1)*distribution[level].nodeSpacing);return distribution},exports._determineLevels=function(hubsize){var nodeId,node;for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],node.edges.length==hubsize&&(node.level=0));for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],0==node.level&&this._setLevel(1,node.edges,node.id))},exports._determineLevelsDirected=function(){var nodeId,node,firstNode,minLevel=1e4;firstNode=this.nodes[this.nodeIndices[0]],firstNode.level=minLevel,this._setLevelDirected(minLevel,firstNode.edges,firstNode.id);for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],minLevel=node.level<minLevel?node.level:minLevel);for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(node=this.nodes[nodeId],node.level-=minLevel)},exports._changeConstants=function(){this.constants.clustering.enabled=!1,this.constants.physics.barnesHut.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!0,this._loadSelectedForceSolver(),1==this.constants.smoothCurves.enabled&&(this.constants.smoothCurves.dynamic=!1),this._configureSmoothCurves();var config=this.constants.hierarchicalLayout;config.levelSeparation=Math.abs(config.levelSeparation),("RL"==config.direction||"DU"==config.direction)&&(config.levelSeparation*=-1),"RL"==config.direction||"LR"==config.direction?1==this.constants.smoothCurves.enabled&&(this.constants.smoothCurves.type="vertical"):1==this.constants.smoothCurves.enabled&&(this.constants.smoothCurves.type="horizontal")},exports._placeBranchNodes=function(edges,parentId,distribution,parentLevel){for(var i=0;i<edges.length;i++){var childNode=null;childNode=edges[i].toId==parentId?edges[i].from:edges[i].to;var nodeMoved=!1;"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?childNode.xFixed&&childNode.level>parentLevel&&(childNode.xFixed=!1,childNode.x=distribution[childNode.level].minPos,nodeMoved=!0):childNode.yFixed&&childNode.level>parentLevel&&(childNode.yFixed=!1,childNode.y=distribution[childNode.level].minPos,nodeMoved=!0),1==nodeMoved&&(distribution[childNode.level].minPos+=distribution[childNode.level].nodeSpacing,childNode.edges.length>1&&this._placeBranchNodes(childNode.edges,childNode.id,distribution,childNode.level))}},exports._setLevel=function(level,edges,parentId){for(var i=0;i<edges.length;i++){var childNode=null;childNode=edges[i].toId==parentId?edges[i].from:edges[i].to,(-1==childNode.level||childNode.level>level)&&(childNode.level=level,childNode.edges.length>1&&this._setLevel(level+1,childNode.edges,childNode.id))}},exports._setLevelDirected=function(level,edges,parentId){this.nodes[parentId].hierarchyEnumerated=!0;for(var childNode,direction,i=0;i<edges.length;i++)direction=1,edges[i].toId==parentId?(childNode=edges[i].from,direction=-1):childNode=edges[i].to,-1==childNode.level&&(childNode.level=level+direction);for(var i=0;i<edges.length;i++)childNode=edges[i].toId==parentId?edges[i].from:edges[i].to,childNode.edges.length>1&&childNode.hierarchyEnumerated===!1&&this._setLevelDirected(childNode.level,childNode.edges,childNode.id)},exports._restoreNodes=function(){for(var nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(this.nodes[nodeId].xFixed=!1,this.nodes[nodeId].yFixed=!1)}},function(module){function webpackContext(req){throw new Error("Cannot find module '"+req+"'.")}webpackContext.keys=function(){return[]},webpackContext.resolve=webpackContext,module.exports=webpackContext,webpackContext.id=67},function(module,exports){exports._calculateNodeForces=function(){var dx,dy,distance,fx,fy,combinedClusterSize,repulsingForce,node1,node2,i,j,nodes=this.calculationNodes,nodeIndices=this.calculationNodeIndices,a_base=-2/3,b=4/3,nodeDistance=this.constants.physics.repulsion.nodeDistance,minimumDistance=nodeDistance;for(i=0;i<nodeIndices.length-1;i++)for(node1=nodes[nodeIndices[i]],j=i+1;j<nodeIndices.length;j++){node2=nodes[nodeIndices[j]],combinedClusterSize=node1.clusterSize+node2.clusterSize-2,dx=node2.x-node1.x,dy=node2.y-node1.y,distance=Math.sqrt(dx*dx+dy*dy),0==distance&&(distance=.1*Math.random(),dx=distance),minimumDistance=0==combinedClusterSize?nodeDistance:nodeDistance*(1+combinedClusterSize*this.constants.clustering.distanceAmplification);var a=a_base/minimumDistance;2*minimumDistance>distance&&(repulsingForce=.5*minimumDistance>distance?1:a*distance+b,repulsingForce*=0==combinedClusterSize?1:1+combinedClusterSize*this.constants.clustering.forceAmplification,repulsingForce/=Math.max(distance,.01*minimumDistance),fx=dx*repulsingForce,fy=dy*repulsingForce,node1.fx-=fx,node1.fy-=fy,node2.fx+=fx,node2.fy+=fy)}}},function(module,exports){exports._calculateNodeForces=function(){var dx,dy,distance,fx,fy,repulsingForce,node1,node2,i,j,nodes=this.calculationNodes,nodeIndices=this.calculationNodeIndices,nodeDistance=this.constants.physics.hierarchicalRepulsion.nodeDistance;for(i=0;i<nodeIndices.length-1;i++)for(node1=nodes[nodeIndices[i]],j=i+1;j<nodeIndices.length;j++)if(node2=nodes[nodeIndices[j]],node1.level==node2.level){dx=node2.x-node1.x,dy=node2.y-node1.y,distance=Math.sqrt(dx*dx+dy*dy);var steepness=.05;repulsingForce=nodeDistance>distance?-Math.pow(steepness*distance,2)+Math.pow(steepness*nodeDistance,2):0,0==distance?distance=.01:repulsingForce/=distance,fx=dx*repulsingForce,fy=dy*repulsingForce,node1.fx-=fx,node1.fy-=fy,node2.fx+=fx,node2.fy+=fy}},exports._calculateHierarchicalSpringForces=function(){for(var edgeLength,edge,edgeId,dx,dy,fx,fy,springForce,distance,edges=this.edges,nodes=this.calculationNodes,nodeIndices=this.calculationNodeIndices,i=0;i<nodeIndices.length;i++){var node1=nodes[nodeIndices[i]];node1.springFx=0,node1.springFy=0}for(edgeId in edges)if(edges.hasOwnProperty(edgeId)&&(edge=edges[edgeId],edge.connected&&this.nodes.hasOwnProperty(edge.toId)&&this.nodes.hasOwnProperty(edge.fromId)))if(edgeLength=edge.physics.springLength,edgeLength+=(edge.to.clusterSize+edge.from.clusterSize-2)*this.constants.clustering.edgeGrowth,dx=edge.from.x-edge.to.x,dy=edge.from.y-edge.to.y,distance=Math.sqrt(dx*dx+dy*dy),0==distance&&(distance=.01),springForce=this.constants.physics.springConstant*(edgeLength-distance)/distance,fx=dx*springForce,fy=dy*springForce,edge.to.level!=edge.from.level)edge.to.springFx-=fx,edge.to.springFy-=fy,edge.from.springFx+=fx,edge.from.springFy+=fy;else{var factor=.5;edge.to.fx-=factor*fx,edge.to.fy-=factor*fy,edge.from.fx+=factor*fx,edge.from.fy+=factor*fy}var springFx,springFy,springForce=1;for(i=0;i<nodeIndices.length;i++){var node=nodes[nodeIndices[i]];springFx=Math.min(springForce,Math.max(-springForce,node.springFx)),springFy=Math.min(springForce,Math.max(-springForce,node.springFy)),node.fx+=springFx,node.fy+=springFy}var totalFx=0,totalFy=0;for(i=0;i<nodeIndices.length;i++){var node=nodes[nodeIndices[i]];totalFx+=node.fx,totalFy+=node.fy}var correctionFx=totalFx/nodeIndices.length,correctionFy=totalFy/nodeIndices.length;for(i=0;i<nodeIndices.length;i++){var node=nodes[nodeIndices[i]];node.fx-=correctionFx,node.fy-=correctionFy}}},function(module,exports){exports._calculateNodeForces=function(){if(0!=this.constants.physics.barnesHut.gravitationalConstant){var node,nodes=this.calculationNodes,nodeIndices=this.calculationNodeIndices,nodeCount=nodeIndices.length;this._formBarnesHutTree(nodes,nodeIndices);for(var barnesHutTree=this.barnesHutTree,i=0;nodeCount>i;i++)node=nodes[nodeIndices[i]],node.options.mass>0&&(this._getForceContribution(barnesHutTree.root.children.NW,node),this._getForceContribution(barnesHutTree.root.children.NE,node),this._getForceContribution(barnesHutTree.root.children.SW,node),this._getForceContribution(barnesHutTree.root.children.SE,node))}},exports._getForceContribution=function(parentBranch,node){if(parentBranch.childrenCount>0){var dx,dy,distance;if(dx=parentBranch.centerOfMass.x-node.x,dy=parentBranch.centerOfMass.y-node.y,distance=Math.sqrt(dx*dx+dy*dy),distance*parentBranch.calcSize>this.constants.physics.barnesHut.thetaInverted){0==distance&&(distance=.1*Math.random(),dx=distance);var gravityForce=this.constants.physics.barnesHut.gravitationalConstant*parentBranch.mass*node.options.mass/(distance*distance*distance),fx=dx*gravityForce,fy=dy*gravityForce;node.fx+=fx,node.fy+=fy}else if(4==parentBranch.childrenCount)this._getForceContribution(parentBranch.children.NW,node),this._getForceContribution(parentBranch.children.NE,node),this._getForceContribution(parentBranch.children.SW,node),this._getForceContribution(parentBranch.children.SE,node);else if(parentBranch.children.data.id!=node.id){0==distance&&(distance=.5*Math.random(),dx=distance);var gravityForce=this.constants.physics.barnesHut.gravitationalConstant*parentBranch.mass*node.options.mass/(distance*distance*distance),fx=dx*gravityForce,fy=dy*gravityForce;node.fx+=fx,node.fy+=fy}}},exports._formBarnesHutTree=function(nodes,nodeIndices){for(var node,nodeCount=nodeIndices.length,minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=-Number.MAX_VALUE,maxY=-Number.MAX_VALUE,i=0;nodeCount>i;i++){var x=nodes[nodeIndices[i]].x,y=nodes[nodeIndices[i]].y;nodes[nodeIndices[i]].options.mass>0&&(minX>x&&(minX=x),x>maxX&&(maxX=x),minY>y&&(minY=y),y>maxY&&(maxY=y))}var sizeDiff=Math.abs(maxX-minX)-Math.abs(maxY-minY);sizeDiff>0?(minY-=.5*sizeDiff,maxY+=.5*sizeDiff):(minX+=.5*sizeDiff,maxX-=.5*sizeDiff);var minimumTreeSize=1e-5,rootSize=Math.max(minimumTreeSize,Math.abs(maxX-minX)),halfRootSize=.5*rootSize,centerX=.5*(minX+maxX),centerY=.5*(minY+maxY),barnesHutTree={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:centerX-halfRootSize,maxX:centerX+halfRootSize,minY:centerY-halfRootSize,maxY:centerY+halfRootSize},size:rootSize,calcSize:1/rootSize,children:{data:null},maxWidth:0,level:0,childrenCount:4}};for(this._splitBranch(barnesHutTree.root),i=0;nodeCount>i;i++)node=nodes[nodeIndices[i]],node.options.mass>0&&this._placeInTree(barnesHutTree.root,node);this.barnesHutTree=barnesHutTree},exports._updateBranchMass=function(parentBranch,node){var totalMass=parentBranch.mass+node.options.mass,totalMassInv=1/totalMass;parentBranch.centerOfMass.x=parentBranch.centerOfMass.x*parentBranch.mass+node.x*node.options.mass,parentBranch.centerOfMass.x*=totalMassInv,parentBranch.centerOfMass.y=parentBranch.centerOfMass.y*parentBranch.mass+node.y*node.options.mass,parentBranch.centerOfMass.y*=totalMassInv,parentBranch.mass=totalMass;var biggestSize=Math.max(Math.max(node.height,node.radius),node.width);parentBranch.maxWidth=parentBranch.maxWidth<biggestSize?biggestSize:parentBranch.maxWidth},exports._placeInTree=function(parentBranch,node,skipMassUpdate){(1!=skipMassUpdate||void 0===skipMassUpdate)&&this._updateBranchMass(parentBranch,node),parentBranch.children.NW.range.maxX>node.x?parentBranch.children.NW.range.maxY>node.y?this._placeInRegion(parentBranch,node,"NW"):this._placeInRegion(parentBranch,node,"SW"):parentBranch.children.NW.range.maxY>node.y?this._placeInRegion(parentBranch,node,"NE"):this._placeInRegion(parentBranch,node,"SE")},exports._placeInRegion=function(parentBranch,node,region){switch(parentBranch.children[region].childrenCount){case 0:parentBranch.children[region].children.data=node,parentBranch.children[region].childrenCount=1,this._updateBranchMass(parentBranch.children[region],node);break;case 1:parentBranch.children[region].children.data.x==node.x&&parentBranch.children[region].children.data.y==node.y?(node.x+=Math.random(),node.y+=Math.random()):(this._splitBranch(parentBranch.children[region]),this._placeInTree(parentBranch.children[region],node));break;case 4:this._placeInTree(parentBranch.children[region],node)}},exports._splitBranch=function(parentBranch){var containedNode=null;1==parentBranch.childrenCount&&(containedNode=parentBranch.children.data,parentBranch.mass=0,parentBranch.centerOfMass.x=0,parentBranch.centerOfMass.y=0),parentBranch.childrenCount=4,parentBranch.children.data=null,this._insertRegion(parentBranch,"NW"),this._insertRegion(parentBranch,"NE"),this._insertRegion(parentBranch,"SW"),this._insertRegion(parentBranch,"SE"),null!=containedNode&&this._placeInTree(parentBranch,containedNode)},exports._insertRegion=function(parentBranch,region){var minX,maxX,minY,maxY,childSize=.5*parentBranch.size;switch(region){case"NW":minX=parentBranch.range.minX,maxX=parentBranch.range.minX+childSize,minY=parentBranch.range.minY,maxY=parentBranch.range.minY+childSize;break;case"NE":minX=parentBranch.range.minX+childSize,maxX=parentBranch.range.maxX,minY=parentBranch.range.minY,maxY=parentBranch.range.minY+childSize;break;case"SW":minX=parentBranch.range.minX,maxX=parentBranch.range.minX+childSize,minY=parentBranch.range.minY+childSize,maxY=parentBranch.range.maxY;break;case"SE":minX=parentBranch.range.minX+childSize,maxX=parentBranch.range.maxX,minY=parentBranch.range.minY+childSize,maxY=parentBranch.range.maxY}parentBranch.children[region]={centerOfMass:{x:0,y:0},mass:0,range:{minX:minX,maxX:maxX,minY:minY,maxY:maxY},size:.5*parentBranch.size,calcSize:2*parentBranch.calcSize,children:{data:null},maxWidth:0,level:parentBranch.level+1,childrenCount:0}},exports._drawTree=function(ctx,color){void 0!==this.barnesHutTree&&(ctx.lineWidth=1,this._drawBranch(this.barnesHutTree.root,ctx,color))},exports._drawBranch=function(branch,ctx,color){void 0===color&&(color="#FF0000"),4==branch.childrenCount&&(this._drawBranch(branch.children.NW,ctx),this._drawBranch(branch.children.NE,ctx),this._drawBranch(branch.children.SE,ctx),this._drawBranch(branch.children.SW,ctx)),ctx.strokeStyle=color,ctx.beginPath(),ctx.moveTo(branch.range.minX,branch.range.minY),ctx.lineTo(branch.range.maxX,branch.range.minY),ctx.stroke(),ctx.beginPath(),ctx.moveTo(branch.range.maxX,branch.range.minY),ctx.lineTo(branch.range.maxX,branch.range.maxY),ctx.stroke(),ctx.beginPath(),ctx.moveTo(branch.range.maxX,branch.range.maxY),ctx.lineTo(branch.range.minX,branch.range.maxY),ctx.stroke(),ctx.beginPath(),ctx.moveTo(branch.range.minX,branch.range.maxY),ctx.lineTo(branch.range.minX,branch.range.minY),ctx.stroke()}},function(module){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children=[],module.webpackPolyfill=1),module}}])}),function(window,document,undefined){function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments;for(message=prefix+template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1);return index+2<templateArgs.length?toDebugString(templateArgs[index+2]):match}),message=message+"\nhttp://errors.angularjs.org/1.3.13/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(toDebugString(arguments[i]));return new ErrorConstructor(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return obj.nodeType===NODE_TYPE_ELEMENT&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;length>key;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);return obj}function sortedKeys(obj){return Object.keys(obj).sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){for(var h=dst.$$hashKey,i=1,ii=arguments.length;ii>i;i++){var obj=arguments[i];if(obj)for(var keys=Object.keys(obj),j=0,jj=keys.length;jj>j;j++){var key=keys[j];dst[key]=obj[key]}}return setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!==value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),value}function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(stackSource=stackSource||[],stackDest=stackDest||[],isObject(source)){var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];stackSource.push(source),stackDest.push(destination)}var result;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)result=copy(source[i],null,stackSource,stackDest),isObject(source[i])&&(stackSource.push(source[i]),stackDest.push(result)),destination.push(result)}else{var h=destination.$$hashKey;isArray(destination)?destination.length=0:forEach(destination,function(value,key){delete destination[key]});for(var key in source)source.hasOwnProperty(key)&&(result=copy(source[key],null,stackSource,stackDest),isObject(source[key])&&(stackSource.push(source[key]),stackDest.push(result)),destination[key]=result);setHashKey(destination,h)}}else if(destination=source,source)if(isArray(source))destination=copy(source,[],stackSource,stackDest);else if(isDate(source))destination=new Date(source.getTime());else if(isRegExp(source))destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),destination.lastIndex=source.lastIndex;else if(isObject(source)){var emptyObject=Object.create(Object.getPrototypeOf(source));destination=copy(source,emptyObject,stackSource,stackDest)}return destination}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;ii>i;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)("$"!==key.charAt(0)||"$"!==key.charAt(1))&&(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)?equals(o1.getTime(),o2.getTime()):!1;if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:(isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty))}function fromJson(json){return isString(json)?JSON.parse(json):json}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(element=jqLite(element),i=0;ii>i;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.attr(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement&&(config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={});var defaultConfig={strictDi:!1};config=extend(defaultConfig,config);var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},void(isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()))}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){var originalCleanData;bindJQueryFired||(jQuery=window.jQuery,jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){var events;if(skipDestroyOnNextJQueryCleanData)skipDestroyOnNextJQueryCleanData=!1;else for(var elem,i=0;null!=(elem=elems[i]);i++)events=jQuery._data(elem,"events"),events&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0)}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){var node=nodes[0],endNode=nodes[nodes.length-1],blockNodes=[node];do{if(node=node.nextSibling,!node)break;blockNodes.push(node)}while(node!==endNode);return jqLite(blockNodes)}function createMap(){return Object.create(null)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this
}};return configFn&&config(configFn),moduleInstance})}})}function serializeObject(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(val=toJsonReplacer(key,val),isObject(val)){if(seen.indexOf(val)>=0)return"<<already seen>>";seen.push(val)}return val})}function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?serializeObject(obj):obj}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$asyncCallback:$$AsyncCallbackProvider,$$jqLite:$$jqLiteProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;l>i;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type)forEach(type.split(" "),function(type){if(isDefined(fn)){var listenerFns=events[type];if(arrayRemove(listenerFns||[],fn),listenerFns&&listenerFns.length>0)return}removeEventListenerFn(element,type,handle),delete events[type]});else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;length>i;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType==NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;ii>i;i++)if((value=jqLite.data(element,names[i]))!==undefined)return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){win=win||window,"complete"===win.document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(element,name){var nodeName=element.nodeName;return("INPUT"===nodeName||"TEXTAREA"===nodeName)&&ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===!0},eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;eventFnsLength>i;i++)event.isImmediatePropagationStopped()||eventFns[i].call(element,event)}};return eventHandler.elem=element,eventHandler}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function anonFn(fn){var fnText=fn.toString().replace(STRIP_COMMENTS,""),args=fnText.match(FN_ARGS);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,fnText,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==!1?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),!1)}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;ii>i;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var length,i,key,args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals,serviceName){var instance=Object.create((isArray(Type)?Type[Type.length-1]:Type).prototype||null),returnedValue=invoke(Type,instance,locals,serviceName);return isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=strictDi===!0;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,function(element){return"a"===nodeName_(element)?(result=element,!0):void 0}),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0],style=$window.getComputedStyle(elem);offset="fixed"!==style.position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){(newVal!==oldVal||""!==newVal)&&jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})}),scroll}]}function $$AsyncCallbackProvider(){this.$get=["$$rAF","$timeout",function($$rAF,$timeout){return $$rAF.supported?function(fn){return $$rAF(fn)}:function(fn){return $timeout(fn,0,!1)}}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index+1)}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function cacheStateAndFireUrlChange(){cacheState(),fireUrlChange()}function cacheState(){cachedState=window.history.state,cachedState=isUndefined(cachedState)?null:cachedState,equals(cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){(lastBrowserUrl!==self.url()||lastHistoryState!==cachedState)&&(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),reloadLocation=null;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase||(reloadLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),self}return reloadLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1,lastCachedState=null;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=encodeURIComponent(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=encodeURIComponent(name)+"="+encodeURIComponent(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}if(!isUndefined(value))return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName){var LOCAL_REGEXP=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,bindings={};return forEach(scope,function(definition,scopeName){var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition);bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName}}),bindings}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"EA",isObject(directive.scope)&&(directive.$$isolateBindings=parseIsolateBindings(directive.scope,directive.name)),directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){node.nodeType==NODE_TYPE_TEXT&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement));var $linkNode;if($linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&node.toString().match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;ii>i;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn,nodeLinkFn.elementTranscludeOnThisElement):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||(transcludedScope=scope.$new(!1,containingScope),transcludedScope.$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})};return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;attr=nAttrs[j],name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()
}));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");directiveIsMultiElement(directiveNName)&&ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,(isNgAttr||!attrs.hasOwnProperty(nName))&&(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(className=node.className,isObject(className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType==NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value,match,retrievalMethod="data",optional=!1,$searchElement=$element;if(isString(require)){if(match=require.match(REQUIRE_PREFIX_REGEXP),require=require.substring(match[0].length),match[3]&&(match[1]?match[3]=null:match[1]=match[3]),"^"===match[1]?retrievalMethod="inheritedData":"^^"===match[1]&&(retrievalMethod="inheritedData",$searchElement=$element.parent()),"?"===match[2]&&(optional=!0),value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require])&&(value=value.instance),value=value||$searchElement[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value||null}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(directiveName,require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement){var transcludeControllers;return isScope(scope)||(futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}var i,ii,linkFn,controller,isolateScope,elementControllers,transcludeFn,$element,attrs;if(compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),newIsolateScopeDirective&&(isolateScope=scope.$new(!0)),boundTranscludeFn&&(transcludeFn=controllersBoundTransclude,transcludeFn.$$boundTransclude=boundTranscludeFn),controllerDirectives&&(controllers={},elementControllers={},forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals,!0,directive.controllerAs),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance.instance),controllers[directive.name]=controllerInstance})),newIsolateScopeDirective){compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0);var isolateScopeController=controllers&&controllers[newIsolateScopeDirective.name],isolateBindingContext=isolateScope;isolateScopeController&&isolateScopeController.identifier&&newIsolateScopeDirective.bindToController===!0&&(isolateBindingContext=isolateScopeController.instance),forEach(isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,attrName=definition.attrName,optional=definition.optional,mode=definition.mode;switch(mode){case"@":attrs.$observe(attrName,function(value){isolateBindingContext[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateBindingContext[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=isolateBindingContext[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateBindingContext[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,isolateBindingContext[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=isolateBindingContext[scopeName]):isolateBindingContext[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0;var unwatch;unwatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),isolateScope.$on("$destroy",unwatch);break;case"&":parentGet=$parse(attrs[attrName]),isolateBindingContext[scopeName]=function(locals){return parentGet(scope,locals)}}})}for(controllers&&(forEach(controllers,function(controller){controller()}),controllers=null),i=0,ii=preLinkFns.length;ii>i;i++)linkFn=preLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)linkFn=postLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,controllers,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.elementTranscludeOnThisElement=hasElementTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)if(directive=directives[i],directive.multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest($sce.getTrustedResourceUrl(templateUrl)).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=getTrustedContext(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),jqLite(newNode).data(jqLite(firstElementToRemove).data()),jQuery?(skipDestroyOnNextJQueryCleanData=!0,jQuery.cleanData([firstElementToRemove])):delete jqLite.cache[firstElementToRemove[jqLite.expando]];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}var Attributes=function(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;l>i;i++)key=keys[i],this[key]=attributesToCopy[key]}else this.$attr={};this.$$element=element};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(node,key),observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),"a"===nodeName&&"href"===key||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key){for(var result="",trimmedSrcset=trim(value),srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;nbrUrisWith2parts>i;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){!listeners.$$inter&&attrs.hasOwnProperty(key)&&fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(1>=i)return jqNodes;for(;i--;){var node=jqNodes[i];node.nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1)}return jqNodes}function $ControllerProvider(){var controllers={},globals=!1,CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=later===!0,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(match=expression.match(CNTRL_REG),!match)throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):undefined),assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;return instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend(function(){return $injector.invoke(expression,instance,locals,constructor),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(){$log.error.apply($log,arguments)}}]}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||isJsonLike(tempData))&&(data=fromJson(tempData))}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){var key,val,i,parsed=createMap();return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response);return resp.data=response.data?transformData(response.data,response.headers,response.status,config.transformResponse):response.data,isSuccess(response.status)?resp:$q.reject(resp)}function executeHeaderFns(headers){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?(headerContent=headerFn(),null!=headerContent&&(processedHeaders[header]=headerContent)):processedHeaders[header]=headerFn}),processedHeaders}function mergeHeaders(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders)}if(!angular.isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},requestConfig);config.headers=mergeHeaders(requestConfig),config.method=uppercase(config.method);var serverRequest=function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)
}),promise},promise}function createShortMethods(){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData){function done(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(cachedResp=cache.get(url),isDefined(cachedResp)?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(v=isDate(v)?v.toISOString():toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),parts.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+parts.join("&")),url}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http}]}function createXhr(){return new window.XMLHttpRequest}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId!==undefined&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr();xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];textLength>index;){if(-1==(startIndex=text.indexOf(startSymbol,index))||-1==(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);if(!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;ii>i;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)},stringify=function(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;ii>i;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener,objectEquality){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue},objectEquality)}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q",function($rootScope,$window,$q,$$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\xa4",posSuf:"",negPre:"(\xa4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,rewrittenUrl=(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutHashUrl,withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url);"#"===withoutBaseUrl.charAt(0)?(withoutHashUrl=beginsWith(hashPrefix,withoutBaseUrl),isUndefined(withoutHashUrl)&&(withoutHashUrl=withoutBaseUrl)):withoutHashUrl=this.$$html5?withoutBaseUrl:"",parseAppUrl(withoutHashUrl,this),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url){return stripHash(appBase)==stripHash(url)?(this.$$parse(url),!0):!1}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!=event.which&&2!=event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){$rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest()}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function isConstant(exp){return exp.constant}function setter(obj,locals,path,setValue,fullExp){ensureSafeObject(obj,fullExp),ensureSafeObject(locals,fullExp);for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=0===i&&locals&&locals[key]||obj[key];propertyObj||(propertyObj={},obj[key]=propertyObj),obj=ensureSafeObject(propertyObj,fullExp)}return key=ensureSafeMemberName(element.shift(),fullExp),ensureSafeObject(obj[key],fullExp),obj[key]=setValue,setValue}function isPossiblyDangerousMemberName(name){return"constructor"==name}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,expensiveChecks){ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp);var eso=function(o){return ensureSafeObject(o,fullExp)},eso0=expensiveChecks||isPossiblyDangerousMemberName(key0)?eso:identity,eso1=expensiveChecks||isPossiblyDangerousMemberName(key1)?eso:identity,eso2=expensiveChecks||isPossiblyDangerousMemberName(key2)?eso:identity,eso3=expensiveChecks||isPossiblyDangerousMemberName(key3)?eso:identity,eso4=expensiveChecks||isPossiblyDangerousMemberName(key4)?eso:identity;return function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=eso0(pathVal[key0]),key1?null==pathVal?undefined:(pathVal=eso1(pathVal[key1]),key2?null==pathVal?undefined:(pathVal=eso2(pathVal[key2]),key3?null==pathVal?undefined:(pathVal=eso3(pathVal[key3]),key4?null==pathVal?undefined:pathVal=eso4(pathVal[key4]):pathVal):pathVal):pathVal):pathVal)}}function getterFnWithEnsureSafeObject(fn,fullExpression){return function(s,l){return fn(s,l,ensureSafeObject,fullExpression)}}function getterFn(path,options,fullExp){var expensiveChecks=options.expensiveChecks,getterFnCache=expensiveChecks?getterFnCacheExpensive:getterFnCacheDefault,fn=getterFnCache[path];if(fn)return fn;var pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,expensiveChecks):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,expensiveChecks)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="";expensiveChecks&&(code+="s = eso(s, fe);\nl = eso(l, fe);\n");var needsEnsureSafeObject=expensiveChecks;forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp);var lookupJs=(index?"s":'((l&&l.hasOwnProperty("'+key+'"))?l:s)')+"."+key;(expensiveChecks||isPossiblyDangerousMemberName(key))&&(lookupJs="eso("+lookupJs+", fe)",needsEnsureSafeObject=!0),code+="if(s == null) return undefined;\ns="+lookupJs+";\n"}),code+="return s;";var evaledFnGetter=new Function("s","l","eso","fe",code);evaledFnGetter.toString=valueFn(code),needsEnsureSafeObject&&(evaledFnGetter=getterFnWithEnsureSafeObject(evaledFnGetter,fullExp)),fn=evaledFnGetter}return fn.sharedGetter=!0,fn.assign=function(self,value,locals){return setter(self,locals,path,value,path)},getterFnCache[path]=fn,fn}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cacheDefault=createMap(),cacheExpensive=createMap();this.$get=["$filter","$sniffer",function($filter,$sniffer){function wrapSharedExpression(exp){var wrapped=exp;return exp.sharedGetter&&(wrapped=function(self,locals){return exp(self,locals)},wrapped.literal=exp.literal,wrapped.constant=exp.constant,wrapped.assign=exp.assign),wrapped}function collectExpressionInputs(inputs,list){for(var i=0,ii=inputs.length;ii>i;i++){var input=inputs[i];input.constant||(input.inputs?collectExpressionInputs(input.inputs,list):-1===list.indexOf(input)&&list.push(input))}return list}function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:"object"==typeof newValue&&(newValue=getValueOf(newValue),"object"==typeof newValue)?!1:newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression){var lastResult,inputExpressions=parsedExpression.$$inputs||(parsedExpression.$$inputs=collectExpressionInputs(parsedExpression.inputs,[]));if(1===inputExpressions.length){var oldInputValue=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValue)||(lastResult=parsedExpression(scope),oldInputValue=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality)}for(var oldInputValueOfValues=[],i=0,ii=inputExpressions.length;ii>i;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;ii>i;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope)),lastResult},listener,objectEquality)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality)}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(){isFunction(listener)&&listener.apply(this,arguments),unwatch()},objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,regularWatch=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate,fn=regularWatch?function(scope,locals){var value=parsedExpression(scope,locals);return interceptorFn(value,scope,locals)}:function(scope,locals){var value=parsedExpression(scope,locals),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,fn.inputs=[parsedExpression]),fn}var $parseOptions={csp:$sniffer.csp,expensiveChecks:!1},$parseOptionsExpensive={csp:$sniffer.csp,expensiveChecks:!0};return function(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":cacheKey=exp=exp.trim();var cache=expensiveChecks?cacheExpensive:cacheDefault;if(parsedExpression=cache[cacheKey],!parsedExpression){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions),parser=new Parser(lexer,$filter,parseOptions);parsedExpression=parser.parse(exp),parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?(parsedExpression=wrapSharedExpression(parsedExpression),parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate):parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function callOnce(self,resolveFn,rejectFn){function wrap(fn){return function(value){called||(called=!0,fn.call(self,value))}}var called=!1;return[wrap(resolveFn),wrap(rejectFn)]}function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function processQueue(state){var fn,promise,pending;pending=state.pending,state.processScheduled=!1,state.pending=undefined;for(var i=0,ii=pending.length;ii>i;++i){promise=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?promise.resolve(fn(state.value)):1===state.status?promise.resolve(state.value):promise.reject(state.value)}catch(e){promise.reject(e),exceptionHandler(e)}}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){processQueue(state)}))}function Deferred(){this.promise=new Promise,this.resolve=simpleBind(this,this.resolve),this.reject=simpleBind(this,this.reject),this.notify=simpleBind(this,this.notify)}function all(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var $qMinErr=minErr("$q",TypeError),defer=function(){return new Deferred};Promise.prototype={then:function(onFulfilled,onRejected,progressBack){var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}},Deferred.prototype={resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))
},$$resolve:function(val){var then,fns;fns=callOnce(this,this.$$resolve,this.$$reject);try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,fns[0],fns[1],this.notify)):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){fns[1](e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;ii>i;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}};var reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},$Q=function Q(resolver){function resolveFn(value){deferred.resolve(value)}function rejectFn(reason){deferred.reject(reason)}if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);if(!(this instanceof Q))return new Q(resolver);var deferred=new Deferred;return resolver(resolveFn,rejectFn),deferred.promise};return $Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.all=all,$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate,parent){function destroyChild(){child.$$destroyed=!0}var child;return parent=parent||this,isolate?(child=new Scope,child.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=nextUid(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!=this)&&child.$on("$destroy",destroyChild),child},$watch:function(watchExp,listener,objectEquality){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(!isUndefined(newValue)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)oldItem=oldValue[i],newItem=newValue[i],bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?(bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[key]=newItem)):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)newValue.hasOwnProperty(key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==$rootScope){for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:expr,locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){function $applyAsyncExpression(){scope.$eval(expr)}var scope=this;expr&&applyAsyncQueue.push($applyAsyncExpression),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&8>msie)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hasEvent:function(event){if("input"===event&&11>=msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}function $TemplateRequestProvider(){this.$get=["$templateCache","$http","$q",function($templateCache,$http,$q){function handleRequestFn(tpl,ignoreRequestError){function handleError(resp){if(!ignoreRequestError)throw $compileMinErr("tpload","Failed to load template: {0}",tpl);return $q.reject(resp)}handleRequestFn.totalPendingRequests++;var transformResponse=$http.defaults&&$http.defaults.transformResponse;isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null);var httpOptions={cache:$templateCache,transformResponse:transformResponse};return $http.get(tpl,httpOptions)["finally"](function(){handleRequestFn.totalPendingRequests--}).then(function(response){return response.data},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)");matcher.test(bindingName)&&matches.push(binding)}else-1!=bindingName.indexOf(expression)&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var predicateFn,matchAgainstAnyProp;switch(typeof expression){case"function":predicateFn=expression;break;case"boolean":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,matchAgainstAnyProp);break;default:return array}return array.filter(predicateFn)}}function createPredicateFn(expression,comparator,matchAgainstAnyProp){var predicateFn,shouldMatchPrimitives=isObject(expression)&&"$"in expression;return comparator===!0?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return isObject(actual)||isObject(expected)?!1:(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected))}),predicateFn=function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression.$,comparator,!1):deepCompare(item,expression,comparator,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=typeof actual,expectedType=typeof expected;if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,!0))return!0;return dontMatchWholeObject?!1:deepCompare(actual,expected,comparator,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)){var matchAnyProperty="$"===key,actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isFinite(number)||isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?number=0:(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&1>number&&(formatedText=number.toFixed(fractionSize),number=parseFloat(formatedText));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac)),number=+(Math.round(+(number.toString()+"e"+fractionSize)).toString()+"e"+-fractionSize);var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return 0===number&&(isNegative=!1),parts.push(isNegative?pattern.negPre:pattern.posPre,formatedText,isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(4>=dayOfWeekOnFirst?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return timezone&&"UTC"===timezone&&(date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+date.getTimezoneOffset())),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}function limitToFilter(){return function(input,limit){return isNumber(input)&&(input=input.toString()),isArray(input)||isString(input)?(limit=1/0===Math.abs(Number(limit))?Number(limit):int(limit),limit?limit>0?input.slice(0,limit):input.slice(limit):isString(input)?"":[]):input}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return descending?function(a,b){return comp(b,a)
}:comp}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectToString(value){return null===value?"null":"function"==typeof value.valueOf&&(value=value.valueOf(),isPrimitive(value))?value:"function"==typeof value.toString&&(value=value.toString(),isPrimitive(value))?value:""}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1===t2&&"object"===t1&&(v1=objectToString(v1),v2=objectToString(v2)),t1===t2?("string"===t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}return isArrayLike(array)?(sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],0===sortPredicate.length&&(sortPredicate=["+"]),sortPredicate=sortPredicate.map(function(predicate){var descending=!1,get=predicate||identity;if(isString(predicate)){if(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),""===predicate)return reverseComparator(compare,descending);if(get=$parse(predicate),get.constant){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key])},descending)}}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)}),slice.call(array).sort(reverseComparator(comparator,reverseOrder))):array}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function nullFormRenameControl(control,name){control.$name=name}function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[],parentForm=form.$$parentForm=element.parent().controller("form")||nullFormCtrl;form.$error={},form.$$success={},form.$pending=undefined,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,parentForm.$addControl(form),form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],form[newName]=control,control.$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control)},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];if(list){var index=list.indexOf(controller);-1===index&&list.push(controller)}else object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},parentForm:parentForm,$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,parentForm.$setSubmitted()}}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return 0/0}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return 0/0}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)?isDate(val)?val:parseDate(val):undefined}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var previousDate,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return"UTC"===timezone&&parsedDate.setMinutes(parsedDate.getMinutes()-parsedDate.getTimezoneOffset()),parsedDate}return undefined}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw $ngModelMinErr("datefmt","Expected `{0}` to be a date",value);if(isValidDate(value)){if(previousDate=value,previousDate&&"UTC"===timezone){var timezoneOffset=6e4*previousDate.getTimezoneOffset();previousDate=new Date(previousDate.getTime()+timezoneOffset)}return $filter("date")(value,format,timezone)}return previousDate=null,""}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0],nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);nativeValidation&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput&&!validity.typeMismatch?undefined:value})}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):undefined}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw $ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}),attr.min||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}if(attr.max||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||maxVal>=value},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(parseFn=$parse(expression),!parseFn.constant)throw minErr("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value===!1},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){if(isArray(classVal))return classVal;if(isString(classVal))return classVal.split(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes}return classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||{},classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}function addSetValidityMethod(context){function setValidity(validationErrorKey,state,controller){state===undefined?createAndSet("$pending",validationErrorKey,controller):unsetAndCleanup("$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)),ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=undefined,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?undefined:ctrl.$error[validationErrorKey]?!1:ctrl.$$success[validationErrorKey]?!0:null,toggleValidationCss(validationErrorKey,combinedState),parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}function createAndSet(name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=undefined)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,isValid===!0),cachedToggleClass(INVALID_CLASS+validationErrorKey,isValid===!1)}var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,parentForm=context.parentForm,$animate=context.$animate;classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=setValidity}function isObjectEmpty(obj){if(obj)for(var prop in obj)return!1;return!0}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=document.documentMode,noop.$inject=[],identity.$inject=[];var skipDestroyOnNextJQueryCleanData,isArray=Array.isArray,trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"));if(!active)try{new Function("")}catch(e){active=!0}return csp.isActive_=active},ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,NODE_TYPE_ELEMENT=1,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11,version={full:"1.3.13",major:1,minor:3,dot:13,codeName:"meticulous-riffleshuffle"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};forEach({data:jqLiteData,removeData:jqLiteRemoveData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){return name=camelCase(name),isDefined(value)?void(element.style[name]=value):element.style[name]},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){return isUndefined(value)?element.innerHTML:(jqLiteDealoc(element,!0),void(element.innerHTML=value))},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;nodeCount>i;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(nodeCount,1):nodeCount,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;nodeCount>i;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length;i--;){type=types[i];var eventFns=events[type];eventFns||(events[type]=[],"mouseenter"===type||"mouseleave"===type?jqLiteOn(element,MOUSE_EVENT_MAP[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!target.contains(related))&&handle(event,type)}):"$destroy"!==type&&addEventListenerFn(element,type,handle),eventFns=events[type]),eventFns.push(fn)}}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT){node=new JQLite(node);for(var i=0,ii=node.length;ii>i;i++){var child=node[i];element.appendChild(child)}}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode).eq(0).clone()[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;ii>i;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;ii>i;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){return 1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function($$q,$$asyncCallback,$rootScope){function runAnimationPostDigest(fn){var cancelFn,defer=$$q.defer();return defer.promise.$$cancelFn=function(){cancelFn&&cancelFn()},$rootScope.$$postDigest(function(){cancelFn=fn(function(){defer.resolve()})}),defer.promise}function resolveElementClasses(element,classes){var toAdd=[],toRemove=[],hasClasses=createMap();return forEach((element.attr("class")||"").split(/\s+/),function(className){hasClasses[className]=!0}),forEach(classes,function(status,className){var hasClass=hasClasses[className];status===!1&&hasClass?toRemove.push(className):status!==!0||hasClass||toAdd.push(className)}),toAdd.length+toRemove.length>0&&[toAdd.length?toAdd:null,toRemove.length?toRemove:null]}function cachedClassManipulation(cache,classes,op){for(var i=0,ii=classes.length;ii>i;++i){var className=classes[i];cache[className]=op}}function asyncPromise(){return currentDefer||(currentDefer=$$q.defer(),$$asyncCallback(function(){currentDefer.resolve(),currentDefer=null})),currentDefer.promise}function applyStyles(element,options){if(angular.isObject(options)){var styles=extend(options.from||{},options.to||{});element.css(styles)}}var currentDefer;return{animate:function(element,from,to){return applyStyles(element,{from:from,to:to}),asyncPromise()},enter:function(element,parent,after,options){return applyStyles(element,options),after?after.after(element):parent.prepend(element),asyncPromise()},leave:function(element){return element.remove(),asyncPromise()},move:function(element,parent,after,options){return this.enter(element,parent,after,options)},addClass:function(element,className,options){return this.setClass(element,className,[],options)},$$addClassImmediately:function(element,className,options){return element=jqLite(element),className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),applyStyles(element,options),asyncPromise()},removeClass:function(element,className,options){return this.setClass(element,[],className,options)},$$removeClassImmediately:function(element,className,options){return element=jqLite(element),className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),applyStyles(element,options),asyncPromise()},setClass:function(element,add,remove,options){var self=this,STORAGE_KEY="$$animateClasses",createdCache=!1;element=jqLite(element);var cache=element.data(STORAGE_KEY);cache?options&&cache.options&&(cache.options=angular.extend(cache.options||{},options)):(cache={classes:{},options:options},createdCache=!0);var classes=cache.classes;return add=isArray(add)?add:add.split(" "),remove=isArray(remove)?remove:remove.split(" "),cachedClassManipulation(classes,add,!0),cachedClassManipulation(classes,remove,!1),createdCache&&(cache.promise=runAnimationPostDigest(function(done){var cache=element.data(STORAGE_KEY);if(element.removeData(STORAGE_KEY),cache){var classes=resolveElementClasses(element,cache.classes);classes&&self.$$setClassImmediately(element,classes[0],classes[1],cache.options)}done()}),element.data(STORAGE_KEY,cache)),cache.promise},$$setClassImmediately:function(element,add,remove,options){return add&&this.$$addClassImmediately(element,add),remove&&this.$$removeClassImmediately(element,remove),applyStyles(element,options),asyncPromise()},enabled:noop,cancel:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i,$controllerMinErr=minErr("$controller"),APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location"),locationPrototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=null!==path?path.toString():"","/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");search=copy(search,{}),forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this
}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse"),CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,CONSTANTS=createMap();forEach({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(constantGetter,name){constantGetter.constant=constantGetter.literal=constantGetter.sharedGetter=!0,CONSTANTS[name]=constantGetter}),CONSTANTS["this"]=function(self){return self},CONSTANTS["this"].sharedGetter=!0;var OPERATORS=extend(createMap(),{"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"!":function(self,locals,a){return!a(self,locals)},"=":!0,"|":!0}),ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(ch))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||"\xa0"===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){for(var start=this.index;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(!this.isIdent(ch)&&!this.isNumber(ch))break;this.index++}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=extend(function(){return 0},{sharedGetter:!0,constant:!0}),Parser.prototype={constructor:Parser,parse:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.peek().identifier&&this.peek().text in CONSTANTS?primary=CONSTANTS[this.consume().text]:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.tokens.shift(),token):!1},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},unaryFn:function(op,right){var fn=OPERATORS[op];return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant,inputs:[right]})},binaryFn:function(left,op,right,isBranching){var fn=OPERATORS[op];return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant,inputs:!isBranching&&[left,right]})},identifier:function(){for(var id=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)id+=this.consume().text+this.consume().text;return getterFn(id,this.options,this.text)},constant:function(){var value=this.consume().value;return extend(function(){return value},{constant:!0,literal:!0})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0,ii=statements.length;ii>i;i++)value=statements[i](self,locals);return value}},filterChain:function(){for(var token,left=this.expression();token=this.expect("|");)left=this.filter(left);return left},filter:function(inputFn){var argsFn,args,fn=this.$filter(this.consume().text);if(this.peek(":"))for(argsFn=[],args=[];this.expect(":");)argsFn.push(this.expression());var inputs=[inputFn].concat(argsFn||[]);return extend(function(self,locals){var input=inputFn(self,locals);if(args){args[0]=input;for(var i=argsFn.length;i--;)args[i+1]=argsFn[i](self,locals);return fn.apply(undefined,args)}return fn(input)},{constant:!fn.$stateful&&inputs.every(isConstant),inputs:!fn.$stateful&&inputs})},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),extend(function(scope,locals){return left.assign(scope,right(scope,locals),locals)},{inputs:[left,right]})):left},ternary:function(){var middle,token,left=this.logicalOR();if((token=this.expect("?"))&&(middle=this.assignment(),this.consume(":"))){var right=this.assignment();return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})}return left},logicalOR:function(){for(var token,left=this.logicalAND();token=this.expect("||");)left=this.binaryFn(left,token.text,this.logicalAND(),!0);return left},logicalAND:function(){for(var token,left=this.equality();token=this.expect("&&");)left=this.binaryFn(left,token.text,this.equality(),!0);return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left=this.binaryFn(left,token.text,this.relational());return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left=this.binaryFn(left,token.text,this.additive());return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.text,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.text,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.text,this.unary()):(token=this.expect("!"))?this.unaryFn(token.text,this.unary()):this.primary()},fieldAccess:function(object){var getter=this.identifier();return extend(function(scope,locals,self){var o=self||object(scope,locals);return null==o?undefined:getter(o)},{assign:function(scope,value,locals){var o=object(scope,locals);return o||object.assign(scope,o={},locals),getter.assign(o,value)}})},objectIndex:function(obj){var expression=this.text,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,o=obj(self,locals),i=indexFn(self,locals);return ensureSafeMemberName(i,expression),o?v=ensureSafeObject(o[i],expression):undefined},{assign:function(self,value,locals){var key=ensureSafeMemberName(indexFn(self,locals),expression),o=ensureSafeObject(obj(self,locals),expression);return o||obj.assign(self,o={},locals),o[key]=value}})},functionCall:function(fnGetter,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var expressionText=this.text,args=argsFn.length?[]:null;return function(scope,locals){var context=contextGetter?contextGetter(scope,locals):isDefined(contextGetter)?undefined:scope,fn=fnGetter(scope,locals,context)||noop;if(args)for(var i=argsFn.length;i--;)args[i]=ensureSafeObject(argsFn[i](scope,locals),expressionText);ensureSafeObject(context,expressionText),ensureSafeFunction(fn,expressionText);var v=fn.apply?fn.apply(context,args):fn(args[0],args[1],args[2],args[3],args[4]);return args&&(args.length=0),ensureSafeObject(v,expressionText)}},arrayDeclaration:function(){var elementFns=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elementFns.push(this.expression())}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0,ii=elementFns.length;ii>i;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:elementFns.every(isConstant),inputs:elementFns})},object:function(){var keys=[],valueFns=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var token=this.consume();token.constant?keys.push(token.value):token.identifier?keys.push(token.text):this.throwError("invalid key",token),this.consume(":"),valueFns.push(this.expression())}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0,ii=valueFns.length;ii>i;i++)object[keys[i]]=valueFns[i](self,locals);return object},{literal:!0,constant:valueFns.every(isConstant),inputs:valueFns})}};var getterFnCacheDefault=createMap(),getterFnCacheExpensive=createMap(),objectValueOf=Object.prototype.valueOf,$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$compileMinErr=minErr("$compile"),urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1)},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return attr.href||attr.xlinkHref||attr.name?void 0:function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS="ng-submitted";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(formElement){return formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS),{pre:function(scope,formElement,attr,controller){if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}var parentFormCtrl=controller.$$parentForm,alias=controller.$name;alias&&(setter(scope,null,alias,controller,alias),attr.$observe(attr.name?"name":"ngForm",function(newValue){alias!==newValue&&(setter(scope,null,alias,undefined,alias),alias=newValue,setter(scope,null,alias,controller,alias),parentFormCtrl.$$renameControl(controller,alias))})),formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,null,alias,undefined,alias),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,DATE_REGEXP=/^(\d{4})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=value===undefined?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=value===undefined?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(value){return(value||"").toString()});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate",function($animate){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate","$sce",function($templateRequest,$anchorScroll,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){return/SVG/.test($element[0].toString())?($element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element})):($element.html(ctrl.template),void $compile($element.contents())(scope))}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(ngList):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",PENDING_CLASS="ng-pending",$ngModelMinErr=new minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=undefined,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=undefined,this.$name=$interpolate($attr.name||"",!1)($scope);var parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if(ctrl.$options=options,options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:ctrl.$modelValue}):parsedNgModelAssign($scope,ctrl.$modelValue)}}else if(!parsedNgModel.assign)throw $ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},parentForm:parentForm,$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,UNTOUCHED_CLASS,TOUCHED_CLASS)},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,TOUCHED_CLASS,UNTOUCHED_CLASS)},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumber(ctrl.$modelValue)||!isNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,parserName=ctrl.$$parserName||"parse",parserValid=ctrl.$error[parserName]?!1:undefined,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(parserValid,modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:undefined,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(parseValid,modelValue,viewValue,doneCallback){function processParseErrors(parseValid){var errorKey=ctrl.$$parserName||"parse";if(parseValid===undefined)setValidity(errorKey,null);else if(setValidity(errorKey,parseValid),!parseValid)return forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1;return!0}function processSyncValidators(){var syncValidatorsValid=!0;return forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),syncValidatorsValid?!0:(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}function processAsyncValidators(){var validatorPromises=[],allValid=!0;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw $ngModelMinErr("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,undefined),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}currentValidationRunId++;var localValidationRunId=currentValidationRunId;return processParseErrors(parseValid)&&processSyncValidators()?void processAsyncValidators():void validationDone(!1)},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}var viewValue=ctrl.$$lastCommittedViewValue,modelValue=viewValue,parserValid=isUndefined(modelValue)?undefined:!0;if(parserValid)for(var i=0;i<ctrl.$parsers.length;i++)if(modelValue=ctrl.$parsers[i](modelValue),isUndefined(modelValue)){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(parserValid,modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:undefined,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,(!ctrl.$options||ctrl.$options.updateOnDefault)&&ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;
options&&isDefined(options.debounce)&&(debounce=options.debounce,isNumber(debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce["default"])&&(debounceDelay=debounce["default"])),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(undefined,modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&formCtrl.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=$scope.$eval($attrs.ngModelOptions),this.$options.updateOn!==undefined?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(scope,element,attr){function updateElementText(newText){element.text(newText||"")}var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNaN(count);countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),count===lastCount||countIsNaN&&isNaN(lastCount)||(watchRemover(),watchRemover=scope.$watch(whensExpFns[count],updateElementText),lastCount=count)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0===(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=document.createComment(" end ngRepeat: "+expression+" "),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)collection.hasOwnProperty(itemKey)&&"$"!=itemKey.charAt(0)&&collectionKeys.push(itemKey);collectionKeys.sort()}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;length>index;index++)elementsToRemove[index][NG_REMOVED]=!0;block.scope.$destroy()}for(index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],block.scope){nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,jqLite(previousNode)),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],NG_HIDE_CLASS="ng-hide",NG_HIDE_IN_PROGRESS_CLASS="ng-hide-animate",ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watchCollection(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)})}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;ii>i;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;ii>i;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var promise=previousLeaveAnimations[i]=$animate.leave(selected);promise.then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=document.createComment(" end ngSwitchWhen: ");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({restrict:"A",terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value,element){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove()),element&&element[0].hasAttribute("selected")&&(element[0].selected=!0)},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue===value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=shallowCopy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function callExpression(exprFn,key,value){return locals[valueName]=value,keyName&&(locals[keyName]=key),exprFn(scope,locals)}function selectionChanged(){scope.$apply(function(){var viewValue,collection=valuesFn(scope)||[];if(multiple)viewValue=[],forEach(selectElement.val(),function(selectedKey){selectedKey=trackFn?trackKeysCache[selectedKey]:selectedKey,viewValue.push(getViewValue(selectedKey,collection[selectedKey]))});else{var selectedKey=trackFn?trackKeysCache[selectElement.val()]:selectElement.val();viewValue=getViewValue(selectedKey,collection[selectedKey])}ctrl.$setViewValue(viewValue),render()})}function getViewValue(key,value){if("?"===key)return undefined;if(""===key)return null;var viewValueFn=selectAsFn?selectAsFn:valueFn;return callExpression(viewValueFn,key,value)}function getLabels(){var toDisplay,values=valuesFn(scope);if(values&&isArray(values)){toDisplay=new Array(values.length);for(var i=0,ii=values.length;ii>i;i++)toDisplay[i]=callExpression(displayFn,i,values[i]);return toDisplay}if(values){toDisplay={};for(var prop in values)values.hasOwnProperty(prop)&&(toDisplay[prop]=callExpression(displayFn,prop,values[prop]))}return toDisplay}function createIsSelectedFn(viewValue){var selectedSet;if(multiple)if(trackFn&&isArray(viewValue)){selectedSet=new HashMap([]);for(var trackIndex=0;trackIndex<viewValue.length;trackIndex++)selectedSet.put(callExpression(trackFn,null,viewValue[trackIndex]),!0)}else selectedSet=new HashMap(viewValue);else trackFn&&(viewValue=callExpression(trackFn,null,viewValue));return function(key,value){var compareValueFn;return compareValueFn=trackFn?trackFn:selectAsFn?selectAsFn:valueFn,multiple?isDefined(selectedSet.remove(callExpression(compareValueFn,key,value))):viewValue===callExpression(compareValueFn,key,value)}}function scheduleRendering(){renderScheduled||(scope.$$postDigest(render),renderScheduled=!0)}function updateLabelMap(labelMap,label,added){labelMap[label]=labelMap[label]||0,labelMap[label]+=added?1:-1}function render(){renderScheduled=!1;var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,value,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionId,optionGroups={"":[]},optionGroupNames=[""],viewValue=ctrl.$viewValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,labelMap={},isSelected=createIsSelectedFn(viewValue),anySelected=!1;for(trackKeysCache={},index=0;length=keys.length,length>index;index++)key=index,keyName&&(key=keys[index],"$"===key.charAt(0))||(value=values[key],optionGroupName=callExpression(groupByFn,key,value)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),selected=isSelected(key,value),anySelected=anySelected||selected,label=callExpression(displayFn,key,value),label=isDefined(label)?label:"",optionId=trackFn?trackFn(scope,locals):keyName?keys[index]:index,trackFn&&(trackKeysCache[optionId]=key),optionGroup.push({id:optionId,label:label,selected:selected}));for(multiple||(nullOption||null===viewValue?optionGroups[""].unshift({id:"",label:"",selected:!anySelected}):anySelected||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&(updateLabelMap(labelMap,existingOption.label,!1),updateLabelMap(labelMap,option.label,!0),lastElement.text(existingOption.label=option.label),lastElement.prop("label",existingOption.label)),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),lastElement[0].selected!==option.selected&&(lastElement.prop("selected",existingOption.selected=option.selected),msie&&lastElement.prop("selected",existingOption.selected))):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).prop("selected",option.selected).attr("selected",option.selected).prop("label",option.label).text(option.label),existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected}),updateLabelMap(labelMap,option.label,!0),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)option=existingOptions.pop(),updateLabelMap(labelMap,option.label,!1),option.element.remove()}for(;optionGroupsCache.length>groupIndex;){for(optionGroup=optionGroupsCache.pop(),index=1;index<optionGroup.length;++index)updateLabelMap(labelMap,optionGroup[index].label,!1);optionGroup[0].element.remove()}forEach(labelMap,function(count,label){count>0?selectCtrl.addOption(label):0>count&&selectCtrl.removeOption(label)})}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],selectAs=/ as /.test(match[0])&&match[1],selectAsFn=selectAs?$parse(selectAs):null,keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,trackKeysCache={},optionGroupsCache=[[{element:selectElement,label:""}]],locals={};nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.empty(),selectElement.on("change",selectionChanged),ctrl.$render=render,scope.$watchCollection(valuesFn,scheduleRendering),scope.$watchCollection(getLabels,scheduleRendering),multiple&&scope.$watchCollection(function(){return ctrl.$modelValue},scheduleRendering)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,renderScheduled=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}),optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound||(selectCtrl=nullSelectCtrl),interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),oldVal!==newVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal,element)}):selectCtrl.addOption(attr.value,element),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!1}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||undefined,ctrl.$validate()}),ctrl.$validators.pattern=function(value){return ctrl.$isEmpty(value)||isUndefined(regexp)||regexp.test(value)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=int(value);maxlength=isNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return 0>maxlength||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=int(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};return window.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(bindJQuery(),publishExternalAPI(angular),void jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),angular.module("templates",[]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return angular.forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i].params&&(parentParams=objectKeys(parents[i].params),parentParams.length))for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}function invoke(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;ii>i;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"];break;case!0:surroundPattern=["?(",")?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null),type=$$UMFP.type(regexp||"string")||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp)}),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}config=extend({params:{}},isObject(config)?config:{});var m,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];this.source=pattern;for(var p,param,segment;(m=placeholder.exec(pattern))&&(p=matchDetails(m,!1),!(p.segment.indexOf("?")>=0));)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash),segments.push(p.segment),last=placeholder.lastIndex;
segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)p=matchDetails(m,!0),param=addParameter(p.id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(config.strict===!1?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){function valToString(val){return null!=val?val.toString().replace(/\//g,"%2F"):val}function valFromString(val){return null!=val?val.toString().replace(/%2F/g,"/"):val}function regexpMatches(val){return this.pattern.test(val)}function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$$UMFP=this;var injector,isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:valFromString,is:regexpMatches,pattern:/[^/]*/},"int":{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return isDefined(val)&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return val===!0||val===!1},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^/]*/},any:{encode:angular.identity,decode:angular.identity,is:angular.identity,equals:angular.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(value!==!0&&value!==!1&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){function unwrapShorthand(config){var keys=isObject(config)?objectKeys(config):[],isShorthand=-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array");return isShorthand&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}function getType(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType?urlType:config.type?config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string}function getArrayMode(){var arrayDefaults={array:"search"===location?"auto":!1},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}function getSquashPolicy(config,isOptional){var squash=config.squash;if(!isOptional||squash===!1)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(squash===!0||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return-1===indexOf(configuredKeys,item.from)}).concat(replace)}function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.$$fn)}function $value(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}function $replace(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),function(obj){return obj.to});return replacement.length?replacement[0]:value}return value=$replace(value),isDefined(value)?self.type.decode(value):$$getDefaultValue()}function toString(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}var self=this;config=unwrapShorthand(config),type=getType(config,type,location);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,"search"===location):type,"string"!==type.name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=getSquashPolicy(config,isOptional),replace=getReplace(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:$value,dynamic:undefined,config:config,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var isOptional,val,param,result=!0,self=this;return forEach(this.$$keys(),function(key){param=self[key],val=paramValues[key],isOptional=!val&&param.isOptional,result=result&&(isOptional||!!param.type.is(val))}),result},$$parent:undefined},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:!0}function $get($location,$rootScope,$injector,$browser){function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){function check(rule){var handled=rule($injector,$location);return handled?(isString(handled)&&$location.replace().url(handled),!0):!1}if(!evt||!evt.defaultPrevented){var ignoreUpdate=lastPushedUrl&&$location.url()===lastPushedUrl;if(lastPushedUrl=undefined,ignoreUpdate)return!0;var i,n=rules.length;for(i=0;n>i;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){return read?void(location=$location.url()):void($location.url()!==location&&($location.url(location),$location.replace()))},push:function(urlMatcher,params,options){$location.url(urlMatcher.format(params||{})),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled);var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}var listener,rules=[],otherwise=null,interceptDeferred=!1;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(!stateOrName)return undefined;var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;pathLength>i;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if("**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length!=segments.length)return!1;for(var i=0,l=globSegments.length;l>i;i++)"*"===globSegments[i]&&(segments[i]="*");return segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter){function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:options.notify})||""}],promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,dst[name]=result}))}),$q.all(promises).then(function(){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed"));return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(){return $state.transitionTo($state.current,$stateParams,{reload:!0,inherit:!1,notify:!0})},$state.go=function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams),to=toState;var toPath=to.path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(!options.reload)for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep];if(shouldTriggerReload(to,from,locals,options))return to.self.reloadOnSearch!==!1&&$urlRouter.update(),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams).defaultPrevented)return $urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?TransitionSuperseded:($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)},function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),evt.defaultPrevented||$urlRouter.update(),$q.reject(error))});return transition},$state.is=function(stateOrName,params,options){options=extend({relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);return isDefined(state)?$state.$current!==state?!1:params?equalForKeys(state.params.$$values(params),$stateParams):!0:undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);return isDefined(state)?isDefined($state.$current.includes[state.name])?params?equalForKeys(state.params.$$values(params),$stateParams,objectKeys(params)):!0:!1:undefined},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys(),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldTriggerReload(to,from,locals,options){return to!==from||(locals!==from.locals||options.reload)&&to.self.reloadOnSearch!==!1?void 0:!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=extend({},state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){return state.parent&&state.parent.params?extend(state.parent.params.$$new(),state.ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,"abstract":!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return options=extend(defaults,options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result&&options.notify&&$rootScope.$broadcast("$viewContentLoading",options),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){$timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){var promise=$animate.enter(element,null,target,cb);promise&&promise.then&&promise.then(cb)},leave:function(element,cb){var promise=$animate.leave(element,cb);promise&&promise.then&&promise.then(cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return statics()}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl&&(renderer.leave(currentEl,function(){previousEl=null}),previousEl=currentEl,currentEl=null)}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name];var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function(){currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(!1)}),scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}};return directive}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),inherited=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(inherited?inherited.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");return stateData&&stateData.state&&stateData.state.name?stateData.state:void 0}function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref,$state.current.name),params=null,base=stateContext(element)||$state.$current,newHref=null,isAnchor="A"===element.prop("tagName"),isForm="FORM"===element[0].nodeName,attr=isForm?"action":"href",nav=!0,options={relative:base,inherit:!0},optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){option in optionsOverride&&(options[option]=optionsOverride[option])});var update=function(newVal){if(newVal&&(params=angular.copy(newVal)),nav){newHref=$state.href(ref.state,params,options);var activeDirective=uiSrefActive[1]||uiSrefActive[0];return activeDirective&&activeDirective.$$setStateInfo(ref.state,params),null===newHref?(nav=!1,!1):void attrs.$set(attr,newHref)}};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(newVal){newVal!==params&&update(newVal)},!0),params=angular.copy(scope.$eval(ref.paramExpr))),update(),isForm||element.bind("click",function(e){var button=e.which||e.button;if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target"))){var transition=$timeout(function(){$state.go(ref.state,params,options)});e.preventDefault();var ignorePreventDefaultCount=isAnchor&&!newHref?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}})}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function update(){isMatch()?$element.addClass(activeClass):$element.removeClass(activeClass)}function isMatch(){return"undefined"!=typeof $attrs.uiSrefActiveEq?state&&$state.is(state.name,params):state&&$state.includes(state.name,params)}var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActiveEq||$attrs.uiSrefActive||"",!1)($scope),this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element)),params=newParams,update()},$scope.$on("$stateChangeSuccess",update)}]}}function $IsStateFilter($state){var isFilter=function(state){return $state.is(state)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state){return $state.includes(state)};return includesFilter.$stateful=!0,includesFilter}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);var $$UMFP;UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){function decodePathArray(string){function reverseString(str){return str.split("").reverse().join("")}function unquoteDashes(str){return str.replace(/\\-/,"-")
}var split=reverseString(string).split(/-(?!\\)/),allReversed=map(split,reverseString);return map(allReversed,unquoteDashes).reverse()}var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;nPath>i;i++){paramName=paramNames[i];var param=this.params[paramName],paramVal=m[i+1];for(j=0;j<param.replace;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&param.array===!0&&(paramVal=decodePathArray(paramVal)),values[paramName]=param.value(paramVal)}for(;nTotal>i;i++)paramName=paramNames[i],values[paramName]=this.params[paramName].value(searchParams[paramName]);return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;nTotal>i;i++){var isPathParam=nPath>i,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=isDefaultValue?param.squash:!1,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1];if(squash===!1)null!=encoded&&(result+=isArray(encoded)?map(encoded,encodeDashes).join("-"):encodeURIComponent(encoded)),result+=nextSegment;else if(squash===!0){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment)}else{if(null==encoded||isDefaultValue&&squash!==!1)continue;isArray(encoded)||(encoded=[encoded]),encoded=map(encoded,encodeURIComponent).join("&"+name+"="),result+=(search?"&":"?")+(name+"="+encoded),search=!0}}return result},Type.prototype.is=function(){return!0},Type.prototype.encode=function(val){return val},Type.prototype.decode=function(val){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$asArray=function(mode,isSearch){function ArrayType(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){val=arrayWrap(val);var result=map(val,callback);return allTruthyMode===!0?0===filter(result,falsey).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=arrayEqualsHandler(bindTo(type,"equals")),this.pattern=type.pattern,this.$arrayMode=mode}if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),/*!
 * ui-select
 * http://github.com/angular-ui/ui-select
 * Version: 0.9.9 - 2015-02-18T03:49:07.277Z
 * License: MIT
 */
function(){var KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){var k=e.which;switch(k){case KEY.COMMAND:case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(k){return k=k.which?k.which:k,k>=112&&123>=k},isVerticalMovement:function(k){return~[KEY.UP,KEY.DOWN].indexOf(k)},isHorizontalMovement:function(k){return~[KEY.LEFT,KEY.RIGHT,KEY.BACKSPACE,KEY.DELETE].indexOf(k)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(selector){return angular.element(this[0].querySelectorAll(selector))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(selector){for(var elem=this[0],matchesSelector=elem.matches||elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.msMatchesSelector;elem;){if(matchesSelector.bind(elem)(selector))return elem;elem=elem.parentElement}return!1});var latestId=0;angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,generateId:function(){return latestId++}}).service("uiSelectMinErr",function(){var minErr=angular.$$minErr("ui.select");return function(){var error=minErr.apply(this,arguments),message=error.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(message)}}).service("RepeatParser",["uiSelectMinErr","$parse",function(uiSelectMinErr,$parse){var self=this;self.parse=function(expression){var match=expression.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw uiSelectMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);return{itemName:match[2],source:$parse(match[3]),trackByExp:match[4],modelMapper:$parse(match[1]||match[2])}},self.getGroupNgRepeatExpression=function(){return"$group in $select.groups"},self.getNgRepeatExpression=function(itemName,source,trackByExp,grouped){var expression=itemName+" in "+(grouped?"$group.items":source);return trackByExp&&(expression+=" track by "+trackByExp),expression}}]).controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","RepeatParser","uiSelectMinErr","uiSelectConfig",function($scope,$element,$timeout,$filter,RepeatParser,uiSelectMinErr,uiSelectConfig){function _resetSearchInput(){(ctrl.resetSearchInput||void 0===ctrl.resetSearchInput&&uiSelectConfig.resetSearchInput)&&(ctrl.search=EMPTY_SEARCH,ctrl.selected&&ctrl.items.length&&!ctrl.multiple&&(ctrl.activeIndex=ctrl.items.indexOf(ctrl.selected)))}function _handleDropDownSelection(key){var processed=!0;switch(key){case KEY.DOWN:!ctrl.open&&ctrl.multiple?ctrl.activate(!1,!0):ctrl.activeIndex<ctrl.items.length-1&&ctrl.activeIndex++;break;case KEY.UP:!ctrl.open&&ctrl.multiple?ctrl.activate(!1,!0):(ctrl.activeIndex>0||0===ctrl.search.length&&ctrl.tagging.isActivated&&ctrl.activeIndex>-1)&&ctrl.activeIndex--;break;case KEY.TAB:(!ctrl.multiple||ctrl.open)&&ctrl.select(ctrl.items[ctrl.activeIndex],!0);break;case KEY.ENTER:ctrl.open&&ctrl.activeIndex>=0?ctrl.select(ctrl.items[ctrl.activeIndex]):ctrl.activate(!1,!0);break;case KEY.ESC:ctrl.close();break;default:processed=!1}return processed}function _handleMatchSelection(key){function getNewActiveMatchIndex(){switch(key){case KEY.LEFT:return~ctrl.activeMatchIndex?prev:last;case KEY.RIGHT:return~ctrl.activeMatchIndex&&curr!==last?next:(ctrl.activate(),!1);case KEY.BACKSPACE:return~ctrl.activeMatchIndex?(ctrl.removeChoice(curr),prev):last;case KEY.DELETE:return~ctrl.activeMatchIndex?(ctrl.removeChoice(ctrl.activeMatchIndex),curr):!1}}var caretPosition=_getCaretPosition(_searchInput[0]),length=ctrl.selected.length,first=0,last=length-1,curr=ctrl.activeMatchIndex,next=ctrl.activeMatchIndex+1,prev=ctrl.activeMatchIndex-1,newIndex=curr;return caretPosition>0||ctrl.search.length&&key==KEY.RIGHT?!1:(ctrl.close(),newIndex=getNewActiveMatchIndex(),ctrl.activeMatchIndex=ctrl.selected.length&&newIndex!==!1?Math.min(last,Math.max(first,newIndex)):-1,!0)}function _findCaseInsensitiveDupe(arr){if(void 0===arr||void 0===ctrl.search)return!1;var hasDupe=arr.filter(function(origItem){return void 0===ctrl.search.toUpperCase()||void 0===origItem?!1:origItem.toUpperCase()===ctrl.search.toUpperCase()}).length>0;return hasDupe}function _findApproxDupe(haystack,needle){var dupeIndex=-1;if(angular.isArray(haystack))for(var tempArr=angular.copy(haystack),i=0;i<tempArr.length;i++)if(void 0===ctrl.tagging.fct)tempArr[i]+" "+ctrl.taggingLabel===needle&&(dupeIndex=i);else{var mockObj=tempArr[i];mockObj.isTag=!0,angular.equals(mockObj,needle)&&(dupeIndex=i)}return dupeIndex}function _getCaretPosition(el){return angular.isNumber(el.selectionStart)?el.selectionStart:el.value.length}function _ensureHighlightVisible(){var container=$element.querySelectorAll(".ui-select-choices-content"),choices=container.querySelectorAll(".ui-select-choices-row");if(choices.length<1)throw uiSelectMinErr("choices","Expected multiple .ui-select-choices-row but got '{0}'.",choices.length);if(!(ctrl.activeIndex<0)){var highlighted=choices[ctrl.activeIndex],posY=highlighted.offsetTop+highlighted.clientHeight-container[0].scrollTop,height=container[0].offsetHeight;posY>height?container[0].scrollTop+=posY-height:posY<highlighted.clientHeight&&(ctrl.isGrouped&&0===ctrl.activeIndex?container[0].scrollTop=0:container[0].scrollTop-=highlighted.clientHeight-posY)}}var ctrl=this,EMPTY_SEARCH="";ctrl.placeholder=void 0,ctrl.search=EMPTY_SEARCH,ctrl.activeIndex=0,ctrl.activeMatchIndex=-1,ctrl.items=[],ctrl.selected=void 0,ctrl.open=!1,ctrl.focus=!1,ctrl.focusser=void 0,ctrl.disabled=void 0,ctrl.searchEnabled=void 0,ctrl.resetSearchInput=void 0,ctrl.refreshDelay=void 0,ctrl.multiple=!1,ctrl.disableChoiceExpression=void 0,ctrl.tagging={isActivated:!1,fct:void 0},ctrl.taggingTokens={isActivated:!1,tokens:void 0},ctrl.lockChoiceExpression=void 0,ctrl.closeOnSelect=!0,ctrl.clickTriggeredSelect=!1,ctrl.$filter=$filter,ctrl.isEmpty=function(){return angular.isUndefined(ctrl.selected)||null===ctrl.selected||""===ctrl.selected};var _searchInput=$element.querySelectorAll("input.ui-select-search");if(1!==_searchInput.length)throw uiSelectMinErr("searchInput","Expected 1 input.ui-select-search but got '{0}'.",_searchInput.length);ctrl.activate=function(initSearchValue,avoidReset){ctrl.disabled||ctrl.open||(avoidReset||_resetSearchInput(),ctrl.focusser.prop("disabled",!0),ctrl.open=!0,ctrl.activeMatchIndex=-1,ctrl.activeIndex=ctrl.activeIndex>=ctrl.items.length?0:ctrl.activeIndex,-1===ctrl.activeIndex&&ctrl.taggingLabel!==!1&&(ctrl.activeIndex=0),$timeout(function(){ctrl.search=initSearchValue||ctrl.search,_searchInput[0].focus()}))},ctrl.findGroupByName=function(name){return ctrl.groups&&ctrl.groups.filter(function(group){return group.name===name})[0]},ctrl.parseRepeatAttr=function(repeatAttr,groupByExp){function updateGroups(items){ctrl.groups=[],angular.forEach(items,function(item){var groupFn=$scope.$eval(groupByExp),groupName=angular.isFunction(groupFn)?groupFn(item):item[groupFn],group=ctrl.findGroupByName(groupName);group?group.items.push(item):ctrl.groups.push({name:groupName,items:[item]})}),ctrl.items=[],ctrl.groups.forEach(function(group){ctrl.items=ctrl.items.concat(group.items)})}function setPlainItems(items){ctrl.items=items}var setItemsFn=groupByExp?updateGroups:setPlainItems;ctrl.parserResult=RepeatParser.parse(repeatAttr),ctrl.isGrouped=!!groupByExp,ctrl.itemProperty=ctrl.parserResult.itemName,$scope.$watchCollection(ctrl.parserResult.source,function(items){if(void 0===items||null===items)ctrl.items=[];else{if(!angular.isArray(items))throw uiSelectMinErr("items","Expected an array but got '{0}'.",items);if(ctrl.multiple){var filteredItems=items.filter(function(i){return ctrl.selected.indexOf(i)<0});setItemsFn(filteredItems)}else setItemsFn(items);ctrl.ngModel.$modelValue=null}}),ctrl.multiple&&$scope.$watchCollection("$select.selected",function(selectedItems){var data=ctrl.parserResult.source($scope);if(selectedItems.length){if(void 0!==data){var filteredItems=data.filter(function(i){return selectedItems.indexOf(i)<0});setItemsFn(filteredItems)}}else setItemsFn(data);ctrl.sizeSearchInput()})};var _refreshDelayPromise;ctrl.refresh=function(refreshAttr){void 0!==refreshAttr&&(_refreshDelayPromise&&$timeout.cancel(_refreshDelayPromise),_refreshDelayPromise=$timeout(function(){$scope.$eval(refreshAttr)},ctrl.refreshDelay))},ctrl.setActiveItem=function(item){ctrl.activeIndex=ctrl.items.indexOf(item)},ctrl.isActive=function(itemScope){if(!ctrl.open)return!1;var itemIndex=ctrl.items.indexOf(itemScope[ctrl.itemProperty]),isActive=itemIndex===ctrl.activeIndex;return!isActive||0>itemIndex&&ctrl.taggingLabel!==!1||0>itemIndex&&ctrl.taggingLabel===!1?!1:(isActive&&!angular.isUndefined(ctrl.onHighlightCallback)&&itemScope.$eval(ctrl.onHighlightCallback),isActive)},ctrl.isDisabled=function(itemScope){if(ctrl.open){var item,itemIndex=ctrl.items.indexOf(itemScope[ctrl.itemProperty]),isDisabled=!1;return itemIndex>=0&&!angular.isUndefined(ctrl.disableChoiceExpression)&&(item=ctrl.items[itemIndex],isDisabled=!!itemScope.$eval(ctrl.disableChoiceExpression),item._uiSelectChoiceDisabled=isDisabled),isDisabled}},ctrl.select=function(item,skipFocusser,$event){if(void 0===item||!item._uiSelectChoiceDisabled){if(!ctrl.items&&!ctrl.search)return;if(!item||!item._uiSelectChoiceDisabled){if(ctrl.tagging.isActivated){if(ctrl.taggingLabel===!1)if(ctrl.activeIndex<0){if(item=void 0!==ctrl.tagging.fct?ctrl.tagging.fct(ctrl.search):ctrl.search,!item||angular.equals(ctrl.items[0],item))return}else item=ctrl.items[ctrl.activeIndex];else if(0===ctrl.activeIndex){if(void 0===item)return;if(void 0!==ctrl.tagging.fct&&"string"==typeof item){if(item=ctrl.tagging.fct(ctrl.search),!item)return}else"string"==typeof item&&(item=item.replace(ctrl.taggingLabel,"").trim())}if(ctrl.selected&&angular.isArray(ctrl.selected)&&ctrl.selected.filter(function(selection){return angular.equals(selection,item)}).length>0)return void ctrl.close(skipFocusser)}var locals={};locals[ctrl.parserResult.itemName]=item,ctrl.multiple?(ctrl.selected.push(item),ctrl.sizeSearchInput()):ctrl.selected=item,$timeout(function(){ctrl.onSelectCallback($scope,{$item:item,$model:ctrl.parserResult.modelMapper($scope,locals)})}),(!ctrl.multiple||ctrl.closeOnSelect)&&ctrl.close(skipFocusser),$event&&"click"===$event.type&&(ctrl.clickTriggeredSelect=!0)}}},ctrl.close=function(skipFocusser){ctrl.open&&(ctrl.ngModel&&ctrl.ngModel.$setTouched&&ctrl.ngModel.$setTouched(),_resetSearchInput(),ctrl.open=!1,ctrl.multiple||$timeout(function(){ctrl.focusser.prop("disabled",!1),skipFocusser||ctrl.focusser[0].focus()},0,!1))},ctrl.clear=function($event){ctrl.select(void 0),$event.stopPropagation(),ctrl.focusser[0].focus()},ctrl.toggle=function(e){ctrl.open?(ctrl.close(),e.preventDefault(),e.stopPropagation()):ctrl.activate()},ctrl.isLocked=function(itemScope,itemIndex){var isLocked,item=ctrl.selected[itemIndex];return item&&!angular.isUndefined(ctrl.lockChoiceExpression)&&(isLocked=!!itemScope.$eval(ctrl.lockChoiceExpression),item._uiSelectChoiceLocked=isLocked),isLocked},ctrl.removeChoice=function(index){var removedChoice=ctrl.selected[index];if(!removedChoice._uiSelectChoiceLocked){var locals={};locals[ctrl.parserResult.itemName]=removedChoice,ctrl.selected.splice(index,1),ctrl.activeMatchIndex=-1,ctrl.sizeSearchInput(),$timeout(function(){ctrl.onRemoveCallback($scope,{$item:removedChoice,$model:ctrl.parserResult.modelMapper($scope,locals)})})}},ctrl.getPlaceholder=function(){return ctrl.multiple&&ctrl.selected.length?void 0:ctrl.placeholder};var containerSizeWatch;ctrl.sizeSearchInput=function(){var input=_searchInput[0],container=_searchInput.parent().parent()[0];_searchInput.css("width","10px");var calculate=function(){var newWidth=container.clientWidth-input.offsetLeft-10;50>newWidth&&(newWidth=container.clientWidth),_searchInput.css("width",newWidth+"px")};$timeout(function(){0!==container.clientWidth||containerSizeWatch?containerSizeWatch||calculate():containerSizeWatch=$scope.$watch(function(){return container.clientWidth},function(newValue){0!==newValue&&(calculate(),containerSizeWatch(),containerSizeWatch=null)})},0,!1)},_searchInput.on("keydown",function(e){var key=e.which;$scope.$apply(function(){var processed=!1,tagged=!1;if(ctrl.multiple&&KEY.isHorizontalMovement(key)&&(processed=_handleMatchSelection(key)),!processed&&(ctrl.items.length>0||ctrl.tagging.isActivated)&&(processed=_handleDropDownSelection(key),ctrl.taggingTokens.isActivated)){for(var i=0;i<ctrl.taggingTokens.tokens.length;i++)ctrl.taggingTokens.tokens[i]===KEY.MAP[e.keyCode]&&ctrl.search.length>0&&(tagged=!0);tagged&&$timeout(function(){_searchInput.triggerHandler("tagged");var newItem=ctrl.search.replace(KEY.MAP[e.keyCode],"").trim();ctrl.tagging.fct&&(newItem=ctrl.tagging.fct(newItem)),newItem&&ctrl.select(newItem,!0)})}processed&&key!=KEY.TAB&&(e.preventDefault(),e.stopPropagation())}),KEY.isVerticalMovement(key)&&ctrl.items.length>0&&_ensureHighlightVisible()}),_searchInput.on("paste",function(e){var data=e.originalEvent.clipboardData.getData("text/plain");if(data&&data.length>0&&ctrl.taggingTokens.isActivated&&ctrl.tagging.fct){var items=data.split(ctrl.taggingTokens.tokens[0]);items&&items.length>0&&(angular.forEach(items,function(item){var newItem=ctrl.tagging.fct(item);newItem&&ctrl.select(newItem,!0)}),e.preventDefault(),e.stopPropagation())}}),_searchInput.on("keyup",function(e){if(KEY.isVerticalMovement(e.which)||$scope.$evalAsync(function(){ctrl.activeIndex=ctrl.taggingLabel===!1?-1:0}),ctrl.tagging.isActivated&&ctrl.search.length>0){if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||KEY.isVerticalMovement(e.which))return;if(ctrl.activeIndex=ctrl.taggingLabel===!1?-1:0,ctrl.taggingLabel===!1)return;var newItem,item,tagItems,tagItem,items=angular.copy(ctrl.items),stashArr=angular.copy(ctrl.items),hasTag=!1,dupeIndex=-1;if(void 0!==ctrl.tagging.fct){if(tagItems=ctrl.$filter("filter")(items,{isTag:!0}),tagItems.length>0&&(tagItem=tagItems[0]),items.length>0&&tagItem&&(hasTag=!0,items=items.slice(1,items.length),stashArr=stashArr.slice(1,stashArr.length)),newItem=ctrl.tagging.fct(ctrl.search),newItem.isTag=!0,stashArr.filter(function(origItem){return angular.equals(origItem,ctrl.tagging.fct(ctrl.search))}).length>0)return;newItem.isTag=!0}else{if(tagItems=ctrl.$filter("filter")(items,function(item){return item.match(ctrl.taggingLabel)}),tagItems.length>0&&(tagItem=tagItems[0]),item=items[0],void 0!==item&&items.length>0&&tagItem&&(hasTag=!0,items=items.slice(1,items.length),stashArr=stashArr.slice(1,stashArr.length)),newItem=ctrl.search+" "+ctrl.taggingLabel,_findApproxDupe(ctrl.selected,ctrl.search)>-1)return;if(_findCaseInsensitiveDupe(stashArr.concat(ctrl.selected)))return void(hasTag&&(items=stashArr,$scope.$evalAsync(function(){ctrl.activeIndex=0,ctrl.items=items})));if(_findCaseInsensitiveDupe(stashArr))return void(hasTag&&(ctrl.items=stashArr.slice(1,stashArr.length)))}hasTag&&(dupeIndex=_findApproxDupe(ctrl.selected,newItem)),dupeIndex>-1?items=items.slice(dupeIndex+1,items.length-1):(items=[],items.push(newItem),items=items.concat(stashArr)),$scope.$evalAsync(function(){ctrl.activeIndex=0,ctrl.items=items})}}),_searchInput.on("tagged",function(){$timeout(function(){_resetSearchInput()})}),_searchInput.on("blur",function(){$timeout(function(){ctrl.activeMatchIndex=-1})}),$scope.$on("$destroy",function(){_searchInput.off("keyup keydown tagged blur paste")})}]).directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","$compile","$parse",function($document,uiSelectConfig,uiSelectMinErr,$compile,$parse){return{restrict:"EA",templateUrl:function(tElement,tAttrs){var theme=tAttrs.theme||uiSelectConfig.theme;return theme+(angular.isDefined(tAttrs.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",link:function(scope,element,attrs,ctrls,transcludeFn){function onDocumentClick(e){if($select.open){var contains=!1;if(contains=window.jQuery?window.jQuery.contains(element[0],e.target):element[0].contains(e.target),!contains&&!$select.clickTriggeredSelect){var focusableControls=["input","button","textarea"],targetScope=angular.element(e.target).scope(),skipFocusser=targetScope&&targetScope.$select&&targetScope.$select!==$select;skipFocusser||(skipFocusser=~focusableControls.indexOf(e.target.tagName.toLowerCase())),$select.close(skipFocusser),scope.$digest()}$select.clickTriggeredSelect=!1}}var $select=ctrls[0],ngModel=ctrls[1],searchInput=element.querySelectorAll("input.ui-select-search");$select.generatedId=uiSelectConfig.generateId(),$select.baseTitle=attrs.title||"Select box",$select.focusserTitle=$select.baseTitle+" focus",$select.focusserId="focusser-"+$select.generatedId,$select.multiple=angular.isDefined(attrs.multiple)&&(""===attrs.multiple||"multiple"===attrs.multiple.toLowerCase()||"true"===attrs.multiple.toLowerCase()),$select.closeOnSelect=function(){return angular.isDefined(attrs.closeOnSelect)?$parse(attrs.closeOnSelect)():uiSelectConfig.closeOnSelect}(),$select.onSelectCallback=$parse(attrs.onSelect),$select.onRemoveCallback=$parse(attrs.onRemove),ngModel.$parsers.unshift(function(inputValue){var result,locals={};if($select.multiple){for(var resultMultiple=[],j=$select.selected.length-1;j>=0;j--)locals={},locals[$select.parserResult.itemName]=$select.selected[j],result=$select.parserResult.modelMapper(scope,locals),resultMultiple.unshift(result);return resultMultiple}return locals={},locals[$select.parserResult.itemName]=inputValue,result=$select.parserResult.modelMapper(scope,locals)}),ngModel.$formatters.unshift(function(inputValue){var result,data=$select.parserResult.source(scope,{$select:{search:""}}),locals={};if(data){if($select.multiple){var resultMultiple=[],checkFnMultiple=function(list,value){if(!list||!list.length)return resultMultiple.unshift(value),!0;for(var p=list.length-1;p>=0;p--){if(locals[$select.parserResult.itemName]=list[p],result=$select.parserResult.modelMapper(scope,locals),$select.parserResult.trackByExp){var matches=/\.(.+)/.exec($select.parserResult.trackByExp);if(matches.length>0&&result[matches[1]]==value[matches[1]])return resultMultiple.unshift(list[p]),!0}if(result==value)return resultMultiple.unshift(list[p]),!0}return!1};if(!inputValue)return resultMultiple;for(var k=inputValue.length-1;k>=0;k--)checkFnMultiple($select.selected,inputValue[k])||checkFnMultiple(data,inputValue[k]);return resultMultiple}var checkFnSingle=function(d){return locals[$select.parserResult.itemName]=d,result=$select.parserResult.modelMapper(scope,locals),result==inputValue};if($select.selected&&checkFnSingle($select.selected))return $select.selected;for(var i=data.length-1;i>=0;i--)if(checkFnSingle(data[i]))return data[i]}return inputValue}),$select.ngModel=ngModel,$select.choiceGrouped=function(group){return $select.isGrouped&&group&&group.name};var focusser=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");attrs.tabindex&&attrs.$observe("tabindex",function(value){$select.multiple?searchInput.attr("tabindex",value):focusser.attr("tabindex",value),element.removeAttr("tabindex")}),$compile(focusser)(scope),$select.focusser=focusser,$select.multiple||(element.append(focusser),focusser.bind("focus",function(){scope.$evalAsync(function(){$select.focus=!0})}),focusser.bind("blur",function(){scope.$evalAsync(function(){$select.focus=!1})}),focusser.bind("keydown",function(e){return e.which===KEY.BACKSPACE?(e.preventDefault(),e.stopPropagation(),$select.select(void 0),void scope.$apply()):void(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||((e.which==KEY.DOWN||e.which==KEY.UP||e.which==KEY.ENTER||e.which==KEY.SPACE)&&(e.preventDefault(),e.stopPropagation(),$select.activate()),scope.$digest()))}),focusser.bind("keyup input",function(e){e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||e.which==KEY.ENTER||e.which===KEY.BACKSPACE||($select.activate(focusser.val()),focusser.val(""),scope.$digest())})),scope.$watch("searchEnabled",function(){var searchEnabled=scope.$eval(attrs.searchEnabled);$select.searchEnabled=void 0!==searchEnabled?searchEnabled:uiSelectConfig.searchEnabled}),attrs.$observe("disabled",function(){$select.disabled=void 0!==attrs.disabled?attrs.disabled:!1}),attrs.$observe("resetSearchInput",function(){var resetSearchInput=scope.$eval(attrs.resetSearchInput);$select.resetSearchInput=void 0!==resetSearchInput?resetSearchInput:!0}),attrs.$observe("tagging",function(){if(void 0!==attrs.tagging){var taggingEval=scope.$eval(attrs.tagging);$select.tagging={isActivated:!0,fct:taggingEval!==!0?taggingEval:void 0}}else $select.tagging={isActivated:!1,fct:void 0}}),attrs.$observe("taggingLabel",function(){void 0!==attrs.tagging&&($select.taggingLabel="false"===attrs.taggingLabel?!1:void 0!==attrs.taggingLabel?attrs.taggingLabel:"(new)")}),attrs.$observe("taggingTokens",function(){if(void 0!==attrs.tagging){var tokens=void 0!==attrs.taggingTokens?attrs.taggingTokens.split("|"):[",","ENTER"];$select.taggingTokens={isActivated:!0,tokens:tokens}}}),$select.multiple?(scope.$watchCollection(function(){return ngModel.$modelValue},function(newValue,oldValue){oldValue!=newValue&&(ngModel.$modelValue=null)}),$select.firstPass=!0,scope.$watchCollection("$select.selected",function(){$select.firstPass?$select.firstPass=!1:ngModel.$setViewValue(Date.now())}),focusser.prop("disabled",!0)):scope.$watch("$select.selected",function(newValue){ngModel.$viewValue!==newValue&&ngModel.$setViewValue(newValue)}),ngModel.$render=function(){if($select.multiple&&!angular.isArray(ngModel.$viewValue)){if(!angular.isUndefined(ngModel.$viewValue)&&null!==ngModel.$viewValue)throw uiSelectMinErr("multiarr","Expected model value to be array but got '{0}'",ngModel.$viewValue);$select.selected=[]}$select.selected=ngModel.$viewValue},$document.on("click",onDocumentClick),scope.$on("$destroy",function(){$document.off("click",onDocumentClick)}),transcludeFn(scope,function(clone){var transcluded=angular.element("<div>").append(clone),transcludedMatch=transcluded.querySelectorAll(".ui-select-match");if(transcludedMatch.removeAttr("ui-select-match"),transcludedMatch.removeAttr("data-ui-select-match"),1!==transcludedMatch.length)throw uiSelectMinErr("transcluded","Expected 1 .ui-select-match but got '{0}'.",transcludedMatch.length);element.querySelectorAll(".ui-select-match").replaceWith(transcludedMatch);var transcludedChoices=transcluded.querySelectorAll(".ui-select-choices");if(transcludedChoices.removeAttr("ui-select-choices"),transcludedChoices.removeAttr("data-ui-select-choices"),1!==transcludedChoices.length)throw uiSelectMinErr("transcluded","Expected 1 .ui-select-choices but got '{0}'.",transcludedChoices.length);element.querySelectorAll(".ui-select-choices").replaceWith(transcludedChoices)})}}}]).directive("uiSelectChoices",["uiSelectConfig","RepeatParser","uiSelectMinErr","$compile",function(uiSelectConfig,RepeatParser,uiSelectMinErr,$compile){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(tElement){var theme=tElement.parent().attr("theme")||uiSelectConfig.theme;return theme+"/choices.tpl.html"},compile:function(tElement,tAttrs){if(!tAttrs.repeat)throw uiSelectMinErr("repeat","Expected 'repeat' expression.");return function(scope,element,attrs,$select,transcludeFn){var groupByExp=attrs.groupBy;if($select.parseRepeatAttr(attrs.repeat,groupByExp),$select.disableChoiceExpression=attrs.uiDisableChoice,$select.onHighlightCallback=attrs.onHighlight,groupByExp){var groups=element.querySelectorAll(".ui-select-choices-group");if(1!==groups.length)throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-group but got '{0}'.",groups.length);groups.attr("ng-repeat",RepeatParser.getGroupNgRepeatExpression())}var choices=element.querySelectorAll(".ui-select-choices-row");if(1!==choices.length)throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-row but got '{0}'.",choices.length);choices.attr("ng-repeat",RepeatParser.getNgRepeatExpression($select.parserResult.itemName,"$select.items",$select.parserResult.trackByExp,groupByExp)).attr("ng-if","$select.open").attr("ng-mouseenter","$select.setActiveItem("+$select.parserResult.itemName+")").attr("ng-click","$select.select("+$select.parserResult.itemName+",false,$event)");var rowsInner=element.querySelectorAll(".ui-select-choices-row-inner");if(1!==rowsInner.length)throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",rowsInner.length);rowsInner.attr("uis-transclude-append",""),$compile(element,transcludeFn)(scope),scope.$watch("$select.search",function(newValue){newValue&&!$select.open&&$select.multiple&&$select.activate(!1,!0),$select.activeIndex=$select.tagging.isActivated?-1:0,$select.refresh(attrs.refresh)}),attrs.$observe("refreshDelay",function(){var refreshDelay=scope.$eval(attrs.refreshDelay);$select.refreshDelay=void 0!==refreshDelay?refreshDelay:uiSelectConfig.refreshDelay})}}}}]).directive("uisTranscludeAppend",function(){return{link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}).directive("uiSelectMatch",["uiSelectConfig",function(uiSelectConfig){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(tElement){var theme=tElement.parent().attr("theme")||uiSelectConfig.theme,multi=tElement.parent().attr("multiple");return theme+(multi?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(scope,element,attrs,$select){$select.lockChoiceExpression=attrs.uiLockChoice,attrs.$observe("placeholder",function(placeholder){$select.placeholder=void 0!==placeholder?placeholder:uiSelectConfig.placeholder}),$select.allowClear=angular.isDefined(attrs.allowClear)?""===attrs.allowClear?!0:"true"===attrs.allowClear.toLowerCase():!1,$select.multiple&&$select.sizeSearchInput()}}}]).filter("highlight",function(){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query&&matchItem?matchItem.replace(new RegExp(escapeRegexp(query),"gi"),'<span class="ui-select-highlight">$&</span>'):matchItem}})}(),angular.module("ui.select").run(["$templateCache",function($templateCache){$templateCache.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="javascript:void(0)" class="ui-select-choices-row-inner"></a></div></li></ul>'),$templateCache.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span style="margin-right: 3px;" class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$select.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$select.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$select.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),$templateCache.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),$templateCache.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$select.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>'),$templateCache.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),$templateCache.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),$templateCache.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$select.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$select.removeChoice($index)" tabindex="-1"></a></li></span>'),$templateCache.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.activate()" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle" ng-click="$select.toggle($event)"><b></b></span></a>'),$templateCache.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open,\n                \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$select.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;"></li></ul><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),$templateCache.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open,\n                \'select2-container-disabled\': $select.disabled,\n                \'select2-container-active\': $select.focus,\n                \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),$templateCache.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),$templateCache.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),$templateCache.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')
}]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function($q,$timeout,$rootScope){function findEndEventName(endEventNames){for(var name in endEventNames)if(void 0!==transElement.style[name])return endEventNames[name]}var $transition=function(element,trigger,options){options=options||{};var deferred=$q.defer(),endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"],transitionEndHandler=function(){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler),deferred.resolve(element)})};return endEventName&&element.bind(endEventName,transitionEndHandler),$timeout(function(){angular.isString(trigger)?element.addClass(trigger):angular.isFunction(trigger)?trigger(element):angular.isObject(trigger)&&element.css(trigger),endEventName||deferred.resolve(element)}),deferred.promise.cancel=function(){endEventName&&element.unbind(endEventName,transitionEndHandler),deferred.reject("Transition cancelled")},deferred.promise},transElement=document.createElement("trans"),transitionEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},animationEndEventNames={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return $transition.transitionEndEventName=findEndEventName(transitionEndEventNames),$transition.animationEndEventName=findEndEventName(animationEndEventNames),$transition}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function($transition){return{link:function(scope,element,attrs){function doTransition(change){function newTransitionDone(){currentTransition===newTransition&&(currentTransition=void 0)}var newTransition=$transition(element,change);return currentTransition&&currentTransition.cancel(),currentTransition=newTransition,newTransition.then(newTransitionDone,newTransitionDone),newTransition}function expand(){initialAnimSkip?(initialAnimSkip=!1,expandDone()):(element.removeClass("collapse").addClass("collapsing"),doTransition({height:element[0].scrollHeight+"px"}).then(expandDone))}function expandDone(){element.removeClass("collapsing"),element.addClass("collapse in"),element.css({height:"auto"})}function collapse(){if(initialAnimSkip)initialAnimSkip=!1,collapseDone(),element.css({height:0});else{element.css({height:element[0].scrollHeight+"px"});{element[0].offsetWidth}element.removeClass("collapse in").addClass("collapsing"),doTransition({height:0}).then(collapseDone)}}function collapseDone(){element.removeClass("collapsing"),element.addClass("collapse")}var currentTransition,initialAnimSkip=!0;scope.$watch(attrs.collapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=!1)})},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",function(){that.removeGroup(groupScope)})},this.removeGroup=function(group){var index=this.groups.indexOf(group);-1!==index&&this.groups.splice(index,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){accordionCtrl.addGroup(scope),scope.$watch("isOpen",function(value){value&&accordionCtrl.closeOthers(scope)}),scope.toggleOpen=function(){scope.isDisabled||(scope.isOpen=!scope.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(scope,element,attr,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(scope,element,attr,controller){scope.$watch(function(){return controller[attr.accordionTransclude]},function(heading){heading&&(element.html(""),element.append(heading))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function($scope,$attrs){$scope.closeable="close"in $attrs,this.close=$scope.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function($timeout){return{require:"alert",link:function(scope,element,attrs,alertCtrl){$timeout(function(){alertCtrl.close()},parseInt(attrs.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe),scope.$watch(attr.bindHtmlUnsafe,function(value){element.html(value||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.btnRadio)))},element.bind(buttonsCtrl.toggleEvent,function(){var isActive=element.hasClass(buttonsCtrl.activeClass);(!isActive||angular.isDefined(attrs.uncheckable))&&scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.btnRadio)),ngModelCtrl.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attributeValue,defaultValue){var val=scope.$eval(attributeValue);return angular.isDefined(val)?val:defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.bind(buttonsCtrl.toggleEvent,function(){scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function($scope,$timeout,$interval,$transition){function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0?$scope.next():$scope.pause()}var currentInterval,isPlaying,self=this,slides=self.slides=$scope.slides=[],currentIndex=-1;self.currentSlide=null;var destroyed=!1;self.select=$scope.select=function(nextSlide,direction){function goNext(){if(!destroyed){if(self.currentSlide&&angular.isString(direction)&&!$scope.noTransition&&nextSlide.$element){nextSlide.$element.addClass(direction);{nextSlide.$element[0].offsetWidth}angular.forEach(slides,function(slide){angular.extend(slide,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(nextSlide,{direction:direction,active:!0,entering:!0}),angular.extend(self.currentSlide||{},{direction:direction,leaving:!0}),$scope.$currentTransition=$transition(nextSlide.$element,{}),function(next,current){$scope.$currentTransition.then(function(){transitionDone(next,current)},function(){transitionDone(next,current)})}(nextSlide,self.currentSlide)}else transitionDone(nextSlide,self.currentSlide);self.currentSlide=nextSlide,currentIndex=nextIndex,restartTimer()}}function transitionDone(next,current){angular.extend(next,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(current||{},{direction:"",active:!1,leaving:!1,entering:!1}),$scope.$currentTransition=null}var nextIndex=slides.indexOf(nextSlide);void 0===direction&&(direction=nextIndex>currentIndex?"next":"prev"),nextSlide&&nextSlide!==self.currentSlide&&($scope.$currentTransition?($scope.$currentTransition.cancel(),$timeout(goNext)):goNext())},$scope.$on("$destroy",function(){destroyed=!0}),self.indexOfSlide=function(slide){return slides.indexOf(slide)},$scope.next=function(){var newIndex=(currentIndex+1)%slides.length;return $scope.$currentTransition?void 0:self.select(slides[newIndex],"next")},$scope.prev=function(){var newIndex=0>currentIndex-1?slides.length-1:currentIndex-1;return $scope.$currentTransition?void 0:self.select(slides[newIndex],"prev")},$scope.isActive=function(slide){return self.currentSlide===slide},$scope.$watch("interval",restartTimer),$scope.$on("$destroy",resetTimer),$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},self.addSlide=function(slide,element){slide.$element=element,slides.push(slide),1===slides.length||slide.active?(self.select(slides[slides.length-1]),1==slides.length&&$scope.play()):slide.active=!1},self.removeSlide=function(slide){var index=slides.indexOf(slide);slides.splice(index,1),slides.length>0&&slide.active?self.select(index>=slides.length?slides[index-1]:slides[index]):currentIndex>index&&currentIndex--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(scope,element,attrs,carouselCtrl){carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){active&&carouselCtrl.select(scope)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function($locale,orderByFilter){function createParser(format){var map=[],regex=format.split("");return angular.forEach(formatCodeToRegex,function(data,code){var index=format.indexOf(code);if(index>-1){format=format.split(""),regex[index]="("+data.regex+")",format[index]="$";for(var i=index+1,n=index+code.length;n>i;i++)regex[i]="",format[i]="$";format=format.join(""),map.push({index:index,apply:data.apply})}}),{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function isValid(year,month,date){return 1===month&&date>28?29===date&&(year%4===0&&year%100!==0||year%400===0):3===month||5===month||8===month||10===month?31>date:!0}this.parsers={};var formatCodeToRegex={yyyy:{regex:"\\d{4}",apply:function(value){this.year=+value}},yy:{regex:"\\d{2}",apply:function(value){this.year=+value+2e3}},y:{regex:"\\d{1,4}",apply:function(value){this.year=+value}},MMMM:{regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)}},MMM:{regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1}},M:{regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},EEEE:{regex:$locale.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(input,format){if(!angular.isString(input)||!format)return input;format=$locale.DATETIME_FORMATS[format]||format,this.parsers[format]||(this.parsers[format]=createParser(format));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex);if(results&&results.length){for(var dt,fields={year:1900,month:0,date:1,hours:0},i=1,n=results.length;n>i;i++){var mapper=map[i-1];mapper.apply&&mapper.apply.call(fields,results[i])}return isValid(fields.year,fields.month,fields.date)&&(dt=new Date(fields.year,fields.month,fields.date,fields.hours)),dt}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!=$document[0]&&(offsetParentBCR=this.offset(angular.element(offsetParentEl)),offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function(hostEl,targetEl,positionStr,appendToBody){var hostElPos,targetElWidth,targetElHeight,targetElPos,positionStrParts=positionStr.split("-"),pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl),targetElWidth=targetEl.prop("offsetWidth"),targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function(){return hostElPos.left},right:function(){return hostElPos.left+hostElPos.width}},shiftHeight={center:function(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function(){return hostElPos.top},bottom:function(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()}}return targetElPos}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function($scope,$attrs,$parse,$interpolate,$timeout,$log,dateFilter,datepickerConfig){var self=this,ngModelCtrl={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(key,index){self[key]=angular.isDefined($attrs[key])?8>index?$interpolate($attrs[key])($scope.$parent):$scope.$parent.$eval($attrs[key]):datepickerConfig[key]}),angular.forEach(["minDate","maxDate"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=value?new Date(value):null,self.refreshView()}):self[key]=datepickerConfig[key]?new Date(datepickerConfig[key]):null}),$scope.datepickerMode=$scope.datepickerMode||datepickerConfig.datepickerMode,$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined($attrs.initDate)?$scope.$parent.$eval($attrs.initDate):new Date,$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)?($scope.activeDateId=dateObject.uid,!0):!1},this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$modelValue){var date=new Date(ngModelCtrl.$modelValue),isValid=!isNaN(date);isValid?this.activeDate=date:$log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),ngModelCtrl.$setValidity("date",isValid)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;ngModelCtrl.$setValidity("date-disabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;return{date:date,label:dateFilter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),current:0===this.compare(date,new Date)}},this.isDisabled=function(date){return this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$attrs.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)-1]},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&-1===direction||($scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)+direction])},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){$timeout(function(){self.element[0].focus()},0,!1)};$scope.$on("datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey)if(evt.preventDefault(),evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate),focusElement()}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):($scope.toggleMode("up"===key?1:-1),focusElement())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&datepickerCtrl.init(ngModelCtrl)}}}).directive("daypicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){function getDaysInMonth(year,month){return 1!==month||year%4!==0||year%100===0&&year%400!==0?DAYS_IN_MONTH[month]:29}function getDates(startDate,n){var dates=new Array(n),current=new Date(startDate),i=0;for(current.setHours(12);n>i;)dates[i++]=new Date(current),current.setDate(current.getDate()+1);return dates}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}scope.showWeeks=ctrl.showWeeks,ctrl.step={months:1},ctrl.element=element;var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];ctrl._refreshView=function(){var year=ctrl.activeDate.getFullYear(),month=ctrl.activeDate.getMonth(),firstDayOfMonth=new Date(year,month,1),difference=ctrl.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(-numDisplayedFromPreviousMonth+1);for(var days=getDates(firstDate,42),i=0;42>i;i++)days[i]=angular.extend(ctrl.createDateObject(days[i],ctrl.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;7>j;j++)scope.labels[j]={abbr:dateFilter(days[j].date,ctrl.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};if(scope.title=dateFilter(ctrl.activeDate,ctrl.formatDayTitle),scope.rows=ctrl.split(days,7),scope.showWeeks){scope.weekNumbers=[];for(var weekNumber=getISO8601WeekNumber(scope.rows[0][0].date),numWeeks=scope.rows.length;scope.weekNumbers.push(weekNumber++)<numWeeks;);}},ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},ctrl.handleKeyDown=function(key){var date=ctrl.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=ctrl.activeDate.getMonth()+("pageup"===key?-1:1);ctrl.activeDate.setMonth(month,1),date=Math.min(getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()));ctrl.activeDate.setDate(date)},ctrl.refreshView()}}}]).directive("monthpicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){ctrl.step={years:1},ctrl.element=element,ctrl._refreshView=function(){for(var months=new Array(12),year=ctrl.activeDate.getFullYear(),i=0;12>i;i++)months[i]=angular.extend(ctrl.createDateObject(new Date(year,i,1),ctrl.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(ctrl.activeDate,ctrl.formatMonthTitle),scope.rows=ctrl.split(months,3)},ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth())-new Date(date2.getFullYear(),date2.getMonth())},ctrl.handleKeyDown=function(key){var date=ctrl.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=3;else if("right"===key)date+=1;else if("down"===key)date+=3;else if("pageup"===key||"pagedown"===key){var year=ctrl.activeDate.getFullYear()+("pageup"===key?-1:1);ctrl.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);ctrl.activeDate.setMonth(date)},ctrl.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}var range=ctrl.yearRange;ctrl.step={years:range},ctrl.element=element,ctrl._refreshView=function(){for(var years=new Array(range),i=0,start=getStartingYear(ctrl.activeDate.getFullYear());range>i;i++)years[i]=angular.extend(ctrl.createDateObject(new Date(start+i,0,1),ctrl.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - "),scope.rows=ctrl.split(years,5)},ctrl.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()},ctrl.handleKeyDown=function(key){var date=ctrl.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=5:"right"===key?date+=1:"down"===key?date+=5:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*ctrl.step.years:"home"===key?date=getStartingYear(ctrl.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(ctrl.activeDate.getFullYear())+range-1),ctrl.activeDate.setFullYear(date)},ctrl.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function($compile,$parse,$document,$position,dateFilter,dateParser,datepickerPopupConfig){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(scope,element,attrs,ngModel){function cameltoDash(string){return string.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function parseDate(viewValue){if(viewValue){if(angular.isDate(viewValue)&&!isNaN(viewValue))return ngModel.$setValidity("date",!0),viewValue;if(angular.isString(viewValue)){var date=dateParser.parse(viewValue,dateFormat)||new Date(viewValue);return isNaN(date)?void ngModel.$setValidity("date",!1):(ngModel.$setValidity("date",!0),date)}return void ngModel.$setValidity("date",!1)}return ngModel.$setValidity("date",!0),null}var dateFormat,closeOnDateSelection=angular.isDefined(attrs.closeOnDateSelection)?scope.$parent.$eval(attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined(attrs.datepickerAppendToBody)?scope.$parent.$eval(attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody;scope.showButtonBar=angular.isDefined(attrs.showButtonBar)?scope.$parent.$eval(attrs.showButtonBar):datepickerPopupConfig.showButtonBar,scope.getText=function(key){return scope[key+"Text"]||datepickerPopupConfig[key+"Text"]},attrs.$observe("datepickerPopup",function(value){dateFormat=value||datepickerPopupConfig.datepickerPopup,ngModel.$render()});var popupEl=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");popupEl.attr({"ng-model":"date","ng-change":"dateSelection()"});var datepickerEl=angular.element(popupEl.children()[0]);attrs.datepickerOptions&&angular.forEach(scope.$parent.$eval(attrs.datepickerOptions),function(value,option){datepickerEl.attr(cameltoDash(option),value)}),scope.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(key){if(attrs[key]){var getAttribute=$parse(attrs[key]);if(scope.$parent.$watch(getAttribute,function(value){scope.watchData[key]=value}),datepickerEl.attr(cameltoDash(key),"watchData."+key),"datepickerMode"===key){var setAttribute=getAttribute.assign;scope.$watch("watchData."+key,function(value,oldvalue){value!==oldvalue&&setAttribute(scope.$parent,value)})}}}),attrs.dateDisabled&&datepickerEl.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),ngModel.$parsers.unshift(parseDate),scope.dateSelection=function(dt){angular.isDefined(dt)&&(scope.date=dt),ngModel.$setViewValue(scope.date),ngModel.$render(),closeOnDateSelection&&(scope.isOpen=!1,element[0].focus())},element.bind("input change keyup",function(){scope.$apply(function(){scope.date=ngModel.$modelValue})}),ngModel.$render=function(){var date=ngModel.$viewValue?dateFilter(ngModel.$viewValue,dateFormat):"";element.val(date),scope.date=parseDate(ngModel.$modelValue)};var documentClickBind=function(event){scope.isOpen&&event.target!==element[0]&&scope.$apply(function(){scope.isOpen=!1})},keydown=function(evt){scope.keydown(evt)};element.bind("keydown",keydown),scope.keydown=function(evt){27===evt.which?(evt.preventDefault(),evt.stopPropagation(),scope.close()):40!==evt.which||scope.isOpen||(scope.isOpen=!0)},scope.$watch("isOpen",function(value){value?(scope.$broadcast("datepicker.focus"),scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight"),$document.bind("click",documentClickBind)):$document.unbind("click",documentClickBind)}),scope.select=function(date){if("today"===date){var today=new Date;angular.isDate(ngModel.$modelValue)?(date=new Date(ngModel.$modelValue),date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())):date=new Date(today.setHours(0,0,0,0))}scope.dateSelection(date)},scope.close=function(){scope.isOpen=!1,element[0].focus()};var $popup=$compile(popupEl)(scope);popupEl.remove(),appendToBody?$document.find("body").append($popup):element.after($popup),scope.$on("$destroy",function(){$popup.remove(),element.unbind("keydown",keydown),$document.unbind("click",documentClickBind)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(scope,element){element.bind("click",function(event){event.preventDefault(),event.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function($document){var openScope=null;this.open=function(dropdownScope){openScope||($document.bind("click",closeDropdown),$document.bind("keydown",escapeKeyBind)),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope},this.close=function(dropdownScope){openScope===dropdownScope&&(openScope=null,$document.unbind("click",closeDropdown),$document.unbind("keydown",escapeKeyBind))};var closeDropdown=function(evt){if(openScope){var toggleElement=openScope.getToggleElement();evt&&toggleElement&&toggleElement[0].contains(evt.target)||openScope.$apply(function(){openScope.isOpen=!1})}},escapeKeyBind=function(evt){27===evt.which&&(openScope.focusToggleElement(),closeDropdown())
}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function($scope,$attrs,$parse,dropdownConfig,dropdownService,$animate){var getIsOpen,self=this,scope=$scope.$new(),openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop;this.init=function(element){self.$element=element,$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value}))},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){$animate[isOpen?"addClass":"removeClass"](self.$element,openClass),isOpen?(scope.focusToggleElement(),dropdownService.open(scope)):dropdownService.close(scope),setIsOpen($scope,isOpen),angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}),$scope.$on("$locationChangeSuccess",function(){scope.isOpen=!1}),$scope.$on("$destroy",function(){scope.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init(element)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key==stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key==stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}}).directive("modalBackdrop",["$timeout",function($timeout){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(scope,element,attrs){scope.backdropClass=attrs.backdropClass||"",scope.animate=!1,$timeout(function(){scope.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function($modalStack,$timeout){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowClass||""),scope.size=attrs.size,$timeout(function(){scope.animate=!0,element[0].querySelectorAll("[autofocus]").length||element[0].focus()}),scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!=modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty(),$element.append(clone)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function($transition,$timeout,$document,$compile,$rootScope,$$stackedMap){function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex}function removeModalWindow(modalInstance){var body=$document.find("body").eq(0),modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,300,function(){modalWindow.modalScope.$destroy(),body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0),checkRemoveBackdrop()})}function checkRemoveBackdrop(){if(backdropDomEl&&-1==backdropIndex()){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,150,function(){backdropScopeRef.$destroy(),backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,emulateTime,done){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,domEl.remove(),done&&done())}scope.animate=!1;var transitionEndEventName=$transition.transitionEndEventName;if(transitionEndEventName){var timeout=$timeout(afterAnimating,emulateTime);domEl.bind(transitionEndEventName,function(){$timeout.cancel(timeout),afterAnimating(),scope.$apply()})}else $timeout(afterAnimating)}var backdropDomEl,backdropScope,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),$modalStack={};return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.bind("keydown",function(evt){var modal;27===evt.which&&(modal=openedWindows.top(),modal&&modal.value.keyboard&&(evt.preventDefault(),$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")})))}),$modalStack.open=function(modalInstance,modal){openedWindows.add(modalInstance,{deferred:modal.deferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(!0),backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element("<div modal-backdrop></div>");angularBackgroundDomEl.attr("backdrop-class",modal.backdropClass),backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope),body.append(backdropDomEl)}var angularDomEl=angular.element("<div modal-window></div>");angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content);var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl,body.append(modalDomEl),body.addClass(OPENED_MODAL_CLASS)},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);modalWindow&&(modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance))},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);modalWindow&&(modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance))},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal;)this.dismiss(topModal.key,reason),topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack}]).provider("$modal",function(){var $modalProvider={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function($injector,$rootScope,$q,$http,$templateCache,$controller,$modalStack){function getTemplatePromise(options){return options.template?$q.when(options.template):$http.get(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl,{cache:$templateCache}).then(function(result){return result.data})}function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){(angular.isFunction(value)||angular.isArray(value))&&promisesArr.push($q.when($injector.invoke(value)))}),promisesArr}var $modal={};return $modal.open=function(modalOptions){var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,close:function(result){$modalStack.close(modalInstance,result)},dismiss:function(reason){$modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of template or templateUrl options is required.");var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));return templateAndResolvePromise.then(function(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={},resolveIter=1;modalOptions.controller&&(ctrlLocals.$scope=modalScope,ctrlLocals.$modalInstance=modalInstance,angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]}),ctrlInstance=$controller(modalOptions.controller,ctrlLocals),modalOptions.controllerAs&&(modalScope[modalOptions.controllerAs]=ctrlInstance)),$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,content:tplAndVars[0],backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size})},function(reason){modalResultDeferred.reject(reason)}),templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(!0)},function(){modalOpenedDeferred.reject(!1)}),modalInstance},$modal}]};return $modalProvider}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function($scope,$attrs,$parse){var self=this,ngModelCtrl={$setViewValue:angular.noop},setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;this.init=function(ngModelCtrl_,config){ngModelCtrl=ngModelCtrl_,this.config=config,ngModelCtrl.$render=function(){self.render()},$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10),$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=config.itemsPerPage},this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)},this.render=function(){$scope.page=parseInt(ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page){$scope.page!==page&&page>0&&page<=$scope.totalPages&&(ngModelCtrl.$setViewValue(page),ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||self.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages},$scope.$watch("totalItems",function(){$scope.totalPages=self.calculateTotalPages()}),$scope.$watch("totalPages",function(value){setNumPages($scope.$parent,value),$scope.page>value?$scope.selectPage(value):ngModelCtrl.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function($parse,paginationConfig){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(scope,element,attrs,ctrls){function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&totalPages>maxSize;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;endPage>=number;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(totalPages>endPage){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}}return pages}var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){var maxSize=angular.isDefined(attrs.maxSize)?scope.$parent.$eval(attrs.maxSize):paginationConfig.maxSize,rotate=angular.isDefined(attrs.rotate)?scope.$parent.$eval(attrs.rotate):paginationConfig.rotate;scope.boundaryLinks=angular.isDefined(attrs.boundaryLinks)?scope.$parent.$eval(attrs.boundaryLinks):paginationConfig.boundaryLinks,scope.directionLinks=angular.isDefined(attrs.directionLinks)?scope.$parent.$eval(attrs.directionLinks):paginationConfig.directionLinks,paginationCtrl.init(ngModelCtrl,paginationConfig),attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),function(value){maxSize=parseInt(value,10),paginationCtrl.render()});var originalRender=paginationCtrl.render;paginationCtrl.render=function(){originalRender(),scope.page>0&&scope.page<=scope.totalPages&&(scope.pages=getPages(scope.page,scope.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"\xab Previous",nextText:"Next \xbb",align:!0}).directive("pager",["pagerConfig",function(pagerConfig){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&(scope.align=angular.isDefined(attrs.align)?scope.$parent.$eval(attrs.align):pagerConfig.align,paginationCtrl.init(ngModelCtrl,pagerConfig))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",animation:!0,popupDelay:0},triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function(type,prefix,defaultTriggerShow){function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow,hide=triggerMap[show]||show;return{show:show,hide:hide}}var options=angular.extend({},defaultOptions,globalOptions),directiveName=snake_case(type),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup title="'+startSym+"title"+endSym+'" content="'+startSym+"content"+endSym+'" placement="'+startSym+"placement"+endSym+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var tooltipLinker=$compile(template);return function(scope,element,attrs){function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){(!hasEnableExp||scope.$eval(attrs[prefix+"Enable"]))&&(prepareTooltip(),ttScope.popupDelay?popupTimeout||(popupTimeout=$timeout(show,ttScope.popupDelay,!1),popupTimeout.then(function(reposition){reposition()})):show()())}function hideTooltipBind(){scope.$apply(function(){hide()})}function show(){return popupTimeout=null,transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null),ttScope.content?(createTooltip(),tooltip.css({top:0,left:0,display:"block"}),appendToBody?$document.find("body").append(tooltip):element.after(tooltip),positionTooltip(),ttScope.isOpen=!0,ttScope.$digest(),positionTooltip):angular.noop}function hide(){ttScope.isOpen=!1,$timeout.cancel(popupTimeout),popupTimeout=null,ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,500)):removeTooltip()}function createTooltip(){tooltip&&removeTooltip(),tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,angular.noop)}function removeTooltip(){transitionTimeout=null,tooltip&&(tooltip.remove(),tooltip=null),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){prepPlacement(),prepPopupDelay()}function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=angular.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"],delay=parseInt(val,10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay}function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers(),triggers=getTriggers(val),triggers.show===triggers.hide?element.bind(triggers.show,toggleTooltipBind):(element.bind(triggers.show,showTooltipBind),element.bind(triggers.hide,hideTooltipBind))}var tooltip,tooltipLinkedScope,transitionTimeout,popupTimeout,appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:!1,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),positionTooltip=function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px",ttPosition.left+="px",tooltip.css(ttPosition)};ttScope.isOpen=!1,attrs.$observe(type,function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()}),attrs.$observe(prefix+"Title",function(val){ttScope.title=val});var unregisterTriggers=function(){element.unbind(triggers.show,showTooltipBind),element.unbind(triggers.hide,hideTooltipBind)};prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,appendToBody&&scope.$on("$locationChangeSuccess",function(){ttScope.isOpen&&hide()}),scope.$on("$destroy",function(){$timeout.cancel(transitionTimeout),$timeout.cancel(popupTimeout),unregisterTriggers(),removeTooltip(),ttScope=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function($tooltip){return $tooltip("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):progressConfig.max,this.addBar=function(bar,element){animate||element.css({transition:"none"}),this.bars.push(bar),bar.$watch("value",function(value){bar.percent=+(100*value/$scope.max).toFixed(2)}),bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)},this.buildTemplateObjects=function(states){for(var i=0,n=states.length;n>i;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff},states[i]);return states},$scope.rate=function(value){!$scope.readonly&&value>=0&&value<=$scope.range.length&&(ngModelCtrl.$setViewValue(value),ngModelCtrl.$render())},$scope.enter=function(value){$scope.readonly||($scope.value=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue,$scope.onLeave()},$scope.onKeydown=function(evt){/(37|38|39|40)/.test(evt.which)&&(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1)))},this.render=function(){$scope.value=ngModelCtrl.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&ratingCtrl.init(ngModelCtrl)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(selectedTab){angular.forEach(tabs,function(tab){tab.active&&tab!==selectedTab&&(tab.active=!1,tab.onDeselect())}),selectedTab.active=!0,selectedTab.onSelect()},ctrl.addTab=function(tab){tabs.push(tab),1===tabs.length?tab.active=!0:tab.active&&ctrl.select(tab)},ctrl.removeTab=function(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1&&!destroyed){var newActiveIndex=index==tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)};var destroyed;$scope.$on("$destroy",function(){destroyed=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(scope,element,attrs){scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):!1,scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):!1}}}).directive("tab",["$parse",function($parse){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,tabsetCtrl){scope.$watch("active",function(active){active&&tabsetCtrl.select(scope)}),scope.disabled=!1,attrs.disabled&&scope.$parent.$watch($parse(attrs.disabled),function(value){scope.disabled=!!value}),scope.select=function(){scope.disabled||(scope.active=!0)},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(scope,elm){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}]).directive("tabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.tabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function($scope,$attrs,$parse,$log,$locale,timepickerConfig){function getHoursFromTemplate(){var hours=parseInt($scope.hours,10),valid=$scope.showMeridian?hours>0&&13>hours:hours>=0&&24>hours;return valid?($scope.showMeridian&&(12===hours&&(hours=0),$scope.meridian===meridians[1]&&(hours+=12)),hours):void 0}function getMinutesFromTemplate(){var minutes=parseInt($scope.minutes,10);return minutes>=0&&60>minutes?minutes:void 0}function pad(value){return angular.isDefined(value)&&value.toString().length<2?"0"+value:value}function refresh(keyboardChange){makeValid(),ngModelCtrl.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){ngModelCtrl.$setValidity("time",!0),$scope.invalidHours=!1,$scope.invalidMinutes=!1}function updateTemplate(keyboardChange){var hours=selected.getHours(),minutes=selected.getMinutes();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),$scope.hours="h"===keyboardChange?hours:pad(hours),$scope.minutes="m"===keyboardChange?minutes:pad(minutes),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}function addMinutes(minutes){var dt=new Date(selected.getTime()+6e4*minutes);selected.setHours(dt.getHours(),dt.getMinutes()),refresh()}var selected=new Date,ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS;this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render;var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;mousewheel&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl),$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput,this.setupInputEvents(hoursInputEl,minutesInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&$scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=parseInt(value,10)});var minuteStep=timepickerConfig.minuteStep;$attrs.minuteStep&&$scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=parseInt(value,10)}),$scope.showMeridian=timepickerConfig.showMeridian,$attrs.showMeridian&&$scope.$parent.$watch($parse($attrs.showMeridian),function(value){if($scope.showMeridian=!!value,ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()}),this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours()),e.preventDefault()}),minutesInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes()),e.preventDefault()})},this.setupInputEvents=function(hoursInputEl,minutesInputEl){if($scope.readonlyInput)return $scope.updateHours=angular.noop,void($scope.updateMinutes=angular.noop);var invalidate=function(invalidHours,invalidMinutes){ngModelCtrl.$setViewValue(null),ngModelCtrl.$setValidity("time",!1),angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours),angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes)};$scope.updateHours=function(){var hours=getHoursFromTemplate();angular.isDefined(hours)?(selected.setHours(hours),refresh("h")):invalidate(!0)},hoursInputEl.bind("blur",function(){!$scope.invalidHours&&$scope.hours<10&&$scope.$apply(function(){$scope.hours=pad($scope.hours)})}),$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate();angular.isDefined(minutes)?(selected.setMinutes(minutes),refresh("m")):invalidate(void 0,!0)},minutesInputEl.bind("blur",function(){!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})})},this.render=function(){var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;isNaN(date)?(ngModelCtrl.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),makeValid(),updateTemplate())},$scope.incrementHours=function(){addMinutes(60*hourStep)},$scope.decrementHours=function(){addMinutes(60*-hourStep)},$scope.incrementMinutes=function(){addMinutes(minuteStep)},$scope.decrementMinutes=function(){addMinutes(-minuteStep)},$scope.toggleMeridian=function(){addMinutes(720*(selected.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function($compile,$parse,$q,$timeout,$document,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40];return{require:"ngModel",link:function(originalScope,element,attrs,modelCtrl){var hasFocus,minSearch=originalScope.$eval(attrs.typeaheadMinLength)||1,waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,onSelectCallback=$parse(attrs.typeaheadOnSelect),inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=attrs.typeaheadAppendToBody?originalScope.$eval(attrs.typeaheadAppendToBody):!1,focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==!1,$setModelValue=$parse(attrs.ngModel).assign,parserResult=typeaheadParser.parse(attrs.typeahead),scope=originalScope.$new();originalScope.$on("$destroy",function(){scope.$destroy()});var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId});var popUpEl=angular.element("<div typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl);
var resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1)},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){0>index?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var getMatchesAsync=function(inputValue){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches.length>0){scope.activeIdx=focusFirst?0:-1,scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});scope.query=inputValue,scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight"),element.attr("aria-expanded",!0)}else resetMatches();onCurrentRequest&&isLoadingSetter(originalScope,!1)},function(){resetMatches(),isLoadingSetter(originalScope,!1)})};resetMatches(),scope.query=void 0;var timeoutPromise,scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,inputValue&&inputValue.length>=minSearch?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),inputValue)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)}),scope.select=function(activeIdx){var model,item,locals={};locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals)}),resetMatches(),$timeout(function(){element[0].focus()},0,!1)},element.bind("keydown",function(evt){0!==scope.matches.length&&-1!==HOT_KEYS.indexOf(evt.which)&&(-1!=scope.activeIdx||13!==evt.which&&9!==evt.which)&&(evt.preventDefault(),40===evt.which?(scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest()):38===evt.which?(scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest()):13===evt.which||9===evt.which?scope.$apply(function(){scope.select(scope.activeIdx)}):27===evt.which&&(evt.stopPropagation(),resetMatches(),scope.$digest()))}),element.bind("blur",function(){hasFocus=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&(resetMatches(),scope.$digest())};$document.bind("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.unbind("click",dismissClickHandler),appendToBody&&$popup.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):element.after($popup)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){return scope.matches.length>0},scope.isActive=function(matchIdx){return scope.active==matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function($http,$templateCache,$compile,$parse){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"template/typeahead/typeahead-match.html";$http.get(tplUrl,{cache:$templateCache}).success(function(tplContent){element.replaceWith($compile(tplContent.trim())(scope))})}}}]).filter("typeaheadHighlight",function(){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),function(angular){var devise=angular.module("Devise",[]);devise.provider("AuthIntercept",function(){var interceptAuth=!1;this.interceptAuth=function(value){return interceptAuth=!!value||void 0===value,this},this.$get=["$rootScope","$q",function($rootScope,$q){return{responseError:function(response){var intercept=response.config.interceptAuth;if(intercept=!!intercept||interceptAuth&&void 0===intercept,intercept&&401===response.status){var deferred=$q.defer();return $rootScope.$broadcast("devise:unauthorized",response,deferred),deferred.promise}return $q.reject(response)}}}]}).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("AuthIntercept")}]),devise.provider("Auth",function(){function httpConfig(action,data){var config={method:methods[action].toLowerCase(),url:paths[action]};return data&&(resourceName?(config.data={},config.data[resourceName]=data):config.data=data),config}function configure(obj,suffix){angular.forEach(obj,function(v,action){this[action+suffix]=function(param){return void 0===param?obj[action]:(obj[action]=param,this)}},this)}function constant(arg){return function(){return arg}}var paths={login:"/users/sign_in.json",logout:"/users/sign_out.json",register:"/users.json"},methods={login:"POST",logout:"DELETE",register:"POST"},resourceName="user",_parse=function(response){return response.data};configure.call(this,methods,"Method"),configure.call(this,paths,"Path"),this.resourceName=function(value){return void 0===value?resourceName:(resourceName=value,this)},this.parse=function(fn){return"function"!=typeof fn?_parse:(_parse=fn,this)},this.$get=["$q","$http","$rootScope",function($q,$http,$rootScope){function save(user){return service._currentUser=user,user}function reset(){save(null)}function broadcast(name){return function(data){return $rootScope.$broadcast("devise:"+name,data),data}}var service={_currentUser:null,parse:_parse,login:function(creds){var withCredentials=arguments.length>0,loggedIn=service.isAuthenticated();return creds=creds||{},$http(httpConfig("login",creds)).then(service.parse).then(save).then(function(user){return withCredentials&&!loggedIn?broadcast("new-session")(user):user}).then(broadcast("login"))},logout:function(){var returnOldUser=constant(service._currentUser);return $http(httpConfig("logout")).then(reset).then(returnOldUser).then(broadcast("logout"))},register:function(creds){return creds=creds||{},$http(httpConfig("register",creds)).then(service.parse).then(save).then(broadcast("new-registration"))},currentUser:function(){return service.isAuthenticated()?$q.when(service._currentUser):service.login()},isAuthenticated:function(){return!!service._currentUser}};return service}]})}(angular),function(window,angular){function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||"undefined"==typeof html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()]?(html=html.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last())):(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1))),chars&&(index=html.indexOf("<"),text+=0>index?html:html.substring(0,index),html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))),html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/;angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")
}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(){function patchXHR(fnName,newFn){window.XMLHttpRequest.prototype[fnName]=newFn(window.XMLHttpRequest.prototype[fnName])}function handleFileSelect(scope,elem,attr,ngModel,$parse,$timeout,$compile){function isInputTypeFile(){return"input"===elem[0].tagName.toLowerCase()&&elem.attr("type")&&"file"===elem.attr("type").toLowerCase()}function watch(attrVal){$timeout(function(){elem.parent().length&&watchers.push(scope.$watch(attrVal,function(val,oldVal){val!=oldVal&&recompileElem()}))})}function recompileElem(){var clone=elem.clone();if(elem.attr("__afu_gen__")&&angular.element(document.getElementById(elem.attr("id").substring(1))).remove(),elem.parent().length){for(var i=0;i<watchers.length;i++)watchers[i]();elem.replaceWith(clone),$compile(clone)(scope)}return clone}function bindAttr(bindAttr,attrName){if(bindAttr){watch(bindAttr);var val=$parse(bindAttr)(scope);val?(elem.attr(attrName,val),attr[attrName]=val):(elem.attr(attrName,null),delete attr[attrName])}}function onChangeFn(evt){var fileList;fileList=evt.__files_||evt.target&&evt.target.files,updateModel(fileList,attr,ngModel,scope,evt)}function resetAndClick(evt){if(null!=fileElem[0].value&&""!=fileElem[0].value&&(fileElem[0].value=null,-1===navigator.userAgent.indexOf("Trident/7")&&onChangeFn({target:{files:[]}})),elem.attr("__afu_clone__"))elem.attr("__afu_clone__",null);else if(-1!==navigator.appVersion.indexOf("MSIE 10")||-1!==navigator.userAgent.indexOf("Trident/7")){var clone=recompileElem();return clone.attr("__afu_clone__",!0),clone[0].click(),evt.preventDefault(),evt.stopPropagation(),!0}}function updateModel(fileList,attr,ngModel,scope,evt){for(var files=[],rejFiles=[],accept=$parse(attr.ngAccept)(scope),regexp=angular.isString(accept)&&accept?new RegExp(globStringToRegex(accept),"gi"):null,acceptFn=regexp?null:attr.ngAccept,i=0;i<fileList.length;i++){var file=fileList.item(i);!(!regexp||file.type.match(regexp)||null!=file.name&&file.name.match(regexp))||acceptFn&&!$parse(acceptFn)(scope,{$file:file,$event:evt})?rejFiles.push(file):files.push(file)}$timeout(function(){ngModel&&($parse(attr.ngModel).assign(scope,files),ngModel&&ngModel.$setViewValue(null!=files&&0==files.length?"":files),attr.ngModelRejected&&$parse(attr.ngModelRejected).assign(scope,rejFiles)),attr.ngFileChange&&""!=attr.ngFileChange&&$parse(attr.ngFileChange)(scope,{$files:files,$rejectedFiles:rejFiles,$event:evt})})}var watchers=[];bindAttr(attr.ngMultiple,"multiple"),bindAttr(attr.ngAccept,"accept"),bindAttr(attr.ngCapture,"capture"),""!=attr.ngFileSelect&&(attr.ngFileChange=attr.ngFileSelect);var fileElem=elem;if(isInputTypeFile())elem.bind("click",resetAndClick);else{fileElem=angular.element('<input type="file">'),attr.multiple&&fileElem.attr("multiple",attr.multiple),attr.accept&&fileElem.attr("accept",attr.accept),attr.capture&&fileElem.attr("capture",attr.capture);for(var key in attr)if(0==key.indexOf("inputFile")){var name=key.substring("inputFile".length);name=name[0].toLowerCase()+name.substring(1),fileElem.attr(name,attr[key])}fileElem.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__afu_gen__",!0),elem.attr("__refElem__",!0),fileElem[0].__refElem__=elem[0],elem.parent()[0].insertBefore(fileElem[0],elem[0]),elem.css("overflow","hidden"),elem.bind("click",function(e){resetAndClick(e)||fileElem[0].click()})}fileElem.bind("change",onChangeFn),elem.on("$destroy",function(){for(var i=0;i<watchers.length;i++)watchers[i]();elem[0]!=fileElem[0]&&fileElem.remove()}),watchers.push(scope.$watch(attr.ngModel,function(val,oldVal){val==oldVal||null!=val&&val.length||(-1!==navigator.appVersion.indexOf("MSIE 10")?recompileElem():fileElem[0].value=null)}))}function handleDrop(scope,elem,attr,ngModel,$parse,$timeout,$location){function calculateDragOverClass(scope,attr,evt){var valid=!0;if(regexp||acceptFn){var items=evt.dataTransfer.items;if(null!=items)for(var i=0;i<items.length&&valid;i++)valid=valid&&("file"==items[i].kind||""==items[i].kind)&&(acceptFn&&$parse(acceptFn)(scope,{$file:items[i],$event:evt})||regexp&&null!=items[i].type&&items[i].type.match(regexp)||null!=items[i].name&&items[i].name.match(regexp))}var clazz=$parse(attr.dragOverClass)(scope,{$event:evt});return clazz&&(clazz.delay&&(dragOverDelay=clazz.delay),clazz.accept&&(clazz=valid?clazz.accept:clazz.reject)),clazz||attr.dragOverClass||"dragover"}function extractFiles(evt,callback,allowDir,multiple){function addFile(file){!(!regexp||file.type.match(regexp)||null!=file.name&&file.name.match(regexp))||acceptFn&&!$parse(acceptFn)(scope,{$file:file,$event:evt})?rejFiles.push(file):files.push(file)}function traverseFileTree(files,entry,path){if(null!=entry)if(entry.isDirectory){var filePath=(path||"")+entry.name;addFile({name:entry.name,type:"directory",path:filePath});var dirReader=entry.createReader(),entries=[];processing++;var readEntries=function(){dirReader.readEntries(function(results){try{if(results.length)entries=entries.concat(Array.prototype.slice.call(results||[],0)),readEntries();else{for(var i=0;i<entries.length;i++)traverseFileTree(files,entries[i],(path?path:"")+entry.name+"/");processing--}}catch(e){processing--,console.error(e)}},function(){processing--})};readEntries()}else processing++,entry.file(function(file){try{processing--,file.path=(path?path:"")+file.name,addFile(file)}catch(e){processing--,console.error(e)}},function(){processing--})}var files=[],rejFiles=[],items=evt.dataTransfer.items,processing=0;if(items&&items.length>0&&"file"!=$location.protocol())for(var i=0;i<items.length;i++){if(items[i].webkitGetAsEntry&&items[i].webkitGetAsEntry()&&items[i].webkitGetAsEntry().isDirectory){var entry=items[i].webkitGetAsEntry();if(entry.isDirectory&&!allowDir)continue;null!=entry&&traverseFileTree(files,entry)}else{var f=items[i].getAsFile();null!=f&&addFile(f)}if(!multiple&&files.length>0)break}else{var fileList=evt.dataTransfer.files;if(null!=fileList)for(var i=0;i<fileList.length&&(addFile(fileList.item(i)),multiple||!(files.length>0));i++);}var delays=0;!function waitForProcess(delay){$timeout(function(){if(processing)10*delays++<2e4&&waitForProcess(10);else{if(!multiple&&files.length>1){for(var i=0;"directory"==files[i].type;)i++;files=[files[i]]}callback(files,rejFiles)}},delay||0)}()}var available=dropAvailable();if(attr.dropAvailable&&$timeout(function(){scope.dropAvailable?scope.dropAvailable.value=available:scope.dropAvailable=available}),!available)return void(0!=$parse(attr.hideOnDropNotAvailable)(scope)&&elem.css("display","none"));var actualDragOverClass,leaveTimeout=null,stopPropagation=$parse(attr.stopPropagation)(scope),dragOverDelay=1,accept=$parse(attr.ngAccept)(scope)||attr.accept,regexp=angular.isString(accept)&&accept?new RegExp(globStringToRegex(accept),"gi"):null,acceptFn=regexp?null:attr.ngAccept;elem[0].addEventListener("dragover",function(evt){if(evt.preventDefault(),stopPropagation&&evt.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var b=evt.dataTransfer.effectAllowed;evt.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy"}$timeout.cancel(leaveTimeout),scope.actualDragOverClass||(actualDragOverClass=calculateDragOverClass(scope,attr,evt)),elem.addClass(actualDragOverClass)},!1),elem[0].addEventListener("dragenter",function(evt){evt.preventDefault(),stopPropagation&&evt.stopPropagation()},!1),elem[0].addEventListener("dragleave",function(){leaveTimeout=$timeout(function(){elem.removeClass(actualDragOverClass),actualDragOverClass=null},dragOverDelay||1)},!1),""!=attr.ngFileDrop&&(attr.ngFileChange=scope.ngFileDrop),elem[0].addEventListener("drop",function(evt){evt.preventDefault(),stopPropagation&&evt.stopPropagation(),elem.removeClass(actualDragOverClass),actualDragOverClass=null,extractFiles(evt,function(files,rejFiles){$timeout(function(){ngModel&&($parse(attr.ngModel).assign(scope,files),ngModel&&ngModel.$setViewValue(null!=files&&0==files.length?"":files)),attr.ngModelRejected&&scope[attr.ngModelRejected]&&$parse(attr.ngModelRejected).assign(scope,rejFiles)}),$timeout(function(){$parse(attr.ngFileChange)(scope,{$files:files,$rejectedFiles:rejFiles,$event:evt})})},0!=$parse(attr.allowDir)(scope),attr.multiple||$parse(attr.ngMultiple)(scope))},!1)}function dropAvailable(){var div=document.createElement("div");return"draggable"in div&&"ondrop"in div}function globStringToRegex(str){if(str.length>2&&"/"===str[0]&&"/"===str[str.length-1])return str.substring(1,str.length-1);var split=str.split(","),result="";if(split.length>1)for(var i=0;i<split.length;i++)result+="("+globStringToRegex(split[i])+")",i<split.length-1&&(result+="|");else 0==str.indexOf(".")&&(str="*"+str),result="^"+str.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",result=result.replace(/\\\*/g,".*").replace(/\\\?/g,".");return result}window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&patchXHR("setRequestHeader",function(orig){return function(header,value){if("__setXHR_"===header){var val=value(this);val instanceof Function&&val(this)}else orig.apply(this,arguments)}});var angularFileUpload=angular.module("angularFileUpload",[]);angularFileUpload.version="3.0.7",angularFileUpload.service("$upload",["$http","$q","$timeout",function($http,$q,$timeout){function sendHttp(config){config.method=config.method||"POST",config.headers=config.headers||{},config.transformRequest=config.transformRequest||function(data,headersGetter){return window.ArrayBuffer&&data instanceof window.ArrayBuffer?data:$http.defaults.transformRequest[0](data,headersGetter)};var deferred=$q.defer(),promise=deferred.promise;return config.headers.__setXHR_=function(){return function(xhr){xhr&&(config.__XHR=xhr,config.xhrFn&&config.xhrFn(xhr),xhr.upload.addEventListener("progress",function(e){e.config=config,deferred.notify?deferred.notify(e):promise.progress_fn&&$timeout(function(){promise.progress_fn(e)})},!1),xhr.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=config,deferred.notify?deferred.notify(e):promise.progress_fn&&$timeout(function(){promise.progress_fn(e)}))},!1))}},$http(config).then(function(r){deferred.resolve(r)},function(e){deferred.reject(e)},function(n){deferred.notify(n)}),promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.progress=function(fn){return promise.progress_fn=fn,promise.then(null,null,function(update){fn(update)}),promise},promise.abort=function(){return config.__XHR&&$timeout(function(){config.__XHR.abort()}),promise},promise.xhr=function(fn){return config.xhrFn=function(origXhrFn){return function(){origXhrFn&&origXhrFn.apply(promise,arguments),fn.apply(promise,arguments)}}(config.xhrFn),promise},promise}this.upload=function(config){config.headers=config.headers||{},config.headers["Content-Type"]=void 0;config.transformRequest;return config.transformRequest=config.transformRequest?"[object Array]"===Object.prototype.toString.call(config.transformRequest)?config.transformRequest:[config.transformRequest]:[],config.transformRequest.push(function(data){var formData=new FormData,allFields={};for(var key in config.fields)allFields[key]=config.fields[key];if(data&&(allFields.data=data),config.formDataAppender)for(var key in allFields)config.formDataAppender(formData,key,allFields[key]);else for(var key in allFields){var val=allFields[key];void 0!==val&&("[object String]"===Object.prototype.toString.call(val)?formData.append(key,val):config.sendObjectsAsJsonBlob&&"object"==typeof val?formData.append(key,new Blob([val],{type:"application/json"})):formData.append(key,JSON.stringify(val)))}if(null!=config.file){var fileFormName=config.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(config.file))for(var isFileFormNameString="[object String]"===Object.prototype.toString.call(fileFormName),i=0;i<config.file.length;i++)formData.append(isFileFormNameString?fileFormName:fileFormName[i],config.file[i],config.fileName&&config.fileName[i]||config.file[i].name);else formData.append(fileFormName,config.file,config.fileName||config.file.name)}return formData}),sendHttp(config)},this.http=function(config){return sendHttp(config)}}]),angularFileUpload.directive("ngFileSelect",["$parse","$timeout","$compile",function($parse,$timeout,$compile){return{restrict:"AEC",require:"?ngModel",link:function(scope,elem,attr,ngModel){handleFileSelect(scope,elem,attr,ngModel,$parse,$timeout,$compile)}}}]),angularFileUpload.directive("ngFileDrop",["$parse","$timeout","$location",function($parse,$timeout,$location){return{restrict:"AEC",require:"?ngModel",link:function(scope,elem,attr,ngModel){handleDrop(scope,elem,attr,ngModel,$parse,$timeout,$location)}}}]),angularFileUpload.directive("ngNoFileDrop",function(){return function(scope,elem){dropAvailable()&&elem.css("display","none")}}),angularFileUpload.directive("ngFileDropAvailable",["$parse","$timeout",function($parse,$timeout){return function(scope,elem,attr){if(dropAvailable()){var fn=$parse(attr.ngFileDropAvailable);$timeout(function(){fn(scope)})}}}]);var ngFileUpload=angular.module("ngFileUpload",[]);for(var key in angularFileUpload)ngFileUpload[key]=angularFileUpload[key]}(),/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 */
function(root,factory){"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define(factory):root.Spinner=factory()}(this,function(){function createEl(tag,prop){var n,el=document.createElement(tag||"div");for(n in prop)el[n]=prop[n];return el}function ins(parent){for(var i=1,n=arguments.length;n>i;i++)parent.appendChild(arguments[i]);return parent}function addAnimation(alpha,trail,i,lines){var name=["opacity",trail,~~(100*alpha),i,lines].join("-"),start=.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf("Animation")).toLowerCase(),pre=prefix&&"-"+prefix+"-"||"";return animations[name]||(sheet.insertRule("@"+pre+"keyframes "+name+"{0%{opacity:"+z+"}"+start+"%{opacity:"+alpha+"}"+(start+.01)+"%{opacity:1}"+(start+trail)%100+"%{opacity:"+alpha+"}100%{opacity:"+z+"}}",sheet.cssRules.length),animations[name]=1),name}function vendor(el,prop){var pp,i,s=el.style;for(prop=prop.charAt(0).toUpperCase()+prop.slice(1),i=0;i<prefixes.length;i++)if(pp=prefixes[i]+prop,void 0!==s[pp])return pp;return void 0!==s[prop]?prop:void 0}function css(el,prop){for(var n in prop)el.style[vendor(el,n)||n]=prop[n];return el}function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i];for(var n in def)void 0===obj[n]&&(obj[n]=def[n])}return obj}function getColor(color,idx){return"string"==typeof color?color:color[idx%color.length]}function Spinner(o){this.opts=merge(o||{},Spinner.defaults,defaults)}function initVML(){function vml(tag,attr){return createEl("<"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}sheet.addRule(".spin-vml","behavior:url(#default#VML)"),Spinner.prototype.lines=function(el,o){function grp(){return css(vml("group",{coordsize:s+" "+s,coordorigin:-r+" "+-r}),{width:s,height:s})}function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+"deg",left:~~dx}),ins(css(vml("roundrect",{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml("fill",{color:getColor(o.color,i),opacity:o.opacity}),vml("stroke",{opacity:0}))))}var i,r=o.length+o.width,s=2*r,margin=2*-(o.width+o.length)+"px",g=css(grp(),{position:"absolute",top:margin,left:margin});if(o.shadow)for(i=1;i<=o.lines;i++)seg(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=o.lines;i++)seg(i);return ins(el,g)},Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild;o=o.shadow&&o.lines||0,c&&i+o<c.childNodes.length&&(c=c.childNodes[i+o],c=c&&c.firstChild,c=c&&c.firstChild,c&&(c.opacity=val))}}var useCssAnimations,prefixes=["webkit","Moz","ms","O"],animations={},sheet=function(){var el=createEl("style",{type:"text/css"});return ins(document.getElementsByTagName("head")[0],el),el.sheet||el.styleSheet}(),defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};Spinner.defaults={},merge(Spinner.prototype,{spin:function(target){this.stop();var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex});if(css(el,{left:o.left,top:o.top}),target&&target.insertBefore(el,target.firstChild||null),el.setAttribute("role","progressbar"),self.lines(el,self.opts),!useCssAnimations){var alpha,i=0,start=(o.lines-1)*(1-o.direction)/2,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;!function anim(){i++;for(var j=0;j<o.lines;j++)alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity),self.opacity(el,j*o.direction+start,alpha,o);self.timeout=self.el&&setTimeout(anim,~~(1e3/fps))}()}return self},stop:function(){var el=this.el;return el&&(clearTimeout(this.timeout),el.parentNode&&el.parentNode.removeChild(el),this.el=void 0),this},lines:function(el,o){function fill(color,shadow){return css(createEl(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:color,boxShadow:shadow,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*i+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var seg,i=0,start=(o.lines-1)*(1-o.direction)/2;i<o.lines;i++)seg=css(createEl(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&ins(seg,css(fill("#000","0 0 4px #000"),{top:"2px"})),ins(el,ins(seg,fill(getColor(o.color,i),"0 0 1px rgba(0,0,0,.1)")));return el},opacity:function(el,i,val){i<el.childNodes.length&&(el.childNodes[i].style.opacity=val)}});var probe=css(createEl("group"),{behavior:"url(#default#VML)"});return!vendor(probe,"transform")&&probe.adj?initVML():useCssAnimations=vendor(probe,"animation"),Spinner}),/*!
 * Ladda 0.9.7 (2015-01-17, 11:24)
 * http://lab.hakim.se/ladda
 * MIT licensed
 *
 * Copyright (C) 2015 Hakim El Hattab, http://hakim.se
 */
function(t,e){"object"==typeof exports?module.exports=e(require("spin.js")):"function"==typeof define&&define.amd?define(["spin-js"],e):t.Ladda=e(t.Spinner)}(this,function(t){function e(t){if(void 0===t)return void console.warn("Ladda button target must be defined.");t.querySelector(".ladda-label")||(t.innerHTML='<span class="ladda-label">'+t.innerHTML+"</span>");var e,n=t.querySelector(".ladda-spinner");n||(n=document.createElement("span"),n.className="ladda-spinner"),t.appendChild(n);var r,a={start:function(){return e||(e=o(t)),t.setAttribute("disabled",""),t.setAttribute("data-loading",""),clearTimeout(r),e.spin(n),this.setProgress(0),this},startAfter:function(t){return clearTimeout(r),r=setTimeout(function(){a.start()},t),this},stop:function(){return t.removeAttribute("disabled"),t.removeAttribute("data-loading"),clearTimeout(r),e&&(r=setTimeout(function(){e.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(e){e=Math.max(Math.min(e,1),0);var n=t.querySelector(".ladda-progress");0===e&&n&&n.parentNode?n.parentNode.removeChild(n):(n||(n=document.createElement("div"),n.className="ladda-progress",t.appendChild(n)),n.style.width=(e||0)*t.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),t.setAttribute("disabled",""),this},isLoading:function(){return t.hasAttribute("data-loading")},remove:function(){clearTimeout(r),t.removeAttribute("disabled",""),t.removeAttribute("data-loading",""),e&&(e.stop(),e=null);for(var n=0,i=u.length;i>n;n++)if(a===u[n]){u.splice(n,1);break}}};return u.push(a),a}function n(t,e){for(;t.parentNode&&t.tagName!==e;)t=t.parentNode;return e===t.tagName?t:void 0}function r(t){for(var e=["input","textarea","select"],n=[],r=0;e.length>r;r++)for(var a=t.getElementsByTagName(e[r]),i=0;a.length>i;i++)a[i].hasAttribute("required")&&n.push(a[i]);return n}function a(t,a){a=a||{};var i=[];"string"==typeof t?i=s(document.querySelectorAll(t)):"object"==typeof t&&"string"==typeof t.nodeName&&(i=[t]);for(var o=0,u=i.length;u>o;o++)(function(){var t=i[o];if("function"==typeof t.addEventListener){var s=e(t),u=-1;t.addEventListener("click",function(){var e=!0,i=n(t,"FORM");if(void 0!==i)for(var o=r(i),d=0;o.length>d;d++)""===o[d].value.replace(/^\s+|\s+$/g,"")&&(e=!1),"checkbox"!==o[d].type&&"radio"!==o[d].type||o[d].checked||(e=!1);e&&(s.startAfter(1),"number"==typeof a.timeout&&(clearTimeout(u),u=setTimeout(s.stop,a.timeout)),"function"==typeof a.callback&&a.callback.apply(null,[s]))},!1)}})()}function i(){for(var t=0,e=u.length;e>t;t++)u[t].stop()}function o(e){var n,r=e.offsetHeight;0===r&&(r=parseFloat(window.getComputedStyle(e).height)),r>32&&(r*=.8),e.hasAttribute("data-spinner-size")&&(r=parseInt(e.getAttribute("data-spinner-size"),10)),e.hasAttribute("data-spinner-color")&&(n=e.getAttribute("data-spinner-color"));var a=12,i=.2*r,o=.6*i,s=7>i?2:3;return new t({color:n||"#fff",lines:a,radius:i,length:o,width:s,zIndex:"auto",top:"auto",left:"auto",className:""})}function s(t){for(var e=[],n=0;t.length>n;n++)e.push(t[n]);return e}var u=[];return{bind:a,create:e,stopAll:i}}),/*! angular-ladda 0.2.2 */
!function(a,e){var t;if("object"==typeof exports){try{t=require("ladda")}catch(n){}module.exports=e(t)}else"function"==typeof define&&define.amd?define(function(a){var n="ladda";try{t=a(n)}catch(d){}return e(t)}):a.Ladda=e(a.Ladda)}(this,function(a){angular.module("angular-ladda",[]).provider("ladda",function(){var a={style:"zoom-in"};return{setOption:function(e){angular.extend(a,e)},$get:function(){return a}}}).directive("ladda",["ladda",function(e){return{restrict:"A",priority:-1,link:function(t,n,d){if(n.addClass("ladda-button"),angular.isUndefined(n.attr("data-style"))&&n.attr("data-style",e.style||"zoom-in"),!n[0].querySelector(".ladda-label")){var r=document.createElement("span");r.className="ladda-label",angular.element(r).append(n.contents()),n.append(r)}var i=a.create(n[0]);t.$watch(d.ladda,function(a){a||angular.isNumber(a)?(i.isLoading()||i.start(),angular.isNumber(a)&&i.setProgress(a)):(i.stop(),d.ngDisabled&&n.attr("disabled",t.$eval(d.ngDisabled)))})}}}])}),function(){function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&length>index;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;return arguments.length<3&&(memo=obj[keys?keys[index]:index],index+=dir),iterator(obj,iteratee,memo,keys,index,length)}}function createIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);for(var length=null!=array&&array.length,index=dir>0?0:length-1;index>=0&&length>index;index+=dir)if(predicate(array[index],index,array))return index;return-1}}function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=_.isFunction(constructor)&&constructor.prototype||ObjProto,prop="constructor";for(_.has(obj,prop)&&!_.contains(keys,prop)&&keys.push(prop);nonEnumIdx--;)prop=nonEnumerableProps[nonEnumIdx],prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)&&keys.push(prop)}var root=this,previousUnderscore=root._,ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create,Ctor=function(){},_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.8.2";var optimizeCb=function(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}},cb=function(value,context,argCount){return null==value?_.identity:_.isFunction(value)?optimizeCb(value,context,argCount):_.isObject(value)?_.matcher(value):_.property(value)};_.iteratee=function(value,context){return cb(value,context,1/0)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(2>length||null==obj)return obj;for(var index=1;length>index;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;l>i;i++){var key=keys[i];undefinedOnly&&void 0!==obj[key]||(obj[key]=source[key])}return obj}},baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result},MAX_ARRAY_INDEX=Math.pow(2,53)-1,isArrayLike=function(collection){var length=collection&&collection.length;return"number"==typeof length&&length>=0&&MAX_ARRAY_INDEX>=length};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj))for(i=0,length=obj.length;length>i;i++)iteratee(obj[i],i,obj);else{var keys=_.keys(obj);for(i=0,length=keys.length;length>i;i++)iteratee(obj[keys[i]],keys[i],obj)}return obj},_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length),index=0;length>index;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results},_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(obj,predicate,context){var key;return key=isArrayLike(obj)?_.findIndex(obj,predicate,context):_.findKey(obj,predicate,context),void 0!==key&&-1!==key?obj[key]:void 0},_.filter=_.select=function(obj,predicate,context){var results=[];return predicate=cb(predicate,context),_.each(obj,function(value,index,list){predicate(value,index,list)&&results.push(value)}),results},_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)},_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;length>index;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return!1}return!0},_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;length>index;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return!0}return!1},_.contains=_.includes=_.include=function(obj,target,fromIndex){return isArrayLike(obj)||(obj=_.values(obj)),_.indexOf(obj,target,"number"==typeof fromIndex&&fromIndex)>=0},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return null==func?func:func.apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))},_.max=function(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee&&null!=obj){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;length>i;i++)value=obj[i],value>result&&(result=value)}else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){computed=iteratee(value,index,list),(computed>lastComputed||computed===-1/0&&result===-1/0)&&(result=value,lastComputed=computed)});return result},_.min=function(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee&&null!=obj){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;length>i;i++)value=obj[i],result>value&&(result=value)}else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){computed=iteratee(value,index,list),(lastComputed>computed||1/0===computed&&1/0===result)&&(result=value,lastComputed=computed)});return result},_.shuffle=function(obj){for(var rand,set=isArrayLike(obj)?obj:_.values(obj),length=set.length,shuffled=Array(length),index=0;length>index;index++)rand=_.random(0,index),rand!==index&&(shuffled[index]=shuffled[rand]),shuffled[rand]=set[index];return shuffled},_.sample=function(obj,n,guard){return null==n||guard?(isArrayLike(obj)||(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))},_.sortBy=function(obj,iteratee,context){return iteratee=cb(iteratee,context),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};return iteratee=cb(iteratee,context),_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)}),result}};_.groupBy=group(function(result,value,key){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,value,key){result[key]=value}),_.countBy=group(function(result,value,key){_.has(result,key)?result[key]++:result[key]=1}),_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):isArrayLike(obj)?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:isArrayLike(obj)?obj.length:_.keys(obj).length},_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];return _.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)}),[pass,fail]},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:_.initial(array,array.length-n)},_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:_.rest(array,Math.max(0,array.length-n))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){for(var output=[],idx=0,i=startIndex||0,length=input&&input.length;length>i;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){shallow||(value=flatten(value,shallow,strict));var j=0,len=value.length;for(output.length+=len;len>j;)output[idx++]=value[j++]}else strict||(output[idx++]=value)}return output};_.flatten=function(array,shallow){return flatten(array,shallow,!1)},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iteratee,context){if(null==array)return[];_.isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=cb(iteratee,context));for(var result=[],seen=[],i=0,length=array.length;length>i;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;isSorted?(i&&seen===computed||result.push(value),seen=computed):iteratee?_.contains(seen,computed)||(seen.push(computed),result.push(value)):_.contains(result,value)||result.push(value)}return result},_.union=function(){return _.uniq(flatten(arguments,!0,!0))},_.intersection=function(array){if(null==array)return[];for(var result=[],argsLength=arguments.length,i=0,length=array.length;length>i;i++){var item=array[i];if(!_.contains(result,item)){for(var j=1;argsLength>j&&_.contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result},_.difference=function(array){var rest=flatten(arguments,!0,!0,1);return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(array){for(var length=array&&_.max(array,"length").length||0,result=Array(length),index=0;length>index;index++)result[index]=_.pluck(array,index);return result},_.object=function(list,values){for(var result={},i=0,length=list&&list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){var i=0,length=array&&array.length;if("number"==typeof isSorted)i=0>isSorted?Math.max(0,length+isSorted):isSorted;else if(isSorted&&length)return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(item!==item)return _.findIndex(slice.call(array,i),_.isNaN);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){var idx=array?array.length:0;if("number"==typeof from&&(idx=0>from?idx+from+1:Math.min(idx,from+1)),item!==item)return _.findLastIndex(slice.call(array,0,idx),_.isNaN);for(;--idx>=0;)if(array[idx]===item)return idx;return-1},_.findIndex=createIndexFinder(1),_.findLastIndex=createIndexFinder(-1),_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);for(var value=iteratee(obj),low=0,high=array.length;high>low;){var mid=Math.floor((low+high)/2);iteratee(array[mid])<value?low=mid+1:high=mid}return low},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=step||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;length>idx;idx++,start+=step)range[idx]=start;return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return _.isObject(result)?result:self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2),bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound},_.partial=function(func){var boundArgs=slice.call(arguments,1),bound=function(){for(var position=0,length=boundArgs.length,args=Array(length),i=0;length>i;i++)args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound},_.bindAll=function(obj){var i,key,length=arguments.length;if(1>=length)throw new Error("bindAll must be passed function names");for(i=1;length>i;i++)key=arguments[i],obj[key]=_.bind(obj[key],obj);return obj},_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache,address=""+(hasher?hasher.apply(this,arguments):key);return _.has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=_.partial(_.delay,_,1),_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:_.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)};return function(){var now=_.now();previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;wait>last&&last>=0?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),timeout||(context=args=null)))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}},_.compose=function(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.before=function(times,func){var memo;return function(){return--times>0&&(memo=func.apply(this,arguments)),1>=times&&(func=null),memo}},_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var currentKey,keys=_.keys(obj),length=keys.length,results={},index=0;length>index;index++)currentKey=keys[index],results[currentKey]=iteratee(obj[currentKey],currentKey,obj);return results},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);for(var key,keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(key=keys[i],predicate(obj[key],key,obj))return key},_.pick=function(object,oiteratee,context){var iteratee,keys,result={},obj=object;if(null==obj)return result;_.isFunction(oiteratee)?(keys=_.allKeys(obj),iteratee=optimizeCb(oiteratee,context)):(keys=flatten(arguments,!1,!1,1),iteratee=function(value,key,obj){return key in obj},obj=Object(obj));for(var i=0,length=keys.length;length>i;i++){var key=keys[i],value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}return result},_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee))iteratee=_.negate(iteratee);else{var keys=_.map(flatten(arguments,!1,!1,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)},_.defaults=createAssigner(_.allKeys,!0),_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(null==object)return!length;for(var obj=Object(object),i=0;length>i;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!==toString.call(b))return!1;switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays="[object Array]"===className;if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}aStack=aStack||[],bStack=bStack||[];for(var length=aStack.length;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if(length=a.length,length!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],aStack,bStack))return!1}else{var key,keys=_.keys(a);if(length=keys.length,_.keys(b).length!==length)return!1;for(;length--;)if(key=keys[length],!_.has(b,key)||!eq(a[key],b[key],aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0};_.isEqual=function(a,b){return eq(a,b)},_.isEmpty=function(obj){return null==obj?!0:isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))?0===obj.length:0===_.keys(obj).length},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return _.has(obj,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(obj){return"function"==typeof obj||!1}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"===toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return null!=obj&&hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.noop=function(){},_.property=function(key){return function(obj){return null==obj?void 0:obj[key]}},_.propertyOf=function(obj){return null==obj?function(){}:function(key){return obj[key]}},_.matcher=_.matches=function(attrs){return attrs=_.extendOwn({},attrs),function(obj){return _.isMatch(obj,attrs)}},_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;n>i;i++)accum[i]=iteratee(i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_.invert(escapeMap),createEscaper=function(map){var escaper=function(match){return map[match]},source="(?:"+_.keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap),_.unescape=createEscaper(unescapeMap),_.result=function(object,property,fallback){var value=null==object?void 0:object[property];return void 0===value&&(value=fallback),_.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)},argument=settings.variable||"obj";return template.source="function("+argument+"){\n"+source+"}",template},_.chain=function(obj){var instance=_(obj);return instance._chain=!0,instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result(this,func.apply(_,args))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0],result(this,obj)}}),_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),/*!
 * ui-grid - v3.0.0-rc.20 - 2015-02-24
 * Copyright (c) 2015 ; License: MIT 
 */
function(){angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["\u0192","$","\xa3","$","\xa4","\xa5","\u17db","\u20a9","\u20b1","\u0e3f","\u20ab"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function($compile,$parse,gridUtil,uiGridConstants){var uiGridCell={priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){function compileTemplate(){var compiledElementFn=$scope.col.compiledElementFn;compiledElementFn($scope,function(clonedElement){$elm.append(clonedElement)})}if(uiGridCtrl&&$scope.col.compiledElementFn)compileTemplate();else if(uiGridCtrl&&!$scope.col.compiledElementFn)$scope.col.getCompiledElementFn().then(function(compiledElementFn){compiledElementFn($scope,function(clonedElement){$elm.append(clonedElement)})});else{var html=$scope.col.cellTemplate.replace(uiGridConstants.MODEL_COL_FIELD,"row.entity."+gridUtil.preEval($scope.col.field)).replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)"),cellElement=$compile(html)($scope);$elm.append(cellElement)}},post:function($scope,$elm){var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass);var classAdded,updateClass=function(){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.cellClass)?$scope.col.cellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.cellClass,contents.addClass(classAdded)};$scope.col.cellClass&&updateClass();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateClass,[uiGridConstants.dataChange.COLUMN,uiGridConstants.dataChange.EDIT]),cellChangeFunction=function(n,o){if(n!==o){(classAdded||$scope.col.cellClass)&&updateClass();var newColClass=$scope.col.getColClass(!1);newColClass!==initColClass&&($elm.removeClass(initColClass),$elm.addClass(newColClass),initColClass=newColClass)}},colWatchDereg=$scope.$watch("col",cellChangeFunction),rowWatchDereg=$scope.$watch("row",cellChangeFunction),deregisterFunction=function(){dataChangeDereg(),colWatchDereg(),rowWatchDereg()};$scope.$on("$destroy",deregisterFunction),$elm.on("$destroy",deregisterFunction)}}}};return uiGridCell}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(i18nService,uiGridConstants,gridUtil){var service={initialize:function($scope,uiGridCtrl){$scope.grid=uiGridCtrl.grid,uiGridCtrl.columnMenuScope=$scope,$scope.menuShown=!1},setColMenuItemWatch:function($scope){var deregFunction=$scope.$watch("col.menuItems",function(n){"undefined"!=typeof n&&n&&angular.isArray(n)?(n.forEach(function(item){"undefined"!=typeof item.context&&item.context||(item.context={}),item.context.col=$scope.col}),$scope.menuItems=$scope.defaultMenuItems.concat(n)):$scope.menuItems=$scope.defaultMenuItems});$scope.$on("$destroy",deregFunction)},sortable:function($scope){return $scope.grid.options.enableSorting&&"undefined"!=typeof $scope.col&&$scope.col&&$scope.col.enableSorting?!0:!1},isActiveSort:function($scope,direction){return"undefined"!=typeof $scope.col&&"undefined"!=typeof $scope.col.sort&&"undefined"!=typeof $scope.col.sort.direction&&$scope.col.sort.direction===direction},suppressRemoveSort:function($scope){return $scope.col&&$scope.col.colDef&&$scope.col.colDef.suppressRemoveSort?!0:!1},hideable:function($scope){return"undefined"!=typeof $scope.col&&$scope.col&&$scope.col.colDef&&$scope.col.colDef.enableHiding===!1?!1:!0},getDefaultMenuItems:function($scope){return[{title:i18nService.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function($event){$event.stopPropagation(),$scope.sortColumn($event,uiGridConstants.ASC)},shown:function(){return service.sortable($scope)},active:function(){return service.isActiveSort($scope,uiGridConstants.ASC)}},{title:i18nService.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function($event){$event.stopPropagation(),$scope.sortColumn($event,uiGridConstants.DESC)},shown:function(){return service.sortable($scope)},active:function(){return service.isActiveSort($scope,uiGridConstants.DESC)}},{title:i18nService.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function($event){$event.stopPropagation(),$scope.unsortColumn()},shown:function(){return service.sortable($scope)&&"undefined"!=typeof $scope.col&&"undefined"!=typeof $scope.col.sort&&"undefined"!=typeof $scope.col.sort.direction&&null!==$scope.col.sort.direction&&!service.suppressRemoveSort($scope)}},{title:i18nService.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return service.hideable($scope)},action:function($event){$event.stopPropagation(),$scope.hideColumn()}}]},getColumnElementPosition:function($scope,column,$columnElement){var positionData={};return positionData.left=$columnElement[0].offsetLeft,positionData.top=$columnElement[0].offsetTop,positionData.offset=0,column.grid.options.offsetLeft&&(positionData.offset=column.grid.options.offsetLeft),positionData.height=gridUtil.elementHeight($columnElement,!0),positionData.width=gridUtil.elementWidth($columnElement,!0),positionData},repositionMenu:function($scope,column,positionData,$elm,$columnElement){var menu=$elm[0].querySelectorAll(".ui-grid-menu"),containerId=column.renderContainer?column.renderContainer:"body",renderContainerElm=(column.grid.renderContainers[containerId],gridUtil.closestElm($columnElement,".ui-grid-render-container")),renderContainerOffset=renderContainerElm.getBoundingClientRect().left-$scope.grid.element[0].getBoundingClientRect().left,containerScrollLeft=renderContainerElm.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,myWidth=column.lastMenuWidth?column.lastMenuWidth:$scope.lastMenuWidth?$scope.lastMenuWidth:170,paddingRight=column.lastMenuPaddingRight?column.lastMenuPaddingRight:$scope.lastMenuPaddingRight?$scope.lastMenuPaddingRight:10;if(0!==menu.length){var mid=menu[0].querySelectorAll(".ui-grid-menu-mid");0===mid.length||angular.element(mid).hasClass("ng-hide")||(myWidth=gridUtil.elementWidth(menu,!0),$scope.lastMenuWidth=myWidth,column.lastMenuWidth=myWidth,paddingRight=parseInt(gridUtil.getStyles(angular.element(menu)[0]).paddingRight,10),$scope.lastMenuPaddingRight=paddingRight,column.lastMenuPaddingRight=paddingRight)}var left=positionData.left+renderContainerOffset-containerScrollLeft+positionData.width-myWidth+paddingRight;left<positionData.offset&&(left=positionData.offset),$elm.css("left",left+"px"),$elm.css("top",positionData.top+positionData.height+"px")}};return service}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService",function($timeout,gridUtil,uiGridConstants,uiGridColumnMenuService){var uiGridColumnMenu={priority:0,scope:!0,require:"?^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function($scope,$elm,$attrs,uiGridCtrl){var self=this;uiGridColumnMenuService.initialize($scope,uiGridCtrl),$scope.defaultMenuItems=uiGridColumnMenuService.getDefaultMenuItems($scope),$scope.menuItems=$scope.defaultMenuItems,uiGridColumnMenuService.setColMenuItemWatch($scope),$scope.showMenu=function(column,$columnElement,event){$scope.col=column;var colElementPosition=uiGridColumnMenuService.getColumnElementPosition($scope,column,$columnElement);$scope.menuShown?($scope.colElement=$columnElement,$scope.colElementPosition=colElementPosition,$scope.hideThenShow=!0,$scope.$broadcast("hide-menu",{originalEvent:event})):(self.shown=$scope.menuShown=!0,uiGridColumnMenuService.repositionMenu($scope,column,colElementPosition,$elm,$columnElement),$scope.colElement=$columnElement,$scope.colElementPosition=colElementPosition,$scope.$broadcast("show-menu",{originalEvent:event}))},$scope.hideMenu=function(broadcastTrigger){$scope.menuShown=!1,broadcastTrigger||$scope.$broadcast("hide-menu")},$scope.$on("menu-hidden",function(){$scope.hideThenShow?(delete $scope.hideThenShow,uiGridColumnMenuService.repositionMenu($scope,$scope.col,$scope.colElementPosition,$elm,$scope.colElement),$scope.$broadcast("show-menu"),$scope.menuShown=!0):$scope.hideMenu(!0)}),$scope.$on("menu-shown",function(){$timeout(function(){uiGridColumnMenuService.repositionMenu($scope,$scope.col,$scope.colElementPosition,$elm,$scope.colElement),delete $scope.colElementPosition,delete $scope.columnElement},200)}),$scope.sortColumn=function(event,dir){event.stopPropagation(),$scope.grid.sortColumn($scope.col,dir,!0).then(function(){$scope.grid.refresh(),$scope.hideMenu()})},$scope.unsortColumn=function(){$scope.col.unsort(),$scope.grid.refresh(),$scope.hideMenu()},$scope.hideColumn=function(){$scope.col.colDef.visible=!1,$scope.grid.refresh(),$scope.hideMenu(),$scope.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),$scope.grid.api.core.raise.columnVisibilityChanged($scope.col)}},controller:["$scope",function($scope){var self=this;$scope.$watch("menuItems",function(n){self.menuItems=n})}]};return uiGridColumnMenu}])}(),function(){angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function($timeout,gridUtil,uiGridConstants,$compile){var uiGridFooterCell={priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(){return{pre:function($scope,$elm){var cellFooter=$compile($scope.col.footerCellTemplate)($scope);$elm.append(cellFooter)},post:function($scope,$elm,$attrs,uiGridCtrl){$scope.grid=uiGridCtrl.grid,$elm.addClass($scope.col.getColClass(!1));var classAdded,updateClass=function(){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.footerCellClass)?$scope.col.footerCellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.footerCellClass,contents.addClass(classAdded)};$scope.col.footerCellClass&&updateClass();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateClass,[uiGridConstants.dataChange.COLUMN]);$scope.$on("$destroy",dataChangeDereg)}}}};return uiGridFooterCell}])}(),function(){angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function($templateCache,$compile,uiGridConstants,gridUtil){var defaultTemplate="ui-grid/ui-grid-footer";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer,containerCtrl.footer=$elm;var footerTemplate=$scope.grid.options.footerTemplate?$scope.grid.options.footerTemplate:defaultTemplate;gridUtil.getTemplate(footerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);if($elm.append(newElm),containerCtrl){var footerViewport=$elm[0].getElementsByClassName("ui-grid-footer-viewport")[0];footerViewport&&(containerCtrl.footerViewport=footerViewport)}})},post:function($scope,$elm,$attrs,controllers){{var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid}gridUtil.disableAnimations($elm),containerCtrl.footer=$elm;var footerViewport=$elm[0].getElementsByClassName("ui-grid-footer-viewport")[0];footerViewport&&(containerCtrl.footerViewport=footerViewport)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function($templateCache,$compile,uiGridConstants,gridUtil){var defaultTemplate="ui-grid/ui-grid-grid-footer";return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){$scope.grid=uiGridCtrl.grid;var footerTemplate=$scope.grid.options.gridFooterTemplate?$scope.grid.options.gridFooterTemplate:defaultTemplate;gridUtil.getTemplate(footerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.append(newElm)})},post:function(){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function($compile,uiGridConstants,gridUtil){var defaultTemplate="ui-grid/ui-grid-group-panel";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm){var groupPanelTemplate=$scope.grid.options.groupPanelTemplate||defaultTemplate;gridUtil.getTemplate(groupPanelTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.append(newElm)})},post:function($scope,$elm){$elm.bind("$destroy",function(){})}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent",function($compile,$timeout,$window,$document,gridUtil,uiGridConstants){var mousedownTimeout=500,uiGridHeaderCell={priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["?^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function($scope,$elm){var cellHeader=$compile($scope.col.headerCellTemplate)($scope);$elm.append(cellHeader)},post:function($scope,$elm,$attrs,controllers){function handleClick(event){var add=!1;event.shiftKey&&(add=!0),uiGridCtrl.grid.sortColumn($scope.col,add).then(function(){uiGridCtrl.columnMenuScope&&uiGridCtrl.columnMenuScope.hideMenu(),uiGridCtrl.grid.refresh()})}var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];$scope.grid=uiGridCtrl.grid,$scope.renderContainer=uiGridCtrl.grid.renderContainers[renderContainerCtrl.containerId];var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass),$scope.menuShown=!1,$scope.asc=uiGridConstants.ASC,$scope.desc=uiGridConstants.DESC;var classAdded,$contentsElm=(angular.element($elm[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element($elm[0].querySelectorAll(".ui-grid-cell-contents"))),updateClass=function(){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.headerCellClass)?$scope.col.headerCellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.headerCellClass,contents.addClass(classAdded);var rightMostContainer=$scope.grid.renderContainers.right?$scope.grid.renderContainers.right:$scope.grid.renderContainers.body;$scope.isLastCol=$scope.col===rightMostContainer.visibleColumnCache[rightMostContainer.visibleColumnCache.length-1]};$scope.$watch("col",function(n,o){if(n!==o){var newColClass=$scope.col.getColClass(!1);newColClass!==initColClass&&($elm.removeClass(initColClass),$elm.addClass(newColClass),initColClass=newColClass)}}),updateClass();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateClass,[uiGridConstants.dataChange.COLUMN]);if($scope.$on("$destroy",dataChangeDereg),$scope.sortable=uiGridCtrl.grid.options.enableSorting&&$scope.col.enableSorting?!0:!1,$scope.filterable=uiGridCtrl.grid.options.enableFiltering&&$scope.col.enableFiltering?!0:!1,$scope.colMenu=$scope.col.grid.options&&$scope.col.grid.options.enableColumnMenus!==!1&&$scope.col.colDef&&$scope.col.colDef.enableColumnMenu!==!1?!0:!1,$scope.sortable||$scope.colMenu){var cancelMousedownTimeout,mousedownStartTime=0,downEvent=gridUtil.isTouchEnabled()?"touchstart":"mousedown";$contentsElm.on(downEvent,function(event){event.stopPropagation(),"undefined"!=typeof event.originalEvent&&void 0!==event.originalEvent&&(event=event.originalEvent),event.button&&0!==event.button||(mousedownStartTime=(new Date).getTime(),cancelMousedownTimeout=$timeout(function(){},mousedownTimeout),cancelMousedownTimeout.then(function(){$scope.colMenu&&uiGridCtrl.columnMenuScope.showMenu($scope.col,$elm,event)}),uiGridCtrl.fireEvent(uiGridConstants.events.COLUMN_HEADER_CLICK,{event:event,columnName:$scope.col.colDef.name}))});var upEvent=gridUtil.isTouchEnabled()?"touchend":"mouseup";$contentsElm.on(upEvent,function(){$timeout.cancel(cancelMousedownTimeout)}),$scope.$on("$destroy",function(){$contentsElm.off("mousedown touchstart")})}if($scope.toggleMenu=function(event){event.stopPropagation(),uiGridCtrl.columnMenuScope.menuShown&&uiGridCtrl.columnMenuScope.col===$scope.col?uiGridCtrl.columnMenuScope.hideMenu():uiGridCtrl.columnMenuScope.showMenu($scope.col,$elm)},$scope.sortable){var clickEvent=gridUtil.isTouchEnabled()?"touchend":"click";$contentsElm.on(clickEvent,function(event){event.stopPropagation(),$timeout.cancel(cancelMousedownTimeout);var mousedownEndTime=(new Date).getTime(),mousedownTime=mousedownEndTime-mousedownStartTime;mousedownTime>mousedownTimeout||handleClick(event)}),$scope.$on("$destroy",function(){$timeout.cancel(cancelMousedownTimeout)})}if($scope.filterable){var filterDeregisters=[];angular.forEach($scope.col.filters,function(filter,i){filterDeregisters.push($scope.$watch("col.filters["+i+"].term",function(n,o){n!==o&&(uiGridCtrl.grid.api.core.raise.filterChanged(),uiGridCtrl.grid.refresh(!0))}))}),$scope.$on("$destroy",function(){angular.forEach(filterDeregisters,function(filterDeregister){filterDeregister()})})}}}}};return uiGridHeaderCell}])}(),function(){angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function($templateCache,$compile,uiGridConstants,gridUtil){var defaultTemplate="ui-grid/ui-grid-header",emptyTemplate="ui-grid/ui-grid-no-header";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function($scope,$elm,$attrs,controllers){function updateHeaderReferences(){containerCtrl.header=containerCtrl.colContainer.header=$elm;var headerCanvases=$elm[0].getElementsByClassName("ui-grid-header-canvas");containerCtrl.headerCanvas=headerCanvases.length>0?containerCtrl.colContainer.headerCanvas=headerCanvases[0]:null}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer,updateHeaderReferences();var headerTemplate;headerTemplate=$scope.grid.options.showHeader?$scope.grid.options.headerTemplate?$scope.grid.options.headerTemplate:defaultTemplate:emptyTemplate,gridUtil.getTemplate(headerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);if($elm.replaceWith(newElm),$elm=newElm,updateHeaderReferences(),containerCtrl){var headerViewport=$elm[0].getElementsByClassName("ui-grid-header-viewport")[0];headerViewport&&(containerCtrl.headerViewport=headerViewport)}$scope.grid.queueRefresh()})},post:function($scope,$elm,$attrs,controllers){function updateColumnWidths(){var availableWidth=containerCtrl.colContainer.getViewportWidth()-grid.scrollbarWidth,columnCache=containerCtrl.colContainer.visibleColumnCache,canvasWidth=0,asteriskNum=0,oneAsterisk=0,leftoverWidth=availableWidth,hasVariableWidth=!1,getColWidth=function(column){return"manual"===column.widthType?+column.width:"percent"===column.widthType?parseInt(column.width.replace(/%/g,""),10)*availableWidth/100:"auto"===column.widthType?(0===oneAsterisk&&(oneAsterisk=parseInt(leftoverWidth/asteriskNum,10)),column.width.length*oneAsterisk):void 0};columnCache.forEach(function(column){column.widthType=null,isFinite(+column.width)?column.widthType="manual":gridUtil.endsWith(column.width,"%")?(column.widthType="percent",hasVariableWidth=!0):angular.isString(column.width)&&-1!==column.width.indexOf("*")&&(column.widthType="auto",asteriskNum+=column.width.length,hasVariableWidth=!0)});var colWidthPriority=["manual","percent","auto"];if(columnCache.filter(function(column){return column.visible&&column.widthType}).sort(function(a,b){return colWidthPriority.indexOf(a.widthType)-colWidthPriority.indexOf(b.widthType)}).forEach(function(column){var colWidth=getColWidth(column);column.minWidth&&(colWidth=Math.max(colWidth,column.minWidth)),column.maxWidth&&(colWidth=Math.min(colWidth,column.maxWidth)),column.drawnWidth=Math.floor(colWidth),canvasWidth+=column.drawnWidth,leftoverWidth-=column.drawnWidth}),hasVariableWidth&&leftoverWidth>0&&canvasWidth>0&&availableWidth>canvasWidth){var remFn=function(column){leftoverWidth>0&&("auto"===column.widthType||"percent"===column.widthType)&&(column.drawnWidth=column.drawnWidth+1,canvasWidth+=1,leftoverWidth--)},prevLeftover=0;do prevLeftover=leftoverWidth,columnCache.forEach(remFn);while(leftoverWidth>0&&leftoverWidth!==prevLeftover)}canvasWidth=Math.max(canvasWidth,availableWidth);var ret="";return columnCache.forEach(function(column){ret+=column.getColClassDefinition()}),columnCache.length>0&&(columnCache[columnCache.length-1].headerWidth=columnCache[columnCache.length-1].drawnWidth-30),containerCtrl.colContainer.canvasWidth=parseInt(canvasWidth,10),ret}var uiGridCtrl=controllers[0],containerCtrl=controllers[1],grid=uiGridCtrl.grid;gridUtil.disableAnimations($elm),containerCtrl.header=$elm;var headerViewport=$elm[0].getElementsByClassName("ui-grid-header-viewport")[0];headerViewport&&(containerCtrl.headerViewport=headerViewport),uiGridCtrl&&uiGridCtrl.grid.registerStyleComputation({priority:5,func:updateColumnWidths})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(gridUtil,i18nService,uiGridConstants){var service={initialize:function($scope,grid){grid.gridMenuScope=$scope,$scope.grid=grid,$scope.registeredMenuItems=[],$scope.$on("$destroy",function(){$scope.grid&&$scope.grid.gridMenuScope&&($scope.grid.gridMenuScope=null),$scope.grid&&($scope.grid=null),$scope.registeredMenuItems&&($scope.registeredMenuItems=null)}),$scope.registeredMenuItems=[],grid.api.registerMethod("core","addToGridMenu",service.addToGridMenu),grid.api.registerMethod("core","removeFromGridMenu",service.removeFromGridMenu)},addToGridMenu:function(grid,menuItems){angular.isArray(menuItems)?grid.gridMenuScope?(grid.gridMenuScope.registeredMenuItems=grid.gridMenuScope.registeredMenuItems?grid.gridMenuScope.registeredMenuItems:[],grid.gridMenuScope.registeredMenuItems=grid.gridMenuScope.registeredMenuItems.concat(menuItems)):gridUtil.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):gridUtil.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(grid,id){var foundIndex=-1;grid&&grid.gridMenuScope&&grid.gridMenuScope.registeredMenuItems.forEach(function(value,index){value.id===id&&(foundIndex>-1?gridUtil.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):foundIndex=index)}),foundIndex>-1&&grid.gridMenuScope.registeredMenuItems.splice(foundIndex,1)},getMenuItems:function($scope){var menuItems=[];return $scope.grid.options.gridMenuCustomItems&&(angular.isArray($scope.grid.options.gridMenuCustomItems)?menuItems=menuItems.concat($scope.grid.options.gridMenuCustomItems):gridUtil.logError("gridOptions.gridMenuCustomItems must be an array, and is not")),menuItems=menuItems.concat($scope.registeredMenuItems),$scope.grid.options.gridMenuShowHideColumns!==!1&&(menuItems=menuItems.concat(service.showHideColumns($scope))),menuItems},showHideColumns:function($scope){var showHideColumns=[];return $scope.grid.options.columnDefs&&0!==$scope.grid.options.columnDefs.length&&0!==$scope.grid.columns.length?(showHideColumns.push({title:i18nService.getSafeText("gridMenu.columns")}),$scope.grid.options.gridMenuTitleFilter=$scope.grid.options.gridMenuTitleFilter?$scope.grid.options.gridMenuTitleFilter:function(title){return title},$scope.grid.options.columnDefs.forEach(function(colDef){if(colDef.enableHiding!==!1){var menuItem={icon:"ui-grid-icon-ok",action:function($event){$event.stopPropagation(),service.toggleColumnVisibility(this.context.gridCol)},shown:function(){return this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible},context:{gridCol:$scope.grid.getColumn(colDef.name||colDef.field)}};service.setMenuItemTitle(menuItem,colDef,$scope.grid),showHideColumns.push(menuItem),menuItem={icon:"ui-grid-icon-cancel",action:function($event){$event.stopPropagation(),service.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:$scope.grid.getColumn(colDef.name||colDef.field)}},service.setMenuItemTitle(menuItem,colDef,$scope.grid),showHideColumns.push(menuItem)}}),showHideColumns):showHideColumns},setMenuItemTitle:function(menuItem,colDef,grid){var title=grid.options.gridMenuTitleFilter(colDef.displayName||colDef.name||colDef.field);"string"==typeof title?menuItem.title=title:title.then?(menuItem.title="",title.then(function(successValue){menuItem.title=successValue},function(errorValue){menuItem.title=errorValue})):(gridUtil.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),menuItem.title="badconfig")},toggleColumnVisibility:function(gridCol){gridCol.colDef.visible=!(gridCol.colDef.visible===!0||void 0===gridCol.colDef.visible),gridCol.grid.refresh(),gridCol.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),gridCol.grid.api.core.raise.columnVisibilityChanged(gridCol)}};return service}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService",function(gridUtil,uiGridConstants,uiGridGridMenuService){return{priority:0,scope:!0,require:["?^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0];uiGridGridMenuService.initialize($scope,uiGridCtrl.grid),$scope.shown=!1,$scope.toggleMenu=function(){$scope.shown?($scope.$broadcast("hide-menu"),$scope.shown=!1):($scope.menuItems=uiGridGridMenuService.getMenuItems($scope),$scope.$broadcast("show-menu"),$scope.shown=!0)},$scope.$on("menu-hidden",function(){$scope.shown=!1})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants",function($compile,$timeout,$window,$document,gridUtil,uiGridConstants){var uiGridMenu={priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function($scope,$elm,$attrs,uiGridCtrl){var self=this;self.showMenu=$scope.showMenu=function(event,args){$scope.shown?$scope.shownMid||($scope.shownMid=!0,$scope.$emit("menu-shown")):($scope.shown=!0,$timeout(function(){$scope.shownMid=!0,$scope.$emit("menu-shown")}));var docEventType="click";args&&args.originalEvent&&args.originalEvent.type&&"touchstart"===args.originalEvent.type&&(docEventType=args.originalEvent.type),angular.element(document).off("click touchstart",applyHideMenu),$timeout(function(){angular.element(document).on(docEventType,applyHideMenu)})},self.hideMenu=$scope.hideMenu=function(){$scope.shown&&($scope.shownMid=!1,$timeout(function(){$scope.shownMid||($scope.shown=!1,$scope.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",applyHideMenu)},$scope.$on("hide-menu",function(event,args){$scope.hideMenu(event,args)}),$scope.$on("show-menu",function(event,args){$scope.showMenu(event,args)});var applyHideMenu=function(){$scope.shown&&$scope.$apply(function(){$scope.hideMenu()})};("undefined"==typeof $scope.autoHide||void 0===$scope.autoHide)&&($scope.autoHide=!0),$scope.autoHide&&angular.element($window).on("resize",applyHideMenu),$scope.$on("$destroy",function(){angular.element(document).off("click touchstart",applyHideMenu)}),$scope.$on("$destroy",function(){angular.element($window).off("resize",applyHideMenu)}),uiGridCtrl&&$scope.$on("$destroy",uiGridCtrl.grid.api.core.on.scrollEvent($scope,applyHideMenu)),$scope.$on("$destroy",$scope.$on(uiGridConstants.events.ITEM_DRAGGING,applyHideMenu))},controller:["$scope","$element","$attrs",function(){}]};return uiGridMenu}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(gridUtil,$compile,i18nService){var uiGridMenuItem={priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"="},require:["?^uiGrid","^uiGridMenu"],templateUrl:"ui-grid/uiGridMenuItem",replace:!0,compile:function(){return{pre:function($scope,$elm,$attrs,controllers){controllers[0],controllers[1];$scope.templateUrl&&gridUtil.getTemplate($scope.templateUrl).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.replaceWith(newElm)})},post:function($scope,$elm,$attrs,controllers){{var uiGridCtrl=controllers[0];controllers[1]}("undefined"==typeof $scope.shown||null===$scope.shown)&&($scope.shown=function(){return!0}),$scope.itemShown=function(){var context={};return $scope.context&&(context.context=$scope.context),"undefined"!=typeof uiGridCtrl&&uiGridCtrl&&(context.grid=uiGridCtrl.grid),$scope.shown.call(context)},$scope.itemAction=function($event,title){if($event.stopPropagation(),"function"==typeof $scope.action){var context={};$scope.context&&(context.context=$scope.context),"undefined"!=typeof uiGridCtrl&&uiGridCtrl&&(context.grid=uiGridCtrl.grid),$scope.action.call(context,$event,title),$scope.$emit("hide-menu")}},$scope.i18n=i18nService.get()}}}};return uiGridMenuItem}])}(),function(){var module=angular.module("ui.grid");module.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function($timeout,$document,uiGridConstants,gridUtil,ScrollEvent){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1],grid=$scope.grid=uiGridCtrl.grid;if(!$scope.rowContainerName)throw"No row render container name specified";if(!$scope.colContainerName)throw"No column render container name specified";if(!grid.renderContainers[$scope.rowContainerName])throw"Row render container '"+$scope.rowContainerName+"' is not registered.";if(!grid.renderContainers[$scope.colContainerName])throw"Column render container '"+$scope.colContainerName+"' is not registered.";var rowContainer=$scope.rowContainer=grid.renderContainers[$scope.rowContainerName],colContainer=$scope.colContainer=grid.renderContainers[$scope.colContainerName];containerCtrl.containerId=$scope.containerId,containerCtrl.rowContainer=rowContainer,containerCtrl.colContainer=colContainer},post:function($scope,$elm,$attrs,controllers){function scrollHandler(args){if(!args.grid||args.grid.id===grid.id){if(args.y&&$scope.bindScrollVertical){containerCtrl.prevScrollArgs=args;var newScrollTop=args.getNewScrollTop(rowContainer,containerCtrl.viewport);(args.source!==ScrollEvent.Sources.ViewPortScroll||args.sourceColContainer!==colContainer)&&(containerCtrl.viewport[0].scrollTop=newScrollTop)}if(args.x&&$scope.bindScrollHorizontal){containerCtrl.prevScrollArgs=args;var newScrollLeft=args.getNewScrollLeft(colContainer,containerCtrl.viewport);
$scope.newScrollLeft=newScrollLeft,containerCtrl.headerViewport&&(containerCtrl.headerViewport.scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.headerViewport,newScrollLeft)),containerCtrl.footerViewport&&(containerCtrl.footerViewport.scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.footerViewport,newScrollLeft)),args.source!==ScrollEvent.Sources.ViewPortScroll&&(containerCtrl.viewport[0].scrollLeft=newScrollLeft),containerCtrl.prevScrollLeft=newScrollLeft}}}function update(){var ret="",canvasWidth=colContainer.getCanvasWidth(),viewportWidth=colContainer.getViewportWidth(),canvasHeight=rowContainer.getCanvasHeight();"body"!==$scope.containerId&&(canvasHeight+=grid.scrollbarHeight);var viewportHeight=rowContainer.getViewportHeight(),headerViewportWidth=colContainer.getHeaderViewportWidth(),footerViewportWidth=colContainer.getHeaderViewportWidth();return ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-canvas { width: "+canvasWidth+"px; height: "+canvasHeight+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { width: "+(canvasWidth+grid.scrollbarWidth)+"px; }",renderContainer.explicitHeaderCanvasHeight&&(ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { height: "+renderContainer.explicitHeaderCanvasHeight+"px; }"),ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-viewport { width: "+viewportWidth+"px; height: "+viewportHeight+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-viewport { width: "+headerViewportWidth+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-footer-canvas { width: "+canvasWidth+grid.scrollbarWidth+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-footer-viewport { width: "+footerViewportWidth+"px; }"}var uiGridCtrl=controllers[0],containerCtrl=controllers[1],grid=uiGridCtrl.grid,rowContainer=containerCtrl.rowContainer,colContainer=containerCtrl.colContainer,renderContainer=grid.renderContainers[$scope.containerId];$elm.addClass("ui-grid-render-container-"+$scope.containerId),($scope.bindScrollHorizontal||$scope.bindScrollVertical)&&grid.api.core.on.scrollEvent($scope,scrollHandler),gridUtil.on.mousewheel($elm,function(event){var scrollEvent=new ScrollEvent(grid,rowContainer,colContainer,ScrollEvent.Sources.RenderContainerMouseWheel);if(0!==event.deltaY){var scrollYAmount=-1*event.deltaY*event.deltaFactor,scrollYPercentage=(containerCtrl.viewport[0].scrollTop+scrollYAmount)/rowContainer.getVerticalScrollLength();0>scrollYPercentage?scrollYPercentage=0:scrollYPercentage>1&&(scrollYPercentage=1),scrollEvent.y={percentage:scrollYPercentage,pixels:scrollYAmount}}if(0!==event.deltaX){var scrollXAmount=event.deltaX*event.deltaFactor,scrollLeft=gridUtil.normalizeScrollLeft(containerCtrl.viewport),scrollXPercentage=(scrollLeft+scrollXAmount)/(colContainer.getCanvasWidth()-colContainer.getViewportWidth());0>scrollXPercentage?scrollXPercentage=0:scrollXPercentage>1&&(scrollXPercentage=1),scrollEvent.x={percentage:scrollXPercentage,pixels:scrollXAmount}}(scrollEvent.y&&0!==scrollEvent.y.percentage&&1!==scrollEvent.y.percentage||scrollEvent.x&&0!==scrollEvent.x.percentage&&1!==scrollEvent.x.percentage)&&(event.preventDefault(),scrollEvent.fireThrottledScrollingEvent())}),$elm.bind("$destroy",function(){$elm.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(eventName){$elm.unbind(eventName)})}),uiGridCtrl.grid.registerStyleComputation({priority:6,func:update})}}}}}]),module.controller("uiGridRenderContainer",["$scope","gridUtil",function(){}])}(),function(){angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function($scope,$elm,$attrs,controllers){function compileTemplate(){$scope.row.getRowTemplateFn.then(function(compiledElementFn){var newScope=$scope.$new();compiledElementFn(newScope,function(newElm){clonedElement&&(clonedElement.remove(),cloneScope.$destroy()),$elm.empty().append(newElm),clonedElement=newElm,cloneScope=newScope})})}{var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid}$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer;var clonedElement,cloneScope;compileTemplate(),$scope.$watch("row.getRowTemplateFn",function(newFunc,oldFunc){newFunc!==oldFunc&&compileTemplate()})},post:function(){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(gridUtil,$interpolate){return{link:function($scope,$elm){var interpolateFn=$interpolate($elm.text(),!0);interpolateFn&&$scope.$watch(interpolateFn,function(value){$elm.text(value)})}}}])}(),function(){angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants",function(gridUtil,ScrollEvent,uiGridConstants){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.containerCtrl=containerCtrl;var rowContainer=containerCtrl.rowContainer,colContainer=containerCtrl.colContainer,grid=uiGridCtrl.grid;$scope.grid=uiGridCtrl.grid,$scope.rowContainer=containerCtrl.rowContainer,$scope.colContainer=containerCtrl.colContainer,containerCtrl.viewport=$elm,$elm.on("scroll",function(){var newScrollTop=$elm[0].scrollTop,newScrollLeft=gridUtil.normalizeScrollLeft($elm),horizScrollPercentage=-1,vertScrollPercentage=-1;if(newScrollLeft!==colContainer.prevScrollLeft){grid.flagScrollingHorizontally();var xDiff=newScrollLeft-colContainer.prevScrollLeft;xDiff>0&&(grid.scrollDirection=uiGridConstants.scrollDirection.RIGHT),0>xDiff&&(grid.scrollDirection=uiGridConstants.scrollDirection.LEFT);var horizScrollLength=colContainer.getCanvasWidth()-colContainer.getViewportWidth();horizScrollPercentage=0!==horizScrollLength?newScrollLeft/horizScrollLength:0,colContainer.adjustScrollHorizontal(newScrollLeft,horizScrollPercentage)}if(newScrollTop!==rowContainer.prevScrollTop){grid.flagScrollingVertically();var yDiff=newScrollTop-rowContainer.prevScrollTop;yDiff>0&&(grid.scrollDirection=uiGridConstants.scrollDirection.DOWN),0>yDiff&&(grid.scrollDirection=uiGridConstants.scrollDirection.UP);var vertScrollLength=rowContainer.getVerticalScrollLength();vertScrollPercentage=newScrollTop/vertScrollLength,vertScrollPercentage>1&&(vertScrollPercentage=1),0>vertScrollPercentage&&(vertScrollPercentage=0),rowContainer.adjustScrollVertical(newScrollTop,vertScrollPercentage)}var scrollEvent=new ScrollEvent(grid,rowContainer,colContainer,ScrollEvent.Sources.ViewPortScroll);scrollEvent.newScrollLeft=newScrollLeft,scrollEvent.newScrollTop=newScrollTop,horizScrollPercentage>-1&&(scrollEvent.x={percentage:horizScrollPercentage}),vertScrollPercentage>-1&&(scrollEvent.y={percentage:vertScrollPercentage}),scrollEvent.fireScrollingEvent()})},controller:["$scope",function($scope){this.rowStyle=function(index){var rowContainer=$scope.rowContainer,colContainer=$scope.colContainer,styles={};if(0===index&&0!==rowContainer.currentTopRow){var hiddenRowWidth=rowContainer.currentTopRow*rowContainer.grid.options.rowHeight;styles["margin-top"]=hiddenRowWidth+"px"}return 0!==colContainer.currentFirstColumn&&(colContainer.grid.isRTL()?styles["margin-right"]=colContainer.columnOffset+"px":styles["margin-left"]=colContainer.columnOffset+"px"),styles}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function($scope,$elm,$attr){$scope.$watch($attr.uiGridVisible,function(visible){$elm[visible?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile","ScrollEvent",function($scope,$elm,$attrs,gridUtil,$q,uiGridConstants,$templateCache,gridClassFactory,$timeout,$parse,$compile,ScrollEvent){function columnDefsWatchFunction(n,o){n&&n!==o&&(self.grid.options.columnDefs=n,self.grid.buildColumns({orderByColumnDefs:!0}).then(function(){self.grid.preCompileCellTemplates(),self.grid.callDataChangeCallbacks(uiGridConstants.dataChange.COLUMN)}))}function adjustInfiniteScrollPosition(scrollToRow){var scrollEvent=new ScrollEvent(self.grid,null,null,"ui.grid.adjustInfiniteScrollPosition"),totalRows=self.grid.renderContainers.body.visibleRowCache.length,percentage=(scrollToRow+scrollToRow/(totalRows-1))/totalRows;scrollEvent.y=0===percentage?{pixels:1}:{percentage:percentage},scrollEvent.fireScrollingEvent()}function dataWatchFunction(newData){var promises=[];newData&&(self.grid.columns.length===(self.grid.rowHeaderColumns?self.grid.rowHeaderColumns.length:0)&&!$attrs.uiGridColumns&&0===self.grid.options.columnDefs.length&&newData.length>0&&self.grid.buildColumnDefsFromData(newData),(self.grid.options.columnDefs.length>0||newData.length>0)&&promises.push(self.grid.buildColumns().then(function(){self.grid.preCompileCellTemplates()})),$q.all(promises).then(function(){self.grid.modifyRows(newData).then(function(){self.grid.redrawInPlace(!0),$scope.$evalAsync(function(){self.grid.refreshCanvas(!0),self.grid.callDataChangeCallbacks(uiGridConstants.dataChange.ROW),$timeout(function(){self.grid.options.enableInfiniteScroll&&(0===self.grid.renderContainers.body.prevRowScrollIndex&&adjustInfiniteScrollPosition(0),self.grid.scrollDirection===uiGridConstants.scrollDirection.UP&&adjustInfiniteScrollPosition(self.grid.renderContainers.body.prevRowScrollIndex+1+self.grid.options.excessRows))},0)})})}))}var self=this;self.grid=gridClassFactory.createGrid($scope.uiGrid),self.grid.appScope=self.grid.appScope||$scope.$parent,$elm.addClass("grid"+self.grid.id),self.grid.rtl="rtl"===gridUtil.getStyles($elm[0]).direction,$scope.grid=self.grid,$attrs.uiGridColumns&&$attrs.$observe("uiGridColumns",function(value){self.grid.options.columnDefs=value,self.grid.buildColumns().then(function(){self.grid.preCompileCellTemplates(),self.grid.refreshCanvas(!0)})});var dataWatchCollectionDereg;dataWatchCollectionDereg=angular.isString($scope.uiGrid.data)?$scope.$parent.$watchCollection($scope.uiGrid.data,dataWatchFunction):$scope.$parent.$watchCollection(function(){return $scope.uiGrid.data},dataWatchFunction);var columnDefWatchCollectionDereg=$scope.$parent.$watchCollection(function(){return $scope.uiGrid.columnDefs},columnDefsWatchFunction),styleWatchDereg=$scope.$watch(function(){return self.grid.styleComputations},function(){self.grid.refreshCanvas(!0)});$scope.$on("$destroy",function(){dataWatchCollectionDereg(),columnDefWatchCollectionDereg(),styleWatchDereg()}),self.fireEvent=function(eventName,args){("undefined"==typeof args||void 0===args)&&(args={}),("undefined"==typeof args.grid||void 0===args.grid)&&(args.grid=self.grid),$scope.$broadcast(eventName,args)},self.innerCompile=function(elm){$compile(elm)($scope)}}]),angular.module("ui.grid").directive("uiGrid",["$compile","$templateCache","gridUtil","$window","uiGridConstants",function($compile,$templateCache,gridUtil,$window,uiGridConstants){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){function gridResize(){grid.gridWidth=$scope.gridWidth=gridUtil.elementWidth($elm),grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm),grid.refreshCanvas(!0)}var grid=uiGridCtrl.grid;if(uiGridCtrl.scrollbars=[],grid.renderingComplete(),grid.element=$elm,grid.gridWidth=$scope.gridWidth=gridUtil.elementWidth($elm),grid.canvasWidth=uiGridCtrl.grid.gridWidth,grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm),grid.gridHeight<grid.options.rowHeight){var contentHeight=grid.options.minRowsToShow*grid.options.rowHeight,headerHeight=grid.options.showHeader?grid.options.headerRowHeight:0,footerHeight=grid.calcFooterHeight(),scrollbarHeight=0;grid.options.enableHorizontalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(scrollbarHeight=gridUtil.getScrollbarWidth());var maxNumberOfFilters=0;angular.forEach(grid.options.columnDefs,function(col){col.hasOwnProperty("filter")?1>maxNumberOfFilters&&(maxNumberOfFilters=1):col.hasOwnProperty("filters")&&maxNumberOfFilters<col.filters.length&&(maxNumberOfFilters=col.filters.length)});var filterHeight=maxNumberOfFilters*headerHeight,newHeight=headerHeight+contentHeight+footerHeight+scrollbarHeight+filterHeight;$elm.css("height",newHeight+"px"),grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm)}grid.refreshCanvas(),$scope.$watch(function(){return grid.hasLeftContainer()},function(newValue,oldValue){newValue!==oldValue&&grid.refreshCanvas(!0)}),$scope.$watch(function(){return grid.hasRightContainer()},function(newValue,oldValue){newValue!==oldValue&&grid.refreshCanvas(!0)}),angular.element($window).on("resize",gridResize),$elm.on("$destroy",function(){angular.element($window).off("resize",gridResize)})}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){function updateContainerWidth(){if("left"===$scope.side||"right"===$scope.side){for(var cols=grid.renderContainers[$scope.side].visibleColumnCache,width=0,i=0;i<cols.length;i++){var col=cols[i];width+=col.drawnWidth||col.width||0}myWidth=width}}function updateContainerDimensions(){var ret="";if("left"===$scope.side||"right"===$scope.side){updateContainerWidth(),$elm.attr("style",null);var myHeight=grid.renderContainers.body.getViewportHeight();ret+=".grid"+grid.id+" .ui-grid-pinned-container-"+$scope.side+", .grid"+grid.id+" .ui-grid-pinned-container-"+$scope.side+" .ui-grid-render-container-"+$scope.side+" .ui-grid-viewport { width: "+myWidth+"px; height: "+myHeight+"px; } "}return ret}var grid=uiGridCtrl.grid,myWidth=0;$elm.addClass("ui-grid-pinned-container-"+$scope.side),grid.renderContainers.body.registerViewportAdjuster(function(adjustment){return 0!==myWidth&&myWidth||updateContainerWidth(),adjustment.width-=myWidth,adjustment}),grid.registerStyleComputation({priority:15,func:updateContainerDimensions})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout",function($q,$compile,$parse,gridUtil,uiGridConstants,GridOptions,GridColumn,GridRow,GridApi,rowSorter,rowSearcher,GridRenderContainer,$timeout){function RowHashMap(){}var Grid=function(options){var self=this;if(void 0===options||"undefined"==typeof options.id||!options.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(options.id))throw new Error("Grid id '"+options.id+'" is invalid. It must follow CSS selector syntax rules.');self.id=options.id,delete options.id,self.options=GridOptions.initialize(options),self.appScope=self.options.appScopeProvider,self.headerHeight=self.options.headerRowHeight,self.footerHeight=self.calcFooterHeight(),self.rtl=!1,self.gridHeight=0,self.gridWidth=0,self.columnBuilders=[],self.rowBuilders=[],self.rowsProcessors=[],self.columnsProcessors=[],self.styleComputations=[],self.viewportAdjusters=[],self.rowHeaderColumns=[],self.dataChangeCallbacks={},self.renderContainers={},self.renderContainers.body=new GridRenderContainer("body",self),self.cellValueGetterCache={},self.getRowTemplateFn=null,self.rows=[],self.columns=[],self.isScrollingVertically=!1,self.isScrollingHorizontally=!1,self.scrollDirection=uiGridConstants.scrollDirection.NONE;var debouncedVertical=gridUtil.debounce(function(){self.isScrollingVertically=!1,self.scrollDirection=uiGridConstants.scrollDirection.NONE},1e3),debouncedHorizontal=gridUtil.debounce(function(){self.isScrollingHorizontally=!1,self.scrollDirection=uiGridConstants.scrollDirection.NONE},1e3);self.flagScrollingVertically=function(){self.isScrollingVertically=!0,debouncedVertical()},self.flagScrollingHorizontally=function(){self.isScrollingHorizontally=!0,debouncedHorizontal()},self.scrollbarHeight=0,self.scrollbarWidth=0,self.options.enableHorizontalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(self.scrollbarHeight=gridUtil.getScrollbarWidth()),self.options.enableVerticalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(self.scrollbarWidth=gridUtil.getScrollbarWidth()),self.api=new GridApi(self),self.api.registerMethod("core","refresh",this.refresh),self.api.registerMethod("core","refreshRows",this.refreshRows),self.api.registerMethod("core","handleWindowResize",this.handleWindowResize),self.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),self.api.registerMethod("core","sortHandleNulls",rowSorter.handleNulls),self.api.registerEvent("core","sortChanged"),self.api.registerEvent("core","columnVisibilityChanged"),self.api.registerMethod("core","notifyDataChange",this.notifyDataChange),self.registerDataChangeCallback(self.columnRefreshCallback,[uiGridConstants.dataChange.COLUMN]),self.registerDataChangeCallback(self.processRowsCallback,[uiGridConstants.dataChange.EDIT]),self.registerStyleComputation({priority:10,func:self.getFooterStyles})};return Grid.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var height=0;return this.options.showGridFooter&&(height+=this.options.gridFooterHeight),this.options.showColumnFooter&&(height+=this.options.columnFooterHeight),height},Grid.prototype.getFooterStyles=function(){var style=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return style+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},Grid.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},Grid.prototype.isRTL=function(){return this.rtl},Grid.prototype.registerColumnBuilder=function(columnBuilder){this.columnBuilders.push(columnBuilder)},Grid.prototype.buildColumnDefsFromData=function(dataRows){this.options.columnDefs=gridUtil.getColumnsFromData(dataRows,this.options.excludeProperties)},Grid.prototype.registerRowBuilder=function(rowBuilder){this.rowBuilders.push(rowBuilder)},Grid.prototype.registerDataChangeCallback=function(callback,types,_this){var uid=gridUtil.nextUid();types||(types=[uiGridConstants.dataChange.ALL]),Array.isArray(types)||gridUtil.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+types),this.dataChangeCallbacks[uid]={callback:callback,types:types,_this:_this};var self=this,deregisterFunction=function(){delete self.dataChangeCallbacks[uid]};return deregisterFunction},Grid.prototype.callDataChangeCallbacks=function(type){angular.forEach(this.dataChangeCallbacks,function(callback){(-1!==callback.types.indexOf(uiGridConstants.dataChange.ALL)||-1!==callback.types.indexOf(type)||type===uiGridConstants.dataChange.ALL)&&(callback._this?callback.callback.apply(callback._this,this):callback.callback(this))},this)},Grid.prototype.notifyDataChange=function(type){var constants=uiGridConstants.dataChange;type===constants.ALL||type===constants.COLUMN||type===constants.EDIT||type===constants.ROW||type===constants.OPTIONS?this.callDataChangeCallbacks(type):gridUtil.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+type)},Grid.prototype.columnRefreshCallback=function(grid){grid.buildColumns(),grid.refresh()},Grid.prototype.processRowsCallback=function(grid){grid.refreshRows()},Grid.prototype.getColumn=function(name){var columns=this.columns.filter(function(column){return column.colDef.name===name});return columns.length>0?columns[0]:null},Grid.prototype.getColDef=function(name){var colDefs=this.options.columnDefs.filter(function(colDef){return colDef.name===name});return colDefs.length>0?colDefs[0]:null},Grid.prototype.assignTypes=function(){var self=this;self.options.columnDefs.forEach(function(colDef,index){if(!colDef.type){var col=new GridColumn(colDef,index,self),firstRow=self.rows.length>0?self.rows[0]:null;firstRow?colDef.type=gridUtil.guessType(self.getCellValue(firstRow,col)):(gridUtil.logWarn("Unable to assign type from data, so defaulting to string"),colDef.type="string")}})},Grid.prototype.addRowHeaderColumn=function(colDef){var self=this,rowHeaderCol=new GridColumn(colDef,self.rowHeaderColumns.length,self);rowHeaderCol.isRowHeader=!0,self.isRTL()?(self.createRightContainer(),rowHeaderCol.renderContainer="right"):(self.createLeftContainer(),rowHeaderCol.renderContainer="left"),self.columnBuilders[0](colDef,rowHeaderCol,self.options).then(function(){rowHeaderCol.enableFiltering=!1,rowHeaderCol.enableSorting=!1,rowHeaderCol.enableHiding=!1,self.rowHeaderColumns.push(rowHeaderCol),self.buildColumns().then(function(){self.preCompileCellTemplates(),self.refresh()})})},Grid.prototype.buildColumns=function(opts){var options={orderByColumnDefs:!1};angular.extend(options,opts);var i,self=this,builderPromises=[],headerOffset=self.rowHeaderColumns.length;for(i=0;i<self.columns.length;i++)self.getColDef(self.columns[i].name)||(self.columns.splice(i,1),i--);if(self.rowHeaderColumns.forEach(function(rowHeaderColumn){self.columns.unshift(rowHeaderColumn)}),self.options.columnDefs.forEach(function(colDef,index){self.preprocessColDef(colDef);var col=self.getColumn(colDef.name);col?col.updateColumnDef(colDef,!1):(col=new GridColumn(colDef,gridUtil.nextUid(),self),self.columns.splice(index+headerOffset,0,col)),self.columnBuilders.forEach(function(builder){builderPromises.push(builder.call(self,colDef,col,self.options))})}),options.orderByColumnDefs){var columnCache=self.columns.slice(0);for(i=0;i<self.options.columnDefs.length;i++)columnCache[i+headerOffset]=self.columns[i+headerOffset].name!==self.options.columnDefs[i].name?self.getColumn(self.options.columnDefs[i].name):self.columns[i+headerOffset];self.columns.length=0,Array.prototype.splice.apply(self.columns,[0,0].concat(columnCache))}return $q.all(builderPromises).then(function(){self.rows.length>0&&self.assignTypes()})},Grid.prototype.preCompileCellTemplates=function(){var self=this;this.columns.forEach(function(col){var html=col.cellTemplate.replace(uiGridConstants.MODEL_COL_FIELD,self.getQualifiedColField(col));html=html.replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)");var compiledElementFn=$compile(html);col.compiledElementFn=compiledElementFn,col.compiledElementFnDefer&&col.compiledElementFnDefer.resolve(col.compiledElementFn)})},Grid.prototype.getQualifiedColField=function(col){return"row.entity."+gridUtil.preEval(col.field)},Grid.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new GridRenderContainer("left",this,{disableColumnOffset:!0}))},Grid.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new GridRenderContainer("right",this,{disableColumnOffset:!0}))},Grid.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},Grid.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},Grid.prototype.preprocessColDef=function(colDef){var self=this;if(!colDef.field&&!colDef.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===colDef.name&&void 0!==colDef.field){var foundName=self.getColumn(colDef.field);if(foundName){var nameRE=new RegExp("^"+colDef.field+"(\\d+)$","i"),foundColumns=self.columns.filter(function(column){return nameRE.test(column.displayName)}).sort(function(a,b){if(a===b)return 0;var numA=a.displayName.match(nameRE)[1],numB=b.displayName.match(nameRE)[1];return parseInt(numA,10)>parseInt(numB,10)?1:-1});if(0===foundColumns.length)colDef.name=colDef.field+"2";else{var lastNum=foundColumns[foundColumns.length-1].displayName.match(nameRE)[1];lastNum=parseInt(lastNum,10),colDef.name=colDef.field+(lastNum+1)}}else colDef.name=colDef.field}},Grid.prototype.newInN=function(o,n,oAccessor,nAccessor){for(var self=this,t=[],i=0;i<n.length;i++){for(var nV=nAccessor?n[i][nAccessor]:n[i],found=!1,j=0;j<o.length;j++){var oV=oAccessor?o[j][oAccessor]:o[j];if(self.options.rowEquality(nV,oV)){found=!0;break}}found||t.push(nV)}return t},Grid.prototype.getRow=function(rowEntity){var self=this,rows=this.rows.filter(function(row){return self.options.rowEquality(row.entity,rowEntity)});return rows.length>0?rows[0]:null},Grid.prototype.modifyRows=function(newRawData){var i,rowhash,found,newRow,self=this;if((self.options.useExternalSorting||0===self.getColumnSorting().length)&&newRawData.length>0){var oldRowHash=self.rowHashMap;oldRowHash||(oldRowHash={get:function(){return null}}),self.createRowHashMap(),rowhash=self.rowHashMap;{0===self.rows.length}for(self.rows.length=0,i=0;i<newRawData.length;i++){var newRawRow=newRawData[i];found=oldRowHash.get(newRawRow),newRow=found?found.row:self.processRowBuilders(new GridRow(newRawRow,i,self)),self.rows.push(newRow),rowhash.put(newRawRow,{i:i,entity:newRawRow,row:newRow})}self.assignTypes()}else if(0===self.rows.length&&newRawData.length>0){if(self.options.enableRowHashing)for(self.rowHashMap||self.createRowHashMap(),i=0;i<newRawData.length;i++)newRow=newRawData[i],self.rowHashMap.put(newRow,{i:i,entity:newRow});self.addRows(newRawData),self.assignTypes()}else if(newRawData.length>0){var unfoundNewRows,unfoundOldRows,unfoundNewRowsToFind;if(self.options.enableRowHashing){unfoundNewRows=[],unfoundNewRowsToFind=[];var foundOldRows={};for(unfoundOldRows=[],self.rowHashMap||self.createRowHashMap(),rowhash=self.rowHashMap,i=0;i<newRawData.length;i++){newRow=newRawData[i];var mustFind=!1;self.options.getRowIdentity(newRow)||(mustFind=!0),found=rowhash.get(newRow),found?found.row&&(foundOldRows[self.options.rowIdentity(newRow)]=!0):(rowhash.put(newRow,{i:i,entity:newRow}),mustFind?unfoundNewRowsToFind.push(newRow):unfoundNewRows.push(newRow))}for(i=0;i<self.rows.length;i++){var row=self.rows[i],hash=self.options.rowIdentity(row.entity);foundOldRows[hash]||unfoundOldRows.push(row)}}var newRows=unfoundNewRows||[],unfoundNew=unfoundNewRowsToFind||newRawData;newRows=newRows.concat(self.newInN(self.rows,unfoundNew,"entity")),self.addRows(newRows);var deletedRows=self.getDeletedRows(unfoundOldRows||self.rows,newRawData);for(i=0;i<deletedRows.length;i++)self.options.enableRowHashing&&self.rowHashMap.remove(deletedRows[i].entity),self.rows.splice(self.rows.indexOf(deletedRows[i]),1)}else self.createRowHashMap(),self.rows.length=0;var p1=$q.when(self.processRowsProcessors(self.rows)).then(function(renderableRows){return self.setVisibleRows(renderableRows)}),p2=$q.when(self.processColumnsProcessors(self.columns)).then(function(renderableColumns){return self.setVisibleColumns(renderableColumns)});return $q.all([p1,p2])},Grid.prototype.getDeletedRows=function(oldRows,newRows){var self=this,olds=oldRows.filter(function(oldRow){return!newRows.some(function(newItem){return self.options.rowEquality(newItem,oldRow.entity)})});return olds},Grid.prototype.addRows=function(newRawData){for(var self=this,existingRowCount=self.rows.length,i=0;i<newRawData.length;i++){var newRow=self.processRowBuilders(new GridRow(newRawData[i],i+existingRowCount,self));if(self.options.enableRowHashing){var found=self.rowHashMap.get(newRow.entity);found&&(found.row=newRow)}self.rows.push(newRow)}},Grid.prototype.processRowBuilders=function(gridRow){var self=this;return self.rowBuilders.forEach(function(builder){builder.call(self,gridRow,self.options)}),gridRow},Grid.prototype.registerStyleComputation=function(styleComputationInfo){this.styleComputations.push(styleComputationInfo)},Grid.prototype.registerRowsProcessor=function(processor){if(!angular.isFunction(processor))throw"Attempt to register non-function rows processor: "+processor;this.rowsProcessors.push(processor)},Grid.prototype.removeRowsProcessor=function(processor){var idx=this.rowsProcessors.indexOf(processor);"undefined"!=typeof idx&&void 0!==idx&&this.rowsProcessors.splice(idx,1)},Grid.prototype.processRowsProcessors=function(renderableRows){function startProcessor(i,renderedRowsToProcess){var processor=self.rowsProcessors[i];return $q.when(processor.call(self,renderedRowsToProcess,self.columns)).then(function(processedRows){if(!processedRows)throw"Processor at index "+i+" did not return a set of renderable rows";if(!angular.isArray(processedRows))throw"Processor at index "+i+" did not return an array";return i++,i<=self.rowsProcessors.length-1?startProcessor(i,processedRows):void finished.resolve(processedRows)})}var self=this,myRenderableRows=renderableRows.slice(0);if(0===self.rowsProcessors.length)return $q.when(myRenderableRows);var finished=$q.defer();return startProcessor(0,myRenderableRows),finished.promise},Grid.prototype.setVisibleRows=function(rows){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];container.canvasHeightShouldUpdate=!0,"undefined"==typeof container.visibleRowCache?container.visibleRowCache=[]:container.visibleRowCache.length=0}for(var ri=0;ri<rows.length;ri++){var row=rows[ri];row.visible&&("undefined"!=typeof row.renderContainer&&row.renderContainer?self.renderContainers[row.renderContainer].visibleRowCache.push(row):self.renderContainers.body.visibleRowCache.push(row))}self.api.core.raise.rowsRendered(this.api)},Grid.prototype.registerColumnsProcessor=function(processor){if(!angular.isFunction(processor))throw"Attempt to register non-function rows processor: "+processor;this.columnsProcessors.push(processor)},Grid.prototype.removeColumnsProcessor=function(processor){var idx=this.columnsProcessors.indexOf(processor);"undefined"!=typeof idx&&void 0!==idx&&this.columnsProcessors.splice(idx,1)},Grid.prototype.processColumnsProcessors=function(renderableColumns){function startProcessor(i,renderedColumnsToProcess){var processor=self.columnsProcessors[i];return $q.when(processor.call(self,renderedColumnsToProcess,self.rows)).then(function(processedColumns){if(!processedColumns)throw"Processor at index "+i+" did not return a set of renderable rows";if(!angular.isArray(processedColumns))throw"Processor at index "+i+" did not return an array";return i++,i<=self.columnsProcessors.length-1?startProcessor(i,myRenderableColumns):void finished.resolve(myRenderableColumns)})}var self=this,myRenderableColumns=renderableColumns.slice(0);if(0===self.columnsProcessors.length)return $q.when(myRenderableColumns);var finished=$q.defer();return startProcessor(0,myRenderableColumns),finished.promise},Grid.prototype.setVisibleColumns=function(columns){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];container.visibleColumnCache.length=0}for(var ci=0;ci<columns.length;ci++){var column=columns[ci];column.visible&&("undefined"!=typeof column.renderContainer&&column.renderContainer?self.renderContainers[column.renderContainer].visibleColumnCache.push(column):self.renderContainers.body.visibleColumnCache.push(column))}},Grid.prototype.handleWindowResize=function(){var self=this;self.gridWidth=gridUtil.elementWidth(self.element),self.gridHeight=gridUtil.elementHeight(self.element),self.queueRefresh()},Grid.prototype.queueRefresh=function(){var self=this;return self.refreshCanceller&&$timeout.cancel(self.refreshCanceller),self.refreshCanceller=$timeout(function(){self.refreshCanvas(!0)}),self.refreshCanceller.then(function(){self.refreshCanceller=null}),self.refreshCanceller},Grid.prototype.updateCanvasHeight=function(){var self=this;for(var containerId in self.renderContainers)if(self.renderContainers.hasOwnProperty(containerId)){var container=self.renderContainers[containerId];container.canvasHeightShouldUpdate=!0}},Grid.prototype.buildStyles=function(){var self=this;self.customStyles="",self.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(compInfo){var ret=compInfo.func.call(self);angular.isString(ret)&&(self.customStyles+="\n"+ret)
})},Grid.prototype.minColumnsToRender=function(){var self=this,viewport=this.getViewportWidth(),min=0,totalWidth=0;return self.columns.forEach(function(col,i){if(viewport>totalWidth)totalWidth+=col.drawnWidth,min++;else{for(var currWidth=0,j=i;j>=i-min;j--)currWidth+=self.columns[j].drawnWidth;viewport>currWidth&&min++}}),min},Grid.prototype.getBodyHeight=function(){var bodyHeight=this.getViewportHeight();return bodyHeight},Grid.prototype.getViewportHeight=function(){var self=this,viewPortHeight=this.gridHeight-this.headerHeight-this.footerHeight,adjustment=self.getViewportAdjustment();return viewPortHeight+=adjustment.height},Grid.prototype.getViewportWidth=function(){var self=this,viewPortWidth=this.gridWidth,adjustment=self.getViewportAdjustment();return viewPortWidth+=adjustment.width},Grid.prototype.getHeaderViewportWidth=function(){var viewPortWidth=this.getViewportWidth();return viewPortWidth},Grid.prototype.registerViewportAdjuster=function(func){this.viewportAdjusters.push(func)},Grid.prototype.removeViewportAdjuster=function(func){var idx=this.viewportAdjusters.indexOf(func);"undefined"!=typeof idx&&void 0!==idx&&this.viewportAdjusters.splice(idx,1)},Grid.prototype.getViewportAdjustment=function(){var self=this,adjustment={height:0,width:0};return self.viewportAdjusters.forEach(function(func){adjustment=func.call(this,adjustment)}),adjustment},Grid.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},Grid.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},Grid.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},Grid.prototype.searchRows=function(renderableRows){return rowSearcher.search(this,renderableRows,this.columns)},Grid.prototype.sortByColumn=function(renderableRows){return rowSorter.sort(this,renderableRows,this.columns)},Grid.prototype.getCellValue=function(row,col){var self=this;return self.cellValueGetterCache[col.colDef.name]||(self.cellValueGetterCache[col.colDef.name]=$parse(row.getEntityQualifiedColField(col))),self.cellValueGetterCache[col.colDef.name](row)},Grid.prototype.getNextColumnSortPriority=function(){var self=this,p=0;return self.columns.forEach(function(col){col.sort&&col.sort.priority&&col.sort.priority>p&&(p=col.sort.priority)}),p+1},Grid.prototype.resetColumnSorting=function(excludeCol){var self=this;self.columns.forEach(function(col){col===excludeCol||col.colDef.suppressRemoveSort||(col.sort={})})},Grid.prototype.getColumnSorting=function(){var myCols,self=this,sortedCols=[];return myCols=self.columns.slice(0),myCols.sort(rowSorter.prioritySort).forEach(function(col){col.sort&&"undefined"!=typeof col.sort.direction&&col.sort.direction&&(col.sort.direction===uiGridConstants.ASC||col.sort.direction===uiGridConstants.DESC)&&sortedCols.push(col)}),sortedCols},Grid.prototype.sortColumn=function(column,directionOrAdd,add){var self=this,direction=null;if("undefined"==typeof column||!column)throw new Error("No column parameter provided");return"boolean"==typeof directionOrAdd?add=directionOrAdd:direction=directionOrAdd,add?column.sort.priority=self.getNextColumnSortPriority():(self.resetColumnSorting(column),column.sort.priority=0),column.sort.direction=direction?direction:column.sort.direction&&column.sort.direction===uiGridConstants.ASC?uiGridConstants.DESC:column.sort.direction&&column.sort.direction===uiGridConstants.DESC?column.colDef&&column.colDef.suppressRemoveSort?uiGridConstants.ASC:null:uiGridConstants.ASC,self.api.core.raise.sortChanged(self,self.getColumnSorting()),$q.when(column)},Grid.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},Grid.prototype.createRowHashMap=function(){var self=this,hashMap=new RowHashMap;hashMap.grid=self,self.rowHashMap=hashMap},Grid.prototype.refresh=function(rowsAltered){var self=this,p1=self.processRowsProcessors(self.rows).then(function(renderableRows){self.setVisibleRows(renderableRows)}),p2=self.processColumnsProcessors(self.columns).then(function(renderableColumns){self.setVisibleColumns(renderableColumns)});return $q.all([p1,p2]).then(function(){self.redrawInPlace(rowsAltered),self.refreshCanvas(!0)})},Grid.prototype.refreshRows=function(){var self=this;return self.processRowsProcessors(self.rows).then(function(renderableRows){self.setVisibleRows(renderableRows),self.redrawInPlace(),self.refreshCanvas(!0)})},Grid.prototype.refreshCanvas=function(buildStyles){var self=this;buildStyles&&self.buildStyles();var p=$q.defer(),containerHeadersToRecalc=[];for(var containerId in self.renderContainers)if(self.renderContainers.hasOwnProperty(containerId)){var container=self.renderContainers[containerId];if(null===container.canvasWidth||isNaN(container.canvasWidth))continue;(container.header||container.headerCanvas)&&containerHeadersToRecalc.push(container)}return $timeout(containerHeadersToRecalc.length>0?function(){var i,container,rebuildStyles=!1,maxHeaderHeight=0,maxHeaderCanvasHeight=0;for(i=0;i<containerHeadersToRecalc.length;i++)if(container=containerHeadersToRecalc[i],null!==container.canvasWidth&&!isNaN(container.canvasWidth)){if(container.header){var oldHeaderHeight=container.headerHeight,headerHeight=gridUtil.outerElementHeight(container.header);container.headerHeight=parseInt(headerHeight,10),oldHeaderHeight!==headerHeight&&(rebuildStyles=!0);var topBorder=gridUtil.getBorderSize(container.header,"top"),bottomBorder=gridUtil.getBorderSize(container.header,"bottom"),innerHeaderHeight=parseInt(headerHeight-topBorder-bottomBorder,10);innerHeaderHeight=0>innerHeaderHeight?0:innerHeaderHeight,container.innerHeaderHeight=innerHeaderHeight,innerHeaderHeight>maxHeaderHeight&&(maxHeaderHeight=innerHeaderHeight)}if(container.headerCanvas){var oldHeaderCanvasHeight=container.headerCanvasHeight,headerCanvasHeight=gridUtil.outerElementHeight(container.headerCanvas);container.headerCanvasHeight=parseInt(headerCanvasHeight,10),oldHeaderCanvasHeight!==headerCanvasHeight&&(rebuildStyles=!0),headerCanvasHeight>maxHeaderCanvasHeight&&(maxHeaderCanvasHeight=headerCanvasHeight)}}for(i=0;i<containerHeadersToRecalc.length;i++)container=containerHeadersToRecalc[i],maxHeaderHeight>0&&"undefined"!=typeof container.headerHeight&&null!==container.headerHeight&&container.headerHeight<maxHeaderHeight&&(container.explicitHeaderHeight=maxHeaderHeight),"undefined"!=typeof container.headerCanvasHeight&&null!==container.headerCanvasHeight&&maxHeaderCanvasHeight>0&&container.headerCanvasHeight<maxHeaderCanvasHeight&&(container.explicitHeaderCanvasHeight=maxHeaderCanvasHeight);buildStyles&&rebuildStyles&&self.buildStyles(),p.resolve()}:function(){p.resolve()}),p.promise},Grid.prototype.redrawInPlace=function(rowsAdded){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];rowsAdded?(container.adjustRows(container.prevScrollTop,null),container.adjustColumns(container.prevScrollTop,null)):(container.adjustRows(null,container.prevScrolltopPercentage),container.adjustColumns(null,container.prevScrollleftPercentage))}},Grid.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},Grid.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},RowHashMap.prototype={put:function(key,value){this[this.grid.options.rowIdentity(key)]=value},get:function(key){return this[this.grid.options.rowIdentity(key)]},remove:function(key){var value=this[key=this.grid.options.rowIdentity(key)];return delete this[key],value}},Grid}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function($q,$rootScope,gridUtil,uiGridConstants,GridRow){function registerEventWithAngular(eventId,handler,grid,_this){return $rootScope.$on(eventId,function(){var args=Array.prototype.slice.call(arguments);args.splice(0,1),handler.apply(_this?_this:grid.api,args)})}var GridApi=function(grid){this.grid=grid,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",GridRow.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",GridRow.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollEvent"),this.registerEvent("core","canvasHeightChanged")};return GridApi.prototype.suppressEvents=function(listenerFuncs,callBackFn){var self=this,listeners=angular.isArray(listenerFuncs)?listenerFuncs:[listenerFuncs],foundListeners=[];listeners.forEach(function(l){foundListeners=self.listeners.filter(function(lstnr){return l===lstnr.handler})}),foundListeners.forEach(function(l){l.dereg()}),callBackFn(),foundListeners.forEach(function(l){l.dereg=registerEventWithAngular(l.eventId,l.handler,self.grid,l._this)})},GridApi.prototype.registerEvent=function(featureName,eventName){var self=this;self[featureName]||(self[featureName]={});var feature=self[featureName];feature.on||(feature.on={},feature.raise={});var eventId=self.grid.id+featureName+eventName;feature.raise[eventName]=function(){$rootScope.$emit.apply($rootScope,[eventId].concat(Array.prototype.slice.call(arguments)))},feature.on[eventName]=function(scope,handler,_this){var deregAngularOn=registerEventWithAngular(eventId,handler,self.grid,_this),listener={handler:handler,dereg:deregAngularOn,eventId:eventId,scope:scope,_this:_this};self.listeners.push(listener);var removeListener=function(){listener.dereg();var index=self.listeners.indexOf(listener);self.listeners.splice(index,1)};return scope.$on("$destroy",function(){removeListener()}),removeListener}},GridApi.prototype.registerEventsFromObject=function(eventObjectMap){var self=this,features=[];angular.forEach(eventObjectMap,function(featProp,featPropName){var feature={name:featPropName,events:[]};angular.forEach(featProp,function(prop,propName){feature.events.push(propName)}),features.push(feature)}),features.forEach(function(feature){feature.events.forEach(function(event){self.registerEvent(feature.name,event)})})},GridApi.prototype.registerMethod=function(featureName,methodName,callBackFn,_this){this[featureName]||(this[featureName]={});var feature=this[featureName];feature[methodName]=gridUtil.createBoundedWrapper(_this||this.grid,callBackFn)},GridApi.prototype.registerMethodsFromObject=function(methodMap,_this){var self=this,features=[];angular.forEach(methodMap,function(featProp,featPropName){var feature={name:featPropName,methods:[]};angular.forEach(featProp,function(prop,propName){feature.methods.push({name:propName,fn:prop})}),features.push(feature)}),features.forEach(function(feature){feature.methods.forEach(function(method){self.registerMethod(feature.name,method.name,method.fn,_this)})})},GridApi}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(gridUtil,uiGridConstants,i18nService){function GridColumn(colDef,uid,grid){var self=this;self.grid=grid,self.uid=uid,self.updateColumnDef(colDef,!0)}return GridColumn.prototype.setPropertyOrDefault=function(colDef,propName,defaultValue){var self=this;self[propName]="undefined"!=typeof colDef[propName]&&colDef[propName]?colDef[propName]:"undefined"!=typeof self[propName]?self[propName]:defaultValue?defaultValue:{}},GridColumn.prototype.updateColumnDef=function(colDef,isNew){var self=this;if(self.colDef=colDef,void 0===colDef.name)throw new Error("colDef.name is required for column at index "+self.grid.options.columnDefs.indexOf(colDef));self.displayName=void 0===colDef.displayName?gridUtil.readableColumnName(colDef.name):colDef.displayName;var parseErrorMsg="Cannot parse column width '"+colDef.width+"' for column named '"+colDef.name+"'";if(gridUtil.isNullOrUndefined(self.width)||!angular.isNumber(self.width))if(gridUtil.isNullOrUndefined(colDef.width))self.width="*";else if(angular.isNumber(colDef.width))self.width=colDef.width;else if(gridUtil.endsWith(colDef.width,"%")){var percentStr=colDef.width.replace(/%/g,""),percent=parseInt(percentStr,10);if(isNaN(percent))throw new Error(parseErrorMsg);self.width=colDef.width}else if(colDef.width.match(/^(\d+)$/))self.width=parseInt(colDef.width.match(/^(\d+)$/)[1],10);else{if(!colDef.width.match(/^\*+$/))throw new Error(parseErrorMsg);self.width=colDef.width}self.minWidth=colDef.minWidth?colDef.minWidth:30,self.maxWidth=colDef.maxWidth?colDef.maxWidth:9e3,self.field=void 0===colDef.field?colDef.name:colDef.field,"string"!=typeof self.field&&gridUtil.logError("Field is not a string, this is likely to break the code, Field is: "+self.field),self.name=colDef.name,self.displayName=void 0===colDef.displayName?gridUtil.readableColumnName(colDef.name):colDef.displayName,self.aggregationType=angular.isDefined(colDef.aggregationType)?colDef.aggregationType:null,self.footerCellTemplate=angular.isDefined(colDef.footerCellTemplate)?colDef.footerCellTemplate:null,self.footerCellClass=colDef.footerCellClass,self.cellClass=colDef.cellClass,self.headerCellClass=colDef.headerCellClass,self.cellFilter=colDef.cellFilter?colDef.cellFilter:"",self.headerCellFilter=colDef.headerCellFilter?colDef.headerCellFilter:"",self.footerCellFilter=colDef.footerCellFilter?colDef.footerCellFilter:"",self.visible=gridUtil.isNullOrUndefined(colDef.visible)||colDef.visible,self.headerClass=colDef.headerClass,self.enableSorting="undefined"!=typeof colDef.enableSorting?colDef.enableSorting:!0,self.sortingAlgorithm=colDef.sortingAlgorithm,self.enableFiltering="undefined"!=typeof colDef.enableFiltering?colDef.enableFiltering:!0,self.setPropertyOrDefault(colDef,"menuItems",[]),isNew&&self.setPropertyOrDefault(colDef,"sort");var defaultFilters=[];colDef.filter?defaultFilters.push(colDef.filter):self.enableFiltering&&self.grid.options.enableFiltering&&defaultFilters.push({}),isNew&&(self.setPropertyOrDefault(colDef,"filter"),self.setPropertyOrDefault(colDef,"filters",defaultFilters)),GridColumn.prototype.unsort=function(){this.sort={},self.grid.api.core.raise.sortChanged(self,self.grid.getColumnSorting())}},GridColumn.prototype.getColClass=function(prefixDot){var cls=uiGridConstants.COL_CLASS_PREFIX+this.uid;return prefixDot?"."+cls:cls},GridColumn.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},GridColumn.prototype.getRenderContainer=function(){var self=this,containerId=self.renderContainer;return(null===containerId||""===containerId||void 0===containerId)&&(containerId="body"),self.grid.renderContainers[containerId]},GridColumn.prototype.showColumn=function(){this.colDef.visible=!0},GridColumn.prototype.hideColumn=function(){this.colDef.visible=!1},GridColumn.prototype.getAggregationValue=function(){var self=this,result=0,visibleRows=self.grid.getVisibleRows(),cellValues=function(){var values=[];return angular.forEach(visibleRows,function(row){var cellValue=self.grid.getCellValue(row,self);angular.isNumber(cellValue)&&values.push(cellValue)}),values};return angular.isFunction(self.aggregationType)?self.aggregationType(visibleRows,self):self.aggregationType===uiGridConstants.aggregationTypes.count?self.grid.getVisibleRowCount():self.aggregationType===uiGridConstants.aggregationTypes.sum?(angular.forEach(cellValues(),function(value){result+=value}),result):self.aggregationType===uiGridConstants.aggregationTypes.avg?(angular.forEach(cellValues(),function(value){result+=value}),result/=cellValues().length):self.aggregationType===uiGridConstants.aggregationTypes.min?Math.min.apply(null,cellValues()):self.aggregationType===uiGridConstants.aggregationTypes.max?Math.max.apply(null,cellValues()):"\xa0"},GridColumn.prototype.getAggregationText=function(){var self=this;if(self.colDef.aggregationHideLabel)return"";if(self.colDef.aggregationLabel)return self.colDef.aggregationLabel;switch(self.colDef.aggregationType){case uiGridConstants.aggregationTypes.count:return i18nService.getSafeText("aggregation.count");case uiGridConstants.aggregationTypes.sum:return i18nService.getSafeText("aggregation.sum");case uiGridConstants.aggregationTypes.avg:return i18nService.getSafeText("aggregation.avg");case uiGridConstants.aggregationTypes.min:return i18nService.getSafeText("aggregation.min");case uiGridConstants.aggregationTypes.max:return i18nService.getSafeText("aggregation.max");default:return""}},GridColumn.prototype.getCellTemplate=function(){var self=this;return self.cellTemplatePromise},GridColumn.prototype.getCompiledElementFn=function(){var self=this;return self.compiledElementFnDefer.promise},GridColumn}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){return{initialize:function(baseOptions){return baseOptions.onRegisterApi=baseOptions.onRegisterApi||angular.noop(),baseOptions.data=baseOptions.data||[],baseOptions.columnDefs=baseOptions.columnDefs||[],baseOptions.excludeProperties=baseOptions.excludeProperties||["$$hashKey"],baseOptions.enableRowHashing=baseOptions.enableRowHashing!==!1,baseOptions.rowIdentity=baseOptions.rowIdentity||function(row){return gridUtil.hashKey(row)},baseOptions.getRowIdentity=baseOptions.getRowIdentity||function(row){return row.$$hashKey},baseOptions.showHeader="undefined"!=typeof baseOptions.showHeader?baseOptions.showHeader:!0,baseOptions.headerRowHeight=baseOptions.showHeader?"undefined"!=typeof baseOptions.headerRowHeight?baseOptions.headerRowHeight:30:0,baseOptions.rowHeight=baseOptions.rowHeight||30,baseOptions.minRowsToShow="undefined"!=typeof baseOptions.minRowsToShow?baseOptions.minRowsToShow:10,baseOptions.showGridFooter=baseOptions.showGridFooter===!0,baseOptions.showColumnFooter=baseOptions.showColumnFooter===!0,baseOptions.columnFooterHeight="undefined"!=typeof baseOptions.columnFooterHeight?baseOptions.columnFooterHeight:30,baseOptions.gridFooterHeight="undefined"!=typeof baseOptions.gridFooterHeight?baseOptions.gridFooterHeight:30,baseOptions.columnWidth="undefined"!=typeof baseOptions.columnWidth?baseOptions.columnWidth:50,baseOptions.maxVisibleColumnCount="undefined"!=typeof baseOptions.maxVisibleColumnCount?baseOptions.maxVisibleColumnCount:200,baseOptions.virtualizationThreshold="undefined"!=typeof baseOptions.virtualizationThreshold?baseOptions.virtualizationThreshold:20,baseOptions.columnVirtualizationThreshold="undefined"!=typeof baseOptions.columnVirtualizationThreshold?baseOptions.columnVirtualizationThreshold:10,baseOptions.excessRows="undefined"!=typeof baseOptions.excessRows?baseOptions.excessRows:4,baseOptions.scrollThreshold="undefined"!=typeof baseOptions.scrollThreshold?baseOptions.scrollThreshold:4,baseOptions.excessColumns="undefined"!=typeof baseOptions.excessColumns?baseOptions.excessColumns:4,baseOptions.horizontalScrollThreshold="undefined"!=typeof baseOptions.horizontalScrollThreshold?baseOptions.horizontalScrollThreshold:2,baseOptions.scrollThrottle="undefined"!=typeof baseOptions.scrollThrottle?baseOptions.scrollThrottle:70,baseOptions.enableSorting=baseOptions.enableSorting!==!1,baseOptions.enableFiltering=baseOptions.enableFiltering===!0,baseOptions.enableColumnMenus=baseOptions.enableColumnMenus!==!1,baseOptions.enableVerticalScrollbar="undefined"!=typeof baseOptions.enableVerticalScrollbar?baseOptions.enableVerticalScrollbar:uiGridConstants.scrollbars.ALWAYS,baseOptions.enableHorizontalScrollbar="undefined"!=typeof baseOptions.enableHorizontalScrollbar?baseOptions.enableHorizontalScrollbar:uiGridConstants.scrollbars.ALWAYS,baseOptions.minimumColumnSize="undefined"!=typeof baseOptions.minimumColumnSize?baseOptions.minimumColumnSize:10,baseOptions.rowEquality=baseOptions.rowEquality||function(entityA,entityB){return entityA===entityB},baseOptions.headerTemplate=baseOptions.headerTemplate||null,baseOptions.footerTemplate=baseOptions.footerTemplate||null,baseOptions.rowTemplate=baseOptions.rowTemplate||"ui-grid/ui-grid-row",baseOptions.appScopeProvider=baseOptions.appScopeProvider||null,baseOptions}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){function GridRenderContainer(name,grid,options){var self=this;self.name=name,self.grid=grid,self.visibleRowCache=[],self.visibleColumnCache=[],self.renderedRows=[],self.renderedColumns=[],self.prevScrollTop=0,self.prevScrolltopPercentage=0,self.prevRowScrollIndex=0,self.prevScrollLeft=0,self.prevScrollleftPercentage=0,self.prevColumnScrollIndex=0,self.columnStyles="",self.viewportAdjusters=[],self.canvasHeightShouldUpdate=!0,self.$$canvasHeight=0,options&&angular.isObject(options)&&angular.extend(self,options),grid.registerStyleComputation({priority:5,func:function(){return self.columnStyles}})}return GridRenderContainer.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},GridRenderContainer.prototype.minRowsToRender=function(){for(var self=this,minRows=0,rowAddedHeight=0,viewPortHeight=self.getViewportHeight(),i=self.visibleRowCache.length-1;viewPortHeight>rowAddedHeight&&i>=0;i--)rowAddedHeight+=self.visibleRowCache[i].height,minRows++;return minRows},GridRenderContainer.prototype.minColumnsToRender=function(){for(var self=this,viewportWidth=this.getViewportWidth(),min=0,totalWidth=0,i=0;i<self.visibleColumnCache.length;i++){var col=self.visibleColumnCache[i];if(viewportWidth>totalWidth)totalWidth+=col.drawnWidth?col.drawnWidth:0,min++;else{for(var currWidth=0,j=i;j>=i-min;j--)currWidth+=self.visibleColumnCache[j].drawnWidth?self.visibleColumnCache[j].drawnWidth:0;viewportWidth>currWidth&&min++}}return min},GridRenderContainer.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},GridRenderContainer.prototype.registerViewportAdjuster=function(func){this.viewportAdjusters.push(func)},GridRenderContainer.prototype.removeViewportAdjuster=function(func){var idx=this.viewportAdjusters.indexOf(func);"undefined"!=typeof idx&&void 0!==idx&&this.viewportAdjusters.splice(idx,1)},GridRenderContainer.prototype.getViewportAdjustment=function(){var self=this,adjustment={height:0,width:0};return self.viewportAdjusters.forEach(function(func){adjustment=func.call(this,adjustment)}),adjustment},GridRenderContainer.prototype.getViewportHeight=function(){var self=this,headerHeight=self.headerHeight?self.headerHeight:self.grid.headerHeight,viewPortHeight=self.grid.gridHeight-headerHeight-self.grid.footerHeight,adjustment=self.getViewportAdjustment();return viewPortHeight+=adjustment.height},GridRenderContainer.prototype.getViewportWidth=function(){var self=this,viewPortWidth=self.grid.gridWidth,adjustment=self.getViewportAdjustment();return viewPortWidth+=adjustment.width},GridRenderContainer.prototype.getHeaderViewportWidth=function(){var viewPortWidth=this.getViewportWidth();return viewPortWidth},GridRenderContainer.prototype.getCanvasHeight=function(){var self=this;if(!self.canvasHeightShouldUpdate)return self.$$canvasHeight;var oldCanvasHeight=self.$$canvasHeight;return self.$$canvasHeight=0,self.visibleRowCache.forEach(function(row){self.$$canvasHeight+=row.height}),self.canvasHeightShouldUpdate=!1,self.grid.api.core.raise.canvasHeightChanged(oldCanvasHeight,self.$$canvasHeight),self.$$canvasHeight},GridRenderContainer.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()},GridRenderContainer.prototype.getCanvasWidth=function(){var self=this,ret=self.canvasWidth;return ret},GridRenderContainer.prototype.setRenderedRows=function(newRows){this.renderedRows.length=newRows.length;for(var i=0;i<newRows.length;i++)this.renderedRows[i]=newRows[i]},GridRenderContainer.prototype.setRenderedColumns=function(newColumns){this.renderedColumns.length=newColumns.length;for(var i=0;i<newColumns.length;i++)this.renderedColumns[i]=newColumns[i];this.updateColumnOffset()},GridRenderContainer.prototype.updateColumnOffset=function(){for(var hiddenColumnsWidth=0,i=0;i<this.currentFirstColumn;i++)hiddenColumnsWidth+=this.visibleColumnCache[i].drawnWidth;this.columnOffset=hiddenColumnsWidth},GridRenderContainer.prototype.adjustScrollVertical=function(scrollTop,scrollPercentage,force){(this.prevScrollTop!==scrollTop||force)&&(("undefined"==typeof scrollTop||void 0===scrollTop||null===scrollTop)&&(scrollTop=(this.getCanvasHeight()-this.getCanvasWidth())*scrollPercentage),this.adjustRows(scrollTop,scrollPercentage,!1),this.prevScrollTop=scrollTop,this.prevScrolltopPercentage=scrollPercentage,this.grid.queueRefresh())},GridRenderContainer.prototype.adjustScrollHorizontal=function(scrollLeft,scrollPercentage,force){(this.prevScrollLeft!==scrollLeft||force)&&(("undefined"==typeof scrollLeft||void 0===scrollLeft||null===scrollLeft)&&(scrollLeft=(this.getCanvasWidth()-this.getViewportWidth())*scrollPercentage),this.adjustColumns(scrollLeft,scrollPercentage),this.prevScrollLeft=scrollLeft,this.prevScrollleftPercentage=scrollPercentage,this.grid.queueRefresh())},GridRenderContainer.prototype.adjustRows=function(scrollTop,scrollPercentage,postDataLoaded){var self=this,minRows=self.minRowsToRender(),rowCache=self.visibleRowCache,maxRowIndex=rowCache.length-minRows;"undefined"!=typeof scrollPercentage&&null!==scrollPercentage||!scrollTop||(scrollPercentage=scrollTop/self.getVerticalScrollLength());var rowIndex=Math.ceil(Math.min(maxRowIndex,maxRowIndex*scrollPercentage));rowIndex>maxRowIndex&&(rowIndex=maxRowIndex);var newRange=[];if(rowCache.length>self.grid.options.virtualizationThreshold){if("undefined"!=typeof scrollTop&&null!==scrollTop){if(!self.grid.options.enableInfiniteScroll&&self.prevScrollTop<scrollTop&&rowIndex<self.prevRowScrollIndex+self.grid.options.scrollThreshold&&maxRowIndex>rowIndex)return;if(!self.grid.options.enableInfiniteScroll&&self.prevScrollTop>scrollTop&&rowIndex>self.prevRowScrollIndex-self.grid.options.scrollThreshold&&maxRowIndex>rowIndex)return}var rangeStart={},rangeEnd={};if(self.grid.options.enableInfiniteScroll&&self.grid.scrollDirection!==uiGridConstants.scrollDirection.NONE&&postDataLoaded){var findIndex=null,i=null;if(self.grid.scrollDirection===uiGridConstants.scrollDirection.UP){for(findIndex=rowIndex>0?self.grid.options.excessRows:0,i=0;i<rowCache.length;i++)if(rowCache[i].entity.$$hashKey===self.renderedRows[findIndex].entity.$$hashKey){rowIndex=i;break}rangeStart=Math.max(0,rowIndex),rangeEnd=Math.min(rowCache.length,rangeStart+self.grid.options.excessRows+minRows)}else if(self.grid.scrollDirection===uiGridConstants.scrollDirection.DOWN){for(findIndex=minRows,i=0;i<rowCache.length;i++)if(rowCache[i].entity.$$hashKey===self.renderedRows[findIndex].entity.$$hashKey){rowIndex=i;break}rangeStart=Math.max(0,rowIndex-self.grid.options.excessRows-minRows),rangeEnd=Math.min(rowCache.length,rowIndex+minRows+self.grid.options.excessRows)}}else rangeStart=Math.max(0,rowIndex-self.grid.options.excessRows),rangeEnd=Math.min(rowCache.length,rowIndex+minRows+self.grid.options.excessRows);newRange=[rangeStart,rangeEnd]}else{var maxLen=self.visibleRowCache.length;newRange=[0,Math.max(maxLen,minRows+self.grid.options.excessRows)]}self.updateViewableRowRange(newRange),self.prevRowScrollIndex=rowIndex},GridRenderContainer.prototype.adjustColumns=function(scrollLeft,scrollPercentage){var self=this,minCols=self.minColumnsToRender(),columnCache=self.visibleColumnCache,maxColumnIndex=columnCache.length-minCols;"undefined"!=typeof scrollPercentage&&null!==scrollPercentage||!scrollLeft||(scrollPercentage=scrollLeft/self.getCanvasWidth());var colIndex=Math.ceil(Math.min(maxColumnIndex,maxColumnIndex*scrollPercentage));colIndex>maxColumnIndex&&(colIndex=maxColumnIndex);var newRange=[];if(columnCache.length>self.grid.options.columnVirtualizationThreshold&&self.getCanvasWidth()>self.getViewportWidth()){var rangeStart=Math.max(0,colIndex-self.grid.options.excessColumns),rangeEnd=Math.min(columnCache.length,colIndex+minCols+self.grid.options.excessColumns);newRange=[rangeStart,rangeEnd]}else{var maxLen=self.visibleColumnCache.length;newRange=[0,Math.max(maxLen,minCols+self.grid.options.excessColumns)]}self.updateViewableColumnRange(newRange),self.prevColumnScrollIndex=colIndex},GridRenderContainer.prototype.updateViewableRowRange=function(renderedRange){var rowArr=this.visibleRowCache.slice(renderedRange[0],renderedRange[1]);this.currentTopRow=renderedRange[0],this.setRenderedRows(rowArr)},GridRenderContainer.prototype.updateViewableColumnRange=function(renderedRange){var columnArr=this.visibleColumnCache.slice(renderedRange[0],renderedRange[1]);this.currentFirstColumn=renderedRange[0],this.setRenderedColumns(columnArr)},GridRenderContainer.prototype.headerCellWrapperStyle=function(){var self=this;if(0!==self.currentFirstColumn){var offset=self.columnOffset;return self.grid.isRTL()?{"margin-right":offset+"px"}:{"margin-left":offset+"px"}}return null},GridRenderContainer.prototype.updateColumnWidths=function(){var lastColumn,self=this,asterisksArray=[],percentArray=[],asteriskNum=0,availableWidth=self.getViewportWidth()-self.grid.scrollbarWidth,manualWidthSum=0,canvasWidth=0,ret="",columnCache=self.visibleColumnCache;columnCache.forEach(function(column){if(column.visible){var isPercent=!1;angular.isNumber(column.width)||(isPercent=isNaN(column.width)&&gridUtil.endsWith(column.width,"%")),angular.isString(column.width)&&-1!==column.width.indexOf("*")?(asteriskNum=parseInt(asteriskNum+column.width.length,10),asterisksArray.push(column)):isPercent?percentArray.push(column):angular.isNumber(column.width)&&(manualWidthSum=parseInt(manualWidthSum+column.width,10),canvasWidth=parseInt(canvasWidth,10)+parseInt(column.width,10),column.drawnWidth=column.width)}});var i,column,colWidth,remainingWidth=availableWidth-manualWidthSum;if(percentArray.length>0){for(i=0;i<percentArray.length;i++){column=percentArray[i];var percent=parseInt(column.width.replace(/%/g,""),10)/100;colWidth=parseInt(percent*remainingWidth,10),column.colDef.minWidth&&colWidth<column.colDef.minWidth?(colWidth=column.colDef.minWidth,remainingWidth-=colWidth,canvasWidth+=colWidth,column.drawnWidth=colWidth,percentArray.splice(i,1)):column.colDef.maxWidth&&colWidth>column.colDef.maxWidth&&(colWidth=column.colDef.maxWidth,remainingWidth-=colWidth,canvasWidth+=colWidth,column.drawnWidth=colWidth,percentArray.splice(i,1))}percentArray.forEach(function(column){var percent=parseInt(column.width.replace(/%/g,""),10)/100,colWidth=parseInt(percent*remainingWidth,10);canvasWidth+=colWidth,column.drawnWidth=colWidth})}if(asterisksArray.length>0){var asteriskVal=parseInt(remainingWidth/asteriskNum,10);for(i=0;i<asterisksArray.length;i++)column=asterisksArray[i],colWidth=parseInt(asteriskVal*column.width.length,10),column.colDef.minWidth&&colWidth<column.colDef.minWidth?(colWidth=column.colDef.minWidth,remainingWidth-=colWidth,asteriskNum--,canvasWidth+=colWidth,column.drawnWidth=colWidth,lastColumn=column,asterisksArray.splice(i,1)):column.colDef.maxWidth&&colWidth>column.colDef.maxWidth&&(colWidth=column.colDef.maxWidth,remainingWidth-=colWidth,asteriskNum--,canvasWidth+=colWidth,column.drawnWidth=colWidth,asterisksArray.splice(i,1));asteriskVal=parseInt(remainingWidth/asteriskNum,10),asterisksArray.forEach(function(column){var colWidth=parseInt(asteriskVal*column.width.length,10);canvasWidth+=colWidth,column.drawnWidth=colWidth})}var leftoverWidth=availableWidth-parseInt(canvasWidth,10);if(leftoverWidth>0&&canvasWidth>0&&availableWidth>canvasWidth){var variableColumn=!1;if(columnCache.forEach(function(col){col.width&&!angular.isNumber(col.width)&&(variableColumn=!0)}),variableColumn)for(var remFn=function(column){leftoverWidth>0&&(column.drawnWidth=column.drawnWidth+1,canvasWidth+=1,leftoverWidth--)};leftoverWidth>0;)columnCache.forEach(remFn)}availableWidth>canvasWidth&&(canvasWidth=availableWidth),columnCache.forEach(function(column){ret+=column.getColClassDefinition()}),self.canvasWidth=parseInt(canvasWidth,10),this.columnStyles=ret},GridRenderContainer.prototype.getViewPortStyle=function(){var self=this,styles={};return"body"===self.name?(styles["overflow-x"]=self.grid.options.enableHorizontalScrollbar===uiGridConstants.scrollbars.NEVER?"hidden":"scroll",styles["overflow-y"]=self.grid.isRTL()?self.grid.hasLeftContainerColumns()?"hidden":self.grid.options.enableVerticalScrollbar===uiGridConstants.scrollbars.NEVER?"hidden":"scroll":self.grid.hasRightContainerColumns()?"hidden":self.grid.options.enableVerticalScrollbar===uiGridConstants.scrollbars.NEVER?"hidden":"scroll"):"left"===self.name?(styles["overflow-x"]="hidden",styles["overflow-y"]=self.grid.isRTL()?self.grid.options.enableVerticalScrollbar===uiGridConstants.scrollbars.NEVER?"hidden":"scroll":"hidden"):(styles["overflow-x"]="hidden",styles["overflow-y"]=self.grid.isRTL()?"hidden":self.grid.options.enableVerticalScrollbar===uiGridConstants.scrollbars.NEVER?"hidden":"scroll"),styles
},GridRenderContainer}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil",function(gridUtil){function GridRow(entity,index,grid){this.grid=grid,this.entity=entity,this.uid=gridUtil.nextUid(),this.visible=!0,this.$$height=grid.options.rowHeight}return Object.defineProperty(GridRow.prototype,"height",{get:function(){return this.$$height},set:function(height){height!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=height)}}),GridRow.prototype.getQualifiedColField=function(col){return"row."+this.getEntityQualifiedColField(col)},GridRow.prototype.getEntityQualifiedColField=function(col){return gridUtil.preEval("entity."+col.field)},GridRow.prototype.setRowInvisible=function(row){null!==row&&(row.forceInvisible=!0,row.visible&&(row.visible=!1,row.grid.refresh(),row.grid.api.core.raise.rowsVisibleChanged()))},GridRow.prototype.clearRowInvisible=function(row){null!==row&&(row.forceInvisible=!1,row.visible||(row.visible=!0,row.grid.refresh(),row.grid.api.core.raise.rowsVisibleChanged()))},GridRow}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(gridUtil){function ScrollEvent(grid,sourceRowContainer,sourceColContainer,source){var self=this;if(!grid)throw new Error("grid argument is required");self.grid=grid,self.source=source,self.sourceRowContainer=sourceRowContainer,self.sourceColContainer=sourceColContainer,self.newScrollLeft=null,self.newScrollTop=null,self.x=null,self.y=null,self.fireThrottledScrollingEvent=gridUtil.throttle(function(){self.grid.api.core.raise.scrollEvent(self)},self.grid.options.scrollThrottle,{trailing:!0})}return ScrollEvent.prototype.fireScrollingEvent=function(){this.grid.api.core.raise.scrollEvent(this)},ScrollEvent.prototype.getNewScrollLeft=function(colContainer,viewport){var self=this;if(!self.newScrollLeft){var scrollXPercentage,scrollWidth=colContainer.getCanvasWidth()-colContainer.getViewportWidth(),oldScrollLeft=gridUtil.normalizeScrollLeft(viewport);if("undefined"!=typeof self.x.percentage&&void 0!==self.x.percentage)scrollXPercentage=self.x.percentage;else{if("undefined"==typeof self.x.pixels||void 0===self.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");scrollXPercentage=self.x.percentage=(oldScrollLeft+self.x.pixels)/scrollWidth}return Math.max(0,scrollXPercentage*scrollWidth)}return self.newScrollLeft},ScrollEvent.prototype.getNewScrollTop=function(rowContainer,viewport){var self=this;if(!self.newScrollTop){var scrollYPercentage,scrollLength=rowContainer.getVerticalScrollLength(),oldScrollTop=viewport[0].scrollTop;if("undefined"!=typeof self.y.percentage&&void 0!==self.y.percentage)scrollYPercentage=self.y.percentage;else{if("undefined"==typeof self.y.pixels||void 0===self.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");scrollYPercentage=self.y.percentage=(oldScrollTop+self.y.pixels)/scrollLength}return Math.max(0,scrollYPercentage*scrollLength)}return self.newScrollTop},ScrollEvent.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},ScrollEvent}])}(),function(){angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(gridUtil,$q,$compile,$templateCache,uiGridConstants,Grid){var service={createGrid:function(options){options="undefined"!=typeof options?options:{},options.id=gridUtil.newId();var grid=new Grid(options);if(grid.options.rowTemplate){var rowTemplateFnPromise=$q.defer();grid.getRowTemplateFn=rowTemplateFnPromise.promise,gridUtil.getTemplate(grid.options.rowTemplate).then(function(template){var rowTemplateFn=$compile(template);rowTemplateFnPromise.resolve(rowTemplateFn)},function(){throw new Error("Couldn't fetch/use row template '"+grid.options.rowTemplate+"'")})}return grid.registerColumnBuilder(service.defaultColumnBuilder),grid.registerRowBuilder(service.rowTemplateAssigner),grid.registerRowsProcessor(function(rows){return rows.forEach(function(row){row.visible=!row.forceInvisible}),rows}),grid.registerColumnsProcessor(function(columns){return columns.forEach(function(column){column.visible=!0}),columns}),grid.registerColumnsProcessor(function(renderableColumns){return renderableColumns.forEach(function(column){column.colDef.visible===!1&&(column.visible=!1)}),renderableColumns}),grid.options.enableFiltering&&grid.registerRowsProcessor(grid.searchRows),grid.registerRowsProcessor(grid.options.externalSort&&angular.isFunction(grid.options.externalSort)?grid.options.externalSort:grid.sortByColumn),grid},defaultColumnBuilder:function(colDef,col){var templateGetPromises=[];return col.providedHeaderCellTemplate=colDef.headerCellTemplate?colDef.headerCellTemplate:"ui-grid/uiGridHeaderCell",col.providedCellTemplate=colDef.cellTemplate?colDef.cellTemplate:"ui-grid/uiGridCell",col.providedFooterCellTemplate=colDef.footerCellTemplate?colDef.footerCellTemplate:"ui-grid/uiGridFooterCell",col.cellTemplatePromise=gridUtil.getTemplate(col.providedCellTemplate),templateGetPromises.push(col.cellTemplatePromise.then(function(template){col.cellTemplate=template.replace(uiGridConstants.CUSTOM_FILTERS,col.cellFilter?"|"+col.cellFilter:"")},function(){throw new Error("Couldn't fetch/use colDef.cellTemplate '"+colDef.cellTemplate+"'")})),templateGetPromises.push(gridUtil.getTemplate(col.providedHeaderCellTemplate).then(function(template){col.headerCellTemplate=template.replace(uiGridConstants.CUSTOM_FILTERS,col.headerCellFilter?"|"+col.headerCellFilter:"")},function(){throw new Error("Couldn't fetch/use colDef.headerCellTemplate '"+colDef.headerCellTemplate+"'")})),templateGetPromises.push(gridUtil.getTemplate(col.providedFooterCellTemplate).then(function(template){col.footerCellTemplate=template.replace(uiGridConstants.CUSTOM_FILTERS,col.footerCellFilter?"|"+col.footerCellFilter:"")},function(){throw new Error("Couldn't fetch/use colDef.footerCellTemplate '"+colDef.footerCellTemplate+"'")})),col.compiledElementFnDefer=$q.defer(),$q.all(templateGetPromises)},rowTemplateAssigner:function(row){var grid=this;if(row.rowTemplate){var perRowTemplateFnPromise=$q.defer();row.getRowTemplateFn=perRowTemplateFnPromise.promise,gridUtil.getTemplate(row.rowTemplate).then(function(template){var rowTemplateFn=$compile(template);perRowTemplateFnPromise.resolve(rowTemplateFn)},function(){throw new Error("Couldn't fetch/use row template '"+row.rowTemplate+"'")})}else row.rowTemplate=grid.options.rowTemplate,row.getRowTemplateFn=grid.getRowTemplateFn;return row.getRowTemplateFn}};return service}])}(),function(){function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var module=angular.module("ui.grid");module.service("rowSearcher",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){var defaultCondition=uiGridConstants.filter.STARTS_WITH,rowSearcher={};return rowSearcher.getTerm=function(filter){if("undefined"==typeof filter.term)return filter.term;var term=filter.term;return"string"==typeof term&&(term=term.trim()),term},rowSearcher.stripTerm=function(filter){var term=rowSearcher.getTerm(filter);return"string"==typeof term?escapeRegExp(term.replace(/(^\*|\*$)/g,"")):term},rowSearcher.guessCondition=function(filter){if("undefined"==typeof filter.term||!filter.term)return defaultCondition;var term=rowSearcher.getTerm(filter);if(/\*/.test(term)){var regexpFlags="";filter.flags&&filter.flags.caseSensitive||(regexpFlags+="i");var reText=term.replace(/(\\)?\*/g,function($0,$1){return $1?$0:"[\\s\\S]*?"});return new RegExp("^"+reText+"$",regexpFlags)}return defaultCondition},rowSearcher.setupFilters=function(filters){for(var newFilters=[],filtersLength=filters.length,i=0;filtersLength>i;i++){var filter=filters[i];if(filter.noTerm||filter.term){var newFilter={},regexpFlags="";filter.flags&&filter.flags.caseSensitive||(regexpFlags+="i"),filter.term&&(newFilter.term=rowSearcher.stripTerm(filter)),newFilter.condition=filter.condition?filter.condition:rowSearcher.guessCondition(filter),newFilter.flags=angular.extend({caseSensitive:!1,date:!1},filter.flags),newFilter.condition===uiGridConstants.filter.STARTS_WITH&&(newFilter.startswithRE=new RegExp("^"+newFilter.term,regexpFlags)),newFilter.condition===uiGridConstants.filter.ENDS_WITH&&(newFilter.endswithRE=new RegExp(newFilter.term+"$",regexpFlags)),newFilter.condition===uiGridConstants.filter.CONTAINS&&(newFilter.containsRE=new RegExp(newFilter.term,regexpFlags)),newFilter.condition===uiGridConstants.filter.EXACT&&(newFilter.exactRE=new RegExp("^"+newFilter.term+"$",regexpFlags)),newFilters.push(newFilter)}}return newFilters},rowSearcher.runColumnFilter=function(grid,row,column,filter){var conditionType=typeof filter.condition,term=filter.term,value=grid.getCellValue(row,column);if(filter.condition instanceof RegExp)return filter.condition.test(value);if("function"===conditionType)return filter.condition(term,value,row,column);if(filter.startswithRE)return filter.startswithRE.test(value);if(filter.endswithRE)return filter.endswithRE.test(value);if(filter.containsRE)return filter.containsRE.test(value);if(filter.exactRE)return filter.exactRE.test(value);if(filter.condition===uiGridConstants.filter.NOT_EQUAL){var regex=new RegExp("^"+term+"$");return!regex.exec(value)}if("number"==typeof value){var tempFloat=parseFloat(term.replace(/\\./,"."));isNaN(tempFloat)||(term=tempFloat)}return filter.flags.date===!0&&(value=new Date(value),term=new Date(term.replace(/\\/g,""))),filter.condition===uiGridConstants.filter.GREATER_THAN?value>term:filter.condition===uiGridConstants.filter.GREATER_THAN_OR_EQUAL?value>=term:filter.condition===uiGridConstants.filter.LESS_THAN?term>value:filter.condition===uiGridConstants.filter.LESS_THAN_OR_EQUAL?term>=value:!0},rowSearcher.searchColumn=function(grid,row,column,filters){if(grid.options.useExternalFiltering)return!0;for(var filtersLength=filters.length,i=0;filtersLength>i;i++){var filter=filters[i],ret=rowSearcher.runColumnFilter(grid,row,column,filter);if(!ret)return!1}return!0},rowSearcher.search=function(grid,rows,columns){if(rows){for(var filterData=[],colsLength=columns.length,i=0;colsLength>i;i++){var col=columns[i];"undefined"!=typeof col.filters&&(col.filters.length>1||1===col.filters.length&&("undefined"!=typeof col.filters[0].term&&col.filters[0].term||col.filters[0].noTerm))?filterData.push({col:col,filters:rowSearcher.setupFilters(col.filters)}):"undefined"!=typeof col.filter&&col.filter&&("undefined"!=typeof col.filter.term&&col.filter.term||col.filter.noTerm)&&filterData.push({col:col,filters:rowSearcher.setupFilters([col.filter])})}if(filterData.length>0){for(var foreachRow=function(grid,row,col,filters){(row.forceInvisible||!rowSearcher.searchColumn(grid,row,col,filters))&&(row.visible=!1)},foreachFilterCol=function(grid,filterData){for(var rowsLength=rows.length,i=0;rowsLength>i;i++)foreachRow(grid,rows[i],filterData.col,filterData.filters)},filterDataLength=filterData.length,j=0;filterDataLength>j;j++)foreachFilterCol(grid,filterData[j]);grid.api.core.raise.rowsVisibleChanged&&grid.api.core.raise.rowsVisibleChanged()}return rows}},rowSearcher}])}(),function(){var module=angular.module("ui.grid");module.service("rowSorter",["$parse","uiGridConstants",function($parse,uiGridConstants){var currencyRegexStr="("+uiGridConstants.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",rowSorter=(new RegExp("^[-+]?"+currencyRegexStr+"[\\d,.]+"+currencyRegexStr+"%?$"),{colSortFnCache:[]});return rowSorter.guessSortFn=function(itemType){switch(itemType){case"number":return rowSorter.sortNumber;case"boolean":return rowSorter.sortBool;case"string":return rowSorter.sortAlpha;case"date":return rowSorter.sortDate;case"object":return rowSorter.basicSort;default:throw new Error("No sorting function found for type:"+itemType)}},rowSorter.handleNulls=function(a,b){if(!a&&0!==a&&a!==!1||!b&&0!==b&&b!==!1){if(!a&&0!==a&&a!==!1&&!b&&0!==b&&b!==!1)return 0;if(!a&&0!==a&&a!==!1)return 1;if(!b&&0!==b&&b!==!1)return-1}return null},rowSorter.basicSort=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a===b?0:b>a?-1:1},rowSorter.sortNumber=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a-b},rowSorter.sortNumberStr=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;var numA,numB,badA=!1,badB=!1;return numA=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(numA)&&(badA=!0),numB=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(numB)&&(badB=!0),badA&&badB?0:badA?1:badB?-1:numA-numB},rowSorter.sortAlpha=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;var strA=a.toString().toLowerCase(),strB=b.toString().toLowerCase();return strA===strB?0:strB>strA?-1:1},rowSorter.sortDate=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;var timeA=a.getTime(),timeB=b.getTime();return timeA===timeB?0:timeB>timeA?-1:1},rowSorter.sortBool=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a&&b?0:a||b?a?1:-1:0},rowSorter.getSortFn=function(grid,col){var sortFn;return rowSorter.colSortFnCache[col.colDef.name]?sortFn=rowSorter.colSortFnCache[col.colDef.name]:void 0!==col.sortingAlgorithm?(sortFn=col.sortingAlgorithm,rowSorter.colSortFnCache[col.colDef.name]=col.sortingAlgorithm):(sortFn=rowSorter.guessSortFn(col.colDef.type),sortFn?rowSorter.colSortFnCache[col.colDef.name]=sortFn:sortFn=rowSorter.sortAlpha),sortFn},rowSorter.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||0===a.sort.priority?-1:b.sort.priority||0===b.sort.priority?1:0},rowSorter.sort=function(grid,rows,columns){if(rows){if(grid.options.useExternalSorting)return rows;var sortCols=[];if(columns.forEach(function(col){col.sort&&col.sort.direction&&(col.sort.direction===uiGridConstants.ASC||col.sort.direction===uiGridConstants.DESC)&&sortCols.push(col)}),sortCols=sortCols.sort(rowSorter.prioritySort),0===sortCols.length)return rows;var col,direction,r=rows.slice(0);angular.forEach(rows,function(row,idx){row.entity.$uiGridIndex=idx});var newRows=rows.sort(function(rowA,rowB){for(var sortFn,tem=0,idx=0;0===tem&&idx<sortCols.length;){col=sortCols[idx],direction=sortCols[idx].sort.direction,sortFn=rowSorter.getSortFn(grid,col,r);var propA=grid.getCellValue(rowA,col),propB=grid.getCellValue(rowB,col);tem=sortFn(propA,propB),idx++}return 0===tem?rowA.entity.$uiGridIndex-rowB.entity.$uiGridIndex:direction===uiGridConstants.ASC?tem:0-tem});return angular.forEach(newRows,function(row){delete row.entity.$uiGridIndex}),newRows}},rowSorter}])}(),function(){function getStyles(elem){var e=elem;return"undefined"!=typeof e.length&&e.length&&(e=elem[0]),e.ownerDocument.defaultView.getComputedStyle(e,null)}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0,sides=["Top","Right","Bottom","Left"];4>i;i+=2){var side=sides[i];if("margin"===extra){var marg=parseFloat(styles[extra+side]);isNaN(marg)||(val+=marg)}if(isBorderBox){if("content"===extra){var padd=parseFloat(styles["padding"+side]);isNaN(padd)||(val-=padd)}if("margin"!==extra){var bordermarg=parseFloat(styles["border"+side+"Width"]);isNaN(bordermarg)||(val-=bordermarg)}}else{var nocontentPad=parseFloat(styles["padding"+side]);if(isNaN(nocontentPad)||(val+=nocontentPad),"padding"!==extra){var nocontentnopad=parseFloat(styles["border"+side+"Width"]);isNaN(nocontentnopad)||(val+=nocontentnopad)}}}return val}function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=!0,styles=getStyles(elem),isBorderBox="border-box"===styles.boxSizing;if(0>=val||null==val){if(val=styles[name],(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&!0,val=parseFloat(val)||0}var ret=val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles);return ret}function getLineHeight(elm){elm=angular.element(elm)[0];var parent=elm.offsetParent;return parent||(parent=document.getElementsByTagName("body")[0]),parseInt(getStyles(parent).fontSize)||parseInt(getStyles(elm).fontSize)||16}var bindPolyfill,module=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(bindPolyfill=function(){var slice=Array.prototype.slice;return function(context){var fn=this,args=slice.call(arguments,1);return args.length?function(){return arguments.length?fn.apply(context,args.concat(slice.call(arguments))):fn.apply(context,args)}:function(){return arguments.length?fn.apply(context,arguments):fn.call(context)}}});var rnumnonpx=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),rdisplayswap=/^(block|none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},uid=["0","0","0"],uidPrefix="uiGrid-";module.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$injector","$q","$interpolate","uiGridConstants",function($log,$window,$document,$http,$templateCache,$timeout,$injector,$q,$interpolate,uiGridConstants){function mousewheelHandler(fn,event){var $elm=angular.element(this),delta=0,deltaX=0,deltaY=0,absDelta=0;if(event.originalEvent&&(event=event.originalEvent),"detail"in event&&(deltaY=-1*event.detail),"wheelDelta"in event&&(deltaY=event.wheelDelta),"wheelDeltaY"in event&&(deltaY=event.wheelDeltaY),"wheelDeltaX"in event&&(deltaX=-1*event.wheelDeltaX),"axis"in event&&event.axis===event.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in event&&(deltaY=-1*event.deltaY,delta=deltaY),"deltaX"in event&&(deltaX=event.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===event.deltaMode){var lineHeight=$elm.data("mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===event.deltaMode){var pageHeight=$elm.data("mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(event,absDelta)&&(lowestDelta/=40)),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),event.deltaMode=0;var newEvent={originalEvent:event,deltaX:deltaX,deltaY:deltaY,deltaFactor:lowestDelta,preventDefault:function(){event.preventDefault()}};nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),fn.call($elm[0],newEvent)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return"mousewheel"===orgEvent.type&&absDelta%120===0}var s={getStyles:getStyles,createBoundedWrapper:function(object,method){return function(){return method.apply(object,arguments)}},readableColumnName:function(columnName){return"undefined"==typeof columnName||void 0===columnName||null===columnName?columnName:("string"!=typeof columnName&&(columnName=String(columnName)),columnName.replace(/_+/g," ").replace(/^[A-Z]+$/,function(match){return angular.lowercase(angular.uppercase(match.charAt(0))+match.slice(1))}).replace(/(\w+)/g,function(match){return angular.uppercase(match.charAt(0))+match.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(data,excludeProperties){var columnDefs=[];if(!data||"undefined"==typeof data[0]||void 0===data[0])return[];angular.isUndefined(excludeProperties)&&(excludeProperties=[]);var item=data[0];return angular.forEach(item,function(prop,propName){-1===excludeProperties.indexOf(propName)&&columnDefs.push({name:propName})}),columnDefs},newId:function(){var seedId=(new Date).getTime();return function(){return seedId+=1}}(),getTemplate:function(template){if($templateCache.get(template))return s.postProcessTemplate($templateCache.get(template));if(template.hasOwnProperty("then"))return template.then(s.postProcessTemplate);try{if(angular.element(template).length>0)return $q.when(template).then(s.postProcessTemplate)}catch(err){}return s.logDebug("fetching url",template),$http({method:"GET",url:template}).then(function(result){var templateHtml=result.data.trim();return $templateCache.put(template,templateHtml),templateHtml},function(err){throw new Error("Could not get template "+template+": "+err)}).then(s.postProcessTemplate)},postProcessTemplate:function(template){var startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol();return("{{"!==startSym||"}}"!==endSym)&&(template=template.replace(/\{\{/g,startSym),template=template.replace(/\}\}/g,endSym)),$q.when(template)},guessType:function(item){var itemType=typeof item;switch(itemType){case"number":case"boolean":case"string":return itemType;default:return angular.isDate(item)?"date":"object"}},elementWidth:function(){},elementHeight:function(){},getScrollbarWidth:function(){var outer=document.createElement("div");outer.style.visibility="hidden",outer.style.width="100px",outer.style.msOverflowStyle="scrollbar",document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%",outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;return outer.parentNode.removeChild(outer),widthNoScroll-widthWithScroll},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret},fakeElement:function(elem,options,callback){var ret,name,newElement=angular.element(elem).clone()[0];for(name in options)newElement.style[name]=options[name];return angular.element(document.body).append(newElement),ret=callback.call(newElement,newElement),angular.element(newElement).remove(),ret},normalizeWheelEvent:function(event){var lowestDelta,lowestDeltaXY,fn,orgEvent=event||window.event,delta=([].slice.call(arguments,1),0),deltaX=0,deltaY=0,absDelta=0,absDeltaXY=0;return orgEvent.originalEvent&&(orgEvent=orgEvent.originalEvent),orgEvent.wheelDelta&&(delta=orgEvent.wheelDelta),orgEvent.detail&&(delta=-1*orgEvent.detail),deltaY=delta,void 0!==orgEvent.axis&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaY=0,deltaX=-1*delta),orgEvent.deltaY&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),orgEvent.deltaX&&(deltaX=orgEvent.deltaX,delta=-1*deltaX),void 0!==orgEvent.wheelDeltaY&&(deltaY=orgEvent.wheelDeltaY),void 0!==orgEvent.wheelDeltaX&&(deltaX=orgEvent.wheelDeltaX),absDelta=Math.abs(delta),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta),absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDeltaXY||lowestDeltaXY>absDeltaXY)&&(lowestDeltaXY=absDeltaXY),fn=delta>0?"floor":"ceil",delta=Math[fn](delta/lowestDelta),deltaX=Math[fn](deltaX/lowestDeltaXY),deltaY=Math[fn](deltaY/lowestDeltaXY),{delta:delta,deltaX:deltaX,deltaY:deltaY}},isTouchEnabled:function(){var bool;return("ontouchstart"in $window||$window.DocumentTouch&&$document instanceof DocumentTouch)&&(bool=!0),bool},isNullOrUndefined:function(obj){return void 0===obj||null===obj?!0:!1},endsWith:function(str,suffix){return str&&suffix&&"string"==typeof str?-1!==str.indexOf(suffix,str.length-suffix.length):!1},arrayContainsObjectWithProperty:function(array,propertyName,propertyValue){var found=!1;return angular.forEach(array,function(object){object[propertyName]===propertyValue&&(found=!0)}),found},requestAnimationFrame:$window.requestAnimationFrame&&$window.requestAnimationFrame.bind($window)||$window.webkitRequestAnimationFrame&&$window.webkitRequestAnimationFrame.bind($window)||function(fn){return $timeout(fn,10,!1)},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(element){var $animate;try{$animate=$injector.get("$animate"),$animate.enabled(!1,element)}catch(e){}},enableAnimations:function(element){var $animate;try{return $animate=$injector.get("$animate"),$animate.enabled(!0,element),$animate}catch(e){}},nextUid:function(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57===digit)return uid[index]="A",uidPrefix+uid.join("");if(90!==digit)return uid[index]=String.fromCharCode(digit+1),uidPrefix+uid.join("");uid[index]="0"}return uid.unshift("0"),uidPrefix+uid.join("")},hashKey:function(obj){var key,objType=typeof obj;return"object"===objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():"undefined"!=typeof obj.$$hashKey&&obj.$$hashKey?key=obj.$$hashKey:void 0===key&&(key=obj.$$hashKey=s.nextUid()):key=obj,objType+":"+key},resetUids:function(){uid=["0","0","0"]},logError:function(logMessage){uiGridConstants.LOG_ERROR_MESSAGES&&$log.error(logMessage)},logWarn:function(logMessage){uiGridConstants.LOG_WARN_MESSAGES&&$log.warn(logMessage)},logDebug:function(){uiGridConstants.LOG_DEBUG_MESSAGES&&$log.debug.apply($log,arguments)}};["width","height"].forEach(function(name){var capsName=angular.uppercase(name.charAt(0))+name.substr(1);s["element"+capsName]=function(elem,extra){var e=elem;if(e&&"undefined"!=typeof e.length&&e.length&&(e=elem[0]),e){var styles=getStyles(e);return 0===e.offsetWidth&&rdisplayswap.test(styles.display)?s.fakeElement(e,cssShow,function(newElm){return getWidthOrHeight(newElm,name,extra)}):getWidthOrHeight(e,name,extra)}return null},s["outerElement"+capsName]=function(elem,margin){return elem?s["element"+capsName].call(this,elem,margin?"margin":"border"):null}}),s.closestElm=function(el,selector){"undefined"!=typeof el.length&&el.length&&(el=el[0]);var matchesFn;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(fn){return"function"==typeof document.body[fn]?(matchesFn=fn,!0):!1});for(var parent;null!==el;){if(parent=el.parentElement,null!==parent&&parent[matchesFn](selector))return parent;el=parent}return null},s.type=function(obj){var text=Function.prototype.toString.call(obj.constructor);return text.match(/function (.*?)\(/)[1]},s.getBorderSize=function(elem,borderType){"undefined"!=typeof elem.length&&elem.length&&(elem=elem[0]);var styles=getStyles(elem);borderType=borderType?"border"+borderType.charAt(0).toUpperCase()+borderType.slice(1):"border",borderType+="Width";var val=parseInt(styles[borderType],10);return isNaN(val)?0:val},s.detectBrowser=function(){var userAgent=$window.navigator.userAgent,browsers={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var key in browsers)if(browsers[key].test(userAgent))return key;return"unknown"},s.normalizeScrollLeft=function(element){"undefined"!=typeof element.length&&element.length&&(element=element[0]);var browser=s.detectBrowser(),scrollLeft=element.scrollLeft,dir=s.getStyles(element).direction;if("ie"===browser)return scrollLeft;if("chrome"===browser){if("rtl"===dir){var maxScrollLeft=element.scrollWidth-element.clientWidth;return maxScrollLeft-scrollLeft}return scrollLeft}return"firefox"===browser?Math.abs(scrollLeft):scrollLeft},s.denormalizeScrollLeft=function(element,scrollLeft){"undefined"!=typeof element.length&&element.length&&(element=element[0]);var browser=s.detectBrowser(),dir=s.getStyles(element).direction;if("ie"===browser)return scrollLeft;if("chrome"===browser){if("rtl"===dir){var maxScrollLeft=element.scrollWidth-element.clientWidth;return maxScrollLeft-scrollLeft}return scrollLeft}return"firefox"===browser&&"rtl"===dir?-1*scrollLeft:scrollLeft},s.preEval=function(path){var m=uiGridConstants.BRACKET_REGEXP.exec(path);if(m)return(m[1]?s.preEval(m[1]):m[1])+m[2]+(m[3]?s.preEval(m[3]):m[3]);path=path.replace(uiGridConstants.APOS_REGEXP,"\\'");var parts=path.split(uiGridConstants.DOT_REGEXP),preparsed=[parts.shift()];return angular.forEach(parts,function(part){preparsed.push(part.replace(uiGridConstants.FUNC_REGEXP,"']$1"))}),preparsed.join("['")},s.debounce=function(func,wait,immediate){function debounce(){context=this,args=arguments;var later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout;return timeout&&$timeout.cancel(timeout),timeout=$timeout(later,wait),callNow&&(result=func.apply(context,args)),result}var timeout,args,context,result;return debounce.cancel=function(){$timeout.cancel(timeout),timeout=null},debounce},s.throttle=function(func,wait,options){function runFunc(){lastCall=+new Date,func.apply(context,args),$timeout(function(){queued=null},0)}options=options||{};var context,args,lastCall=0,queued=null;return function(){if(context=this,args=arguments,null===queued){var sinceLast=+new Date-lastCall;sinceLast>wait?runFunc():options.trailing&&(queued=$timeout(runFunc,wait-sinceLast))}}},s.on={},s.off={},s._events={},s.addOff=function(eventName){s.off[eventName]=function(elm,fn){var idx=s._events[eventName].indexOf(fn);idx>0&&s._events[eventName].removeAt(idx)}};var nullLowestDeltaTimeout,lowestDelta,mouseWheeltoBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return s.on.mousewheel=function(elm,fn){if(elm&&fn){var $elm=angular.element(elm);$elm.data("mousewheel-line-height",getLineHeight($elm)),$elm.data("mousewheel-page-height",s.elementHeight($elm)),$elm.data("mousewheel-callbacks")||$elm.data("mousewheel-callbacks",{});var cbs=$elm.data("mousewheel-callbacks");cbs[fn]=(Function.prototype.bind||bindPolyfill).call(mousewheelHandler,$elm[0],fn);for(var i=mouseWheeltoBind.length;i;)$elm.on(mouseWheeltoBind[--i],cbs[fn])}},s.off.mousewheel=function(elm,fn){var $elm=angular.element(this),cbs=$elm.data("mousewheel-callbacks"),handler=cbs[fn];if(handler)for(var i=mouseWheeltoBind.length;i;)$elm.off(mouseWheeltoBind[--i],handler);delete cbs[fn],0===Object.keys(cbs).length&&($elm.removeData("mousewheel-line-height"),$elm.removeData("mousewheel-page-height"),$elm.removeData("mousewheel-callbacks"))},s}]),module.filter("px",function(){return function(str){return str.match(/^[\d\.]+$/)?str+"px":str}})}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grup\xe9r r\xe6kker udfra en kolonne ved at tr\xe6kke dens overskift hertil."},search:{placeholder:"S\xf8g...",showingItems:"Viste r\xe6kker:",selectedItems:"Valgte r\xe6kker:",totalItems:"R\xe6kker totalt:",size:"Side st\xf8rrelse:",first:"F\xf8rste side",next:"N\xe6ste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"V\xe6lg kolonner:"},column:{hide:"Skjul kolonne"},aggregation:{count:"samlede r\xe6kker: ",sum:"smalede: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("de",{aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spalten\xfcberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Eintr\xe4ge:",selectedItems:"Ausgew\xe4hlte Eintr\xe4ge:",totalItems:"Eintr\xe4ge gesamt:",size:"Eintr\xe4ge pro Seite:",first:"Erste Seite",next:"N\xe4chste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten ausw\xe4hlen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",remove:"Sortierung zur\xfccksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"L\xf6sen"},gridMenu:{columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als CSV exportieren"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei au\xdfer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine g\xfcltige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enth\xe4lt sie g\xfcltiges JSON?",jsonNotArray:"Die importierte JSON-Datei mu\xdf ein Array enthalten. Breche Import ab."},pagination:{sizes:"Eintr\xe4ge pro Seite",totalItems:"Eintr\xe4ge"}}),$delegate
}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("en",{aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{sizes:"items per page",totalItems:"items"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("es",{aggregate:{label:"Art\xedculos"},groupPanel:{description:"Arrastre un encabezado de columna aqu\xed y su\xe9ltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Art\xedculos Mostrados:",selectedItems:"Art\xedculos Seleccionados:",totalItems:"Art\xedculos Totales:",size:"Tama\xf1o de P\xe1gina:",first:"Primera P\xe1gina",next:"P\xe1gina Siguiente",previous:"P\xe1gina Anterior",last:"\xdaltima P\xe1gina"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijaci\xf3n"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selecci\xf3n como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selecci\xf3n como pdf"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, \xbftiene encabezados el archivo?",noObjects:"No fue posible obtener registros, \xbfcontiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, \xbfes un CSV v\xe1lido?",invalidJson:"No fue posible procesar el archivo, \xbfes un Json v\xe1lido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fa",{aggregate:{label:"\u0645\u0648\u0631\u062f\u0647\u0627"},groupPanel:{description:"\u06cc\u06a9 \u0639\u0646\u0648\u0627\u0646 \u0633\u062a\u0648\u0646 \u0627\u06cc\u0646\u062c\u0627 \u0631\u0627 \u0628\u0631\u062f\u0627\u0631 \u0648 \u0628\u0647 \u06af\u0631\u0648\u0647\u06cc \u0627\u0632 \u0622\u0646 \u0633\u062a\u0648\u0646 \u0628\u06cc\u0627\u0646\u062f\u0627\u0632."},search:{placeholder:"\u062c\u0633\u062a\u062c\u0648...",showingItems:"\u0646\u0645\u0627\u06cc\u0634 \u0645\u0648\u0631\u062f\u0647\u0627:",selectedItems:"\u0645\u0648\u0631\u062f\u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628\u200c\u0634\u062f\u0647:",totalItems:"\u0647\u0645\u0647\u0654 \u0645\u0648\u0631\u062f\u0647\u0627:",size:"\u0627\u0646\u062f\u0627\u0632\u0647\u0654 \u0635\u0641\u062d\u0647:",first:"\u0635\u0641\u062d\u0647\u0654 \u0627\u0648\u0644",next:"\u0635\u0641\u062d\u0647\u0654 \u0628\u0639\u062f",previous:"\u0635\u0641\u062d\u0647\u0654 \u0642\u0628\u0644",last:"\u0622\u062e\u0631\u06cc\u0646 \u0635\u0641\u062d\u0647"},menu:{text:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0633\u062a\u0648\u0646\u200c\u0647\u0627:"},column:{hide:"\u0633\u062a\u0648\u0646 \u067e\u0646\u0647\u0627\u0646 \u06a9\u0646"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko t\xe4h\xe4n ryhmitt\xe4\xe4ksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"N\xe4ytet\xe4\xe4n rivej\xe4:",selectedItems:"Valitut rivit:",totalItems:"Rivej\xe4 yht.:",size:"N\xe4yt\xe4:",first:"Ensimm\xe4inen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"J\xe4rjest\xe4 nouseva",descending:"J\xe4rjest\xe4 laskeva",remove:"Poista j\xe4rjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivej\xe4 yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie n\xe4kyv\xe4 tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie n\xe4kyv\xe4 tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa"},importer:{noHeaders:"Sarakkeen nimi\xe4 ei voitu p\xe4\xe4tell\xe4, onko tiedostossa otsikkorivi\xe4?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu k\xe4sitell\xe4, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu k\xe4sitell\xe4, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sis\xe4lt\xe4nyt taulukkoa, lopetetaan."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fr",{aggregate:{label:"articles"},groupPanel:{description:"Faites glisser un en-t\xeate de colonne ici et d\xe9posez-le vers un groupe par cette colonne."},search:{placeholder:"Recherche...",showingItems:"Articles Affichage des:",selectedItems:"\xc9l\xe9ments Articles:",totalItems:"Nombre total d'articles:",size:"Taille de page:",first:"Premi\xe8re page",next:"Page Suivante",previous:"Page pr\xe9c\xe9dente",last:"Derni\xe8re page"},menu:{text:"Choisir des colonnes:"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre d\xe9croissant",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"total lignes: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"\xc9pingler \xe0 gauche",pinRight:"\xc9pingler \xe0 droite",unpin:"D\xe9tacher"},gridMenu:{columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les donn\xe9es en CSV",exporterVisibleAsCsv:"Exporter les donn\xe9es visibles en CSV",exporterSelectedAsCsv:"Exporter les donn\xe9es s\xe9lectionn\xe9es en CSV",exporterAllAsPdf:"Exporter toutes les donn\xe9es en PDF",exporterVisibleAsPdf:"Exporter les donn\xe9es visibles en PDF",exporterSelectedAsPdf:"Exporter les donn\xe9es s\xe9lectionn\xe9es en PDF"},importer:{noHeaders:"Impossible de d\xe9terminer le nom des colonnes, le fichier poss\xe8de-t-il un en-t\xeate ?",noObjects:"Aucun objet trouv\xe9, le fichier poss\xe8de-t-il des donn\xe9es autres que l'en-t\xeate ?",invalidCsv:"Le fichier n'a pas pu \xeatre trait\xe9, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu \xeatre trait\xe9, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON import\xe9 doit contenir un tableau. Abandon."},pagination:{sizes:"articles par page",totalItems:"articles"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("he",{aggregate:{label:"items"},groupPanel:{description:"\u05d2\u05e8\u05d5\u05e8 \u05e2\u05de\u05d5\u05d3\u05d4 \u05dc\u05db\u05d0\u05df \u05d5\u05e9\u05d7\u05e8\u05e8 \u05d1\u05db\u05d3\u05d9 \u05dc\u05e7\u05d1\u05e5 \u05e2\u05de\u05d5\u05d3\u05d4 \u05d6\u05d5."},search:{placeholder:"\u05d7\u05e4\u05e9...",showingItems:"\u05de\u05e6\u05d9\u05d2:",selectedItems:'\u05e1\u05d4"\u05db \u05e0\u05d1\u05d7\u05e8\u05d5:',totalItems:'\u05e1\u05d4"\u05db \u05e8\u05e9\u05d5\u05de\u05d5\u05ea:',size:"\u05ea\u05d5\u05e6\u05d0\u05d5\u05ea \u05d1\u05d3\u05e3:",first:"\u05d3\u05e3 \u05e8\u05d0\u05e9\u05d5\u05df",next:"\u05d3\u05e3 \u05d4\u05d1\u05d0",previous:"\u05d3\u05e3 \u05e7\u05d5\u05d3\u05dd",last:"\u05d3\u05e3 \u05d0\u05d7\u05e8\u05d5\u05df"},menu:{text:"\u05d1\u05d7\u05e8 \u05e2\u05de\u05d5\u05d3\u05d5\u05ea:"},sort:{ascending:"\u05e1\u05d3\u05e8 \u05e2\u05d5\u05dc\u05d4",descending:"\u05e1\u05d3\u05e8 \u05d9\u05d5\u05e8\u05d3",remove:"\u05d1\u05d8\u05dc"},column:{hide:"\u05d8\u05d5\u05e8 \u05d4\u05e1\u05ea\u05e8"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ja",{aggregate:{label:"\u4ef6"},groupPanel:{description:"\u5217\u540d\u90e8\u5206\u3092\u3053\u3053\u306b\u30c9\u30e9\u30c3\u30b0\u30a2\u30f3\u30c9\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u3053\u3068\u3067\u5217\u3054\u3068\u306b\u30b0\u30eb\u30fc\u30d7\u5206\u3051\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"},search:{placeholder:"\u691c\u7d22...",showingItems:"\u7d5e\u8fbc\u307f\u4ef6\u6570:",selectedItems:"\u9078\u629e\u4ef6\u6570:",totalItems:"\u5168\u4ef6\u6570:",size:"\u30da\u30fc\u30b8\u30b5\u30a4\u30ba: ",first:"\u6700\u521d\u306e\u30da\u30fc\u30b8",next:"\u6b21\u306e\u30da\u30fc\u30b8",previous:"\u524d\u306e\u30da\u30fc\u30b8",last:"\u6700\u5f8c\u306e\u30da\u30fc\u30b8"},menu:{text:"\u5217\u9078\u629e:"},sort:{ascending:"\u6607\u9806\u30bd\u30fc\u30c8",descending:"\u964d\u9806\u30bd\u30fc\u30c8",remove:"\u30bd\u30fc\u30c8\u53d6\u6d88"},column:{hide:"\u5217\u3092\u96a0\u3059"},aggregation:{count:"\u5408\u8a08\u4ef6\u6570: ",sum:"\u5408\u8a08: ",avg:"\u5e73\u5747: ",min:"\u6700\u5c0f\u5024: ",max:"\u6700\u5927\u5024: "},pinning:{pinLeft:"\u5de6\u306b\u30d4\u30f3\u7559\u3081",pinRight:"\u53f3\u306b\u30d4\u30f3\u7559\u3081",unpin:"\u30d4\u30f3\u7559\u3081\u53d6\u6d88"},gridMenu:{columns:"\u5217:",importerTitle:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb",exporterAllAsCsv:"\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092CSV\u5f62\u5f0f\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8",exporterVisibleAsCsv:"\u7d5e\u8fbc\u307f\u6e08\u307f\u30c7\u30fc\u30bf\u3092CSV\u5f62\u5f0f\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8",exporterSelectedAsCsv:"\u9078\u629e\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092CSV\u5f62\u5f0f\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8",exporterAllAsPdf:"\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092PDF\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8",exporterVisibleAsPdf:"\u7d5e\u8fbc\u307f\u6e08\u307f\u30c7\u30fc\u30bf\u3092PDF\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8",exporterSelectedAsPdf:"\u9078\u629e\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092PDF\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8"},importer:{noHeaders:"\u5217\u540d\u304c\u62bd\u51fa\u3067\u304d\u307e\u305b\u3093\u3002\u30d8\u30c3\u30c0\u30fc\u306f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u304b\uff1f",noObjects:"\u30c7\u30fc\u30bf\u304c\u62bd\u51fa\u3067\u304d\u307e\u305b\u3093\u3002\u30d5\u30a1\u30a4\u30eb\u306b\u30c7\u30fc\u30bf\u306f\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u304b\uff1f",invalidCsv:"\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u30d5\u30a1\u30a4\u30eb\u306f\u6709\u52b9\u306aCSV\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u304b\uff1f",invalidJson:"\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u30d5\u30a1\u30a4\u30eb\u306f\u6709\u52b9\u306aJSON\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u304b\uff1f",jsonNotArray:"JSON\u30d5\u30a1\u30a4\u30eb\u306f\u914d\u5217\u3092\u542b\u3093\u3067\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u51e6\u7406\u3092\u4e2d\u65ad\u3057\u307e\u3059\u3002"},pagination:{sizes:"\u4ef6 / \u30da\u30fc\u30b8",totalItems:"\u4ef6"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("pt-br",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da P\xe1gina:",first:"Primeira P\xe1gina",next:"Pr\xf3xima P\xe1gina",previous:"P\xe1gina Anterior",last:"\xdaltima P\xe1gina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",remove:"Remover Ordena\xe7\xe3o"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},gridMenu:{columns:"Colunas:",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados vis\xedveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados vis\xedveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf"},importer:{noHeaders:"Nomes de colunas n\xe3o puderam ser derivados. O arquivo tem um cabe\xe7alho?",noObjects:"Objetos n\xe3o puderam ser derivados. Havia dados no arquivo, al\xe9m dos cabe\xe7alhos?",invalidCsv:"Arquivo n\xe3o pode ser processado. \xc9 um CSV v\xe1lido?",invalidJson:"Arquivo n\xe3o pode ser processado. \xc9 um Json v\xe1lido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ru",{aggregate:{label:"\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"},groupPanel:{description:"\u0414\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u043e \u0441\u0442\u043e\u043b\u0431\u0446\u0443 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0435\u0433\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435."},search:{placeholder:"\u041f\u043e\u0438\u0441\u043a...",showingItems:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b:",selectedItems:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b:",totalItems:"\u0412\u0441\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432:",size:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b:",first:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",next:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previous:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",last:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"},menu:{text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b:"},sort:{ascending:"\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",descending:"\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",remove:"\u0423\u0431\u0440\u0430\u0442\u044c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443"},column:{hide:"\u0441\u043f\u0440\u044f\u0442\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446"},aggregation:{count:"\u0432\u0441\u0435\u0433\u043e \u0441\u0442\u0440\u043e\u043a: ",sum:"\u0438\u0442\u043e\u0433\u043e: ",avg:"\u0441\u0440\u0435\u0434\u043d\u0435\u0435: ",min:"\u043c\u0438\u043d: ",max:"\u043c\u0430\u043a\u0441: "},gridMenu:{columns:"\u0421\u0442\u043e\u043b\u0431\u0446\u044b:",importerTitle:"Import file",exporterAllAsCsv:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0451 \u0432 CSV",exporterVisibleAsCsv:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 CSV",exporterSelectedAsCsv:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 CSV",exporterAllAsPdf:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0451 \u0432 PDF",exporterVisibleAsPdf:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 PDF",exporterSelectedAsPdf:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 PDF"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem n\xe1zov st\u013apca pre zoskupenie pod\u013ea toho st\u013apca."},search:{placeholder:"H\u013eadaj...",showingItems:"Zobrazujem polo\u017eky:",selectedItems:"Vybrat\xe9 polo\u017eky:",totalItems:"Po\u010det polo\u017eiek:",size:"Po\u010det:",first:"Prv\xe1 strana",next:"\u010eal\u0161ia strana",previous:"Predch\xe1dzaj\xfaca strana",last:"Posledn\xe1 strana"},menu:{text:"Vyberte st\u013apce:"},sort:{ascending:"Zotriedi\u0165 vzostupne",descending:"Zotriedi\u0165 zostupne",remove:"Vymaza\u0165 triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och sl\xe4pp den f\xf6r att gruppera efter den kolumnen."},search:{placeholder:"S\xf6k...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"F\xf6rsta sidan",next:"N\xe4sta sida",previous:"F\xf6reg\xe5ende sida",last:"Sista sidan"},menu:{text:"V\xe4lj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"G\xf6m kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"F\xe4st v\xe4nster",pinRight:"F\xe4st h\xf6ger",unpin:"L\xf6sg\xf6r"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF"},importer:{noHeaders:"Kolumnnamn kunde inte h\xe4rledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte h\xe4rledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, \xe4r den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, \xe4r den en giltig JSON?",jsonNotArray:"Importerad JSON-fil m\xe5ste inneh\xe5lla ett f\xe4lt. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),$delegate}])}])}(),function(){var DIRECTIVE_ALIASES=["uiT","uiTranslate"],FILTER_ALIASES=["t","uiTranslate"],module=angular.module("ui.grid.i18n");module.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),module.service("i18nService",["$log","i18nConstants","$rootScope",function($log,i18nConstants,$rootScope){var langCache={_langs:{},current:null,get:function(lang){return this._langs[lang.toLowerCase()]},add:function(lang,strings){var lower=lang.toLowerCase();this._langs[lower]||(this._langs[lower]={}),angular.extend(this._langs[lower],strings)},getAllLangs:function(){var langs=[];if(!this._langs)return langs;for(var key in this._langs)langs.push(key);return langs},setCurrent:function(lang){this.current=lang.toLowerCase()},getCurrentLang:function(){return this.current}},service={add:function(langs,stringMaps){"object"==typeof langs?angular.forEach(langs,function(lang){lang&&langCache.add(lang,stringMaps)}):langCache.add(langs,stringMaps)},getAllLangs:function(){return langCache.getAllLangs()},get:function(lang){var language=lang?lang:service.getCurrentLang();return langCache.get(language)},getSafeText:function(path,lang){var language=lang?lang:service.getCurrentLang(),trans=langCache.get(language);if(!trans)return i18nConstants.MISSING;for(var paths=path.split("."),current=trans,i=0;i<paths.length;++i){if(void 0===current[paths[i]]||null===current[paths[i]])return i18nConstants.MISSING;current=current[paths[i]]}return current},setCurrentLang:function(lang){lang&&(langCache.setCurrent(lang),$rootScope.$broadcast(i18nConstants.UPDATE_EVENT))},getCurrentLang:function(){var lang=langCache.getCurrentLang();return lang||(lang=i18nConstants.DEFAULT_LANG,langCache.setCurrent(lang)),lang}};return service}]);var localeDirective=function(i18nService,i18nConstants){return{compile:function(){return{pre:function($scope,$elm,$attrs){var alias=i18nConstants.LOCALE_DIRECTIVE_ALIAS,lang=$scope.$eval($attrs[alias]);lang?$scope.$watch($attrs[alias],function(){i18nService.setCurrentLang(lang)}):$attrs.$$observers&&$attrs.$observe(alias,function(){i18nService.setCurrentLang($attrs[alias]||i18nConstants.DEFAULT_LANG)})}}}}};module.directive("uiI18n",["i18nService","i18nConstants",localeDirective]);var uitDirective=function($parse,i18nService,i18nConstants){return{restrict:"EA",compile:function(){return{pre:function($scope,$elm,$attrs){var observer,alias1=DIRECTIVE_ALIASES[0],alias2=DIRECTIVE_ALIASES[1],token=$attrs[alias1]||$attrs[alias2]||$elm.html(),missing=i18nConstants.MISSING+token;if($attrs.$$observers){var prop=$attrs[alias1]?alias1:alias2;observer=$attrs.$observe(prop,function(result){result&&$elm.html($parse(result)(i18nService.getCurrentLang())||missing)})}var getter=$parse(token),listener=$scope.$on(i18nConstants.UPDATE_EVENT,function(){observer?observer($attrs[alias1]||$attrs[alias2]):$elm.html(getter(i18nService.get())||missing)});$scope.$on("$destroy",listener),$elm.html(getter(i18nService.get())||missing)}}}}};angular.forEach(DIRECTIVE_ALIASES,function(alias){module.directive(alias,["$parse","i18nService","i18nConstants",uitDirective])});var uitFilter=function($parse,i18nService,i18nConstants){return function(data){var getter=$parse(data);return getter(i18nService.get())||i18nConstants.MISSING+data}};angular.forEach(FILTER_ALIASES,function(alias){module.filter(alias,["$parse","i18nService","i18nConstants",uitFilter])})}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("zh-cn",{aggregate:{label:"\u884c"},groupPanel:{description:"\u62d6\u66f3\u8868\u5934\u5230\u6b64\u5904\u8fdb\u884c\u5206\u7ec4"},search:{placeholder:"\u67e5\u627e",showingItems:"\u5df2\u663e\u793a\u884c\u6570\uff1a",selectedItems:"\u5df2\u9009\u62e9\u884c\u6570\uff1a",totalItems:"\u603b\u884c\u6570\uff1a",size:"\u6bcf\u9875\u663e\u793a\u884c\u6570\uff1a",first:"\u9996\u9875",next:"\u4e0b\u4e00\u9875",previous:"\u4e0a\u4e00\u9875",last:"\u672b\u9875"},menu:{text:"\u9009\u62e9\u5217\uff1a"},sort:{ascending:"\u5347\u5e8f",descending:"\u964d\u5e8f",remove:"\u53d6\u6d88\u6392\u5e8f"},column:{hide:"\u9690\u85cf\u5217"},aggregation:{count:"\u8ba1\u6570\uff1a",sum:"\u6c42\u548c\uff1a",avg:"\u5747\u503c\uff1a",min:"\u6700\u5c0f\u503c\uff1a",max:"\u6700\u5927\u503c\uff1a"},pinning:{pinLeft:"\u5de6\u4fa7\u56fa\u5b9a",pinRight:"\u53f3\u4fa7\u56fa\u5b9a",unpin:"\u53d6\u6d88\u56fa\u5b9a"},gridMenu:{columns:"\u5217\uff1a",importerTitle:"\u5bfc\u5165\u6587\u4ef6",exporterAllAsCsv:"\u5bfc\u51fa\u5168\u90e8\u6570\u636e\u5230CSV",exporterVisibleAsCsv:"\u5bfc\u51fa\u53ef\u89c1\u6570\u636e\u5230CSV",exporterSelectedAsCsv:"\u5bfc\u51fa\u5df2\u9009\u6570\u636e\u5230CSV",exporterAllAsPdf:"\u5bfc\u51fa\u5168\u90e8\u6570\u636e\u5230PDF",exporterVisibleAsPdf:"\u5bfc\u51fa\u53ef\u89c1\u6570\u636e\u5230PDF",exporterSelectedAsPdf:"\u5bfc\u51fa\u5df2\u9009\u6570\u636e\u5230PDF"},importer:{noHeaders:"\u65e0\u6cd5\u83b7\u53d6\u5217\u540d\uff0c\u786e\u5b9a\u6587\u4ef6\u5305\u542b\u8868\u5934\uff1f",noObjects:"\u65e0\u6cd5\u83b7\u53d6\u6570\u636e\uff0c\u786e\u5b9a\u6587\u4ef6\u5305\u542b\u6570\u636e\uff1f",invalidCsv:"\u65e0\u6cd5\u5904\u7406\u6587\u4ef6\uff0c\u786e\u5b9a\u662f\u5408\u6cd5\u7684CSV\u6587\u4ef6\uff1f",invalidJson:"\u65e0\u6cd5\u5904\u7406\u6587\u4ef6\uff0c\u786e\u5b9a\u662f\u5408\u6cd5\u7684JSON\u6587\u4ef6\uff1f",jsonNotArray:"\u5bfc\u5165\u7684\u6587\u4ef6\u4e0d\u662fJSON\u6570\u7ec4\uff01"},pagination:{sizes:"\u884c\u6bcf\u9875",totalItems:"\u884c"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("zh-tw",{aggregate:{label:"\u884c"},groupPanel:{description:"\u62d6\u66f3\u8868\u982d\u5230\u6b64\u8655\u9032\u884c\u5206\u7d44"},search:{placeholder:"\u67e5\u627e",showingItems:"\u5df2\u986f\u793a\u884c\u6578\uff1a",selectedItems:"\u5df2\u9078\u64c7\u884c\u6578\uff1a",totalItems:"\u7e3d\u884c\u6578\uff1a",size:"\u6bcf\u9801\u986f\u793a\u884c\u6578\uff1a",first:"\u9996\u9801",next:"\u4e0b\u58f9\u9801",previous:"\u4e0a\u58f9\u9801",last:"\u672b\u9801"},menu:{text:"\u9078\u64c7\u5217\uff1a"},sort:{ascending:"\u5347\u5e8f",descending:"\u964d\u5e8f",remove:"\u53d6\u6d88\u6392\u5e8f"},column:{hide:"\u96b1\u85cf\u5217"},aggregation:{count:"\u8a08\u6578\uff1a",sum:"\u6c42\u548c\uff1a",avg:"\u5747\u503c\uff1a",min:"\u6700\u5c0f\u503c\uff1a",max:"\u6700\u5927\u503c\uff1a"},pinning:{pinLeft:"\u5de6\u5074\u56fa\u5b9a",pinRight:"\u53f3\u5074\u56fa\u5b9a",unpin:"\u53d6\u6d88\u56fa\u5b9a"},gridMenu:{columns:"\u5217\uff1a",importerTitle:"\u5c0e\u5165\u6587\u4ef6",exporterAllAsCsv:"\u5c0e\u51fa\u5168\u90e8\u6578\u64da\u5230CSV",exporterVisibleAsCsv:"\u5c0e\u51fa\u53ef\u898b\u6578\u64da\u5230CSV",exporterSelectedAsCsv:"\u5c0e\u51fa\u5df2\u9078\u6578\u64da\u5230CSV",exporterAllAsPdf:"\u5c0e\u51fa\u5168\u90e8\u6578\u64da\u5230PDF",exporterVisibleAsPdf:"\u5c0e\u51fa\u53ef\u898b\u6578\u64da\u5230PDF",exporterSelectedAsPdf:"\u5c0e\u51fa\u5df2\u9078\u6578\u64da\u5230PDF"},importer:{noHeaders:"\u7121\u6cd5\u7372\u53d6\u5217\u540d\uff0c\u78ba\u5b9a\u6587\u4ef6\u5305\u542b\u8868\u982d\uff1f",noObjects:"\u7121\u6cd5\u7372\u53d6\u6578\u64da\uff0c\u78ba\u5b9a\u6587\u4ef6\u5305\u542b\u6578\u64da\uff1f",invalidCsv:"\u7121\u6cd5\u8655\u7406\u6587\u4ef6\uff0c\u78ba\u5b9a\u662f\u5408\u6cd5\u7684CSV\u6587\u4ef6\uff1f",invalidJson:"\u7121\u6cd5\u8655\u7406\u6587\u4ef6\uff0c\u78ba\u5b9a\u662f\u5408\u6cd5\u7684JSON\u6587\u4ef6\uff1f",jsonNotArray:"\u5c0e\u5165\u7684\u6587\u4ef6\u4e0d\u662fJSON\u6578\u7d44\uff01"},pagination:{sizes:"\u884c\u6bcf\u9801",totalItems:"\u884c"}}),$delegate
}])}])}(),function(){var module=angular.module("ui.grid.autoResize",["ui.grid"]);module.directive("uiGridAutoResize",["$timeout","gridUtil",function($timeout,gridUtil){return{require:"uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){function getDimensions(){prevGridHeight=gridUtil.elementHeight($elm),prevGridWidth=gridUtil.elementWidth($elm)}function startTimeout(){clearTimeout(resizeTimeoutId),resizeTimeoutId=setTimeout(function(){var newGridHeight=gridUtil.elementHeight($elm),newGridWidth=gridUtil.elementWidth($elm);newGridHeight!==prevGridHeight||newGridWidth!==prevGridWidth?(uiGridCtrl.grid.gridHeight=newGridHeight,uiGridCtrl.grid.gridWidth=newGridWidth,$scope.$apply(function(){uiGridCtrl.grid.refresh().then(function(){getDimensions(),startTimeout()})})):startTimeout()},250)}var prevGridWidth,prevGridHeight;getDimensions();var resizeTimeoutId;startTimeout(),$scope.$on("$destroy",function(){clearTimeout(resizeTimeoutId)})}}}])}(),function(){function RowCol(row,col){this.row=row,this.col=col}var module=angular.module("ui.grid.cellNav",["ui.grid"]);module.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),module.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q",function(gridUtil,uiGridConstants,uiGridCellNavConstants){var UiGridCellNav=function(rowContainer,colContainer,leftColContainer,rightColContainer){this.rows=rowContainer.visibleRowCache,this.columns=colContainer.visibleColumnCache,this.leftColumns=leftColContainer?leftColContainer.visibleColumnCache:[],this.rightColumns=rightColContainer?rightColContainer.visibleColumnCache:[],this.bodyContainer=rowContainer};return UiGridCellNav.prototype.getFocusableCols=function(){var allColumns=this.leftColumns.concat(this.columns,this.rightColumns);return allColumns.filter(function(col){return col.colDef.allowCellFocus})},UiGridCellNav.prototype.getFocusableRows=function(){return this.rows.filter(function(row){return row.allowCellFocus!==!1})},UiGridCellNav.prototype.getNextRowCol=function(direction,curRow,curCol){switch(direction){case uiGridCellNavConstants.direction.LEFT:return this.getRowColLeft(curRow,curCol);case uiGridCellNavConstants.direction.RIGHT:return this.getRowColRight(curRow,curCol);case uiGridCellNavConstants.direction.UP:return this.getRowColUp(curRow,curCol);case uiGridCellNavConstants.direction.DOWN:return this.getRowColDown(curRow,curCol);case uiGridCellNavConstants.direction.PG_UP:return this.getRowColPageUp(curRow,curCol);case uiGridCellNavConstants.direction.PG_DOWN:return this.getRowColPageDown(curRow,curCol)}},UiGridCellNav.prototype.getRowColLeft=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=1);var nextColIndex=0===curColIndex?focusableCols.length-1:curColIndex-1;return nextColIndex>curColIndex?0===curRowIndex?new RowCol(curRow,focusableCols[nextColIndex]):new RowCol(focusableRows[curRowIndex-1],focusableCols[nextColIndex]):new RowCol(curRow,focusableCols[nextColIndex])},UiGridCellNav.prototype.getRowColRight=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=0);var nextColIndex=curColIndex===focusableCols.length-1?0:curColIndex+1;return curColIndex>nextColIndex?curRowIndex===focusableRows.length-1?new RowCol(curRow,focusableCols[nextColIndex]):new RowCol(focusableRows[curRowIndex+1],focusableCols[nextColIndex]):new RowCol(curRow,focusableCols[nextColIndex])},UiGridCellNav.prototype.getRowColDown=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);return-1===curColIndex&&(curColIndex=0),curRowIndex===focusableRows.length-1?new RowCol(curRow,focusableCols[curColIndex]):new RowCol(focusableRows[curRowIndex+1],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColPageDown=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=0);var pageSize=this.bodyContainer.minRowsToRender();return curRowIndex>=focusableRows.length-pageSize?new RowCol(focusableRows[focusableRows.length-1],focusableCols[curColIndex]):new RowCol(focusableRows[curRowIndex+pageSize],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColUp=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);return-1===curColIndex&&(curColIndex=0),0===curRowIndex?new RowCol(curRow,focusableCols[curColIndex]):new RowCol(focusableRows[curRowIndex-1],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColPageUp=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=0);var pageSize=this.bodyContainer.minRowsToRender();return 0>curRowIndex-pageSize?new RowCol(focusableRows[0],focusableCols[curColIndex]):new RowCol(focusableRows[curRowIndex-pageSize],focusableCols[curColIndex])},UiGridCellNav}]),module.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","ScrollEvent",function(gridUtil,uiGridConstants,uiGridCellNavConstants,$q,UiGridCellNav,ScrollEvent){var service={initializeGrid:function(grid){grid.registerColumnBuilder(service.cellNavColumnBuilder),grid.cellNav={},grid.cellNav.lastRowCol=null,grid.cellNav.focusedCells=[],service.defaultGridOptions(grid.options);var publicApi={events:{cellNav:{navigate:function(){}}},methods:{cellNav:{scrollTo:function(rowEntity,colDef){service.scrollTo(grid,rowEntity,colDef)},scrollToFocus:function(rowEntity,colDef){service.scrollToFocus(grid,rowEntity,colDef)},scrollToIfNecessary:function(row,col){service.scrollToIfNecessary(grid,row,col)},getFocusedCell:function(){return grid.cellNav.lastRowCol},getCurrentSelection:function(){return grid.cellNav.focusedCells},rowColSelectIndex:function(rowCol){for(var index=-1,i=0;i<grid.cellNav.focusedCells.length;i++)if(grid.cellNav.focusedCells[i].col.uid===rowCol.col.uid&&grid.cellNav.focusedCells[i].row.uid===rowCol.row.uid){index=i;break}return index}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.modifierKeysToMultiSelectCells=gridOptions.modifierKeysToMultiSelectCells===!0},decorateRenderContainers:function(grid){var rightContainer=grid.hasRightContainer()?grid.renderContainers.right:null,leftContainer=grid.hasLeftContainer()?grid.renderContainers.left:null;null!==leftContainer&&(grid.renderContainers.left.cellNav=new UiGridCellNav(grid.renderContainers.body,leftContainer,rightContainer,grid.renderContainers.body)),null!==rightContainer&&(grid.renderContainers.right.cellNav=new UiGridCellNav(grid.renderContainers.body,rightContainer,grid.renderContainers.body,leftContainer)),grid.renderContainers.body.cellNav=new UiGridCellNav(grid.renderContainers.body,grid.renderContainers.body,leftContainer,rightContainer)},getDirection:function(evt){return evt.keyCode===uiGridConstants.keymap.LEFT||evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey?uiGridCellNavConstants.direction.LEFT:evt.keyCode===uiGridConstants.keymap.RIGHT||evt.keyCode===uiGridConstants.keymap.TAB?uiGridCellNavConstants.direction.RIGHT:evt.keyCode===uiGridConstants.keymap.UP||evt.keyCode===uiGridConstants.keymap.ENTER&&evt.shiftKey?uiGridCellNavConstants.direction.UP:evt.keyCode===uiGridConstants.keymap.PG_UP?uiGridCellNavConstants.direction.PG_UP:evt.keyCode===uiGridConstants.keymap.DOWN||evt.keyCode===uiGridConstants.keymap.ENTER?uiGridCellNavConstants.direction.DOWN:evt.keyCode===uiGridConstants.keymap.PG_DOWN?uiGridCellNavConstants.direction.PG_DOWN:null},cellNavColumnBuilder:function(colDef){var promises=[];return colDef.allowCellFocus=void 0===colDef.allowCellFocus?!0:colDef.allowCellFocus,$q.all(promises)},scrollTo:function(grid,rowEntity,colDef){var gridRow=null,gridCol=null;null!==rowEntity&&"undefined"!=typeof rowEntity&&(gridRow=grid.getRow(rowEntity)),null!==colDef&&"undefined"!=typeof colDef&&(gridCol=grid.getColumn(colDef.name?colDef.name:colDef.field)),this.scrollToInternal(grid,gridRow,gridCol)},scrollToFocus:function(grid,rowEntity,colDef){var gridRow=null,gridCol=null;null!==rowEntity&&(gridRow=grid.getRow(rowEntity)),null!==colDef&&(gridCol=grid.getColumn(colDef.name?colDef.name:colDef.field)),this.scrollToInternal(grid,gridRow,gridCol);var rowCol={row:gridRow,col:gridCol};grid.cellNav.broadcastCellNav(rowCol)},scrollToInternal:function(grid,gridRow,gridCol){var scrollEvent=new ScrollEvent(grid,null,null,"uiGridCellNavService.scrollToInternal");if(null!==gridRow){var seekRowIndex=grid.renderContainers.body.visibleRowCache.indexOf(gridRow),totalRows=grid.renderContainers.body.visibleRowCache.length,percentage=(seekRowIndex+seekRowIndex/(totalRows-1))/totalRows;scrollEvent.y={percentage:percentage}}null!==gridCol&&(scrollEvent.x={percentage:this.getLeftWidth(grid,gridCol)/this.getLeftWidth(grid,grid.renderContainers.body.visibleColumnCache[grid.renderContainers.body.visibleColumnCache.length-1])}),(scrollEvent.y||scrollEvent.x)&&scrollEvent.fireScrollingEvent()},scrollToIfNecessary:function(grid,gridRow,gridCol){var scrollEvent=new ScrollEvent(grid,"uiGridCellNavService.scrollToIfNecessary"),visRowCache=grid.renderContainers.body.visibleRowCache,visColCache=grid.renderContainers.body.visibleColumnCache,topBound=grid.renderContainers.body.prevScrollTop+grid.headerHeight;topBound=0>topBound?0:topBound;var leftBound=grid.renderContainers.body.prevScrollLeft,bottomBound=grid.renderContainers.body.prevScrollTop+grid.gridHeight-grid.headerHeight,rightBound=grid.renderContainers.body.prevScrollLeft+Math.ceil(grid.gridWidth);if(null!==gridRow){var seekRowIndex=visRowCache.indexOf(gridRow),scrollLength=grid.renderContainers.body.getCanvasHeight()-grid.renderContainers.body.getViewportHeight(),pixelsToSeeRow=(seekRowIndex+1)*grid.options.rowHeight;pixelsToSeeRow=0>pixelsToSeeRow?0:pixelsToSeeRow;var scrollPixels,percentage;topBound>pixelsToSeeRow?(scrollPixels=grid.renderContainers.body.prevScrollTop-(topBound-pixelsToSeeRow),percentage=scrollPixels/scrollLength,scrollEvent.y={percentage:percentage}):pixelsToSeeRow>bottomBound&&(scrollPixels=pixelsToSeeRow-bottomBound+grid.renderContainers.body.prevScrollTop,percentage=scrollPixels/scrollLength,scrollEvent.y={percentage:percentage})}if(null!==gridCol){for(var seekColumnIndex=visColCache.indexOf(gridCol),horizScrollLength=grid.renderContainers.body.getCanvasWidth()-grid.renderContainers.body.getViewportWidth(),columnLeftEdge=0,i=0;seekColumnIndex>i;i++){var col=visColCache[i];columnLeftEdge+=col.drawnWidth}columnLeftEdge=0>columnLeftEdge?0:columnLeftEdge;var columnRightEdge=columnLeftEdge+gridCol.drawnWidth;columnRightEdge=0>columnRightEdge?0:columnRightEdge;var horizScrollPixels,horizPercentage;leftBound>columnLeftEdge?(horizScrollPixels=grid.renderContainers.body.prevScrollLeft-(leftBound-columnLeftEdge),horizPercentage=horizScrollPixels/horizScrollLength,horizPercentage=horizPercentage>1?1:horizPercentage,scrollEvent.x={percentage:horizPercentage}):columnRightEdge>rightBound&&(horizScrollPixels=columnRightEdge-rightBound+grid.renderContainers.body.prevScrollLeft,horizPercentage=horizScrollPixels/horizScrollLength,horizPercentage=horizPercentage>1?1:horizPercentage,scrollEvent.x={percentage:horizPercentage})}(scrollEvent.y||scrollEvent.x)&&scrollEvent.fireScrollingEvent()},getLeftWidth:function(grid,upToCol){var width=0;if(!upToCol)return width;var lastIndex=grid.renderContainers.body.visibleColumnCache.indexOf(upToCol);grid.renderContainers.body.visibleColumnCache.forEach(function(col,index){lastIndex>index&&(width+=col.drawnWidth)});var percentage=0===lastIndex?0:(lastIndex+1)/grid.renderContainers.body.visibleColumnCache.length;return width+=upToCol.drawnWidth*percentage}};return service}]),module.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants",function(gridUtil,uiGridCellNavService,uiGridCellNavConstants,uiGridConstants){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){var _scope=$scope,grid=uiGridCtrl.grid;uiGridCellNavService.initializeGrid(grid),uiGridCtrl.cellNav={},uiGridCtrl.cellNav.focusCell=function(row,col){uiGridCtrl.cellNav.broadcastCellNav({row:row,col:col})},uiGridCtrl.cellNav.broadcastCellNav=grid.cellNav.broadcastCellNav=function(newRowCol,modifierDown){modifierDown=!(void 0===modifierDown||!modifierDown),uiGridCtrl.cellNav.broadcastFocus(newRowCol,modifierDown),_scope.$broadcast(uiGridCellNavConstants.CELL_NAV_EVENT,newRowCol,modifierDown)},uiGridCtrl.cellNav.clearFocus=grid.cellNav.clearFocus=function(){_scope.$broadcast(uiGridCellNavConstants.CELL_NAV_EVENT,{eventType:uiGridCellNavConstants.EVENT_TYPE.CLEAR})},uiGridCtrl.cellNav.broadcastFocus=function(rowCol,modifierDown){modifierDown=!(void 0===modifierDown||!modifierDown);var row=rowCol.row,col=rowCol.col,rowColSelectIndex=uiGridCtrl.grid.api.cellNav.rowColSelectIndex(rowCol);if(null===grid.cellNav.lastRowCol||-1===rowColSelectIndex){var newRowCol=new RowCol(row,col);grid.api.cellNav.raise.navigate(newRowCol,grid.cellNav.lastRowCol),grid.cellNav.lastRowCol=newRowCol,uiGridCtrl.grid.options.modifierKeysToMultiSelectCells&&modifierDown?grid.cellNav.focusedCells.push(rowCol):grid.cellNav.focusedCells=[rowCol]}else grid.options.modifierKeysToMultiSelectCells&&modifierDown&&rowColSelectIndex>=0&&grid.cellNav.focusedCells.splice(rowColSelectIndex,1)},uiGridCtrl.cellNav.handleKeyDown=function(evt){var direction=uiGridCellNavService.getDirection(evt);if(null===direction)return!0;var containerId="body";evt.uiGridTargetRenderContainerId&&(containerId=evt.uiGridTargetRenderContainerId);var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();if(lastRowCol){var rowCol=uiGridCtrl.grid.renderContainers[containerId].cellNav.getNextRowCol(direction,lastRowCol.row,lastRowCol.col);return direction===uiGridCellNavConstants.direction.LEFT&&rowCol.row===lastRowCol.row&&evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey?(uiGridCtrl.cellNav.clearFocus(),!0):direction!==uiGridCellNavConstants.direction.RIGHT||rowCol.row!==lastRowCol.row||evt.keyCode!==uiGridConstants.keymap.TAB||evt.shiftKey?(rowCol.eventType=uiGridCellNavConstants.EVENT_TYPE.KEYDOWN,uiGridCtrl.cellNav.broadcastCellNav(rowCol),uiGridCellNavService.scrollToIfNecessary(grid,rowCol.row,rowCol.col),evt.stopPropagation(),evt.preventDefault(),!1):(uiGridCtrl.cellNav.clearFocus(),!0)}}},post:function(){}}}}}]),module.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants",function($timeout,$document,gridUtil,uiGridConstants,uiGridCellNavService){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];if(uiGridCtrl.grid.api.cellNav){var containerId=renderContainerCtrl.containerId,grid=uiGridCtrl.grid;uiGridCellNavService.decorateRenderContainers(grid),$elm.attr("tabindex",-1),$elm.on("keydown",function(evt){return evt.uiGridTargetRenderContainerId=containerId,uiGridCtrl.cellNav.handleKeyDown(evt)});var needFocus=!1;grid.api.core.on.scrollEvent($scope,function(args){args.grid&&args.grid.id!==uiGridCtrl.grid.id||null!=uiGridCtrl.grid.api.cellNav.getFocusedCell()&&("uiGridCellNavService.scrollToIfNecessary"===args.source?needFocus=!0:needFocus&&$timeout(function(){$timeout(function(){var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();$document.activeElement===$document.body&&$elm[0].focus(),uiGridCtrl.cellNav.broadcastCellNav(lastRowCol),needFocus=!1})}))})}}}}}}]),module.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants",function($timeout,$document,uiGridCellNavService,gridUtil,uiGridCellNavConstants){return{priority:-150,restrict:"A",require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){function setTabEnabled(){$elm.find("div").attr("tabindex",0)}function setFocused(){var div=$elm.find("div");div.addClass("ui-grid-cell-focus")}function clearFocus(){var div=$elm.find("div");div.removeClass("ui-grid-cell-focus")}uiGridCtrl.grid.api.cellNav&&$scope.col.colDef.allowCellFocus&&(setTabEnabled(),$elm.find("div").on("click",function(evt){uiGridCtrl.cellNav.broadcastCellNav(new RowCol($scope.row,$scope.col),evt.ctrlKey||evt.metaKey),evt.stopPropagation()}),$elm.find("div").on("focus",function(evt){console.log("cellNav focus"),uiGridCtrl.cellNav.broadcastCellNav(new RowCol($scope.row,$scope.col),evt.ctrlKey||evt.metaKey)}),$scope.$on(uiGridCellNavConstants.CELL_NAV_EVENT,function(evt,rowCol,modifierDown){return evt.eventType===uiGridCellNavConstants.EVENT_TYPE.CLEAR?void clearFocus():void(rowCol.row===$scope.row&&rowCol.col===$scope.col?(uiGridCtrl.grid.options.modifierKeysToMultiSelectCells&&modifierDown&&-1===uiGridCtrl.grid.api.cellNav.rowColSelectIndex(rowCol)?clearFocus():setFocused(),rowCol.hasOwnProperty("eventType")&&rowCol.eventType===uiGridCellNavConstants.EVENT_TYPE.KEYDOWN&&(console.log("focus from navEvent"),$elm.find("div")[0].focus())):uiGridCtrl.grid.options.modifierKeysToMultiSelectCells&&modifierDown||clearFocus())}),$scope.$on("$destroy",function(){$elm.find("div").off("click")}))}}}])}(),function(){var module=angular.module("ui.grid.edit",["ui.grid"]);module.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),module.service("uiGridEditService",["$q","$templateCache","uiGridConstants","gridUtil",function($q,$templateCache,uiGridConstants,gridUtil){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options),grid.registerColumnBuilder(service.editColumnBuilder);var publicApi={events:{edit:{afterCellEdit:function(){},beginCellEdit:function(){},cancelCellEdit:function(){}}},methods:{edit:{}}};grid.api.registerEventsFromObject(publicApi.events)},defaultGridOptions:function(gridOptions){gridOptions.cellEditableCondition=void 0===gridOptions.cellEditableCondition?!0:gridOptions.cellEditableCondition,gridOptions.enableCellEditOnFocus=void 0===gridOptions.enableCellEditOnFocus?!1:gridOptions.enableCellEditOnFocus},editColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableCellEdit=void 0===colDef.enableCellEdit?void 0===gridOptions.enableCellEdit?"object"!==colDef.type:gridOptions.enableCellEdit:colDef.enableCellEdit,colDef.cellEditableCondition=void 0===colDef.cellEditableCondition?gridOptions.cellEditableCondition:colDef.cellEditableCondition,colDef.enableCellEdit&&(colDef.editableCellTemplate=colDef.editableCellTemplate||gridOptions.editableCellTemplate||"ui-grid/cellEditor",promises.push(gridUtil.getTemplate(colDef.editableCellTemplate).then(function(template){col.editableCellTemplate=template},function(){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+colDef.editableCellTemplate+"'")}))),colDef.enableCellEditOnFocus=void 0===colDef.enableCellEditOnFocus?gridOptions.enableCellEditOnFocus:colDef.enableCellEditOnFocus,$q.all(promises)},isStartEditKey:function(evt){return evt.keyCode===uiGridConstants.keymap.LEFT||evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey||evt.keyCode===uiGridConstants.keymap.RIGHT||evt.keyCode===uiGridConstants.keymap.TAB||evt.keyCode===uiGridConstants.keymap.UP||evt.keyCode===uiGridConstants.keymap.ENTER&&evt.shiftKey||evt.keyCode===uiGridConstants.keymap.DOWN||evt.keyCode===uiGridConstants.keymap.ENTER?!1:!0}};return service}]),module.directive("uiGridEdit",["gridUtil","uiGridEditService",function(gridUtil,uiGridEditService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridEditService.initializeGrid(uiGridCtrl.grid)},post:function(){}}}}}]),module.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService",function($compile,$injector,$timeout,uiGridConstants,uiGridEditConstants,gridUtil,$parse,uiGridEditService){var touchstartTimeout=500;return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function registerBeginEditEvents(){$elm.on("dblclick",beginEdit),$elm.on("keydown",beginEditKeyDown),$scope.col.colDef.enableCellEditOnFocus&&$elm.find("div").on("focus",beginEditFocus),$elm.on("touchstart",touchStart)}function touchStart(event){"undefined"!=typeof event.originalEvent&&void 0!==event.originalEvent&&(event=event.originalEvent),$elm.on("touchend",touchEnd),cancelTouchstartTimeout=$timeout(function(){},touchstartTimeout),cancelTouchstartTimeout.then(function(){setTimeout(beginEdit,0),$elm.off("touchend",touchEnd)})}function touchEnd(){$timeout.cancel(cancelTouchstartTimeout),$elm.off("touchend",touchEnd)}function cancelBeginEditEvents(){$elm.off("dblclick",beginEdit),$elm.off("keydown",beginEditKeyDown),$scope.col.colDef.enableCellEditOnFocus&&$elm.find("div").off("focus",beginEditFocus),$elm.off("touchstart",touchStart)}function beginEditFocus(evt){uiGridCtrl&&uiGridCtrl.cellNav&&uiGridCtrl.cellNav.focusCell($scope.row,$scope.col),evt.stopPropagation(),beginEdit()}function beginEditKeyDown(evt){uiGridEditService.isStartEditKey(evt)&&beginEdit()}function shouldEdit(col,row){return!row.isSaving&&(angular.isFunction(col.colDef.cellEditableCondition)?col.colDef.cellEditableCondition($scope):col.colDef.cellEditableCondition)}function beginEdit(){if(!inEdit&&shouldEdit($scope.col,$scope.row)){$scope.grid.api.cellNav&&$scope.grid.api.cellNav.scrollToIfNecessary($scope.row,$scope.col),cellModel=$parse($scope.row.getQualifiedColField($scope.col)),origCellValue=cellModel($scope),html=$scope.col.editableCellTemplate,html=html.replace(uiGridConstants.MODEL_COL_FIELD,$scope.row.getQualifiedColField($scope.col));var optionFilter=$scope.col.colDef.editDropdownFilter?"|"+$scope.col.colDef.editDropdownFilter:"";html=html.replace(uiGridConstants.CUSTOM_FILTERS,optionFilter);var inputType="text";switch($scope.col.colDef.type){case"boolean":inputType="checkbox";break;case"number":inputType="number";break;case"date":inputType="date"}html=html.replace("INPUT_TYPE",inputType);var editDropdownRowEntityOptionsArrayPath=$scope.col.colDef.editDropdownRowEntityOptionsArrayPath;$scope.editDropdownOptionsArray=editDropdownRowEntityOptionsArrayPath?resolveObjectFromPath($scope.row.entity,editDropdownRowEntityOptionsArrayPath):$scope.col.colDef.editDropdownOptionsArray,$scope.editDropdownIdLabel=$scope.col.colDef.editDropdownIdLabel?$scope.col.colDef.editDropdownIdLabel:"id",$scope.editDropdownValueLabel=$scope.col.colDef.editDropdownValueLabel?$scope.col.colDef.editDropdownValueLabel:"value";$scope.$apply(function(){inEdit=!0,cancelBeginEditEvents();var cellElement=angular.element(html);$elm.append(cellElement),editCellScope=$scope.$new(),$compile(cellElement)(editCellScope);var gridCellContentsEl=angular.element($elm.children()[0]);isFocusedBeforeEdit=gridCellContentsEl.hasClass("ui-grid-cell-focus"),gridCellContentsEl.addClass("ui-grid-cell-contents-hidden")});var deregOnGridScroll=$scope.col.grid.api.core.on.scrollEvent($scope,function(){endEdit(!0),$scope.grid.api.edit.raise.afterCellEdit($scope.row.entity,$scope.col.colDef,cellModel($scope),origCellValue),deregOnGridScroll(),deregOnEndCellEdit(),deregOnCancelCellEdit()}),deregOnEndCellEdit=$scope.$on(uiGridEditConstants.events.END_CELL_EDIT,function(evt,retainFocus){endEdit(retainFocus),$scope.grid.api.edit.raise.afterCellEdit($scope.row.entity,$scope.col.colDef,cellModel($scope),origCellValue),deregOnEndCellEdit(),deregOnGridScroll(),deregOnCancelCellEdit()}),deregOnCancelCellEdit=$scope.$on(uiGridEditConstants.events.CANCEL_CELL_EDIT,function(){cancelEdit(),deregOnCancelCellEdit(),deregOnGridScroll(),deregOnEndCellEdit()});$scope.$broadcast(uiGridEditConstants.events.BEGIN_CELL_EDIT),$scope.grid.api.edit.raise.beginCellEdit($scope.row.entity,$scope.col.colDef)}}function endEdit(retainFocus){if(inEdit){var gridCellContentsEl=angular.element($elm.children()[0]);editCellScope.$destroy(),angular.element($elm.children()[1]).remove(),gridCellContentsEl.removeClass("ui-grid-cell-contents-hidden"),retainFocus&&isFocusedBeforeEdit&&gridCellContentsEl[0].focus(),isFocusedBeforeEdit=!1,inEdit=!1,registerBeginEditEvents(),$scope.grid.api.core.notifyDataChange(uiGridConstants.dataChange.EDIT)}}function cancelEdit(){inEdit&&(cellModel.assign($scope,origCellValue),$scope.$apply(),$scope.grid.api.edit.raise.cancelCellEdit($scope.row.entity,$scope.col.colDef),endEdit(!0))}function resolveObjectFromPath(object,path){path=path.replace(/\[(\w+)\]/g,".$1"),path=path.replace(/^\./,"");for(var a=path.split(".");a.length;){var n=a.shift();if(!(n in object))return;object=object[n]}return object}if($scope.col.colDef.enableCellEdit&&$scope.row.enableCellEdit!==!1){var html,origCellValue,cellModel,cancelTouchstartTimeout,editCellScope,inEdit=!1,isFocusedBeforeEdit=!1;registerBeginEditEvents();try{var uiGridCellNavConstants=$injector.get("uiGridCellNavConstants");$scope.col.colDef.enableCellEditOnFocus&&$scope.$on(uiGridCellNavConstants.CELL_NAV_EVENT,function(evt,rowCol){rowCol.row===$scope.row&&rowCol.col===$scope.col?beginEdit():endEdit()})}catch(e){}}}}}]),module.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants",function(gridUtil,uiGridConstants,uiGridEditConstants){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl,renderContainerCtrl;controllers[0]&&(uiGridCtrl=controllers[0]),controllers[1]&&(renderContainerCtrl=controllers[1]),$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(){$elm[0].focus(),$elm[0].select(),$elm.on("blur",function(evt){$scope.stopEdit(evt)})}),$scope.deepEdit=!1,$scope.stopEdit=function(evt){$scope.inputForm&&!$scope.inputForm.$valid?(evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)):$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT),$scope.deepEdit=!1},$elm.on("click",function(){$scope.deepEdit=!0}),$elm.on("keydown",function(evt){switch(evt.keyCode){case uiGridConstants.keymap.ESC:evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT);break;case uiGridConstants.keymap.ENTER:$scope.stopEdit(evt);break;case uiGridConstants.keymap.TAB:$scope.stopEdit(evt)}if($scope.deepEdit)switch(evt.keyCode){case uiGridConstants.keymap.LEFT:evt.stopPropagation();break;case uiGridConstants.keymap.RIGHT:evt.stopPropagation();break;case uiGridConstants.keymap.UP:evt.stopPropagation();break;case uiGridConstants.keymap.DOWN:evt.stopPropagation()}else uiGridCtrl&&uiGridCtrl.hasOwnProperty("cellNav")&&renderContainerCtrl&&(evt.uiGridTargetRenderContainerId=renderContainerCtrl.containerId,uiGridCtrl.cellNav.handleKeyDown(evt));return!0})}}}}}]),module.directive("uiGridEditor",["$filter",function($filter){function parseDateString(dateString){if("undefined"==typeof dateString||""===dateString)return null;var parts=dateString.split("-");if(3!==parts.length)return null;var year=parseInt(parts[0],10),month=parseInt(parts[1],10),day=parseInt(parts[2],10);return 1>month||1>year||1>day?null:new Date(year,month-1,day)}return{priority:-100,require:"?ngModel",link:function(scope,element,attrs,ngModel){2===angular.version.minor&&attrs.type&&"date"===attrs.type&&ngModel&&(ngModel.$formatters.push(function(modelValue){return ngModel.$setValidity(null,!modelValue||!isNaN(modelValue.getTime())),$filter("date")(modelValue,"yyyy-MM-dd")}),ngModel.$parsers.push(function(viewValue){if(viewValue&&viewValue.length>0){var dateValue=parseDateString(viewValue);return ngModel.$setValidity(null,dateValue&&!isNaN(dateValue.getTime())),dateValue}return ngModel.$setValidity(null,!0),null}))}}}]),module.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(uiGridConstants,uiGridEditConstants){return{scope:!0,compile:function(){return{pre:function(){},post:function($scope,$elm){$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(){$elm[0].focus(),$elm[0].style.width=$elm[0].parentElement.offsetWidth-1+"px",$elm.on("blur",function(evt){$scope.stopEdit(evt)})}),$scope.stopEdit=function(){$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)},$elm.on("keydown",function(evt){switch(evt.keyCode){case uiGridConstants.keymap.ESC:evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT);break;case uiGridConstants.keymap.ENTER:$scope.stopEdit(evt);break;case uiGridConstants.keymap.LEFT:$scope.stopEdit(evt);break;case uiGridConstants.keymap.RIGHT:$scope.stopEdit(evt);break;case uiGridConstants.keymap.UP:evt.stopPropagation();break;case uiGridConstants.keymap.DOWN:evt.stopPropagation();break;case uiGridConstants.keymap.TAB:$scope.stopEdit(evt)}return!0})}}}}}])}(),function(){var module=angular.module("ui.grid.expandable",["ui.grid"]);module.service("uiGridExpandableService",["gridUtil","$compile",function(gridUtil){var service={initializeGrid:function(grid){grid.expandable={},grid.expandable.expandedAll=!1,grid.options.enableExpandable=grid.options.enableExpandable!==!1,grid.options.expandableRowHeight=grid.options.expandableRowHeight||150,grid.options.expandableRowHeaderWidth=grid.options.expandableRowHeaderWidth||40,grid.options.enableExpandable&&!grid.options.expandableRowTemplate&&(gridUtil.logError("You have not set the expandableRowTemplate, disabling expandable module"),grid.options.enableExpandable=!1);var publicApi={events:{expandable:{rowExpandedStateChanged:function(){}}},methods:{expandable:{toggleRowExpansion:function(rowEntity){var row=grid.getRow(rowEntity);null!==row&&service.toggleRowExpansion(grid,row)},expandAllRows:function(){service.expandAllRows(grid)},collapseAllRows:function(){service.collapseAllRows(grid)},toggleAllRows:function(){service.toggleAllRows(grid)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},toggleRowExpansion:function(grid,row){row.isExpanded=!row.isExpanded,row.isExpanded?row.height=row.grid.options.rowHeight+grid.options.expandableRowHeight:(row.height=row.grid.options.rowHeight,grid.expandable.expandedAll=!1),grid.api.expandable.raise.rowExpandedStateChanged(row)},expandAllRows:function(grid){angular.forEach(grid.renderContainers.body.visibleRowCache,function(row){row.isExpanded||service.toggleRowExpansion(grid,row)}),grid.expandable.expandedAll=!0,grid.refresh()},collapseAllRows:function(grid){angular.forEach(grid.renderContainers.body.visibleRowCache,function(row){row.isExpanded&&service.toggleRowExpansion(grid,row)}),grid.expandable.expandedAll=!1,grid.refresh()},toggleAllRows:function(grid){grid.expandable.expandedAll?service.collapseAllRows(grid):service.expandAllRows(grid)}};return service}]),module.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(uiGridExpandableService,$templateCache){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){if(uiGridCtrl.grid.options.enableExpandableRowHeader!==!1){var expandableRowHeaderColDef={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:uiGridCtrl.grid.options.expandableRowHeaderWidth||40};expandableRowHeaderColDef.cellTemplate=$templateCache.get("ui-grid/expandableRowHeader"),expandableRowHeaderColDef.headerCellTemplate=$templateCache.get("ui-grid/expandableTopRowHeader"),uiGridCtrl.grid.addRowHeaderColumn(expandableRowHeaderColDef)}uiGridExpandableService.initializeGrid(uiGridCtrl.grid)},post:function(){}}}}}]),module.directive("uiGrid",["uiGridExpandableService","$templateCache",function(){return{replace:!0,priority:1e3,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.api.core.on.renderingComplete($scope,function(){$scope.row&&$scope.row.grid&&$scope.row.grid.options&&$scope.row.grid.options.enableExpandable&&(uiGridCtrl.grid.parentRow=$scope.row)
})},post:function(){}}}}}]),module.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(uiGridExpandableService,$timeout,$compile,uiGridConstants,gridUtil){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function($scope,$elm){gridUtil.getTemplate($scope.grid.options.expandableRowTemplate).then(function(template){if($scope.grid.options.expandableRowScope){var expandableRowScope=$scope.grid.options.expandableRowScope;for(var property in expandableRowScope)expandableRowScope.hasOwnProperty(property)&&($scope[property]=expandableRowScope[property])}var expandedRowElement=$compile(template)($scope);$elm.append(expandedRowElement),$scope.row.expandedRendered=!0})},post:function($scope){$scope.$on("$destroy",function(){$scope.row.expandedRendered=!1})}}}}}]),module.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(){return{priority:-200,scope:!1,compile:function(){return{pre:function($scope){function updateRowContainerWidth(){var grid=$scope.grid,colWidth=0;return angular.forEach(grid.columns,function(column){"left"===column.renderContainer&&(colWidth+=column.width)}),colWidth=Math.floor(colWidth),".grid"+grid.id+" .ui-grid-pinned-container-"+$scope.colContainer.name+", .grid"+grid.id+" .ui-grid-pinned-container-"+$scope.colContainer.name+" .ui-grid-render-container-"+$scope.colContainer.name+" .ui-grid-viewport .ui-grid-canvas .ui-grid-row { width: "+colWidth+"px; }"}$scope.expandableRow={},$scope.expandableRow.shouldRenderExpand=function(){var ret="body"===$scope.colContainer.name&&$scope.grid.options.enableExpandable!==!1&&$scope.row.isExpanded&&(!$scope.grid.isScrollingVertically||$scope.row.expandedRendered);return ret},$scope.expandableRow.shouldRenderFiller=function(){var ret=$scope.row.isExpanded&&("body"!==$scope.colContainer.name||$scope.grid.isScrollingVertically&&!$scope.row.expandedRendered);return ret},"left"===$scope.colContainer.name&&$scope.grid.registerStyleComputation({priority:15,func:updateRowContainerWidth})},post:function(){}}}}}]),module.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function($compile,gridUtil,$templateCache){return{priority:-200,scope:!1,compile:function($elm){var rowRepeatDiv=angular.element($elm.children().children()[0]),expandedRowFillerElement=$templateCache.get("ui-grid/expandableScrollFiller"),expandedRowElement=$templateCache.get("ui-grid/expandableRow");return rowRepeatDiv.append(expandedRowElement),rowRepeatDiv.append(expandedRowFillerElement),{pre:function(){},post:function(){}}}}}])}(),function(){var module=angular.module("ui.grid.exporter",["ui.grid"]);module.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),module.service("uiGridExporterService",["$q","uiGridExporterConstants","uiGridSelectionConstants","gridUtil","$compile","$interval","i18nService",function($q,uiGridExporterConstants,uiGridSelectionConstants,gridUtil,$compile,$interval,i18nService){var service={initializeGrid:function(grid){grid.exporter={},this.defaultGridOptions(grid.options);var publicApi={events:{exporter:{}},methods:{exporter:{csvExport:function(rowTypes,colTypes){service.csvExport(grid,rowTypes,colTypes)},pdfExport:function(rowTypes,colTypes){service.pdfExport(grid,rowTypes,colTypes)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.addToGridMenu?service.addToMenu(grid):$interval(function(){grid.api.core.addToGridMenu&&service.addToMenu(grid)},100,1)},defaultGridOptions:function(gridOptions){gridOptions.exporterSuppressMenu=gridOptions.exporterSuppressMenu===!0,gridOptions.exporterMenuLabel=gridOptions.exporterMenuLabel?gridOptions.exporterMenuLabel:"Export",gridOptions.exporterSuppressColumns=gridOptions.exporterSuppressColumns?gridOptions.exporterSuppressColumns:[],gridOptions.exporterCsvColumnSeparator=gridOptions.exporterCsvColumnSeparator?gridOptions.exporterCsvColumnSeparator:",",gridOptions.exporterCsvFilename=gridOptions.exporterCsvFilename?gridOptions.exporterCsvFilename:"download.csv",gridOptions.exporterPdfDefaultStyle=gridOptions.exporterPdfDefaultStyle?gridOptions.exporterPdfDefaultStyle:{fontSize:11},gridOptions.exporterPdfTableStyle=gridOptions.exporterPdfTableStyle?gridOptions.exporterPdfTableStyle:{margin:[0,5,0,15]},gridOptions.exporterPdfTableHeaderStyle=gridOptions.exporterPdfTableHeaderStyle?gridOptions.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},gridOptions.exporterPdfHeader=gridOptions.exporterPdfHeader?gridOptions.exporterPdfHeader:null,gridOptions.exporterPdfFooter=gridOptions.exporterPdfFooter?gridOptions.exporterPdfFooter:null,gridOptions.exporterPdfOrientation=gridOptions.exporterPdfOrientation?gridOptions.exporterPdfOrientation:"landscape",gridOptions.exporterPdfPageSize=gridOptions.exporterPdfPageSize?gridOptions.exporterPdfPageSize:"A4",gridOptions.exporterPdfMaxGridWidth=gridOptions.exporterPdfMaxGridWidth?gridOptions.exporterPdfMaxGridWidth:720,gridOptions.exporterMenuCsv=void 0!==gridOptions.exporterMenuCsv?gridOptions.exporterMenuCsv:!0,gridOptions.exporterMenuPdf=void 0!==gridOptions.exporterMenuPdf?gridOptions.exporterMenuPdf:!0,gridOptions.exporterPdfCustomFormatter=gridOptions.exporterPdfCustomFormatter&&"function"==typeof gridOptions.exporterPdfCustomFormatter?gridOptions.exporterPdfCustomFormatter:function(docDef){return docDef},gridOptions.exporterHeaderFilterUseName=gridOptions.exporterHeaderFilterUseName===!0,gridOptions.exporterFieldCallback=gridOptions.exporterFieldCallback?gridOptions.exporterFieldCallback:function(grid,row,col,value){return value}},addToMenu:function(grid){grid.api.core.addToGridMenu(grid,[{title:i18nService.getSafeText("gridMenu.exporterAllAsCsv"),action:function(){this.grid.api.exporter.csvExport(uiGridExporterConstants.ALL,uiGridExporterConstants.ALL)},shown:function(){return this.grid.options.exporterMenuCsv}},{title:i18nService.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(){this.grid.api.exporter.csvExport(uiGridExporterConstants.VISIBLE,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv}},{title:i18nService.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(){this.grid.api.exporter.csvExport(uiGridExporterConstants.SELECTED,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0}},{title:i18nService.getSafeText("gridMenu.exporterAllAsPdf"),action:function(){this.grid.api.exporter.pdfExport(uiGridExporterConstants.ALL,uiGridExporterConstants.ALL)},shown:function(){return this.grid.options.exporterMenuPdf}},{title:i18nService.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(){this.grid.api.exporter.pdfExport(uiGridExporterConstants.VISIBLE,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf}},{title:i18nService.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(){this.grid.api.exporter.pdfExport(uiGridExporterConstants.SELECTED,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0}}])},csvExport:function(grid,rowTypes,colTypes){var exportColumnHeaders=this.getColumnHeaders(grid,colTypes),exportData=this.getData(grid,rowTypes,colTypes),csvContent=this.formatAsCsv(exportColumnHeaders,exportData,grid.options.exporterCsvColumnSeparator);this.downloadFile(grid.options.exporterCsvFilename,csvContent)},getColumnHeaders:function(grid,colTypes){var headers=[];return angular.forEach(grid.columns,function(gridCol){!gridCol.visible&&colTypes!==uiGridExporterConstants.ALL||gridCol.colDef.exporterSuppressExport===!0||-1!==grid.options.exporterSuppressColumns.indexOf(gridCol.name)||headers.push({name:gridCol.field,displayName:grid.options.exporterHeaderFilter?grid.options.exporterHeaderFilter(grid.options.exporterHeaderFilterUseName?gridCol.name:gridCol.displayName):gridCol.displayName,width:gridCol.drawnWidth?gridCol.drawnWidth:gridCol.width,align:"number"===gridCol.colDef.type?"right":"left"})}),headers},getData:function(grid,rowTypes,colTypes){var rows,data=[];switch(rowTypes){case uiGridExporterConstants.ALL:rows=grid.rows;break;case uiGridExporterConstants.VISIBLE:rows=grid.getVisibleRows();break;case uiGridExporterConstants.SELECTED:grid.api.selection?rows=grid.api.selection.getSelectedGridRows():gridUtil.logError("selection feature must be enabled to allow selected rows to be exported")}return angular.forEach(rows,function(row){if(row.exporterEnableExporting!==!1){var extractedRow=[];angular.forEach(grid.columns,function(gridCol){if((gridCol.visible||colTypes===uiGridExporterConstants.ALL)&&gridCol.colDef.exporterSuppressExport!==!0&&-1===grid.options.exporterSuppressColumns.indexOf(gridCol.name)){var extractedField={value:grid.options.exporterFieldCallback(grid,row,gridCol,grid.getCellValue(row,gridCol))};gridCol.colDef.exporterPdfAlign&&(extractedField.alignment=gridCol.colDef.exporterPdfAlign),extractedRow.push(extractedField)}}),data.push(extractedRow)}}),data},formatAsCsv:function(exportColumnHeaders,exportData,separator){var self=this,bareHeaders=exportColumnHeaders.map(function(header){return{value:header.displayName}}),csv=self.formatRowAsCsv(this,separator)(bareHeaders)+"\n";return csv+=exportData.map(this.formatRowAsCsv(this,separator)).join("\n")},formatRowAsCsv:function(exporter,separator){return function(row){return row.map(exporter.formatFieldAsCsv).join(separator)}},formatFieldAsCsv:function(field){return null==field.value?"":"number"==typeof field.value?field.value:"boolean"==typeof field.value?field.value?"TRUE":"FALSE":"string"==typeof field.value?'"'+field.value.replace(/"/g,'""')+'"':JSON.stringify(field.value)},downloadFile:function(fileName,csvContent){var rawFile,D=document,a=D.createElement("a"),strMimeType="application/octet-stream;charset=utf-8";if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob(["\ufeff",csvContent],{type:strMimeType}),fileName);if("download"in a){var blob=new Blob([csvContent],{type:strMimeType});rawFile=URL.createObjectURL(blob),a.setAttribute("download",fileName)}else rawFile="data:"+strMimeType+","+encodeURIComponent(csvContent),a.setAttribute("target","_blank");a.href=rawFile,a.setAttribute("style","display:none;"),D.body.appendChild(a),setTimeout(function(){if(a.click)a.click();else if(document.createEvent){var eventObj=document.createEvent("MouseEvents");eventObj.initEvent("click",!0,!0),a.dispatchEvent(eventObj)}D.body.removeChild(a)},100)},pdfExport:function(grid,rowTypes,colTypes){var exportColumnHeaders=this.getColumnHeaders(grid,colTypes),exportData=this.getData(grid,rowTypes,colTypes),docDefinition=this.prepareAsPdf(grid,exportColumnHeaders,exportData);pdfMake.createPdf(docDefinition).open()},prepareAsPdf:function(grid,exportColumnHeaders,exportData){var headerWidths=this.calculatePdfHeaderWidths(grid,exportColumnHeaders),headerColumns=exportColumnHeaders.map(function(header){return{text:header.displayName,style:"tableHeader"}}),stringData=exportData.map(this.formatRowAsPdf(this)),allData=[headerColumns].concat(stringData),docDefinition={pageOrientation:grid.options.exporterPdfOrientation,pageSize:grid.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:headerWidths,body:allData}}],styles:{tableStyle:grid.options.exporterPdfTableStyle,tableHeader:grid.options.exporterPdfTableHeaderStyle},defaultStyle:grid.options.exporterPdfDefaultStyle};return grid.options.exporterPdfLayout&&(docDefinition.layout=grid.options.exporterPdfLayout),grid.options.exporterPdfHeader&&(docDefinition.header=grid.options.exporterPdfHeader),grid.options.exporterPdfFooter&&(docDefinition.footer=grid.options.exporterPdfFooter),grid.options.exporterPdfCustomFormatter&&(docDefinition=grid.options.exporterPdfCustomFormatter(docDefinition)),docDefinition},calculatePdfHeaderWidths:function(grid,exportHeaders){var baseGridWidth=0;angular.forEach(exportHeaders,function(value){"number"==typeof value.width&&(baseGridWidth+=value.width)});var extraColumns=0;angular.forEach(exportHeaders,function(value){if("*"===value.width&&(extraColumns+=100),"string"==typeof value.width&&value.width.match(/(\d)*%/)){var percent=parseInt(value.width.match(/(\d)*%/)[0]);value.width=baseGridWidth*percent/100,extraColumns+=value.width}});var gridWidth=baseGridWidth+extraColumns;return exportHeaders.map(function(header){return"*"===header.width?header.width:header.width*grid.options.exporterPdfMaxGridWidth/gridWidth})},formatRowAsPdf:function(exporter){return function(row){return row.map(exporter.formatFieldAsPdfString)}},formatFieldAsPdfString:function(field){var returnVal;return returnVal=null==field.value?"":"number"==typeof field.value?field.value.toString():"boolean"==typeof field.value?field.value?"TRUE":"FALSE":"string"==typeof field.value?field.value.replace(/"/g,'""'):JSON.stringify(field.value).replace(/^"/,"").replace(/"$/,""),field.alignment&&"string"==typeof field.alignment&&(returnVal={text:returnVal,alignment:field.alignment}),returnVal}};return service}]),module.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(uiGridExporterConstants,uiGridExporterService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridExporterService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.exporter.$scope=$scope}}}])}(),function(){var module=angular.module("ui.grid.importer",["ui.grid"]);module.constant("uiGridImporterConstants",{featureName:"importer"}),module.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function($q,uiGridConstants,uiGridImporterConstants,gridUtil,$compile,$interval,i18nService,$window){var service={initializeGrid:function($scope,grid){grid.importer={$scope:$scope},this.defaultGridOptions(grid.options);var publicApi={events:{importer:{}},methods:{importer:{importFile:function(fileObject){service.importThisFile(grid,fileObject)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.options.enableImporter&&grid.options.importerShowMenu&&(grid.api.core.addToGridMenu?service.addToMenu(grid):$interval(function(){grid.api.core.addToGridMenu&&service.addToMenu(grid)},100,1))},defaultGridOptions:function(gridOptions){gridOptions.enableImporter||void 0===gridOptions.enableImporter?$window.hasOwnProperty("File")&&$window.hasOwnProperty("FileReader")&&$window.hasOwnProperty("FileList")&&$window.hasOwnProperty("Blob")?gridOptions.enableImporter=!0:(gridUtil.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),gridOptions.enableImporter=!1):gridOptions.enableImporter=!1,gridOptions.importerProcessHeaders=gridOptions.importerProcessHeaders||service.processHeaders,gridOptions.importerHeaderFilter=gridOptions.importerHeaderFilter||function(displayName){return displayName},gridOptions.importerErrorCallback&&"function"==typeof gridOptions.importerErrorCallback||delete gridOptions.importerErrorCallback,gridOptions.enableImporter!==!0||gridOptions.importerDataAddCallback||(gridUtil.logError("You have not set an importerDataAddCallback, importer is disabled"),gridOptions.enableImporter=!1),gridOptions.importerShowMenu=gridOptions.importerShowMenu!==!1,gridOptions.importerObjectCallback=gridOptions.importerObjectCallback||function(grid,newObject){return newObject}},addToMenu:function(grid){grid.api.core.addToGridMenu(grid,[{title:i18nService.getSafeText("gridMenu.importerTitle")},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(){this.grid.api.importer.importAFile(grid)}}])},importThisFile:function(grid,fileObject){if(!fileObject)return void gridUtil.logError("No file object provided to importThisFile, should be impossible, aborting");var reader=new FileReader;switch(fileObject.type){case"application/json":reader.onload=service.importJsonClosure(grid);break;default:reader.onload=service.importCsvClosure(grid)}reader.readAsText(fileObject)},importJsonClosure:function(grid){return function(importFile){var newObject,newObjects=[];angular.forEach(service.parseJson(grid,importFile),function(value){newObject=service.newObject(grid),angular.extend(newObject,value),newObject=grid.options.importerObjectCallback(grid,newObject),newObjects.push(newObject)}),service.addObjects(grid,newObjects)}},parseJson:function(grid,importFile){var loadedObjects;try{loadedObjects=JSON.parse(importFile.target.result)}catch(e){return void service.alertError(grid,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",importFile.target.result)}return Array.isArray(loadedObjects)?loadedObjects:(service.alertError(grid,"importer.jsonNotarray","Import failed, file is not an array, file was: ",importFile.target.result),[])},importCsvClosure:function(grid){return function(importFile){var importArray=service.parseCsv(importFile);if(!importArray||importArray.length<1)return void service.alertError(grid,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",importFile.target.result);var newObjects=service.createCsvObjects(grid,importArray);return newObjects&&0!==newObjects.length?void service.addObjects(grid,newObjects):void service.alertError(grid,"importer.noObjects","Objects were not able to be derived, content was: ",importFile.target.result)}},parseCsv:function(importFile){var csv=importFile.target.result;return CSV.parse(csv)},createCsvObjects:function(grid,importArray){var headerMapping=grid.options.importerProcessHeaders(grid,importArray.shift());if(!headerMapping||0===headerMapping.length)return service.alertError(grid,"importer.noHeaders","Column names could not be derived, content was: ",importArray),[];var newObject,newObjects=[];return angular.forEach(importArray,function(row){newObject=service.newObject(grid),angular.forEach(row,function(field,index){null!==headerMapping[index]&&(newObject[headerMapping[index]]=field)}),newObject=grid.options.importerObjectCallback(grid,newObject),newObjects.push(newObject)}),newObjects},processHeaders:function(grid,headerRow){var headers=[];if(grid.options.columnDefs&&0!==grid.options.columnDefs.length){var lookupHash=service.flattenColumnDefs(grid,grid.options.columnDefs);return angular.forEach(headerRow,function(value){headers.push(lookupHash[value]?lookupHash[value]:lookupHash[value.toLowerCase()]?lookupHash[value.toLowerCase()]:null)}),headers}return angular.forEach(headerRow,function(value){headers.push(value.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),headers},flattenColumnDefs:function(grid,columnDefs){var flattenedHash={};return angular.forEach(columnDefs,function(columnDef){columnDef.name&&(flattenedHash[columnDef.name]=columnDef.field||columnDef.name,flattenedHash[columnDef.name.toLowerCase()]=columnDef.field||columnDef.name),columnDef.field&&(flattenedHash[columnDef.field]=columnDef.field||columnDef.name,flattenedHash[columnDef.field.toLowerCase()]=columnDef.field||columnDef.name),columnDef.displayName&&(flattenedHash[columnDef.displayName]=columnDef.field||columnDef.name,flattenedHash[columnDef.displayName.toLowerCase()]=columnDef.field||columnDef.name),columnDef.displayName&&grid.options.importerHeaderFilter&&(flattenedHash[grid.options.importerHeaderFilter(columnDef.displayName)]=columnDef.field||columnDef.name,flattenedHash[grid.options.importerHeaderFilter(columnDef.displayName).toLowerCase()]=columnDef.field||columnDef.name)}),flattenedHash},addObjects:function(grid,newObjects){if(grid.api.rowEdit){var dataChangeDereg=grid.registerDataChangeCallback(function(){grid.api.rowEdit.setRowsDirty(newObjects),dataChangeDereg()},[uiGridConstants.dataChange.ROW]);grid.importer.$scope.$on("$destroy",dataChangeDereg)}grid.importer.$scope.$apply(grid.options.importerDataAddCallback(grid,newObjects))},newObject:function(grid){return"undefined"!=typeof grid.options&&"undefined"!=typeof grid.options.importerNewObject?new grid.options.importerNewObject:{}},alertError:function(grid,alertI18nToken,consoleMessage,context){grid.options.importerErrorCallback?grid.options.importerErrorCallback(grid,alertI18nToken,consoleMessage,context):($window.alert(i18nService.getSafeText(alertI18nToken)),gridUtil.logError(consoleMessage+context))}};return service}]),module.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(uiGridImporterConstants,uiGridImporterService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridImporterService.initializeGrid($scope,uiGridCtrl.grid)}}}]),module.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(uiGridImporterConstants,uiGridImporterService,gridUtil){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function($scope,$elm,$attrs,uiGridCtrl){var handleFileSelect=function(event){var target=event.srcElement||event.target;if(target&&target.files&&1===target.files.length){var fileObject=target.files[0];uiGridImporterService.importThisFile(grid,fileObject),target.form.reset()}},fileChooser=$elm[0].querySelectorAll(".ui-grid-importer-file-chooser"),grid=uiGridCtrl.grid;1!==fileChooser.length?gridUtil.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):fileChooser[0].addEventListener("change",handleFileSelect,!1)}}}])}(),function(){var module=angular.module("ui.grid.infiniteScroll",["ui.grid"]);module.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants",function(gridUtil,$compile,$timeout,uiGridConstants){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options);var publicApi={events:{infiniteScroll:{needLoadMoreData:function(){},needLoadMoreDataTop:function(){}}},methods:{infiniteScroll:{dataLoaded:function(){grid.options.loadTimout=!1}}}};grid.options.loadTimout=!1,grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableInfiniteScroll=gridOptions.enableInfiniteScroll!==!1},loadData:function(grid){return grid.options.loadTimout=!0,grid.scrollDirection===uiGridConstants.scrollDirection.UP?void grid.api.infiniteScroll.raise.needLoadMoreDataTop():void grid.api.infiniteScroll.raise.needLoadMoreData()},checkScroll:function(grid,scrollTop){var infiniteScrollPercentage=grid.options.infiniteScrollPercentage?grid.options.infiniteScrollPercentage:20;return!grid.options.loadTimout&&infiniteScrollPercentage>=scrollTop?(this.loadData(grid),!0):!1}};return service}]),module.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(uiGridInfiniteScrollService){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(){return{pre:function($scope,$elm,$attr,uiGridCtrl){uiGridInfiniteScrollService.initializeGrid(uiGridCtrl.grid)},post:function(){}}}}}]),module.directive("uiGridViewport",["$compile","gridUtil","uiGridInfiniteScrollService","uiGridConstants",function($compile,gridUtil,uiGridInfiniteScrollService,uiGridConstants){return{priority:-200,scope:!1,link:function($scope){$scope.grid.options.enableInfiniteScroll&&$scope.grid.api.core.on.scrollEvent($scope,function(args){if(args.y&&"ui.grid.adjustInfiniteScrollPosition"!==args.source){var percentage=100-100*args.y.percentage;$scope.grid.scrollDirection===uiGridConstants.scrollDirection.UP&&(percentage=100*args.y.percentage),uiGridInfiniteScrollService.checkScroll($scope.grid,percentage)}})}}}])}(),function(){var module=angular.module("ui.grid.moveColumns",["ui.grid"]);module.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants",function($q,$timeout,$log,ScrollEvent,uiGridConstants){var service={initializeGrid:function(grid){var self=this;this.registerPublicApi(grid),this.defaultGridOptions(grid.options),grid.registerColumnBuilder(self.movableColumnBuilder)},registerPublicApi:function(grid){var self=this,publicApi={events:{colMovable:{columnPositionChanged:function(){}}},methods:{colMovable:{moveColumn:function(originalPosition,finalPosition){var columns=grid.columns;if(!angular.isNumber(originalPosition)||!angular.isNumber(finalPosition))return void console.log("Please provide valid values for originalPosition and finalPosition");for(var nonMovableColumns=0,i=0;i<columns.length;i++)(angular.isDefined(columns[i].colDef.visible)&&columns[i].colDef.visible===!1||columns[i].isRowHeader===!0)&&nonMovableColumns++;if(originalPosition>=columns.length-nonMovableColumns||finalPosition>=columns.length-nonMovableColumns)return void console.log("Invalid values for originalPosition, finalPosition");var findPositionForRenderIndex=function(index){for(var position=index,i=0;position>=i;i++)angular.isDefined(columns[i])&&(angular.isDefined(columns[i].colDef.visible)&&columns[i].colDef.visible===!1||columns[i].isRowHeader===!0)&&position++;return position};self.redrawColumnAtPosition(grid,findPositionForRenderIndex(originalPosition),findPositionForRenderIndex(finalPosition))}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableColumnMoving=gridOptions.enableColumnMoving!==!1},movableColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableColumnMoving=void 0===colDef.enableColumnMoving?gridOptions.enableColumnMoving:colDef.enableColumnMoving,$q.all(promises)},redrawColumnAtPosition:function(grid,originalPosition,newPosition){var columns=grid.columns,originalColumn=columns[originalPosition];if(originalColumn.colDef.enableColumnMoving){if(originalPosition>newPosition)for(var i1=originalPosition;i1>newPosition;i1--)columns[i1]=columns[i1-1];else if(newPosition>originalPosition)for(var i2=originalPosition;newPosition>i2;i2++)columns[i2]=columns[i2+1];columns[newPosition]=originalColumn,$timeout(function(){grid.refresh(),grid.api.colMovable.raise.columnPositionChanged(originalColumn.colDef,originalPosition,newPosition),grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)})}}};return service}]),module.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(uiGridMoveColumnService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridMoveColumnService.initializeGrid(uiGridCtrl.grid)},post:function(){}}}}}]),module.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function($q,gridUtil,uiGridMoveColumnService,$document,$log,uiGridConstants,ScrollEvent){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){$scope.col.colDef.enableColumnMoving&&$scope.$on(uiGridConstants.events.COLUMN_HEADER_CLICK,function(event,args){if(args.columnName===$scope.col.colDef.name&&!$scope.col.renderContainer){var evt=args.event;if("ui-grid-icon-angle-down"!==evt.target.className&&"I"!==evt.target.tagName&&evt.target.className.indexOf("ui-grid-filter-input")<0){var movingElm,reducedWidth,gridLeft=$scope.grid.element[0].getBoundingClientRect().left,previousMouseX=evt.pageX,totalMouseMovement=0,rightMoveLimit=gridLeft+$scope.grid.getViewportWidth(),elmCloned=!1,cloneElement=function(){elmCloned=!0,movingElm=$elm.clone(),$elm.parent().append(movingElm),movingElm.addClass("movingColumn");var movingElementStyles={},elmLeft=$elm[0].getBoundingClientRect().left;movingElementStyles.left=elmLeft-gridLeft+"px";var gridRight=$scope.grid.element[0].getBoundingClientRect().right,elmRight=$elm[0].getBoundingClientRect().right;elmRight>gridRight&&(reducedWidth=$scope.col.drawnWidth+(gridRight-elmRight),movingElementStyles.width=reducedWidth+"px"),movingElm.css(movingElementStyles)},moveElement=function(changeValue){uiGridCtrl.fireEvent("hide-menu");for(var columns=$scope.grid.columns,totalColumnWidth=0,i=0;i<columns.length;i++)(angular.isUndefined(columns[i].colDef.visible)||columns[i].colDef.visible===!0)&&(totalColumnWidth+=columns[i].drawnWidth||columns[i].width||columns[i].colDef.width);var newElementLeft,currentElmLeft=movingElm[0].getBoundingClientRect().left-1,currentElmRight=movingElm[0].getBoundingClientRect().right;if(newElementLeft="ie"===gridUtil.detectBrowser()?currentElmLeft+changeValue:currentElmLeft-gridLeft+changeValue,newElementLeft=rightMoveLimit>newElementLeft?newElementLeft:rightMoveLimit,(currentElmLeft>=gridLeft||changeValue>0)&&(rightMoveLimit>=currentElmRight||0>changeValue))movingElm.css({visibility:"visible",left:newElementLeft+"px"});else if(totalColumnWidth>Math.ceil(uiGridCtrl.grid.gridWidth)){changeValue*=8;var scrollEvent=new ScrollEvent($scope.col.grid,null,null,"uiGridHeaderCell.moveElement");scrollEvent.x={pixels:changeValue},scrollEvent.fireScrollingEvent()}for(var totalColumnsLeftWidth=0,il=0;il<columns.length;il++)if(angular.isUndefined(columns[il].colDef.visible)||columns[il].colDef.visible===!0){if(columns[il].colDef.name===$scope.col.colDef.name)break;totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width}void 0===$scope.newScrollLeft?totalMouseMovement+=changeValue:totalMouseMovement=$scope.newScrollLeft+newElementLeft-totalColumnsLeftWidth,reducedWidth<$scope.col.drawnWidth&&(reducedWidth+=Math.abs(changeValue),movingElm.css({width:reducedWidth+"px"}))},mouseMoveHandler=function(evt){document.onselectstart=function(){return!1};var changeValue=evt.pageX-previousMouseX;!elmCloned&&Math.abs(changeValue)>50?cloneElement():elmCloned&&(moveElement(changeValue),previousMouseX=evt.pageX)};$document.on("mousemove",mouseMoveHandler);var mouseUpHandler=function(){document.onselectstart=null,movingElm&&movingElm.remove();for(var columns=$scope.grid.columns,columnIndex=0,i=0;i<columns.length&&columns[i].colDef.name!==$scope.col.colDef.name;i++)columnIndex++;if(0>totalMouseMovement){for(var totalColumnsLeftWidth=0,il=columnIndex-1;il>=0;il--)if((angular.isUndefined(columns[il].colDef.visible)||columns[il].colDef.visible===!0)&&(totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width,totalColumnsLeftWidth>Math.abs(totalMouseMovement))){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,il+1);break}totalColumnsLeftWidth<Math.abs(totalMouseMovement)&&uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,0)}else if(totalMouseMovement>0){for(var totalColumnsRightWidth=0,ir=columnIndex+1;ir<columns.length;ir++)if((angular.isUndefined(columns[ir].colDef.visible)||columns[ir].colDef.visible===!0)&&(totalColumnsRightWidth+=columns[ir].drawnWidth||columns[ir].width||columns[ir].colDef.width,totalColumnsRightWidth>totalMouseMovement)){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,ir-1);break}totalMouseMovement>totalColumnsRightWidth&&uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,columns.length-1)}$document.off("mousemove",mouseMoveHandler),$document.off("mouseup",mouseUpHandler)};$document.on("mouseup",mouseUpHandler)}}})}}}}}])}(),function(){var module=angular.module("ui.grid.pagination",["ng","ui.grid"]);module.service("uiGridPaginationService",["gridUtil",function(gridUtil){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options);var publicApi={events:{pagination:{paginationChanged:function(){}}},methods:{pagination:{getPage:function(){return grid.options.enablePagination?grid.options.paginationCurrentPage:null},getTotalPages:function(){return grid.options.enablePagination?0===grid.options.totalItems?1:Math.ceil(grid.options.totalItems/grid.options.paginationPageSize):null},nextPage:function(){grid.options.enablePagination&&(grid.options.totalItems>0?grid.options.paginationCurrentPage=Math.min(grid.options.paginationCurrentPage+1,publicApi.methods.pagination.getTotalPages()):grid.options.paginationCurrentPage++)},previousPage:function(){grid.options.enablePagination&&(grid.options.paginationCurrentPage=Math.max(grid.options.paginationCurrentPage-1,1))},seek:function(page){if(grid.options.enablePagination){if(!angular.isNumber(page)||1>page)throw"Invalid page number: "+page;grid.options.paginationCurrentPage=Math.min(page,publicApi.methods.pagination.getTotalPages())}}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.registerRowsProcessor(function(renderableRows){if(grid.options.useExternalPagination||!grid.options.enablePagination)return renderableRows;
var pageSize=parseInt(grid.options.paginationPageSize,10),currentPage=parseInt(grid.options.paginationCurrentPage,10),visibleRows=renderableRows.filter(function(row){return row.visible});grid.options.totalItems=visibleRows.length;var firstRow=(currentPage-1)*pageSize;return firstRow>visibleRows.length&&(currentPage=grid.options.paginationCurrentPage=1,firstRow=(currentPage-1)*pageSize),visibleRows.slice(firstRow,firstRow+pageSize)})},defaultGridOptions:function(gridOptions){gridOptions.enablePagination=gridOptions.enablePagination!==!1,gridOptions.enablePaginationControls=gridOptions.enablePaginationControls!==!1,gridOptions.useExternalPagination=gridOptions.useExternalPagination===!0,gridUtil.isNullOrUndefined(gridOptions.totalItems)&&(gridOptions.totalItems=0),gridUtil.isNullOrUndefined(gridOptions.paginationPageSizes)&&(gridOptions.paginationPageSizes=[250,500,1e3]),gridUtil.isNullOrUndefined(gridOptions.paginationPageSize)&&(gridOptions.paginationPageSize=gridOptions.paginationPageSizes.length>0?gridOptions.paginationPageSizes[0]:0),gridUtil.isNullOrUndefined(gridOptions.paginationCurrentPage)&&(gridOptions.paginationCurrentPage=1),gridUtil.isNullOrUndefined(gridOptions.paginationTemplate)&&(gridOptions.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(grid,currentPage,pageSize){grid.api.pagination.raise.paginationChanged(currentPage,pageSize),grid.options.useExternalPagination||grid.refresh()}};return service}]),module.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(gridUtil,uiGridPaginationService){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function($scope,$elm,$attr,uiGridCtrl){uiGridPaginationService.initializeGrid(uiGridCtrl.grid),gridUtil.getTemplate(uiGridCtrl.grid.options.paginationTemplate).then(function(contents){var template=angular.element(contents);$elm.append(template),uiGridCtrl.innerCompile(template)})}}}}]),module.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(uiGridPaginationService,uiGridConstants,gridUtil,i18nService){return{priority:-200,scope:!0,require:"^uiGrid",link:function($scope,$elm,$attr,uiGridCtrl){$scope.paginationApi=uiGridCtrl.grid.api.pagination,$scope.sizesLabel=i18nService.getSafeText("pagination.sizes"),$scope.totalItemsLabel=i18nService.getSafeText("pagination.totalItems");var options=uiGridCtrl.grid.options;uiGridCtrl.grid.renderContainers.body.registerViewportAdjuster(function(adjustment){return adjustment.height=adjustment.height-gridUtil.elementHeight($elm),adjustment});var dataChangeDereg=uiGridCtrl.grid.registerDataChangeCallback(function(grid){grid.options.useExternalPagination||(grid.options.totalItems=grid.rows.length)},[uiGridConstants.dataChange.ROW]);$scope.$on("$destroy",dataChangeDereg);var setShowing=function(){$scope.showingLow=(options.paginationCurrentPage-1)*options.paginationPageSize+1,$scope.showingHigh=Math.min(options.paginationCurrentPage*options.paginationPageSize,options.totalItems)},deregT=$scope.$watch("grid.options.totalItems + grid.options.paginationPageSize",setShowing),deregP=$scope.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(newValues,oldValues){if(newValues!==oldValues){if(!angular.isNumber(options.paginationCurrentPage)||options.paginationCurrentPage<1)return void(options.paginationCurrentPage=1);if(options.totalItems>0&&options.paginationCurrentPage>$scope.paginationApi.getTotalPages())return void(options.paginationCurrentPage=$scope.paginationApi.getTotalPages());setShowing(),uiGridPaginationService.onPaginationChanged($scope.grid,options.paginationCurrentPage,options.paginationPageSize)}});$scope.$on("$destroy",function(){deregT(),deregP()}),$scope.cantPageForward=function(){return options.totalItems>0?options.paginationCurrentPage>=$scope.paginationApi.getTotalPages():options.data.length<1},$scope.cantPageToLast=function(){return options.totalItems>0?$scope.cantPageForward():!0},$scope.cantPageBackward=function(){return options.paginationCurrentPage<=1}}}}])}(),function(){var module=angular.module("ui.grid.pinning",["ui.grid"]);module.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService",function(gridUtil,GridRenderContainer,i18nService){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options),grid.registerColumnBuilder(service.pinningColumnBuilder)},defaultGridOptions:function(gridOptions){gridOptions.enablePinning=gridOptions.enablePinning!==!1},pinningColumnBuilder:function(colDef,col,gridOptions){if(colDef.enablePinning=void 0===colDef.enablePinning?gridOptions.enablePinning:colDef.enablePinning,colDef.pinnedLeft?"*"===col.width?col.grid.refresh().then(function(){col.renderContainer="left",col.width=col.grid.canvasWidth/col.grid.columns.length,col.grid.createLeftContainer()}):(col.renderContainer="left",col.grid.createLeftContainer()):colDef.pinnedRight&&("*"===col.width?col.grid.refresh().then(function(){col.renderContainer="right",col.width=col.grid.canvasWidth/col.grid.columns.length,col.grid.createRightContainer()}):(col.renderContainer="right",col.grid.createRightContainer())),colDef.enablePinning){var pinColumnLeftAction={name:"ui.grid.pinning.pinLeft",title:i18nService.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer="left",this.context.col.width=this.context.col.drawnWidth,this.context.col.grid.createLeftContainer(),col.grid.refresh().then(function(){col.grid.refresh()})}},pinColumnRightAction={name:"ui.grid.pinning.pinRight",title:i18nService.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer="right",this.context.col.width=this.context.col.drawnWidth,this.context.col.grid.createRightContainer(),col.grid.refresh().then(function(){col.grid.refresh()})}},removePinAction={name:"ui.grid.pinning.unpin",title:i18nService.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return"undefined"!=typeof this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer=null,col.grid.refresh().then(function(){col.grid.refresh()})}};gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.pinLeft")||col.menuItems.push(pinColumnLeftAction),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.pinRight")||col.menuItems.push(pinColumnRightAction),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.unpin")||col.menuItems.push(removePinAction)}}};return service}]),module.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(gridUtil,uiGridPinningService){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridPinningService.initializeGrid(uiGridCtrl.grid)},post:function(){}}}}}])}(),function(){var module=angular.module("ui.grid.resizeColumns",["ui.grid"]);module.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(gridUtil,$q,$timeout){var service={defaultGridOptions:function(gridOptions){gridOptions.enableColumnResizing=gridOptions.enableColumnResizing!==!1,gridOptions.enableColumnResize===!1&&(gridOptions.enableColumnResizing=!1)},colResizerColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableColumnResizing=void 0===colDef.enableColumnResizing?gridOptions.enableColumnResizing:colDef.enableColumnResizing,colDef.enableColumnResize===!1&&(colDef.enableColumnResizing=!1),$q.all(promises)},registerPublicApi:function(grid){var publicApi={events:{colResizable:{columnSizeChanged:function(){}}}};grid.api.registerEventsFromObject(publicApi.events)},fireColumnSizeChanged:function(grid,colDef,deltaChange){$timeout(function(){grid.api.colResizable.raise.columnSizeChanged(colDef,deltaChange)})},findTargetCol:function(col,position,rtlMultiplier){var renderContainer=col.getRenderContainer();if("left"===position){var colIndex=renderContainer.visibleColumnCache.indexOf(col);return renderContainer.visibleColumnCache[colIndex-1*rtlMultiplier]}return col}};return service}]),module.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(gridUtil,uiGridResizeColumnsService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridResizeColumnsService.defaultGridOptions(uiGridCtrl.grid.options),uiGridCtrl.grid.registerColumnBuilder(uiGridResizeColumnsService.colResizerColumnBuilder),uiGridResizeColumnsService.registerPublicApi(uiGridCtrl.grid)},post:function(){}}}}}]),module.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(gridUtil,$templateCache,$compile,$q,uiGridResizeColumnsService,uiGridConstants,$timeout){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){var grid=uiGridCtrl.grid;if(grid.options.enableColumnResizing){var columnResizerElm=$templateCache.get("ui-grid/columnResizer"),rtlMultiplier=1;grid.isRTL()&&($scope.position="left",rtlMultiplier=-1);var displayResizers=function(){for(var resizers=$elm[0].getElementsByClassName("ui-grid-column-resizer"),i=0;i<resizers.length;i++)angular.element(resizers[i]).remove();var otherCol=uiGridResizeColumnsService.findTargetCol($scope.col,"left",rtlMultiplier),renderContainer=$scope.col.getRenderContainer();if(otherCol&&0!==renderContainer.visibleColumnCache.indexOf($scope.col)&&otherCol.colDef.enableColumnResizing!==!1){var resizerLeft=angular.element(columnResizerElm).clone();resizerLeft.attr("position","left"),$elm.prepend(resizerLeft),$compile(resizerLeft)($scope)}if($scope.col.colDef.enableColumnResizing!==!1){var resizerRight=angular.element(columnResizerElm).clone();resizerRight.attr("position","right"),$elm.append(resizerRight),$compile(resizerRight)($scope)}};displayResizers();var waitDisplay=function(){$timeout(displayResizers)},dataChangeDereg=grid.registerDataChangeCallback(waitDisplay,[uiGridConstants.dataChange.COLUMN]);$scope.$on("$destroy",dataChangeDereg)}}}}}}]),module.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function($document,gridUtil,uiGridConstants,uiGridResizeColumnsService){var downEvent,upEvent,moveEvent,resizeOverlay=angular.element('<div class="ui-grid-resize-overlay"></div>');gridUtil.isTouchEnabled()?(downEvent="touchstart",upEvent="touchend",moveEvent="touchmove"):(downEvent="mousedown",upEvent="mouseup",moveEvent="mousemove");var resizer={priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function resizeAroundColumn(col){var renderContainer=col.getRenderContainer();renderContainer.visibleColumnCache.forEach(function(column){if(column!==col){var colDef=column.colDef;(!colDef.width||angular.isString(colDef.width)&&(-1!==colDef.width.indexOf("*")||-1!==colDef.width.indexOf("%")))&&(column.width=column.drawnWidth)}})}function buildColumnsAndRefresh(){uiGridCtrl.grid.buildColumns().then(function(){uiGridCtrl.grid.refreshCanvas(!0).then(function(){uiGridCtrl.grid.refresh()})})}function constrainWidth(col,width){var newWidth=width;return col.colDef.minWidth&&newWidth<col.colDef.minWidth?newWidth=col.colDef.minWidth:col.colDef.maxWidth&&newWidth>col.colDef.maxWidth&&(newWidth=col.colDef.maxWidth),newWidth}function mousemove(event){event.originalEvent&&(event=event.originalEvent),event.preventDefault(),x=(event.targetTouches?event.targetTouches[0]:event).clientX-gridLeft,0>x?x=0:x>uiGridCtrl.grid.gridWidth&&(x=uiGridCtrl.grid.gridWidth);var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(col.colDef.enableColumnResizing!==!1){uiGridCtrl.grid.element.hasClass("column-resizing")||uiGridCtrl.grid.element.addClass("column-resizing");var xDiff=x-startX,newWidth=parseInt(col.drawnWidth+xDiff*rtlMultiplier,10);x+=(constrainWidth(col,newWidth)-newWidth)*rtlMultiplier,resizeOverlay.css({left:x+"px"}),uiGridCtrl.fireEvent(uiGridConstants.events.ITEM_DRAGGING)}}function mouseup(event){event.originalEvent&&(event=event.originalEvent),event.preventDefault(),uiGridCtrl.grid.element.removeClass("column-resizing"),resizeOverlay.remove(),x=(event.changedTouches?event.changedTouches[0]:event).clientX-gridLeft;var xDiff=x-startX;if(0===xDiff)return $document.off(upEvent,mouseup),void $document.off(moveEvent,mousemove);var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(col.colDef.enableColumnResizing!==!1){var newWidth=parseInt(col.drawnWidth+xDiff*rtlMultiplier,10);col.width=constrainWidth(col,newWidth),resizeAroundColumn(col),buildColumnsAndRefresh(xDiff),uiGridResizeColumnsService.fireColumnSizeChanged(uiGridCtrl.grid,col.colDef,xDiff),$document.off(upEvent,mouseup),$document.off(moveEvent,mousemove)}}var startX=0,x=0,gridLeft=0,rtlMultiplier=1;uiGridCtrl.grid.isRTL()&&($scope.position="left",rtlMultiplier=-1),"left"===$scope.position?$elm.addClass("left"):"right"===$scope.position&&$elm.addClass("right"),$elm.on(downEvent,function(event){event.originalEvent&&(event=event.originalEvent),event.stopPropagation(),gridLeft=uiGridCtrl.grid.element[0].getBoundingClientRect().left,startX=(event.targetTouches?event.targetTouches[0]:event).clientX-gridLeft,uiGridCtrl.grid.element.append(resizeOverlay),resizeOverlay.css({left:startX}),$document.on(upEvent,mouseup),$document.on(moveEvent,mousemove)}),$elm.on("dblclick",function(event){event.stopPropagation();var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(col.colDef.enableColumnResizing!==!1){var maxWidth=0,xDiff=0,renderContainerElm=gridUtil.closestElm($elm,".ui-grid-render-container"),cells=renderContainerElm.querySelectorAll("."+uiGridConstants.COL_CLASS_PREFIX+col.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(cells,function(cell){var menuButton;angular.element(cell).parent().hasClass("ui-grid-header-cell")&&(menuButton=angular.element(cell).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),gridUtil.fakeElement(cell,{},function(newElm){var e=angular.element(newElm);e.attr("style","float: left");var width=gridUtil.elementWidth(e);if(menuButton){var menuButtonWidth=gridUtil.elementWidth(menuButton);width+=menuButtonWidth}width>maxWidth&&(maxWidth=width,xDiff=maxWidth-width)})}),col.width=constrainWidth(col,maxWidth),resizeAroundColumn(col),buildColumnsAndRefresh(xDiff),uiGridResizeColumnsService.fireColumnSizeChanged(uiGridCtrl.grid,col.colDef,xDiff)}}),$elm.on("$destroy",function(){$elm.off(downEvent),$elm.off("dblclick"),$document.off(moveEvent,mousemove),$document.off(upEvent,mouseup)})}};return resizer}])}(),function(){var module=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);module.constant("uiGridRowEditConstants",{}),module.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function($interval,$q,uiGridConstants,uiGridRowEditConstants,gridUtil){var service={initializeGrid:function(scope,grid){grid.rowEdit={};var publicApi={events:{rowEdit:{saveRow:function(){}}},methods:{rowEdit:{setSavePromise:function(rowEntity,savePromise){service.setSavePromise(grid,rowEntity,savePromise)},getDirtyRows:function(){return grid.rowEdit.dirtyRows?grid.rowEdit.dirtyRows:[]},getErrorRows:function(){return grid.rowEdit.errorRows?grid.rowEdit.errorRows:[]},flushDirtyRows:function(){return service.flushDirtyRows(grid)},setRowsDirty:function(dataRows){service.setRowsDirty(grid,dataRows)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.on.renderingComplete(scope,function(){grid.api.edit.on.afterCellEdit(scope,service.endEditCell),grid.api.edit.on.beginCellEdit(scope,service.beginEditCell),grid.api.edit.on.cancelCellEdit(scope,service.cancelEditCell),grid.api.cellNav&&grid.api.cellNav.on.navigate(scope,service.navigate)})},defaultGridOptions:function(){},saveRow:function(grid,gridRow){var self=this;return function(){gridRow.isSaving=!0;var promise=grid.api.rowEdit.raise.saveRow(gridRow.entity);return gridRow.rowEditSavePromise?gridRow.rowEditSavePromise.then(self.processSuccessPromise(grid,gridRow),self.processErrorPromise(grid,gridRow)):gridUtil.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),promise}},setSavePromise:function(grid,rowEntity,savePromise){var gridRow=grid.getRow(rowEntity);gridRow.rowEditSavePromise=savePromise},processSuccessPromise:function(grid,gridRow){var self=this;return function(){delete gridRow.isSaving,delete gridRow.isDirty,delete gridRow.isError,delete gridRow.rowEditSaveTimer,self.removeRow(grid.rowEdit.errorRows,gridRow),self.removeRow(grid.rowEdit.dirtyRows,gridRow)}},processErrorPromise:function(grid,gridRow){return function(){delete gridRow.isSaving,delete gridRow.rowEditSaveTimer,gridRow.isError=!0,grid.rowEdit.errorRows||(grid.rowEdit.errorRows=[]),service.isRowPresent(grid.rowEdit.errorRows,gridRow)||grid.rowEdit.errorRows.push(gridRow)}},removeRow:function(rowArray,removeGridRow){angular.forEach(rowArray,function(gridRow,index){gridRow.uid===removeGridRow.uid&&rowArray.splice(index,1)})},isRowPresent:function(rowArray,removeGridRow){var present=!1;return angular.forEach(rowArray,function(gridRow){gridRow.uid===removeGridRow.uid&&(present=!0)}),present},flushDirtyRows:function(grid){var promises=[];return angular.forEach(grid.rowEdit.dirtyRows,function(gridRow){service.saveRow(grid,gridRow)(),promises.push(gridRow.rowEditSavePromise)}),$q.all(promises)},endEditCell:function(rowEntity,colDef,newValue,previousValue){var grid=this.grid,gridRow=grid.getRow(rowEntity);return gridRow?void((newValue!==previousValue||gridRow.isDirty)&&(grid.rowEdit.dirtyRows||(grid.rowEdit.dirtyRows=[]),gridRow.isDirty||(gridRow.isDirty=!0,grid.rowEdit.dirtyRows.push(gridRow)),delete gridRow.isError,service.considerSetTimer(grid,gridRow))):void gridUtil.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(rowEntity){var grid=this.grid,gridRow=grid.getRow(rowEntity);return gridRow?void service.cancelTimer(grid,gridRow):void gridUtil.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(rowEntity){var grid=this.grid,gridRow=grid.getRow(rowEntity);return gridRow?void service.considerSetTimer(grid,gridRow):void gridUtil.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(newRowCol,oldRowCol){var grid=this.grid;newRowCol.row.rowEditSaveTimer&&service.cancelTimer(grid,newRowCol.row),oldRowCol&&oldRowCol.row&&oldRowCol.row!==newRowCol.row&&service.considerSetTimer(grid,oldRowCol.row)},considerSetTimer:function(grid,gridRow){if(service.cancelTimer(grid,gridRow),gridRow.isDirty&&!gridRow.isSaving&&-1!==grid.options.rowEditWaitInterval){var waitTime=grid.options.rowEditWaitInterval?grid.options.rowEditWaitInterval:2e3;gridRow.rowEditSaveTimer=$interval(service.saveRow(grid,gridRow),waitTime,1)}},cancelTimer:function(grid,gridRow){gridRow.rowEditSaveTimer&&!gridRow.isSaving&&($interval.cancel(gridRow.rowEditSaveTimer),delete gridRow.rowEditSaveTimer)},setRowsDirty:function(grid,myDataRows){var gridRow;myDataRows.forEach(function(value){gridRow=grid.getRow(value),gridRow?(grid.rowEdit.dirtyRows||(grid.rowEdit.dirtyRows=[]),gridRow.isDirty||(gridRow.isDirty=!0,grid.rowEdit.dirtyRows.push(gridRow)),delete gridRow.isError,service.considerSetTimer(grid,gridRow)):gridUtil.logError("requested row not found in rowEdit.setRowsDirty, row was: "+value)})}};return service}]),module.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(gridUtil,uiGridRowEditService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridRowEditService.initializeGrid($scope,uiGridCtrl.grid)},post:function(){}}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(){return{priority:-200,scope:!1,compile:function($elm){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function(){},post:function(){}}}}}])}(),function(){var module=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav"]);module.constant("uiGridSaveStateConstants",{featureName:"saveState"}),module.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(){var service={initializeGrid:function(grid){grid.saveState={},this.defaultGridOptions(grid.options);var publicApi={events:{saveState:{}},methods:{saveState:{save:function(){return service.save(grid)},restore:function($scope,state){service.restore(grid,$scope,state)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.saveWidths=gridOptions.saveWidths!==!1,gridOptions.saveOrder=gridOptions.saveOrder!==!1,gridOptions.saveScroll=gridOptions.saveScroll===!0,gridOptions.saveFocus=gridOptions.saveScroll!==!0&&gridOptions.saveFocus!==!1,gridOptions.saveVisible=gridOptions.saveVisible!==!1,gridOptions.saveSort=gridOptions.saveSort!==!1,gridOptions.saveFilter=gridOptions.saveFilter!==!1,gridOptions.saveSelection=gridOptions.saveSelection!==!1},save:function(grid){var savedState={};return savedState.columns=service.saveColumns(grid),savedState.scrollFocus=service.saveScrollFocus(grid),savedState.selection=service.saveSelection(grid),savedState},restore:function(grid,$scope,state){state.columns&&service.restoreColumns(grid,state.columns),state.scrollFocus&&service.restoreScrollFocus(grid,$scope,state.scrollFocus),state.selection&&service.restoreSelection(grid,state.selection),grid.refresh()},saveColumns:function(grid){var columns=[];return angular.forEach(grid.columns,function(column){var savedColumn={};savedColumn.name=column.name,savedColumn.visible=column.visible,savedColumn.width=column.width,savedColumn.sort=angular.copy(column.sort),savedColumn.filters=angular.copy(column.filters),columns.push(savedColumn)}),columns},saveScrollFocus:function(grid){if(!grid.api.cellNav)return{};var scrollFocus={};if(grid.options.saveFocus){scrollFocus.focus=!0;var rowCol=grid.api.cellNav.getFocusedCell();null!==rowCol&&(scrollFocus.colName=rowCol.col.colDef.name,scrollFocus.rowVal=service.getRowVal(grid,rowCol.row))}else grid.options.saveScroll&&(scrollFocus.focus=!1,grid.renderContainers.body.prevRowScrollIndex&&(scrollFocus.rowVal=service.getRowVal(grid,grid.renderContainers.body.visibleRowCache[grid.renderContainers.body.prevRowScrollIndex])),grid.renderContainers.body.prevColScrollIndex&&(scrollFocus.colName=grid.renderContainers.body.visibleColumnCache[grid.renderContainers.body.prevColScrollIndex].name));return scrollFocus},saveSelection:function(grid){if(!grid.api.selection||!grid.options.saveSelection)return{};var selection=grid.api.selection.getSelectedGridRows().map(function(gridRow){return service.getRowVal(grid,gridRow)});return selection},getRowVal:function(grid,gridRow){if(!gridRow)return null;var rowVal={};return grid.options.saveRowIdentity?(rowVal.identity=!0,rowVal.row=grid.options.saveRowIdentity(gridRow.entity)):(rowVal.identity=!1,rowVal.row=grid.renderContainers.body.visibleRowCache.indexOf(gridRow)),rowVal},restoreColumns:function(grid,columnsState){angular.forEach(columnsState,function(columnState,index){var currentCol=grid.columns.filter(function(column){return column.name===columnState.name});if(currentCol.length>0){var currentIndex=grid.columns.indexOf(currentCol[0]);if((grid.columns[currentIndex].visible!==columnState.visible||grid.columns[currentIndex].colDef.visible!==columnState.visible)&&(grid.columns[currentIndex].visible=columnState.visible,grid.columns[currentIndex].colDef.visible=columnState.visible,grid.api.core.raise.columnVisibilityChanged(grid.columns[currentIndex])),grid.columns[currentIndex].width=columnState.width,angular.equals(grid.columns[currentIndex].sort,columnState.sort&&!(void 0===grid.columns[currentIndex].sort&&angular.isEmpty(columnState.sort)))||(grid.columns[currentIndex].sort=angular.copy(columnState.sort),grid.api.core.raise.sortChanged()),angular.equals(grid.columns[currentIndex].filters,columnState.filters)||(grid.columns[currentIndex].filters=angular.copy(columnState.filters),grid.api.core.raise.filterChanged()),currentIndex!==index){var column=grid.columns.splice(currentIndex,1)[0];grid.columns.splice(index,0,column)}}})},restoreScrollFocus:function(grid,$scope,scrollFocusState){if(grid.api.cellNav){var colDef,row;if(scrollFocusState.colName){var colDefs=grid.options.columnDefs.filter(function(colDef){return colDef.name===scrollFocusState.colName});colDefs.length>0&&(colDef=colDefs[0])}scrollFocusState.rowVal&&scrollFocusState.rowVal.row&&(row=scrollFocusState.rowVal.identity?service.findRowByIdentity(grid,scrollFocusState.rowVal):grid.renderContainers.body.visibleRowCache[scrollFocusState.rowVal.row]);var entity=row&&row.entity?row.entity:null;(colDef||entity)&&(scrollFocusState.focus?grid.api.cellNav.scrollToFocus(entity,colDef):grid.api.cellNav.scrollTo(entity,colDef))}},restoreSelection:function(grid,selectionState){grid.api.selection&&(grid.api.selection.clearSelectedRows(),angular.forEach(selectionState,function(rowVal){if(rowVal.identity){var foundRow=service.findRowByIdentity(grid,rowVal);foundRow&&grid.api.selection.selectRow(foundRow.entity)}else grid.api.selection.selectRowByVisibleIndex(rowVal.row)}))},findRowByIdentity:function(grid,rowVal){if(!grid.options.saveRowIdentity)return null;var filteredRows=grid.rows.filter(function(gridRow){return grid.options.saveRowIdentity(gridRow.entity)===rowVal.row?!0:!1});return filteredRows.length>0?filteredRows[0]:null}};return service}]),module.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(uiGridSaveStateConstants,uiGridSaveStateService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridSaveStateService.initializeGrid(uiGridCtrl.grid)}}}])}(),function(){var module=angular.module("ui.grid.selection",["ui.grid"]);module.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("GridRow",["$delegate",function($delegate){return $delegate.prototype.setSelected=function(selected){this.isSelected=selected,selected?this.grid.selection.selectedCount++:this.grid.selection.selectedCount--},$delegate}])}]),module.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(){var service={initializeGrid:function(grid){grid.selection={},grid.selection.lastSelectedRow=null,grid.selection.selectAll=!1,grid.selection.selectedCount=0,service.defaultGridOptions(grid.options);var publicApi={events:{selection:{rowSelectionChanged:function(){},rowSelectionChangedBatch:function(){}}},methods:{selection:{toggleRowSelection:function(rowEntity,evt){var row=grid.getRow(rowEntity);null!==row&&row.enableSelection!==!1&&service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectRow:function(rowEntity,evt){var row=grid.getRow(rowEntity);null===row||row.isSelected||row.enableSelection===!1||service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectRowByVisibleIndex:function(rowNum,evt){var row=grid.renderContainers.body.visibleRowCache[rowNum];null===row||"undefined"==typeof row||row.isSelected||row.enableSelection===!1||service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},unSelectRow:function(rowEntity,evt){var row=grid.getRow(rowEntity);null!==row&&row.isSelected&&service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectAllRows:function(evt){if(grid.options.multiSelect!==!1){var changedRows=[];grid.rows.forEach(function(row){row.isSelected||row.enableSelection===!1||(row.setSelected(!0),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!0}},selectAllVisibleRows:function(evt){if(grid.options.multiSelect!==!1){var changedRows=[];grid.rows.forEach(function(row){row.visible?row.isSelected||row.enableSelection===!1||(row.setSelected(!0),service.decideRaiseSelectionEvent(grid,row,changedRows,evt)):row.isSelected&&(row.setSelected(!1),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!0}},clearSelectedRows:function(evt){service.clearSelectedRows(grid,evt)},getSelectedRows:function(){return service.getSelectedRows(grid).map(function(gridRow){return gridRow.entity})},getSelectedGridRows:function(){return service.getSelectedRows(grid)},setMultiSelect:function(multiSelect){grid.options.multiSelect=multiSelect},setModifierKeysToMultiSelect:function(modifierKeysToMultiSelect){grid.options.modifierKeysToMultiSelect=modifierKeysToMultiSelect},getSelectAllState:function(){return grid.selection.selectAll}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableRowSelection=gridOptions.enableRowSelection!==!1,gridOptions.multiSelect=gridOptions.multiSelect!==!1,gridOptions.noUnselect=gridOptions.noUnselect===!0,gridOptions.modifierKeysToMultiSelect=gridOptions.modifierKeysToMultiSelect===!0,gridOptions.enableRowHeaderSelection=gridOptions.enableRowHeaderSelection!==!1,gridOptions.enableSelectAll=gridOptions.enableSelectAll!==!1,gridOptions.enableSelectionBatchEvent=gridOptions.enableSelectionBatchEvent!==!1,gridOptions.selectionRowHeaderWidth=angular.isDefined(gridOptions.selectionRowHeaderWidth)?gridOptions.selectionRowHeaderWidth:30,gridOptions.enableFooterTotalSelected=gridOptions.enableFooterTotalSelected!==!1,gridOptions.isRowSelectable=angular.isDefined(gridOptions.isRowSelectable)?gridOptions.isRowSelectable:angular.noop},toggleRowSelection:function(grid,row,evt,multiSelect,noUnselect){var selected=row.isSelected;if(multiSelect||selected){if(!multiSelect&&selected){var selectedRows=service.getSelectedRows(grid);selectedRows.length>1&&(selected=!1,service.clearSelectedRows(grid,evt))}}else service.clearSelectedRows(grid,evt);selected&&noUnselect||row.enableSelection!==!1&&(row.setSelected(!selected),row.isSelected===!0?grid.selection.lastSelectedRow=row:grid.selection.selectAll=!1,grid.api.selection.raise.rowSelectionChanged(row,evt))},shiftSelect:function(grid,row,evt,multiSelect){if(multiSelect){var selectedRows=service.getSelectedRows(grid),fromRow=selectedRows.length>0?grid.renderContainers.body.visibleRowCache.indexOf(grid.selection.lastSelectedRow):0,toRow=grid.renderContainers.body.visibleRowCache.indexOf(row);if(fromRow>toRow){var tmp=fromRow;fromRow=toRow,toRow=tmp}for(var changedRows=[],i=fromRow;toRow>=i;i++){var rowToSelect=grid.renderContainers.body.visibleRowCache[i];rowToSelect&&(rowToSelect.isSelected||rowToSelect.enableSelection===!1||(rowToSelect.setSelected(!0),grid.selection.lastSelectedRow=rowToSelect,service.decideRaiseSelectionEvent(grid,rowToSelect,changedRows,evt)))}service.decideRaiseSelectionBatchEvent(grid,changedRows,evt)}},getSelectedRows:function(grid){return grid.rows.filter(function(row){return row.isSelected})},clearSelectedRows:function(grid,evt){var changedRows=[];service.getSelectedRows(grid).forEach(function(row){row.isSelected&&(row.setSelected(!1),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))
}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!1},decideRaiseSelectionEvent:function(grid,row,changedRows,evt){grid.options.enableSelectionBatchEvent?changedRows.push(row):grid.api.selection.raise.rowSelectionChanged(row,evt)},decideRaiseSelectionBatchEvent:function(grid,changedRows,evt){changedRows.length>0&&grid.api.selection.raise.rowSelectionChangedBatch(changedRows,evt)}};return service}]),module.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache",function(uiGridSelectionConstants,uiGridSelectionService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){if(uiGridSelectionService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.options.enableRowHeaderSelection){var selectionRowHeaderDef={name:uiGridSelectionConstants.selectionRowHeaderColName,displayName:"",width:uiGridCtrl.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0};uiGridCtrl.grid.addRowHeaderColumn(selectionRowHeaderDef)}uiGridCtrl.grid.options.isRowSelectable!==angular.noop&&uiGridCtrl.grid.registerRowBuilder(function(row){row.enableSelection=uiGridCtrl.grid.options.isRowSelectable(row)})},post:function(){}}}}}]),module.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService",function($templateCache,uiGridSelectionService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){var self=uiGridCtrl.grid;$scope.selectButtonClick=function(row,evt){evt.shiftKey?uiGridSelectionService.shiftSelect(self,row,evt,self.options.multiSelect):evt.ctrlKey||evt.metaKey?uiGridSelectionService.toggleRowSelection(self,row,evt,self.options.multiSelect,self.options.noUnselect):uiGridSelectionService.toggleRowSelection(self,row,evt,self.options.multiSelect&&!self.options.modifierKeysToMultiSelect,self.options.noUnselect)}}}}]),module.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function($templateCache,uiGridSelectionService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function($scope){var self=$scope.col.grid;$scope.headerButtonClick=function(row,evt){self.selection.selectAll?(uiGridSelectionService.clearSelectedRows(self,evt),self.options.noUnselect&&self.api.selection.selectRowByVisibleIndex(0,evt),self.selection.selectAll=!1):self.options.multiSelect&&(self.api.selection.selectAllVisibleRows(evt),self.selection.selectAll=!0)}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(){return{priority:-200,scope:!1,compile:function($elm){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function(){},post:function(){}}}}}]),module.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function($compile,uiGridConstants,uiGridSelectionConstants,gridUtil,$parse,uiGridSelectionService){return{priority:-200,restrict:"A",scope:!1,link:function($scope,$elm){function registerRowSelectionEvents(){$scope.grid.options.enableRowSelection&&!$scope.grid.options.enableRowHeaderSelection&&($elm.addClass("ui-grid-disable-selection"),$elm.on("touchstart",touchStart),$elm.on("touchend",touchEnd),$elm.on("click",selectCells),$scope.registered=!0)}function deregisterRowSelectionEvents(){$scope.registered&&($elm.removeClass("ui-grid-disable-selection"),$elm.off("touchstart",touchStart),$elm.off("touchend",touchEnd),$elm.off("click",selectCells),$scope.registered=!1)}var touchStartTime=0,touchTimeout=300,selectCells=function(evt){evt.shiftKey?uiGridSelectionService.shiftSelect($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect):evt.ctrlKey||evt.metaKey?uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect,$scope.grid.options.noUnselect):uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect&&!$scope.grid.options.modifierKeysToMultiSelect,$scope.grid.options.noUnselect),$scope.$apply()},touchStart=function(){touchStartTime=(new Date).getTime()},touchEnd=function(evt){var touchEndTime=(new Date).getTime(),touchTime=touchEndTime-touchStartTime;touchTimeout>touchTime&&selectCells(evt)};registerRowSelectionEvents();var dataChangeDereg=$scope.grid.registerDataChangeCallback(function(){!$scope.grid.options.enableRowSelection||$scope.grid.options.enableRowHeaderSelection||$scope.registered?$scope.grid.options.enableRowSelection&&!$scope.grid.options.enableRowHeaderSelection||!$scope.registered||deregisterRowSelectionEvents():registerRowSelectionEvents()},[uiGridConstants.dataChange.OPTIONS]);$elm.on("$destroy",dataChangeDereg)}}}]),module.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function($compile,uiGridConstants,gridUtil){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.options.showGridFooter&&gridUtil.getTemplate("ui-grid/gridFooterSelectedItems").then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);angular.element($elm[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(newElm)})},post:function(){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function($templateCache){$templateCache.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row"><div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div class="ui-grid-footer-cell-row"><div ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" ui-grid-footer-cell col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),$templateCache.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),$templateCache.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),$templateCache.put("ui-grid/ui-grid-header",'<div class="ui-grid-header"><div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div><div ui-grid-menu></div></div></div>'),$templateCache.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button" ng-click="toggleMenu()"><div class="ui-grid-icon-container"><i class="ui-grid-icon-menu">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),$templateCache.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),$templateCache.put("ui-grid/ui-grid-row",'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" ui-grid-cell></div>'),$templateCache.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid"><!-- TODO (c0bra): add "scoped" attr here, eventually? --><style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div>'),$templateCache.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents">{{COL_FIELD CUSTOM_FILTERS}}</div>'),$templateCache.put("ui-grid/uiGridColumnFilter",'<li class="ui-grid-menu-item ui-grid-clearfix ui-grid-column-filter" ng-show="itemShown()" ng-click="$event.stopPropagation();"><div class="input-container"><input class="column-filter-input" type="text" ng-model="item.model" placeholder="{{ i18n.search.placeholder }}"><div class="column-filter-cancel-icon-container"><i class="ui-grid-filter-cancel ui-grid-icon-cancel column-filter-cancel-icon">&nbsp;</i></div></div><div style="button-container" ng-click="item.action($event)"><div class="ui-grid-button"><i class="ui-grid-icon-search">&nbsp;</i></div></div></li>'),$templateCache.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems"><!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --></div></div>'),$templateCache.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),$templateCache.put("ui-grid/uiGridHeaderCell",'<div ng-class="{ \'sortable\': sortable }"><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><span>{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-visible="col.sort.direction" ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }">&nbsp;</span></div><div class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}"><i class="ui-grid-icon-angle-down">&nbsp;</i></div><div ng-if="filterable" class="ui-grid-filter-container" ng-repeat="colFilter in col.filters"><input type="text" class="ui-grid-filter-input" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}"><div class="ui-grid-filter-button" ng-click="colFilter.term = null"><i class="ui-grid-icon-cancel" ng-show="!!colFilter.term">&nbsp;</i><!-- use !! because angular interprets \'f\' as false --></div></div></div>'),$templateCache.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul class="ui-grid-menu-items"><li ng-repeat="item in menuItems" ui-grid-menu-item action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl"></li></ul></div></div></div>'),$templateCache.put("ui-grid/uiGridMenuItem",'<li class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\' : active() }"><i ng-class="icon"></i> {{ name }}</li>'),$templateCache.put("ui-grid/uiGridRenderContainer",'<div class="ui-grid-render-container"><div ui-grid-header></div><div ui-grid-viewport></div><div ui-grid-footer ng-if="grid.options.showColumnFooter"></div></div>'),$templateCache.put("ui-grid/uiGridViewport",'<div class="ui-grid-viewport" ng-style="colContainer.getViewPortStyle()"><div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),$templateCache.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),$templateCache.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),$templateCache.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\'\n     , height: grid.options.expandableRowHeight + \'px\'}"></div>'),$templateCache.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),$templateCache.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" style=\"float:left; margin-top: 2px; margin-bottom: 2px\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px',\n              height: grid.options.expandableRowHeight + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{ 'margin-top': ( grid.options.expandableRowHeight/2 - 5) + 'px',\n            'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px' }\"></i></div>"),$templateCache.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),$templateCache.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),$templateCache.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),$templateCache.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),$templateCache.put("ui-grid/pagination",'<div class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div class="ui-grid-pager-container"><div class="ui-grid-pager-control"><button type="button" ng-click="paginationApi.seek(1)" ng-disabled="cantPageBackward()"><div class="first-triangle"><div class="first-bar"></div></div></button> <button type="button" ng-click="paginationApi.previousPage()" ng-disabled="cantPageBackward()"><div class="first-triangle prev-triangle"></div></button> <input type="number" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0">/ {{ paginationApi.getTotalPages() }}</span> <button type="button" ng-click="paginationApi.nextPage()" ng-disabled="cantPageForward()"><div class="last-triangle next-triangle"></div></button> <button type="button" ng-click="paginationApi.seek(paginationApi.getTotalPages())" ng-disabled="cantPageToLast()"><div class="last-triangle"><div class="last-bar"></div></div></button></div><div class="ui-grid-pager-row-count-picker"><select ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} - {{showingHigh}} of {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),$templateCache.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex"></div>'),$templateCache.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),$templateCache.put("ui-grid/selectionHeaderCell",'<div><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),$templateCache.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),$templateCache.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),$templateCache.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>')}]),function(){var module,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};module=angular.module("angularBootstrapNavTree",[]),module.directive("abnTree",["$timeout",function($timeout){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n  <li ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\') + \' \' +row.classes.join(\' \')" class="abn-tree-row"><a ng-click="user_clicks_branch(row.branch)"><i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon"> </i><span class="indented tree-label">{{ row.label }} </span></a></li>\n</ul>',replace:!0,scope:{treeData:"=",onSelect:"&",initialSelection:"@",treeControl:"="},link:function(scope,element,attrs){var error,expand_all_parents,expand_level,for_all_ancestors,for_each_branch,get_parent,n,on_treeData_change,select_branch,selected_branch,tree;if(error=function(s){return void console.log("ERROR:"+s)},null==attrs.iconExpand&&(attrs.iconExpand="icon-plus  glyphicon glyphicon-plus  fa fa-plus"),null==attrs.iconCollapse&&(attrs.iconCollapse="icon-minus glyphicon glyphicon-minus fa fa-minus"),null==attrs.iconLeaf&&(attrs.iconLeaf="icon-file  glyphicon glyphicon-file  fa fa-file"),null==attrs.expandLevel&&(attrs.expandLevel="3"),expand_level=parseInt(attrs.expandLevel,10),!scope.treeData)return void alert("no treeData defined for the tree!");if(null==scope.treeData.length){if(null==treeData.label)return void alert("treeData should be an array of root branches");scope.treeData=[treeData]}return for_each_branch=function(f){var do_f,root_branch,_i,_len,_ref,_results;for(do_f=function(branch,level){var child,_i,_len,_ref,_results;if(f(branch,level),null!=branch.children){for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],_results.push(do_f(child,level+1));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(do_f(root_branch,1));return _results},selected_branch=null,select_branch=function(branch){if(!branch)return null!=selected_branch&&(selected_branch.selected=!1),void(selected_branch=null);if(branch!==selected_branch){if(null!=selected_branch&&(selected_branch.selected=!1),branch.selected=!0,selected_branch=branch,expand_all_parents(branch),null!=branch.onSelect)return $timeout(function(){return branch.onSelect(branch)});if(null!=scope.onSelect)return $timeout(function(){return scope.onSelect({branch:branch})})}},scope.user_clicks_branch=function(branch){return branch!==selected_branch?select_branch(branch):void 0},get_parent=function(child){var parent;return parent=void 0,child.parent_uid&&for_each_branch(function(b){return b.uid===child.parent_uid?parent=b:void 0}),parent},for_all_ancestors=function(child,fn){var parent;return parent=get_parent(child),null!=parent?(fn(parent),for_all_ancestors(parent,fn)):void 0},expand_all_parents=function(child){return for_all_ancestors(child,function(b){return b.expanded=!0})},scope.tree_rows=[],on_treeData_change=function(){var add_branch_to_list,root_branch,_i,_len,_ref,_results;for(for_each_branch(function(b){return b.uid?void 0:b.uid=""+Math.random()}),console.log("UIDs are set."),for_each_branch(function(b){var child,_i,_len,_ref,_results;if(angular.isArray(b.children)){for(_ref=b.children,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],_results.push(child.parent_uid=b.uid);return _results}}),scope.tree_rows=[],for_each_branch(function(branch){var child,f;return branch.children?branch.children.length>0?(f=function(e){return"string"==typeof e?{label:e,children:[]}:e},branch.children=function(){var _i,_len,_ref,_results;for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],_results.push(f(child));return _results}()):void 0:branch.children=[]}),add_branch_to_list=function(level,branch,visible){var child,child_visible,tree_icon,_i,_len,_ref,_results;if(null==branch.expanded&&(branch.expanded=!1),null==branch.classes&&(branch.classes=[]),branch.noLeaf||branch.children&&0!==branch.children.length?tree_icon=branch.expanded?attrs.iconCollapse:attrs.iconExpand:(tree_icon=attrs.iconLeaf,__indexOf.call(branch.classes,"leaf")<0&&branch.classes.push("leaf")),scope.tree_rows.push({level:level,branch:branch,label:branch.label,classes:branch.classes,tree_icon:tree_icon,visible:visible}),null!=branch.children){for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],child_visible=visible&&branch.expanded,_results.push(add_branch_to_list(level+1,child,child_visible));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)root_branch=_ref[_i],_results.push(add_branch_to_list(1,root_branch,!0));return _results},scope.$watch("treeData",on_treeData_change,!0),null!=attrs.initialSelection&&for_each_branch(function(b){return b.label===attrs.initialSelection?$timeout(function(){return select_branch(b)}):void 0}),n=scope.treeData.length,console.log("num root branches = "+n),for_each_branch(function(b,level){return b.level=level,b.expanded=b.level<expand_level}),null!=scope.treeControl&&angular.isObject(scope.treeControl)?(tree=scope.treeControl,tree.expand_all=function(){return for_each_branch(function(b){return b.expanded=!0})},tree.collapse_all=function(){return for_each_branch(function(b){return b.expanded=!1})},tree.get_first_branch=function(){return n=scope.treeData.length,n>0?scope.treeData[0]:void 0},tree.select_first_branch=function(){var b;return b=tree.get_first_branch(),tree.select_branch(b)},tree.get_selected_branch=function(){return selected_branch},tree.get_parent_branch=function(b){return get_parent(b)},tree.select_branch=function(b){return select_branch(b),b},tree.get_children=function(b){return b.children},tree.select_parent_branch=function(b){var p;return null==b&&(b=tree.get_selected_branch()),null!=b&&(p=tree.get_parent_branch(b),null!=p)?(tree.select_branch(p),p):void 0},tree.add_branch=function(parent,new_branch){return null!=parent?(parent.children.push(new_branch),parent.expanded=!0):scope.treeData.push(new_branch),new_branch},tree.add_root_branch=function(new_branch){return tree.add_branch(null,new_branch),new_branch},tree.expand_branch=function(b){return null==b&&(b=tree.get_selected_branch()),null!=b?(b.expanded=!0,b):void 0},tree.collapse_branch=function(b){return null==b&&(b=selected_branch),null!=b?(b.expanded=!1,b):void 0},tree.get_siblings=function(b){var p,siblings;return null==b&&(b=selected_branch),null!=b?(p=tree.get_parent_branch(b),siblings=p?p.children:scope.treeData):void 0},tree.get_next_sibling=function(b){var i,siblings;return null==b&&(b=selected_branch),null!=b&&(siblings=tree.get_siblings(b),n=siblings.length,i=siblings.indexOf(b),n>i)?siblings[i+1]:void 0},tree.get_prev_sibling=function(b){var i,siblings;return null==b&&(b=selected_branch),siblings=tree.get_siblings(b),n=siblings.length,i=siblings.indexOf(b),i>0?siblings[i-1]:void 0},tree.select_next_sibling=function(b){var next;return null==b&&(b=selected_branch),null!=b&&(next=tree.get_next_sibling(b),null!=next)?tree.select_branch(next):void 0},tree.select_prev_sibling=function(b){var prev;return null==b&&(b=selected_branch),null!=b&&(prev=tree.get_prev_sibling(b),null!=prev)?tree.select_branch(prev):void 0},tree.get_first_child=function(b){var _ref;return null==b&&(b=selected_branch),null!=b&&(null!=(_ref=b.children)?_ref.length:void 0)>0?b.children[0]:void 0},tree.get_closest_ancestor_next_sibling=function(b){var next,parent;return next=tree.get_next_sibling(b),null!=next?next:(parent=tree.get_parent_branch(b),tree.get_closest_ancestor_next_sibling(parent))},tree.get_next_branch=function(b){var next;return null==b&&(b=selected_branch),null!=b?(next=tree.get_first_child(b),null!=next?next:next=tree.get_closest_ancestor_next_sibling(b)):void 0},tree.select_next_branch=function(b){var next;return null==b&&(b=selected_branch),null!=b&&(next=tree.get_next_branch(b),null!=next)?(tree.select_branch(next),next):void 0},tree.last_descendant=function(b){var last_child;return n=b.children.length,0===n?b:(last_child=b.children[n-1],tree.last_descendant(last_child))},tree.get_prev_branch=function(b){var parent,prev_sibling;return null==b&&(b=selected_branch),null!=b?(prev_sibling=tree.get_prev_sibling(b),null!=prev_sibling?tree.last_descendant(prev_sibling):parent=tree.get_parent_branch(b)):void 0},tree.select_prev_branch=function(b){var prev;return null==b&&(b=selected_branch),null!=b&&(prev=tree.get_prev_branch(b),null!=prev)?(tree.select_branch(prev),prev):void 0}):void 0}}}])}.call(this);var alchemy=angular.module("alchemy",["ui.router","ui.bootstrap","ui.select","ui.grid","ui.grid.selection","ngSanitize","templates","Devise","angularFileUpload","angular-ladda","angularBootstrapNavTree"]);alchemy.config(["$stateProvider","$urlRouterProvider","AuthInterceptProvider",function($stateProvider,$urlRouterProvider,AuthInterceptProvider){$stateProvider.state("dashboard",{url:"/dashboard",templateUrl:"dashboard/_dashboard.html",controller:"DashboardController",resolve:{enrolledCourses:["CourseApiClient",function(CourseApiClient){return CourseApiClient.getEnrolledCourses()}]}}).state("courses",{url:"/courses/{id}",templateUrl:"courses/_courses.html",controller:"CourseController",resolve:{course:["$stateParams","CourseApiClient",function($stateParams,CourseApiClient){return CourseApiClient.get($stateParams.id)}],showings:["$stateParams","CourseApiClient",function($stateParams,CourseApiClient){return CourseApiClient.getShowings($stateParams.id)}]}}).state("reporting",{url:"/reporting",templateUrl:"reporting/_reporting.html",controller:"ReportingController",resolve:{courses:["CourseApiClient",function(CourseApiClient){return CourseApiClient.getEnrolledCourses()}]}}).state("builder",{url:"/builder",templateUrl:"builder/_builder.html",controller:"BuilderController",onEnter:["$state","Auth",function($state,Auth){if(Auth.isAuthenticated()){var user=Auth._currentUser;("guest"===user.role||"student"===user.role)&&$state.go("dashboard")}}],resolve:{scenarios:["ScenarioApiClient",function(ScenarioApiClient){return ScenarioApiClient.getScenarios()}]}}).state("nodeBuilder",{url:"/builder/scenarios/{scenarioId}/nodes/{nodeId}",templateUrl:"builder/nodes/_build-nodes.html",controller:"NodeBuilderController",resolve:{node:["$stateParams","ScenarioApiClient",function($stateParams,ScenarioApiClient){return ScenarioApiClient.getNode($stateParams.scenarioId,$stateParams.nodeId)}]}}).state("player",{url:"/player/{sessionId}",templateUrl:"player/_player.html",controller:"PlayerController",resolve:{session:["$stateParams","SessionsApiClient",function($stateParams,SessionsApiClient){return SessionsApiClient.getSession($stateParams.sessionId)}]}}).state("results",{url:"/player/{sessionId}/results",templateUrl:"results/_results.html",controller:"ResultsController",resolve:{session:["$stateParams","SessionsApiClient",function($stateParams,SessionsApiClient){return SessionsApiClient.getSession($stateParams.sessionId)}]},onEnter:["$state","session",function($state,session){"ongoing"==session.status&&$state.go("player",{sessionId:session.id})}]}).state("login",{url:"/login",templateUrl:"auth/_login.html",controller:"AuthController",resolve:{universities:["UniversityApiClient",function(UniversityApiClient){return UniversityApiClient.getUniversities()}]},onEnter:["$state","Auth",function($state,Auth){Auth.isAuthenticated()&&$state.go("dashboard")}]}).state("signup",{url:"/signup",templateUrl:"auth/_signup.html",controller:"AuthController",resolve:{universities:["UniversityApiClient",function(UniversityApiClient){return UniversityApiClient.getUniversities()}]},onEnter:["$state","Auth",function($state,Auth){Auth.isAuthenticated()&&$state.go("dashboard")}]}),$urlRouterProvider.otherwise(function($injector){var $state=$injector.get("$state");$state.go("login")}),AuthInterceptProvider.interceptAuth(!0)}]),alchemy.run(["$rootScope","$state","Auth",function($rootScope,$state,Auth){$rootScope.$on("$stateChangeStart",function(event,toState){"login"!==toState.name&&Auth.currentUser().then(function(currentUser){$rootScope.currentUser=currentUser,$rootScope.currentUser.isStudent="student"===currentUser.role,$rootScope.currentUser.isInstructor="instructor"===currentUser.role||"admin"===currentUser.role})}),$rootScope.$on("devise:unauthorized",function(){$rootScope.currentUser={},$state.go("login")}),$rootScope.$on("$locationChangeStart",function(){$rootScope.alerts=[]})}]),alchemy.factory("AssetApiClient",["$http",function($http){var client={};return client.getAssets=function(){return $http.get("/assets.json").then(function(res){return res.data
})},client}]),alchemy.controller("AuthController",["$rootScope","$scope","$state","$stateParams","Auth","Util","universities",function($rootScope,$scope,$state,$stateParams,Auth,Util,universities){$scope.user={},$scope.universities=universities,$scope.login=function(){Auth.login($scope.user).then(function(){$state.go("dashboard")},function(error){Util.showAlert("danger",error.error)})},$scope.signup=function(){$scope.user.university_id=$scope.universities.selected.id,Auth.register($scope.user).then(function(){$state.go("dashboard")},function(error){Util.showRegistrationError(error)})},$scope.$on("devise:unauthorized",function(event,xhr){var error=xhr.data.error;Util.showAlert("danger",error)})}]),alchemy.factory("UniversityApiClient",["$http",function($http){var o={};return o.getUniversities=function(){return $http.get("/universities").then(function(res){return res.data})},o}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("auth/_login.html",'<div class="login-signup row">\n  <div class="col-sm-6 col-sm-offset-3 text-center">\n    <img class="logo" src="/assets/alchemy-logo-ccc015b2560cd90ce8038308d825705c.png" alt="logo">\n    <h1 class="logo-type">Alchemy</h1>\n    <h4 class="tagline">The Analytical Chemistry Learning Platform</h4>\n\n    <hr class="login-divider"/>\n    <tabset>\n\n    <tab heading="Login">\n      <form name="loginForm" ng-submit="login()">\n        <input type="email" class="form-control" placeholder="Email" ng-model="user.email" required>\n        <input type="password" class="form-control" placeholder="Password" ng-model="user.password" required>\n        <button type="submit" class="btn btn-block btn-warning" ng-disabled="!loginForm.$valid"><strong>Login</strong></button>\n      </form>\n    </tab>\n\n    <tab heading="Sign Up">\n      <form name="signupForm" ng-submit="signup()">\n        <ui-select ng-model="universities.selected" theme="bootstrap" ng-disabled="disabled" reset-search-input="true" required>\n          <ui-select-match placeholder="Select a University...">{{$select.selected.name}}</ui-select-match>\n          <ui-select-choices repeat="university in universities | filter: $select.search">\n          <div ng-bind-html="university.name | highlight: $select.search"></div>\n          <small>{{university.address}}</small>\n          </ui-select-choices>\n        </ui-select>\n\n        <input type="email" class="form-control" placeholder="Email" ng-model="user.email" required>\n        <input type="text" class="form-control" placeholder="Username" ng-model="user.username" required>\n        <input type="password" class="form-control" placeholder="Password" ng-model="user.password" required>\n        <button type="submit" class="btn btn-block btn-warning" ng-disabled="!signupForm.$valid"><strong>Sign Up</strong></button>\n      </form>\n    </tab>\n    </tabset>\n\n  </div>\n</div>')}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("auth/_signup.html",'<div class="page-header">\n  <h1>Sign Up</h1>\n</div>\n\n<form ng-submit="signup()">\n\n  <div class="input-group">\n    <input type="email" class="form-control" placeholder="Email" ng-model="user.email">\n  </div>\n\n  <div class="input-group">\n    <input type="text" class="form-control" placeholder="Username" ng-model="user.username">\n  </div>\n\n  <div class="input-group">\n    <input type="password" class="form-control" placeholder="Password" ng-model="user.password">\n  </div>\n\n  <div class="input-group">\n    <ui-select ng-model="universities.selected" theme="bootstrap" ng-disabled="disabled" reset-search-input="true" style="width: 300px;">\n      <ui-select-match placeholder="Select a University...">{{$select.selected.name}}</ui-select-match>\n        <ui-select-choices repeat="university in universities | filter: $select.search">\n          <div ng-bind-html="university.name | highlight: $select.search"></div>\n          <small>{{university.address}}</small>\n        </ui-select-choices>\n      </ui-select>\n  </div>\n\n  <input type="submit" class="btn btn-default" value="Sign Up!">\n</form>')}]),alchemy.controller("BuilderController",["$scope","$http","Auth","scenarios",function($scope,$http,Auth,scenarios){$scope.scenarios=scenarios,$scope.user=Auth.currentUser()}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("builder/_builder.html",'<!-- /////////////////////////////////\nSCENARIO BUILDER \n/////////////////////////////////////-->\n\n<div class="page-header">\n  <h3>Scenario Builder</h3>\n</div>\n\n<div class="row">\n  <div class="col-sm-8">\n    <div class="panel">\n      <div class="panel-heading"><h3 class="panel-title">Scenarios</h3></div>\n      <div class="panel-body" ng-hide="scenarios.length > 0">\n        <p>You haven\'t built any scenarios yet. Get building.</p>\n      </div>\n      <scenario-list></scenario-list>\n    </div>\n\n  </div>\n  <div class="col-sm-4">\n    <create-scenario></create-scenario>\n  </div>\n</div>')}]),alchemy.controller("NodeBuilderController",["$scope","$state","$modal","$stateParams","ScenarioApiClient","Util","node","Messages",function($scope,$state,$modal,$stateParams,ScenarioApiClient,Util,node,Messages){$scope.node=node,$scope.$on("scenario-tree:node-selected",function(event,params){var scenarioId=$stateParams.scenarioId;ScenarioApiClient.updateNode(scenarioId,$scope.node).then(function(){var nodeId=parseInt(params.nodes[0],10),stateParams={scenarioId:scenarioId,nodeId:nodeId};$state.go("nodeBuilder",stateParams)},function(error){Util.showRailsError(error)})}),$scope.getNodeTypeClass=function(node){return node.is_failure?"failure":node.is_goal?"goal":node.is_start?"start":"normal"},$scope.deleteNode=function(){var modal=Util.openConfirmationModal(Messages.Modals.DELETE_NODE_TITLE,Messages.Modals.DELETE_NODE_BODY);modal.result.then(function(){ScenarioApiClient.deleteNode($stateParams.scenarioId,$stateParams.nodeId).then(function(){goToStartNode()})})};var goToStartNode=function(){var scenarioId=$stateParams.scenarioId;ScenarioApiClient.getScenario(scenarioId).then(function(data){$state.go("nodeBuilder",{scenarioId:scenarioId,nodeId:data.root_node_id})})}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("builder/nodes/_build-nodes.html",'<div class="page-header">\n  <h2>{{node.scenario.name}}</h2>\n</div>\n\n<div class="row">\n\n  <div class="col-sm-7">\n\n    <div class="node-wrap panel">\n\n      <div class="panel-heading">\n\n        <div class="node-banner clearfix">\n\n          <div class="pull-left node-circle" ng-class="getNodeTypeClass(node)">\n            <span class="pointer" tooltip-placement="top" tooltip="{{node.id}} is a {{getNodeTypeClass(node)}} node">{{node.id}}</span>\n          </div>\n\n          <div class="pull-right">\n            <button type="submit" class="new-node-btn btn btn-success" ng-click="addNode()"><span class="glyphicon glyphicon-plus"></span> <strong>New Node</strong></button>\n\n          </div>\n        </div>\n\n      </div>\n\n      <div class="panel-body">\n        <node-form></node-form>\n      </div>\n\n    </div>\n\n    <button title="Delete Node" ng-hide="node.is_start" ng-click="deleteNode()" class="btn btn-danger pull-right">\n      <span><span class="glyphicon glyphicon-remove"></span> Delete</span>\n    </button>\n\n  </div>\n\n  <div class="col-sm-5">\n\n    <div class="panel">\n      <div class="panel-heading"><h3 class="panel-title">Scenario Tree</h3></div>\n\n      <div class="panel-body">\n        <scenario-tree current-node-id="{{node.id}}" scenario-id="{{node.scenario.id}}" tree-height="500px"></scenario-tree>\n      </div>\n\n      <ul class="list-group" ng-show="node.scenario.warnings.length != 0">\n        <li class="list-group-item list-group-item-default"><strong>Warnings</strong></li>\n        <li ng-repeat="warning in node.scenario.warnings" class="list-group-item list-group-item-warning">{{warning}}</li>\n      </ul>\n\n    </div>\n\n  </div>\n\n</div>')}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("builder/nodes/_confirm-delete-node.html",'<div class="modal-header">\n    <h3 class="modal-title">Delete Node</h3>\n</div>\n<div class="modal-body">\n    Are you sure you want to delete the node? This cannot be undone. You will be taken back to the start node.\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n</div>')}]),alchemy.factory("CourseApiClient",["$http",function($http){var o={courses:[]};return o.get=function(id){return $http.get("/courses/"+id+".json").then(function(res){return res.data})},o.getShowings=function(id){return $http.get("/courses/"+id+"/showings.json").then(function(res){return res.data})},o.getCourseReport=function(courseId){return $http.get("/courses/"+courseId+"/report").then(function(res){return res.data})},o.getShowingReport=function(showingId){return $http.get("/showings/"+showingId+"/report").then(function(res){return res.data})},o.getStudentShowingReport=function(showingId,studentId){var route="/showings/"+showingId+"/student_report?sid="+studentId;return $http.get(route).then(function(res){return res.data})},o.createCourse=function(course){return $http.post("/courses",course).then(function(res){return res.data})},o.getEnrolledCourses=function(){return $http.get("/courses.json").then(function(res){return res.data})},o.createShowing=function(courseId,showing){return $http.post("/courses/"+courseId+"/showings.json",showing).then(function(res){return res.data})},o}]),alchemy.controller("CourseController",["$scope","$state","CourseApiClient","SessionsApiClient","Auth","course","showings",function($scope,$state,CourseApiClient,SessionsApiClient,Auth,course,showings){$scope.course=course,$scope.showings=showings,$scope.pluralize=$scope.showings.length>1,$scope.open=function(showing){$scope.isSessionInactive(showing.user_session)?$scope.openResults(showing):$scope.openSession(showing)},$scope.getAttemptsHeader=function(isInstructor){return isInstructor?"Max Attempts":"Attempts Remaining"},$scope.statusClass=function(status){switch(status){case"completed":return"label-success";case"failed":return"label-danger";default:return"label-default"}},$scope.getAttemptsData=function(isInstructor,showing){var maxAttempts=showing.max_attempts;return showing.is_graded?isInstructor?maxAttempts:showing.user_session?showing.user_session.attempts_remaining:maxAttempts:"Unlimited"},$scope.formatStatus=function(status){return status?status.charAt(0).toUpperCase()+status.slice(1):"Not Started"},$scope.isSessionInactive=function(session){return session&&session.status&&session.status!==sessionTypes[0]},$scope.openSession=function(showing){var sessionId;showing.user_session?(sessionId=showing.user_session.id,$state.go("player",{sessionId:sessionId})):SessionsApiClient.createSession(showing.id).then(function(res){sessionId=res.id,$state.go("player",{sessionId:sessionId})})},$scope.openResults=function(showing){var sessionId=showing.user_session.id;$state.go("results",{sessionId:sessionId})};var sessionTypes=["ongoing","expired","failed","completed"]}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("courses/_courses.html",'<div class="page-header">\n  <h3>{{course.title}} <span ng-show="showings.length > 0"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> {{showings.length}} scenario{{pluralize ? "s" : ""}}</span></h3>\n</div>\n\n<div ng-if="currentUser.isInstructor">\n    <div class="panel">\n      <div class="panel-heading"><h3 class="panel-title">Assign a Scenario</h3></div>\n      <div class="panel-body">\n        <create-showing></create-showing>\n      </div>\n    </div>\n</div>\n\n<div class="panel" ng-hide="isInstructor || showings.length > 0">\n    <div class="panel-body">\n        There are currently no assigned scenarios for this course.\n    </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-4 col-md-4 showing-tile" ng-repeat="showing in showings | orderBy:\'-is_graded\'">\n\n    <div class="panel" ng-click="open(showing)">\n      <span class="new-win-icon glyphicon glyphicon-new-window" aria-hidden="true"></span>\n\n      <div class="text-center panel-body">\n        <h3>{{showing.display_name}}</h3>\n        <p>{{showing.start_time | date : format : timezone}} <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> {{showing.end_time | date : format : timezone}}</p>\n      </div>\n\n      <ul class="list-group">\n        <li class="list-group-item">\n          {{isInstructor ? "Max Attempts" : "Attempts Left"}}\n          <div class="pull-right">\n            <span class="label label-default">{{getAttemptsData(currentUser.isInstructor, showing)}}</span>\n          </div>\n        </li>\n\n        <li class="list-group-item">\n          Scenario Type\n          <div class="pull-right">\n            <span class="label" ng-class="{ \'label-danger\': showing.is_graded, \'label-primary\': !showing.is_graded }">{{showing.is_graded? "Graded" : "Practice"}}</span>\n          </div>\n        </li>\n\n        <li class="list-group-item">\n          Status\n          <div class="pull-right">\n            <span class="label" ng-class="statusClass(showing.user_session.status)">{{formatStatus(showing.user_session.status)}}</span>\n          </div>\n        </li>\n      </ul>\n    </div>\n\n  </div>\n</div><!-- end row -->\n')}]),alchemy.controller("DashboardController",["$rootScope","$scope","$stateParams","$http","enrolledCourses","Auth","Util",function($root,$scope,$stateParams,$http,enrolledCourses,Auth,Util){$scope.courses=enrolledCourses,$scope.setInstructorPermission=function(){return $http.put("/users/elevate_to_instructor.json",$scope.targetUser).then(function(data){Util.showAlert("success",data.data.success),$scope.targetUser.email=""},function(error){Util.showAlert("danger",error.data.failure),$scope.targetUser.email=""})},$scope.access=function(){var payload={access_code:$scope.accessCode};return $http.put("/courses/enroll",payload).then(function(resp){Util.showAlert("success","You have been successfully enrolled."),$scope.accessCode="",$scope.courses.push(resp.data)},function(error){error.data.error?Util.showAlert("danger",error.data.error):Util.showAlert("danger",error.data.user_id[0])})}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("dashboard/_dashboard.html",'<!-- /////////////////////////////////\n  DASHBOARD\n/////////////////////////////////////-->\n\n<div class="page-header">\n  <h3>Welcome back <span>{{currentUser.username}}</span></h3>\n</div>\n\n<div class="row">\n\n  <div class="col-sm-8">\n\n    <div class="panel">\n      <div class="panel-heading"><h3 class="panel-title">Courses</h3></div>\n      <div class="panel-body" ng-hide="courses.length > 0">\n        <p>You haven\'t enrolled in any classes yet.</p>\n      </div>\n      <!-- List group -->\n      <ul class="list-group">\n        <li ng-repeat="course in courses" class="list-group-item">\n          <h4><a href="#/courses/{{course.id}}">{{course.title}}</a></h4>\n          <small class="access-code" ng-show="currentUser.isInstructor">Access Code: {{course.access_code}}</small>\n        </li>\n      </ul>\n    </div>\n\n    <div class="panel" ng-show="currentUser.isInstructor">\n      <div class="panel-heading"><h3 class="panel-title">Create a New Course</h3></div>\n      <div class="panel-body">\n        <create-course></create-course>\n      </div>\n    </div>\n\n  </div>\n\n  <div class="col-sm-4">\n\n    <div class="panel">\n      <div class="panel-heading"><h2 class="panel-title">Enroll in a course</h2></div>\n      <div class="panel-body">\n        <form name="enrollmentForm" action="">\n          <div class="form-group">\n            <input type="text" class="form-control" ng-model="accessCode" id="access-code" placeholder="Enter access code..." required>\n          </div>\n          <button class="btn btn-warning" ng-click="access()" ng-disabled="!enrollmentForm.$valid">Enroll</button>\n        </form>\n      </div>\n    </div>\n\n    <div class="panel" ng-show="currentUser.isInstructor">\n      <div class="panel-heading"><h2 class="panel-title">Permission an instructor</h2></div>\n      <div class="panel-body">\n        <p>Give a user instructor privileges by entering the email they signed up with below.</p>\n        <form name="authenticationForm" ng-submit="setInstructorPermission()">\n          <div class="form-group">\n            <input type="email" class="form-control" placeholder="Email Address" ng-model="targetUser.email" required>\n          </div>\n          <button type="submit" class="btn btn-warning" ng-disabled="!authenticationForm.$valid">Permission</button>\n        </form>\n      </div>\n    </div>\n\n  </div>\n\n</div><!-- end row -->')}]),alchemy.controller("HomeController",["$scope","$stateParams",function(){console.log("HomeController loaded.")}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("home/_home.html",'<!-- /////////////////////////////////\n  HOME\n/////////////////////////////////////-->\n\n<div class="row">\n  <div class="col-xs-12">\n    <h1>Home</h1>\n    <p>The <strong>future</strong> home of the <strong>future</strong> of analytical chemistry</p>\n  </div>\n</div>')}]),alchemy.controller("NavController",["$location","$rootScope","$scope","$state","$stateParams","Auth",function($location,$rootScope,$scope,$state,$stateParams,Auth){$scope.signedIn=Auth.isAuthenticated,$scope.logout=Auth.logout,$scope.$on("devise:logout",function(){$rootScope.currentUser={},$state.go("login")}),$scope.isActive=function(path){return $location.path().substr(0,path.length)==path}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("nav/_nav.html",'<nav class="navbar navbar-default navbar-fixed-top" ng-controller="NavController">\n\n  <div class="navbar-header">\n    <a class="navbar-brand" href="#">\n      <img class="logo-img" src=\'/assets/alchemy-logo-ccc015b2560cd90ce8038308d825705c.png\' alt="logo">Alchemy\n    </a>\n  </div>\n\n  <ul class="nav navbar-nav pull-right">\n\n    <!-- if not signed in -->\n    <li ng-class="{active: isActive(\'/login\')}" ng-hide="signedIn()"><a href="#/login">Login / Sign Up</a></li>\n    <!-- end -->\n\n    <!-- if signed in -->\n    <li ng-show="signedIn()"><a><strong>{{currentUser.username}}</strong></a></li>\n    <li ng-class="{active: isActive(\'/dashboard\')}" ng-show="signedIn()"><a href="#/dashboard">Dashboard</a></li>\n    <li ng-class="{active: isActive(\'/reporting\')}" ng-show="currentUser.isInstructor"><a href="#/reporting">Reporting</a></li>\n    <li ng-class="{active: isActive(\'/builder\')}" ng-show="currentUser.isInstructor"><a href="#/builder">Scenario Builder</a></li>\n    <li ng-show="signedIn()"><a href="" ng-click="logout()">Log Out</a></li>\n    <!-- end -->\n\n  </ul>\n</nav>')}]),alchemy.controller("PlayerController",["$scope","$state","$modal","Auth","session","$stateParams","SessionsApiClient","Util",function($scope,$state,$modal,Auth,session,$stateParams,SessionsApiClient,Util){var decide=function(toNodeId){var toNode={to_node_id:toNodeId};$scope.justification&&session.node.requires_justification&&(toNode.justification=$scope.justification),SessionsApiClient.makeChoice(session.id,toNode).then(function(res){$scope.session=res,$scope.choices=res.node.choices,$scope.justification=res.previous_justification})},promptJustification=function(toNodeId,currJustification){var modal=$modal.open({templateUrl:"player/_justification-modal.html",size:"md",controller:["$scope",function($scope){$scope.newJustification=currJustification,$scope.ok=function(){modal.close($scope.newJustification)},$scope.cancel=function(){modal.dismiss("cancel")}}]});modal.result.then(function(newJustification){$scope.justification=newJustification,decide(toNodeId)})};$scope.session=session,$scope.choices=session.node.choices,$scope.justification=session.previous_justification,$scope.makeDecision=function(toNodeId){$scope.session.node.requires_justification?promptJustification(toNodeId,$scope.justification):decide(toNodeId)},$scope.restart=function(sessionId){SessionsApiClient.restartSession(sessionId).then(function(res){$scope.session=res,$scope.choices=res.node.choices,$scope.justification=res.previous_justification},function(error){Util.showRailsError(error)})},$scope.goToResults=function(sessionId){$state.go("results",{sessionId:sessionId})},$scope.goToCourses=function(courseId){$state.go("courses",{id:courseId})}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("player/_justification-modal.html",'\n<div class="modal-header">\n    <h4 class="modal-title">Justify Your Decision</h4>\n</div>\n\n<div class="modal-body">\n  <form name="justForm">\n  <div class="form-group">\n    <p>Please provide a brief justification as to why you made this choice. <small>(Max 1000 characters)</small></p>\n    <textarea class="form-control" id="justification" name="justification" rows="5" placeholder="Justification..." ng-required="true" ng-minlength="5" ng-maxlength="1000" ng-model="newJustification">{{newJustification}}</textarea>\n  </div>\n</div>\n\n<div class="modal-footer">\n    <button class="btn btn-warning" ng-disabled="!justForm.justification.$valid" ng-click="ok(newJustification)">Submit</button>\n    <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n</div>')}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("player/_player.html",'<div class="player-header page-header">\n  <h5>{{session.showing.course.title}}</h5>\n  <h3>{{session.showing.display_name}}</h3>\n  <hr class="visible-xs-block">\n  <p class="visible-xs-block">Attempts Left &mdash; {{session.attempts_remaining}}</p>\n</div>\n\n<div class="row player-card">\n  <div class="col-sm-8 col-sm-offset-2" ng-switch on="session.status">\n\n    <div class="panel panel-default" ng-switch-when="failed">\n      <failure-screen></failure-screen>\n    </div>\n\n    <div class="panel" ng-switch-default>\n      <div class="panel-body">\n        <img class="player-card-img img-responsive" ng-show="session.node.asset.image" src="{{session.node.asset.image}}">\n        <h3>{{session.node.title}}</h3>\n        <p>{{session.node.body}}</p>\n      </div>\n\n      <ul class="list-group">\n        <li ng-repeat="choice in choices" class="list-group-item"><button type="button" class="btn btn-default btn-md btn-block" ng-click="makeDecision(choice.to_node_id)">{{choice.text}}</button>\n        </li>\n      </ul>\n    </div>\n\n    <button ng-show="session.node.is_failure && session.status != \'failed\'" type="button" class="btn btn-warning btn-lg btn-block" ng-click="restart(session.id)">\n      <span class="glyphicon glyphicon-repeat"></span> Restart</button>\n\n    <button ng-show="session.node.is_goal && session.showing.is_graded && !currentUser.isInstructor" type="button" class="btn btn-success btn-lg btn-block" ng-click="goToResults(session.id)"><span class="glyphicon glyphicon-ok"></span> Show Results</button>\n\n    <button ng-show="session.node.is_goal && (!session.showing.is_graded || currentUser.isInstructor)"type="button" class="btn btn-warning btn-lg btn-block" ng-click="restart(session.id)"> <span class="glyphicon glyphicon-repeat"></span> Restart</button>\n\n    <button ng-show="session.node.is_goal && !session.showing.is_graded" type="button" class="btn btn-warning btn-lg btn-block" ng-click="goToCourses(session.showing.course.id)"> Back to Dashboard</button>\n\n  </div>\n\n  <div class="col-xs-2 hidden-xs" ng-hide="currentUser.isInstructor || !session.showing.is_graded" ng-show="session.showing.is_graded">\n    <div class="attempts-count" >\n      <p class="count">{{session.attempts_remaining}}</p>\n      <hr/>\n      <p class="desc">Attempts Left</p>\n    </div>\n  </div>\n\n</div>')}]),alchemy.controller("ReportingController",["$scope","CourseApiClient","courses",function($scope,CourseApiClient,courses){$scope.courses=courses,$scope.courseTreeData=[{label:"Courses",children:_.map(courses,function(course){var gradedShowings=_.filter(course.showings,function(showing){return showing.is_graded}),courseShowings=_.map(gradedShowings,function(showing){return{label:showing.display_name,data:{id:showing.id},onSelect:function(branch){var showingId=branch.data.id;$scope.selectedStudentUsername=null,$scope.studentReport={},CourseApiClient.getShowingReport(showingId).then(function(report){$scope.reportType="showing",$scope.report=report,$scope.showing=branch,$scope.showing.reportType="Summary",$scope.studentShowingGrid.data=report.sessions,$scope.studentShowingGrid.columnDefs=showingColumnDefs})}}});return{label:course.title,data:{id:course.id},onSelect:function(branch){var courseId=branch.data.id;$scope.selectedStudentUsername=null,CourseApiClient.getCourseReport(courseId).then(function(report){$scope.reportType="course",$scope.courseTitle=report.title,$scope.report=report.report,$scope.studentCourseGrid.data=report.students,$scope.studentCourseGrid.columnDefs=courseColumnDefs})},noLeaf:!0,children:courseShowings}})}],$scope.studentCourseGrid={},$scope.studentShowingGrid={enableRowSelection:!0,multiSelect:!1,enableRowHeaderSelection:!1,selectionRowHeaderWidth:35,rowHeight:35,showGridFooter:!0},$scope.studentShowingGrid.onRegisterApi=function(gridApi){$scope.gridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){var selectedStudent=getSelectedStudentId(row);selectedStudent?CourseApiClient.getStudentShowingReport($scope.showing.data.id,selectedStudent.id).then(function(report){$scope.studentReport=report,$scope.selectedStudentUsername=selectedStudent.username}):($scope.studentReport={},$scope.selectedStudentUsername=null)})},$scope.hasAverage=function(){return $scope.report.courseAverage&&"N/A"!=$scope.report.courseAverage};var getSelectedStudentId=function(row){var allRows=row.grid.rows,selected=_.find(allRows,{isSelected:!0});return selected?{id:selected.entity.user_id,username:selected.entity.username}:{}},showingColumnDefs=[{field:"user_id",displayName:"Student ID"},{field:"username",displayName:"Username"},{field:"num_failures",displayName:"Number Failures"},{field:"status",displayName:"Status"}],courseColumnDefs=[{field:"user_id",displayName:"Student ID"},{field:"username",displayName:"Username"},{field:"average",displayName:"Average"}]}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("reporting/_reporting.html",'\n<div class="page-header">\n  <h3>Reporting \n  <span ng-if="reportType == \'showing\'"><span class="glyphicon glyphicon-chevron-right"></span> {{showing.label}}</span>\n  <span ng-if="reportType == \'course\'"><span class="glyphicon glyphicon-chevron-right"></span> {{courseTitle}}</span></h3>\n</div>\n\n<div class="row">\n  <div class="col-md-4">\n    <div class="reporting-tree panel">\n      <div class="panel-body">\n        <abn-tree tree-data="courseTreeData"></abn-tree>\n      </div>\n    </div>\n  </div>\n\n  <div ng-switch="reportType">\n\n    <div ng-switch-when="showing">\n      <div class="col-md-8" ng-show="report">\n\n        <div class="report-btn-bar btn-group">\n          <label class="btn btn-default" ng-model="showing.reportType" btn-radio="\'Summary\'">Summary</label>\n          <label class="btn btn-default" ng-model="showing.reportType" btn-radio="\'By Student\'">By Student</label>\n        </div>\n\n        <!-- Summary -->\n        <div ng-if="showing.reportType === \'Summary\' && report.summaries">\n\n          <div class="panel panel-default">\n            <div class="panel-heading">\n              <h3 class="panel-title">Class Decision Overview <small>(Wider edges are more traveled)</small></h3>\n            </div>\n            <div class="panel-body">\n              <reporting-tree tree-height="400px" choices="report.choices" decisions="report.decisions" nodes="report.nodes"></reporting-tree>\n            </div>\n          </div>\n\n          <div class="row">\n\n            <div class="col-sm-6">\n\n              <div class="panel panel-default">\n                <div class="panel-heading"><h3 class="panel-title">Average No. Failures</small></h3></div>\n                <div class="panel-body text-center">{{report.summaries.class_average_num_failures}} / {{report.summaries.max_attempts_allowed}}</div>\n              </div>\n\n            </div>\n\n            <div class="col-sm-6">\n              <div class="panel panel-default">\n\n                <div class="panel-heading">\n                  <h3 class="panel-title">Completion Status</h3> \n                </div>\n\n                <div class="panel-body">\n                  <span ng-show="report.summaries.num_students_completed">\n                    <strong>Completed</strong>\n                    <span class="text-right badge">{{report.summaries.num_students_completed}}</span> \n                  </span>\n                  <span ng-show="report.summaries.num_students_failed">\n                    <strong>Failed</strong>\n                    <span class="badge">{{report.summaries.num_students_failed}}</span> \n                  </span>\n                  <span ng-show="report.summaries.num_students_ongoing">\n                    <strong>Ongoing</strong>\n                    <span class="badge">{{report.summaries.num_students_ongoing}}</span> \n                  </span>\n                  <span ng-show="report.summaries.num_students_expired">\n                    <strong>Expired</strong>\n                    <span class="badge">{{report.summaries.num_students_expired}}</span> \n                  </span>\n                </div><!-- close panel-body -->\n              </div><!-- close panel -->\n\n            </div><!-- close col -->\n          </div>\n\n      </div>\n\n      <div ng-if="showing.reportType === \'By Student\'">\n\n        <div class="panel panel-default">\n          <div class="panel-heading">\n            <h3 class="panel-title" ng-if="!selectedStudentUsername">Individual Decision Overview <small>(Wider edges are more traveled)</small></h3>\n            <h3 class="panel-title" ng-if="selectedStudentUsername">{{selectedStudentUsername}}\'s Decision Overview <small>(Wider edges are more traveled)</small></h3>\n          </div>\n          <div class="panel-body">\n            <reporting-tree tree-height="400px" choices="studentReport.choices" decisions="studentReport.decisions" nodes="studentReport.nodes"></reporting-tree>\n          </div>\n        </div>\n\n        <div ui-grid="studentShowingGrid" ui-grid-selection class="student-grid"></div>\n      </div>\n\n    </div>\n  </div>\n\n  <div ng-switch-when="course">\n    <div class="col-sm-8">\n\n      <div class="row">\n        <div class="col-sm-9">\n\n          <div ui-grid="studentCourseGrid" class="student-grid"></div>\n\n        </div>\n\n        <div class="col-sm-3">\n\n          <div class="panel full-course-report">\n            <div class="panel-heading"><h3 class="panel-title">Course Average</h3></div>\n            <div class="panel-body"><h1>{{report.courseAverage}}<span ng-if="hasAverage()">%</span></h1></div>\n          </div>\n        </div>\n\n      </div>\n\n    </div>\n  </div>\n\n  <div ng-switch-default>\n    <div class="col-md-8">\n\n      <div class="panel">\n        <div class="panel-body">\n          Select a Course or a Scenario to view a report.\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n</div>\n\n  </div>')}]),alchemy.controller("ResultsController",["$scope","$state","session","$stateParams","SessionsApiClient","Util",function($scope,$state,session){console.log("ResultsController loaded."),$scope.session=session,$scope.goToCourses=function(courseId){$state.go("courses",{id:courseId})}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("results/_results.html",'<div class="player-header page-header">\n  <h5>{{session.showing.course.title}}</h5>\n  <h3>{{session.showing.display_name}}</h3>\n  <hr>\n  <p>Results</p>\n</div>\n\n<div class="results row">\n  <div class="col-sm-8 col-sm-offset-2">\n\n    <div class="panel">\n      <div class="panel-heading"><h3 class="panel-title">Results</h3></div>\n      <div class="panel-body">\n        <h1>{{session.attempts_remaining}}/{{session.showing.max_attempts}}</h1>\n        <p>Attempts Left</p>\n      </div>\n    </div>\n        <button type="button" class="btn btn-default btn-lg btn-block" ng-click="goToCourses(session.showing.course.id)">Back to Dashboard</button>\n\n  </div>\n</div>')
}]),alchemy.factory("ScenarioApiClient",["$http",function($http){var client={};return client.copyScenario=function(scenarioId,newName,newDescription){return $http.post("/scenarios/"+scenarioId+"/copy",{name:newName,description:newDescription}).then(function(res){return res.data})},client.getScenarios=function(){return $http.get("/scenarios/").then(function(res){return res.data})},client.getScenario=function(scenarioId){return $http.get("/scenarios/"+scenarioId).then(function(res){return res.data})},client.getNode=function(scenarioId,nodeId){var baseUrl=formatBaseNodeUrl(scenarioId,nodeId);return $http.get(baseUrl).then(function(res){return res.data})},client.getNodes=function(scenarioId){return $http.get("/scenarios/"+scenarioId+"/nodes").then(function(res){return res.data})},client.updateNode=function(scenarioId,node){var baseUrl=formatBaseNodeUrl(scenarioId,node.id);return $http.put(baseUrl,node).then(function(res){return res.data})},client.createNode=function(scenarioId){return $http.post("/scenarios/"+scenarioId+"/nodes",{}).then(function(res){return res.data})},client.deleteNode=function(scenarioId,nodeId){var baseUrl=formatBaseNodeUrl(scenarioId,nodeId);return $http["delete"](baseUrl).then(function(res){return res.data})},client.createChoice=function(scenarioId,nodeId){var newChoice={choice:{text:""}},baseUrl=formatBaseNodeUrl(scenarioId,nodeId);return $http.post(baseUrl+"/choices",newChoice).then(function(res){return res.data})},client.deleteChoice=function(scenarioId,nodeId,choice){var baseUrl=formatBaseNodeUrl(scenarioId,nodeId);return $http["delete"](baseUrl+"/choices/"+choice.id).then(function(res){return res.data})},client.getChoices=function(scenarioId,nodeId){var baseUrl=formatBaseNodeUrl(scenarioId,nodeId);return $http.get(baseUrl+"/choices").then(function(res){return res.data})},client.updateChoice=function(scenarioId,nodeId,choice){var baseUrl=formatBaseNodeUrl(scenarioId,nodeId);return $http.put(baseUrl+"/choices/"+choice.id,choice).then(function(res){return res.data})},client.createScenario=function(scenario){return $http.post("/scenarios.json",scenario).then(function(res){return res.data})},client.getAllScenarios=function(){return $http.get("/scenarios.json").then(function(res){return res.data})},client.getTree=function(scenarioId){var route="/scenarios/"+scenarioId+"/tree";return $http.get(route)},client.updateScenario=function(scenario,scenarioName){return $http.put("/scenarios/"+scenario.id,{name:scenarioName}).then(function(res){return res.data})},client}]),alchemy.factory("Util",["$rootScope","$modal",function($rootScope,$modal){var u={};u.showAlert=function(type,msg){var alert={type:type,msg:msg};alertAlreadyExists(alert)||$rootScope.alerts.push(alert)},u.showRailsError=function(error){var errorKeys=Object.keys(error.data);_.each(errorKeys,function(errorKey){var formattedKey=capitalize(errorKey),keyErrors=error.data[errorKey];_.each(keyErrors,function(currentError){var alert={type:"danger",msg:formattedKey+" "+currentError};alertAlreadyExists(alert)||$rootScope.alerts.push(alert)})})},u.showRegistrationError=function(error){var error=formatRegistrationError(error),alert={type:"danger",msg:error};$rootScope.alerts.push(alert)},u.openConfirmationModal=function(title,body){var modalInstance=$modal.open({templateUrl:"_confirmation-modal.html",size:"md",controller:["$scope",function($scope){$scope.modalTitle=title,$scope.modalBody=body,$scope.ok=function(){modalInstance.close()},$scope.cancel=function(){modalInstance.dismiss("cancel")}}]});return modalInstance};var alertAlreadyExists=function(alert){return _.find($rootScope.alerts,function(a){return alert.msg===a.msg&&alert.type===a.type})};return u}]),alchemy.factory("SessionsApiClient",["$http",function($http){var o={sessions:[]};return o.createSession=function(showingId){return $http.post("/showings/"+showingId+"/session").then(function(res){return res.data})},o.getSession=function(sessionId){return $http.get("/sessions/"+sessionId).then(function(res){return res.data})},o.makeChoice=function(sessionId,toNode){return $http.post("/sessions/"+sessionId+"/decide",toNode).then(function(res){return res.data})},o.restartSession=function(sessionId){var sessionIdObject={session_Id:sessionId};return $http.post("/sessions/"+sessionId+"/restart",sessionIdObject).then(function(res){return res.data})},o}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("_confirmation-modal.html",'<div class="modal-header">\n    <h3 class="modal-title">{{modalTitle}}</h3>\n</div>\n<div class="modal-body">\n    {{modalBody}}\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n</div>')}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("courses/_create-course-form.html",'<form name="createCourseForm">\n    <div class="form-inline">\n        <input type="text" class="form-control" ng-model="course.title" placeholder="Course Title" ng-minlength="3" required>\n      <button type="submit" class="btn btn-warning" ng-click="createCourse(course)" ng-disabled="!createCourseForm.$valid">Create</button>\n    </div>\n</form>')}]),alchemy.directive("createCourse",["CourseApiClient","Util",function(CourseApiClient,Util){return{restrict:"E",templateUrl:"courses/_create-course-form.html",controller:["$scope","$element",function($scope){$scope.createCourse=function(course){return CourseApiClient.createCourse(course).then(function(data){Util.showAlert("success","Created course "+data.title),$scope.courses.push(data),$scope.course.title=""},function(error){Util.showRailsError(error),$scope.course.title=""})}}]}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("courses/showings/_create-showing-form.html",'<div class="create-showing row" ng-switch="scenarios.length">\n  <div class="col-xs-12">\n    <div ng-switch-when="0">You have no scenarios to assign.</div>\n\n    <div class="row">\n      <div class="col-xs-12">\n\n        <form ng-switch-default name="showingForm" novalidate class="form-horizontal">\n\n          <div class="create-showing-row-1 row">\n\n            <div class="col-xs-12 col-sm-6">\n\n              <ui-select class="scenario-select" ng-model="scenario.selected" theme="bootstrap" ng-disabled="disabled" reset-search-input="true" required>\n              <ui-select-match placeholder="Select a scenario...">{{$select.selected.name}}</ui-select-match>\n              <ui-select-choices repeat="scenario in scenarios | filter: $select.search">\n              <div ng-bind-html="scenario.name | highlight: $select.search"></div>\n              <small>{{scenario.description}}</small>\n              </ui-select-choices>\n              </ui-select>\n\n            </div><!-- /col -->\n\n            <div class="col-xs-12 col-sm-3">\n\n              <ui-select class="showing-type-select" ng-model="scenario.type" theme="bootstrap" ng-disabled="disabled" reset-search-input="true" required>\n              <ui-select-match placeholder="Scenario Type">{{$select.selected}}</ui-select-match>\n              <ui-select-choices repeat="type in scenarioTypes | filter: $select.search">\n              <div ng-bind-html="type | highlight: $select.search"></div>\n              </ui-select-choices>\n              </ui-select>\n\n            </div>\n\n            <div class="col-xs-12 col-sm-3">\n              <input class="attempts-setting" type="number" name="maxAttempts" placeholder="Maximum attempts" class="form-control" ng-if="scenario.type === scenarioTypes[0]" ng-model="scenario.max_attempts" ng-required="true" close-text="Close" min="1" max="1000" required/>\n              <span style="color:red" ng-show="showingForm.maxAttempts.$error.min">Must be greater than 0</span>\n              <span style="color:red" ng-show="showingForm.maxAttempts.$error.max">Must be less than or equal to 1000</span>\n            </div>\n\n          </div><!-- /.row -->\n\n          <div class="row">\n\n            <div class="col-xs-12 col-sm-6">\n\n              <p class="input-group">\n                <input type="text" placeholder="Start Date" class="form-control" datepicker-popup="{{format}}" ng-model="scenario.start_time" is-open="$parent.opened1" datepicker-options="dateOptions" close-text="Close" required/>\n                <span class="input-group-btn">\n                  <button type="button" class="btn btn-default" ng-click="open($event, \'opened1\')"><i class="glyphicon glyphicon-calendar"></i></button>\n                </span>\n              </p>\n\n            </div>\n\n            <div class="col-xs-12 col-sm-6">\n\n              <p class="input-group">\n                <input type="text" placeholder="End Date" class="form-control" datepicker-popup="{{format}}" ng-model="scenario.end_time" is-open="$parent.opened2" datepicker-options="dateOptions" close-text="Close" required/>\n                <span class="input-group-btn">\n                  <button type="button" class="btn btn-default" ng-click="open($event, \'opened2\')"><i class="glyphicon glyphicon-calendar"></i></button>\n                </span>\n              </p>\n\n            </div>\n\n          </div><!-- /row -->\n\n          <button type="submit" class="btn btn-warning" ng-click="createShowing(scenario)" ng-disabled="!showingForm.$valid">Assign</button>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n</div>')}]),alchemy.directive("createShowing",["$stateParams","ScenarioApiClient","CourseApiClient","Util","Messages",function($stateParams,ScenarioApiClient,CourseApiClient,Util,Messages){return{restrict:"E",templateUrl:"courses/showings/_create-showing-form.html",controller:["$scope","$element",function($scope){ScenarioApiClient.getAllScenarios().then(function(data){$scope.scenarios=data}),$scope.scenario={},$scope.createShowing=function(showing){if(showing.start_time>showing.end_time)return void Util.showAlert("warning","Start date must be before end date.");var modal=Util.openConfirmationModal(Messages.Modals.CREATE_SHOWING_TITLE,Messages.Modals.CREATE_SHOWING_BODY);modal.result.then(function(){return showing.name=showing.selected.name,showing.scenario_id=showing.selected.id,showing.is_graded=showing.type===$scope.scenarioTypes[0],CourseApiClient.createShowing($stateParams.id,showing).then(function(data){$scope.showings.push(data),$scope.scenario.start_time="",$scope.scenario.end_time="",$scope.scenario.selected="",$scope.scenario.type="",$scope.scenario.max_attempts="",Util.showAlert("success","Assigned scenario "+showing.name)},function(error){Util.showRailsError(error)})})},$scope.open=function($event,opened){$event.preventDefault(),$event.stopPropagation(),$scope[opened]=!0},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.format="dd-MMMM-yyyy",$scope.scenarioTypes=["Graded","Practice"]}]}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("nodes/_build-node-form.html",'<form>\n\n<div class="row">\n    <div class="col-sm-6">\n\n      <div class="form-group">\n        <div class="empty-img" ng-click="openImageModal()" ng-show="!node.asset">\n          <p><span class="glyphicon glyphicon-picture"></span> Add Picture</p>\n        </div>\n\n        <div class="node-img-wrap" ng-show="node.asset">\n          <button class="btn btn-danger delete-img" ng-click="removeImage(node)">\n            <span>&times; <small>Remove</small></span>\n          </button>\n          <img ng-click="openImageModal()" ng-src="{{node.asset.image}}" class="img-responsive">\n        </div>\n      </div>\n\n      <div class="form-group" ng-hide="{{node.is_start}}">\n          <strong>Node Type:</strong>\n          <input type="radio" ng-model="node.type" id="regular" value="regular" name="nodeTypeGroup" ng-click="updateNodeType(node)"> <label for="regular" class="node-type-btn">Regular</label>\n          <input type="radio" ng-model="node.type" id="goal" value="goal" name="nodeTypeGroup" ng-click="updateNodeType(node)"> <label for="goal" class="node-type-btn">Goal</label>\n          <input type="radio" ng-model="node.type" id="failure" value="failure" name="nodeTypeGroup" ng-click="updateNodeType(node)"> <label for="failure" class="node-type-btn">Failure</label>\n      </div>\n\n      <div class="form-group">\n        <strong>Requires Justification:</strong> <input type="checkbox" ng-click="updateNode(node, fields.justification)" ng-model="node.requires_justification">\n      </div>\n\n    </div>\n\n    <div class="col-sm-6">\n\n      <div class="form-group">\n        <label for="node-title">Title</label>\n        <input type="text" class="form-control" id="node-title" ng-blur="updateNode(node, fields.title)" ng-model="node.title" placeholder="Title" value="node.title" required>\n      </div>\n\n      <div class="form-group">\n        <label for="node-desc">Body</label>\n        <textarea type="text" class="node-desc form-control" id="node-desc" ng-blur="updateNode(node, fields.body)" ng-model="node.body" placeholder="Body" value="node.body" required></textarea>\n      </div>\n\n    </div>\n\n  </div><!-- /row -->\n\n  <div class="row">\n    <div class="col-xs-12">\n\n      <node-choices></node-choices>\n\n    </div>\n  </div>\n\n</form>')}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("nodes/_node-choices.html",'<div ng-repeat="choice in choices" class="input-group" style="margin-bottom: 15px;">\n  <div class="input-group-btn">\n    <ui-select ng-model="choice.selected" theme="bootstrap" ng-disabled="disabled" reset-csearch-input="true" style="width:75px;">\n    <ui-select-match placeholder="{{choice.to_node_id || \'Link\'}}">{{choice.to_node_id}}</ui-select-match>\n    <ui-select-choices repeat="node in filterCurrentNode(nodes) | filter: $select.search">\n    <div ng-bind-html="node.id | highlight: $select.search" ng-click="updateChoiceLink(choice, node)"></div>\n    </ui-select-choices>\n    </ui-select>\n  </div><!-- /btn-group -->\n\n  <input type="text" placeholder="Choice description..." class="form-control" ng-model="choice.text" ng-blur="updateChoice(choice)" aria-label="...">\n\n  <span class="input-group-btn">\n    <button title="Delete this choice" class="btn btn-default" type="button" ng-click="deleteChoice(choice)"><span class="glyphicon glyphicon-remove"></span></button>\n  </span>\n</div><!-- /input-group -->\n\n\n<p>\n  <span ng-if="node.is_goal || node.is_failure" tooltip-placement="top" tooltip="Failure and goal nodes cannot have choices.">\n    <button disabled class="btn btn-warning" ng-click="createChoice()"><span class="glyphicon glyphicon-plus"></span> Add Choice</button>\n  </span>\n  <button ng-if="!node.is_goal && !node.is_failure" class="btn btn-warning" ng-click="createChoice()"><span class="glyphicon glyphicon-plus"></span> Add Choice</button>\n</p>')}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("nodes/_select-image-modal.html",'<div class="modal-header">\n  <h3 class="modal-title">Select An Image</h3>\n</div>\n\n<div class="modal-body">\n  <alert type="{{imageAlert.type}}" ng-show="imageAlert" close="imageAlert.close();">{{imageAlert.msg}}</alert>\n  <div class="assets-grid row">\n    <div class="col-sm-4" ng-repeat="asset in assets">\n      <img class="img-responsive" ng-src="{{asset.thumbnail}}" ng-click="setNodeAsset(asset)"/>\n    </div>\n  </div>\n</div>\n\n<div id="image-modal-footer" class="modal-footer">\n  <input type="file" ng-file-select="" ng-model="image" name="file" accept="image/*" required="">\n  <button ladda="imageUploading" class="btn-upload" ng-disabled="!image-modal-footer.$valid" data-size="s" data-color="yellow" data-style="expand-left" ng-click="upload(image)">Upload New</button>\n  <button class="btn btn-default btn-md" ng-click="cancel()">Cancel</button>\n</div>')}]),alchemy.controller("imageModal",["$scope","$upload","$modalInstance","assets","Util","Messages",function($scope,$upload,$modalInstance,assets,Util,Messages){var BYTES_PER_MEGABYTE=1048576;$scope.assets=assets,$scope.upload=function(file){return file[0].size>=3*BYTES_PER_MEGABYTE?void($scope.imageAlert={type:"warning",msg:Messages.Warnings.MAX_IMAGE_SIZE,close:function(){$scope.imageAlert=null}}):void $upload.upload({url:"/assets",method:"POST",file:file,fileFormDataName:"image"}).progress(function(evt){var progress=evt.loaded/evt.total;$scope.imageUploading=progress}).success(function(data){$scope.imageUploading=!1,$scope.assets.push(data)}).error(function(error){$scope.imageUploading=!1,Util.showRailsError(error)})},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.setNodeAsset=function(asset){$modalInstance.close(asset)}}]),alchemy.directive("nodeChoices",["$rootScope","$state","$stateParams","ScenarioApiClient","Util",function($rootScope,$state,$stateParams,ScenarioApiClient,Util){return{restrict:"E",templateUrl:"nodes/_node-choices.html",controller:["$scope","$element",function($scope){ScenarioApiClient.getChoices($stateParams.scenarioId,$stateParams.nodeId).then(function(data){$scope.choices=data}),ScenarioApiClient.getNodes($stateParams.scenarioId).then(function(data){$scope.nodes=data}),$scope.createChoice=function(){var numChoices=$scope.choices.length;return numChoices>=5?void Util.showAlert("warning","Cannot add more than 5 choices."):void ScenarioApiClient.createChoice($stateParams.scenarioId,$stateParams.nodeId).then(function(data){$scope.choices.push(data),$rootScope.$broadcast("node:update","createChoice")},function(){})},$scope.filterCurrentNode=function(nodes){var currentNodeId=parseInt($stateParams.nodeId,10);return _.filter(nodes,function(node){return node.id!==currentNodeId})},$scope.deleteChoice=function(choice){ScenarioApiClient.deleteChoice($stateParams.scenarioId,$stateParams.nodeId,choice).then(function(){var removedChoice=$scope.choices.indexOf(choice);$scope.choices.splice(removedChoice,1),$rootScope.$broadcast("node:update","deleteChoice")})},$scope.updateChoice=function(choice){ScenarioApiClient.updateChoice($stateParams.scenarioId,$stateParams.nodeId,choice).then(function(){$rootScope.$broadcast("node:update","updateChoice")},function(){})},$scope.formatChoiceText=function(text){return""===text?"Enter Choice Text":text},$scope.updateChoiceLink=function(choice,to_node){$scope.updateChoice({id:choice.id,to_node_id:to_node.id});var updatedChoice=$scope.choices.indexOf(choice);$scope.choices[updatedChoice].to_node_id=to_node.id},$scope.clearChoiceLink=function(choice){$scope.updateChoice({id:choice.id,to_node_id:null});var updatedChoice=$scope.choices.indexOf(choice);$scope.choices[updatedChoice].to_node_id="N/A"}}]}}]),alchemy.directive("nodeForm",["$rootScope","$state","$stateParams","$modal","ScenarioApiClient","Util","Messages",function($rootScope,$state,$stateParams,$modal,ScenarioApiClient,Util,Messages){return{restrict:"E",templateUrl:"nodes/_build-node-form.html",controller:["$scope","$upload","$element",function($scope,$upload){function getNodeType(node){return node.is_failure||node.is_goal?node.is_failure&&!node.is_goal?"failure":!node.is_failure&&node.is_goal?"goal":void 0:"regular"}$scope.$on("node:update",function(){ScenarioApiClient.getNode($stateParams.scenarioId,$stateParams.nodeId).then(function(data){$scope.node=data,$scope.node.type=getNodeType(data)})}),$scope.node.type=getNodeType($scope.node),$scope.updateNode=function(node){if(isGoalOrFailureWithChoices(node)){var modal=Util.openConfirmationModal(Messages.Modals.REMOVE_CHOICES_TITLE,Messages.Modals.REMOVE_CHOICES_BODY);modal.result.then(function(){$scope.choices=[],saveNode(node)},function(){resetToRegularNode()})}else saveNode(node)},$scope.updateNodeType=function(node){switch(node.type){case"regular":node.is_goal=!1,node.is_failure=!1;break;case"goal":node.is_goal=!0,node.is_failure=!1;break;case"failure":node.is_goal=!1,node.is_failure=!0}$scope.updateNode(node)},$scope.addNode=function(){return ScenarioApiClient.createNode($stateParams.scenarioId).then(function(data){$state.go("nodeBuilder",{scenarioId:$stateParams.scenarioId,nodeId:data.id})})},$scope.removeImage=function(node){node.asset_id=null,$scope.updateNode(node)&&($scope.node.asset=null)},$scope.upload=function(file){$upload.upload({url:"/assets",method:"POST",file:file,fileFormDataName:"image"})},$scope.openImageModal=function(){var modalInstance=$modal.open({templateUrl:"nodes/_select-image-modal.html",size:"md",controller:"imageModal",resolve:{assets:["AssetApiClient",function(AssetApiClient){return AssetApiClient.getAssets()}]}});modalInstance.result.then(function(asset){ScenarioApiClient.updateNode($stateParams.scenarioId,{id:$stateParams.nodeId,asset_id:asset.id}).then(function(){$scope.node.asset=asset})},function(){})};var saveNode=function(node){return ScenarioApiClient.updateNode($stateParams.scenarioId,node).then(function(){Util.showAlert("success","Saved current node."),$rootScope.$broadcast("node:update","updateNode")},function(error){return Util.showRailsError(error),!1})},isGoalOrFailureWithChoices=function(node){return(node.is_goal||node.is_failure)&&hasChoices(node)},hasChoices=function(node){return node.choices&&node.choices.length>0},resetToRegularNode=function(){$scope.node.type="regular",$scope.node.is_failure=!1,$scope.node.is_goal=!1}}]}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("player/_failure-screen.html",'<div class="session-failure panel-body">\n  <h3><span class="glyphicon glyphicon-remove"></span><br/>You have exceeded the maximum allowed attempts.</h3>\n  <button class="btn btn-warning btn-block" ng-click="returnToCourse(session.showing.course)">Return to Dashboard</button>\n</div>\n')}]),alchemy.directive("failureScreen",["$state",function($state){return{restrict:"E",templateUrl:"player/_failure-screen.html",controller:["$scope",function($scope){$scope.returnToCourse=function(course){$state.go("courses",{id:course.id})}}]}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("reporting/_reporting_tree.html",'<div class="reporting-tree"></div>')}]),alchemy.directive("reportingTree",["ScenarioApiClient","Util",function(){var defaultFor=function(arg,val){return"undefined"!=typeof arg?arg:val};return{restrict:"E",scope:{choices:"=",decisions:"=",nodes:"="},templateUrl:"reporting/_reporting_tree.html",replace:!0,link:function(scope,element,attrs){var display=element[0],options={width:defaultFor(attrs.treeWidth,"100%"),height:defaultFor(attrs.treeHeight,"100%"),smoothCurves:!0,stabilize:!0,selectable:!1,nodes:{radius:10,fontColor:"white",fontSize:"16"},edges:{color:"black",style:"arrow",arrowScaleFactor:.3,labelAlignment:"line-above"},tooltip:{delay:50,fontColor:"black",fontSize:12,fontFace:"arial",color:{border:"#666",background:"#FFFFC6"}},hierarchicalLayout:{layout:"direction",direction:"UD"}};display.style.width=options.width,display.style.height=options.height;var draw=function(){if(scope.choices){var edges=scope.choices;scope.decisions&&(edges=scope.choices.concat(scope.decisions));{var data={nodes:scope.nodes,edges:edges,options:options};new vis.Network(display,data,options)}}};scope.$watch("choices",function(){draw()})}}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("scenarios/_create-scenario-form.html",'<accordion class="scenario-accordion">\n<accordion-group heading="Create New Scenario">\n<form class="form-horizontal" name="forms.newScenarioForm">\n  <div class="form-group">\n    <input type="text" class="form-control" name="text" ng-model="scenario.name" placeholder="New Scenario Name" ng-required="true" ng-minlength="4" ng-maxlength="50">\n    <span style="color:red" ng-show="forms.newScenarioForm.text.$error.required && forms.newScenarioForm.text.$dirty">Please enter a scenario name</span>\n    <span style="color:red" ng-show="forms.newScenarioForm.text.$error.minlength">Name is too short (minimum is 4 characters)</span>\n    <span style="color:red" ng-show="forms.newScenarioForm.text.$error.maxlength">Name is too long (maximum is 50 characters)</span>\n  </div>\n  <div class="form-group">\n    <textarea class="form-control" id="description" placeholder="New Scenario Description"ng-model="scenario.description" rows="3"></textarea>\n  </div>\n  <div class="form-group">\n    <button type="submit" class="btn btn-warning" ng-click="createScenario(scenario)" ng-disabled="!forms.newScenarioForm.text.$valid">Create</button>\n  </div>\n</form>\n</accordion-group>\n<accordion-group heading="Create From Existing Scenario">\n<form class="form-horizontal" name="forms.copyScenarioForm">\n  <div class="form-group">\n    <ui-select ng-model="scenario.toCopy" theme="bootstrap" ng-disabled="disabled" reset-search-input="true" style="max-width: 300px;" required>\n    <ui-select-match placeholder="Select Existing Scenario">{{$select.selected.name}}</ui-select-match>\n    <ui-select-choices repeat="scenario in scenarios | filter: $select.search">\n    <div ng-bind-html="scenario.name | highlight: $select.search"></div>\n    <small>{{scenario.description}}</small>\n    </ui-select-choices>\n    </ui-select>\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" ng-model="scenario.newName" placeholder="New Scenario Name" ng-minlength="4" ng-maxlength="50" required>\n  </div>\n  <div class="form-group">\n    <textarea class="form-control" ng-model="scenario.newDescription" placeholder="New Scenario Description"></textarea>\n  </div>\n  <div class="form-group">\n    <input type="submit" class="btn btn-warning" ng-click="createScenarioCopy(scenario)" ng-disabled="!forms.copyScenarioForm.$valid" value="Create">\n  </div>\n</form>\n</accordion-group>\n</accordion>')}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("scenarios/_scenario-list.html",'<ul class="scenario-list-group list-group">\n  <li ng-repeat="scenario in scenarios" class="list-group-item">\n    <form name="editForm">\n\n      <div class="pull-left">\n        <h4><a href="#/builder/scenarios/{{scenario.id}}/nodes/{{scenario.root_node_id}}" ng-show="!editMode">{{scenario.name}}</a></h4>\n        <input type="text" name="text" class="form-control" ng-model="scenario.newName" ng-required="true" ng-minlength="4" ng-maxlength="50" placeholder="{{scenario.name}}" ng-show="editMode">\n      </div>\n\n      <div class="pull-right">\n        <span style="color:red" ng-show="editForm.text.$error.required && editForm.text.$dirty">Please enter a scenario name</span>\n        <span style="color:red" ng-show="editForm.text.$error.minlength">Name is too short (minimum is 4 characters)</span>\n        <span style="color:red" ng-show="editForm.text.$error.maxlength">Name is too long (maximum is 50 characters)</span>\n        <a href="" class="scenario-edit-btn" type="button" ng-show="!editMode" ng-click="editMode = ! editMode; scenario.newName = scenario.name"><small><span class="glyphicon glyphicon-pencil"></span></small> Edit Name</a>\n        <button class="btn btn-warning" type="button" ng-show="editMode" ng-disabled="!editForm.text.$valid" ng-click="editScenarioName(scenario); editMode = ! editMode">Save</button>\n      </form>\n    </div>\n    <div style="clear: both"></div>\n  </li>\n</ul>')}]),alchemy.directive("createScenario",["$state","ScenarioApiClient","Util",function($state,ScenarioApiClient,Util){return{restrict:"E",templateUrl:"scenarios/_create-scenario-form.html",controller:["$scope","$element",function($scope){$scope.scenario={},$scope.forms={},$scope.createScenario=function(scenario){return ScenarioApiClient.createScenario(scenario).then(function(res){$scope.scenarios.push(res),clearFields(),$scope.forms.newScenarioForm.$setPristine(),goToScenario(res)},function(error){Util.showRailsError(error)})},$scope.createScenarioCopy=function(scenario){return ScenarioApiClient.copyScenario(scenario.toCopy.id,scenario.newName,scenario.newDescription).then(function(res){$scope.scenarios.push(res),clearFields(),$scope.forms.copyScenarioForm.$setPristine(),goToScenario(res)},function(error){Util.showRailsError(error)})};var clearFields=function(){$scope.scenario.newName="",$scope.scenario.newDescription="",$scope.scenario.toCopy="",$scope.scenario.name="",$scope.scenario.description=""},goToScenario=function(scenario){$state.go("nodeBuilder",{scenarioId:scenario.id,nodeId:scenario.root_node_id})}}]}}]),alchemy.directive("scenarioList",["ScenarioApiClient","Util",function(ScenarioApiClient,Util){return{restrict:"E",replace:!0,templateUrl:"scenarios/_scenario-list.html",controller:["$scope","$element",function($scope){$scope.editScenarioName=function(scenario){return ScenarioApiClient.updateScenario(scenario,scenario.newName).then(function(){scenario.name=scenario.newName},function(error){Util.showRailsError(error)})}}]}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("scenarios/tree/_tree.html",'<div class="scenario-tree"></div>')}]),alchemy.directive("scenarioTree",["ScenarioApiClient","Util",function(ScenarioApiClient){var CURRENT_NODE_COLOR="#fac32e",defaultFor=function(arg,val){return"undefined"!=typeof arg?arg:val},nodeIsSelected=function(selectEvent){return selectEvent.nodes.length>0},setCurrentNode=function(currentNodeId,nodes){_.each(nodes,function(n){n.id===currentNodeId&&(n.color.border=CURRENT_NODE_COLOR)})};return{restrict:"E",scope:{},templateUrl:"scenarios/tree/_tree.html",replace:!0,link:function($scope,element,attrs){var display=element[0],scenarioId=attrs.scenarioId,currentNodeId=parseInt(defaultFor(attrs.currentNodeId,0)),options={width:defaultFor(attrs.treeWidth,"100%"),height:defaultFor(attrs.treeHeight,"100%"),stabilize:!0,smoothCurves:!1,clustering:!0,nodes:{fontFace:"Alchemy",radius:30,fontColor:"white",fontSize:16,borderWidth:7,borderWidthSelected:7},edges:{color:"black",style:"arrow"},hierarchicalLayout:{layout:"hubsize"}};display.style.width=options.width,display.style.height=options.height;var draw=function(){ScenarioApiClient.getTree(scenarioId).then(function(res){setCurrentNode(currentNodeId,res.data.nodes);var data={nodes:res.data.nodes,edges:res.data.choices,options:options},network=new vis.Network(display,data,options);network.on("select",function(params){nodeIsSelected(params)&&$scope.$emit("scenario-tree:node-selected",params)})})};$scope.$on("node:update",draw),draw()}}}]),alchemy.constant("Messages",{Modals:{REMOVE_CHOICES_TITLE:"Choices will be removed",REMOVE_CHOICES_BODY:"Updating a node as a goal or failure will remove all its choices. Continue?",DELETE_NODE_TITLE:"Delete Node",DELETE_NODE_BODY:"Are you sure you want to delete the node? This cannot be undone. You will be taken back to the start node.",CREATE_SHOWING_TITLE:"Assign Scenario",CREATE_SHOWING_BODY:"Are you satisfied with your scenario options? You will not be able to change any of these once a scenario is assigned."},Warnings:{MAX_IMAGE_SIZE:"Image file size must be less than 3MB."}});